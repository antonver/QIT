import{p as ve,o as xe,r as u,q as be,aj as Mr,a as Pt,ag as rt,G as jt,j as r,t as ee,v as pe,x as ye,z as ue,H as re,K as Gt,y as Pr,a8 as so,ah as Oo,w as oe,C as Dr,T as B,U as Rr,a9 as no,ak as Er,A as ko,al as ao,am as Or,an as kr,ao as Io,ap as Ir,aq as $r,ar as _r,as as Wr,n as we,at as Wt,k as zr,c as Br,d as Lr,au as Nr,av as io,aw as lo,ax as Ur,ay as Fr,az as Hr,aA as co,aB as Vr,aC as qr,aD as Gr,aE as Xr,aF as Yr,aG as Kr,B as L,M as lt,N as $o,O as _o,b as Jr,m as po,aH as Zr,e as uo}from"./index-AlxbD9NP.js";import{a as Qr,g as fo,u as Wo,o as go,P as es,b as ts,F as mo,M as os,B as rs,c as ss,G as ns,T as nt}from"./TextField-Codsoyx0.js";import{u as zo,C as Ae}from"./CircularProgress-CnhVgBA-.js";import{C as st}from"./Chip-CAW1QKCQ.js";import{D as ho,P as vo,L as Bo,A as as}from"./Person-DAjYn5Xg.js";import{A as ke}from"./Alert-CzprwIg3.js";import{B as de}from"./Button-B-Xiatx_.js";import{C as is}from"./CheckCircle-Bk5l2tlf.js";import{I as We}from"./IconButton-CHsA98i-.js";import{S as ls}from"./Send-TTC3OqE5.js";function cs(t){return ve("MuiCollapse",t)}xe("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const ps=t=>{const{orientation:e,classes:o}=t,s={root:["root",`${e}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${e}`],wrapperInner:["wrapperInner",`${e}`]};return ye(s,cs,o)},ds=ee("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[e.root,e[o.orientation],o.state==="entered"&&e.entered,o.state==="exited"&&!o.in&&o.collapsedSize==="0px"&&e.hidden]}})(ue(({theme:t})=>({height:0,overflow:"hidden",transition:t.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:t.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:({ownerState:e})=>e.state==="exited"&&!e.in&&e.collapsedSize==="0px",style:{visibility:"hidden"}}]}))),us=ee("div",{name:"MuiCollapse",slot:"Wrapper"})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),fs=ee("div",{name:"MuiCollapse",slot:"WrapperInner"})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),zt=u.forwardRef(function(e,o){const s=be({props:e,name:"MuiCollapse"}),{addEndListener:n,children:a,className:c,collapsedSize:l="0px",component:i,easing:g,in:p,onEnter:y,onEntered:f,onEntering:v,onExit:C,onExited:x,onExiting:j,orientation:m="vertical",style:b,timeout:S=Mr.standard,TransitionComponent:T=Qr,...A}=s,h={...s,orientation:m,collapsedSize:l},w=ps(h),E=Pt(),I=rt(),P=u.useRef(null),$=u.useRef(),V=typeof l=="number"?`${l}px`:l,_=m==="horizontal",q=_?"width":"height",Y=u.useRef(null),H=jt(o,Y),z=k=>X=>{if(k){const J=Y.current;X===void 0?k(J):k(J,X)}},d=()=>P.current?P.current[_?"clientWidth":"clientHeight"]:0,D=z((k,X)=>{P.current&&_&&(P.current.style.position="absolute"),k.style[q]=V,y&&y(k,X)}),R=z((k,X)=>{const J=d();P.current&&_&&(P.current.style.position="");const{duration:ne,easing:ae}=fo({style:b,timeout:S,easing:g},{mode:"enter"});if(S==="auto"){const M=E.transitions.getAutoHeightDuration(J);k.style.transitionDuration=`${M}ms`,$.current=M}else k.style.transitionDuration=typeof ne=="string"?ne:`${ne}ms`;k.style[q]=`${J}px`,k.style.transitionTimingFunction=ae,v&&v(k,X)}),O=z((k,X)=>{k.style[q]="auto",f&&f(k,X)}),W=z(k=>{k.style[q]=`${d()}px`,C&&C(k)}),G=z(x),F=z(k=>{const X=d(),{duration:J,easing:ne}=fo({style:b,timeout:S,easing:g},{mode:"exit"});if(S==="auto"){const ae=E.transitions.getAutoHeightDuration(X);k.style.transitionDuration=`${ae}ms`,$.current=ae}else k.style.transitionDuration=typeof J=="string"?J:`${J}ms`;k.style[q]=V,k.style.transitionTimingFunction=ne,j&&j(k)}),K=k=>{S==="auto"&&I.start($.current||0,k),n&&n(Y.current,k)};return r.jsx(T,{in:p,onEnter:D,onEntered:O,onEntering:R,onExit:W,onExited:G,onExiting:F,addEndListener:K,nodeRef:Y,timeout:S==="auto"?null:S,...A,children:(k,{ownerState:X,...J})=>r.jsx(ds,{as:i,className:pe(w.root,c,{entered:w.entered,exited:!p&&V==="0px"&&w.hidden}[k]),style:{[_?"minWidth":"minHeight"]:V,...b},ref:H,ownerState:{...h,state:k},...J,children:r.jsx(us,{ownerState:{...h,state:k},className:w.wrapper,ref:P,children:r.jsx(fs,{ownerState:{...h,state:k},className:w.wrapperInner,children:a})})})})});zt&&(zt.muiSupportAuto=!0);const Lo=u.createContext({});function gs(t){return ve("MuiAccordion",t)}const vt=xe("MuiAccordion",["root","heading","rounded","expanded","disabled","gutters","region"]),ms=t=>{const{classes:e,square:o,expanded:s,disabled:n,disableGutters:a}=t;return ye({root:["root",!o&&"rounded",s&&"expanded",n&&"disabled",!a&&"gutters"],heading:["heading"],region:["region"]},gs,e)},hs=ee(Gt,{name:"MuiAccordion",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[{[`& .${vt.region}`]:e.region},e.root,!o.square&&e.rounded,!o.disableGutters&&e.gutters]}})(ue(({theme:t})=>{const e={duration:t.transitions.duration.shortest};return{position:"relative",transition:t.transitions.create(["margin"],e),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(t.vars||t).palette.divider,transition:t.transitions.create(["opacity","background-color"],e)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${vt.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${vt.disabled}`]:{backgroundColor:(t.vars||t).palette.action.disabledBackground}}}),ue(({theme:t})=>({variants:[{props:e=>!e.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(t.vars||t).shape.borderRadius,borderBottomRightRadius:(t.vars||t).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:e=>!e.disableGutters,style:{[`&.${vt.expanded}`]:{margin:"16px 0"}}}]}))),vs=ee("h3",{name:"MuiAccordion",slot:"Heading"})({all:"unset"}),xs=u.forwardRef(function(e,o){const s=be({props:e,name:"MuiAccordion"}),{children:n,className:a,defaultExpanded:c=!1,disabled:l=!1,disableGutters:i=!1,expanded:g,onChange:p,square:y=!1,slots:f={},slotProps:v={},TransitionComponent:C,TransitionProps:x,...j}=s,[m,b]=Wo({controlled:g,default:c,name:"Accordion",state:"expanded"}),S=u.useCallback(d=>{b(!m),p&&p(d,!m)},[m,p,b]),[T,...A]=u.Children.toArray(n),h=u.useMemo(()=>({expanded:m,disabled:l,disableGutters:i,toggle:S}),[m,l,i,S]),w={...s,square:y,disabled:l,disableGutters:i,expanded:m},E=ms(w),I={transition:C,...f},P={transition:x,...v},$={slots:I,slotProps:P},[V,_]=re("root",{elementType:hs,externalForwardedProps:{...$,...j},className:pe(E.root,a),shouldForwardComponentProp:!0,ownerState:w,ref:o,additionalProps:{square:y}}),[q,Y]=re("heading",{elementType:vs,externalForwardedProps:$,className:E.heading,ownerState:w}),[H,z]=re("transition",{elementType:zt,externalForwardedProps:$,ownerState:w});return r.jsxs(V,{..._,children:[r.jsx(q,{...Y,children:r.jsx(Lo.Provider,{value:h,children:T})}),r.jsx(H,{in:m,timeout:"auto",...z,children:r.jsx("div",{"aria-labelledby":T.props.id,id:T.props["aria-controls"],role:"region",className:E.region,children:A})})]})});function bs(t){return ve("MuiAccordionDetails",t)}xe("MuiAccordionDetails",["root"]);const ys=t=>{const{classes:e}=t;return ye({root:["root"]},bs,e)},ws=ee("div",{name:"MuiAccordionDetails",slot:"Root"})(ue(({theme:t})=>({padding:t.spacing(1,2,2)}))),Cs=u.forwardRef(function(e,o){const s=be({props:e,name:"MuiAccordionDetails"}),{className:n,...a}=s,c=s,l=ys(c);return r.jsx(ws,{className:pe(l.root,n),ref:o,ownerState:c,...a})});function js(t){return ve("MuiAccordionSummary",t)}const Fe=xe("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),Ts=t=>{const{classes:e,expanded:o,disabled:s,disableGutters:n}=t;return ye({root:["root",o&&"expanded",s&&"disabled",!n&&"gutters"],focusVisible:["focusVisible"],content:["content",o&&"expanded",!n&&"contentGutters"],expandIconWrapper:["expandIconWrapper",o&&"expanded"]},js,e)},As=ee(Pr,{name:"MuiAccordionSummary",slot:"Root"})(ue(({theme:t})=>{const e={duration:t.transitions.duration.shortest};return{display:"flex",width:"100%",minHeight:48,padding:t.spacing(0,2),transition:t.transitions.create(["min-height","background-color"],e),[`&.${Fe.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${Fe.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`&:hover:not(.${Fe.disabled})`]:{cursor:"pointer"},variants:[{props:o=>!o.disableGutters,style:{[`&.${Fe.expanded}`]:{minHeight:64}}}]}})),Ss=ee("span",{name:"MuiAccordionSummary",slot:"Content"})(ue(({theme:t})=>({display:"flex",textAlign:"start",flexGrow:1,margin:"12px 0",variants:[{props:e=>!e.disableGutters,style:{transition:t.transitions.create(["margin"],{duration:t.transitions.duration.shortest}),[`&.${Fe.expanded}`]:{margin:"20px 0"}}}]}))),Ms=ee("span",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper"})(ue(({theme:t})=>({display:"flex",color:(t.vars||t).palette.action.active,transform:"rotate(0deg)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest}),[`&.${Fe.expanded}`]:{transform:"rotate(180deg)"}}))),Ps=u.forwardRef(function(e,o){const s=be({props:e,name:"MuiAccordionSummary"}),{children:n,className:a,expandIcon:c,focusVisibleClassName:l,onClick:i,slots:g,slotProps:p,...y}=s,{disabled:f=!1,disableGutters:v,expanded:C,toggle:x}=u.useContext(Lo),j=P=>{x&&x(P),i&&i(P)},m={...s,expanded:C,disabled:f,disableGutters:v},b=Ts(m),S={slots:g,slotProps:p},[T,A]=re("root",{ref:o,shouldForwardComponentProp:!0,className:pe(b.root,a),elementType:As,externalForwardedProps:{...S,...y},ownerState:m,additionalProps:{focusRipple:!1,disableRipple:!0,disabled:f,"aria-expanded":C,focusVisibleClassName:pe(b.focusVisible,l)},getSlotProps:P=>({...P,onClick:$=>{var V;(V=P.onClick)==null||V.call(P,$),j($)}})}),[h,w]=re("content",{className:b.content,elementType:Ss,externalForwardedProps:S,ownerState:m}),[E,I]=re("expandIconWrapper",{className:b.expandIconWrapper,elementType:Ms,externalForwardedProps:S,ownerState:m});return r.jsxs(T,{...A,children:[r.jsx(h,{...w,children:n}),c&&r.jsx(E,{...I,children:c})]})}),No=t=>{const e=u.useRef({});return u.useEffect(()=>{e.current=t}),e.current};var le="top",me="bottom",he="right",ce="left",Xt="auto",dt=[le,me,he,ce],He="start",ct="end",Ds="clippingParents",Uo="viewport",et="popper",Rs="reference",xo=dt.reduce(function(t,e){return t.concat([e+"-"+He,e+"-"+ct])},[]),Fo=[].concat(dt,[Xt]).reduce(function(t,e){return t.concat([e,e+"-"+He,e+"-"+ct])},[]),Es="beforeRead",Os="read",ks="afterRead",Is="beforeMain",$s="main",_s="afterMain",Ws="beforeWrite",zs="write",Bs="afterWrite",Ls=[Es,Os,ks,Is,$s,_s,Ws,zs,Bs];function Re(t){return t?(t.nodeName||"").toLowerCase():null}function fe(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Be(t){var e=fe(t).Element;return t instanceof e||t instanceof Element}function ge(t){var e=fe(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Yt(t){if(typeof ShadowRoot>"u")return!1;var e=fe(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function Ns(t){var e=t.state;Object.keys(e.elements).forEach(function(o){var s=e.styles[o]||{},n=e.attributes[o]||{},a=e.elements[o];!ge(a)||!Re(a)||(Object.assign(a.style,s),Object.keys(n).forEach(function(c){var l=n[c];l===!1?a.removeAttribute(c):a.setAttribute(c,l===!0?"":l)}))})}function Us(t){var e=t.state,o={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,o.popper),e.styles=o,e.elements.arrow&&Object.assign(e.elements.arrow.style,o.arrow),function(){Object.keys(e.elements).forEach(function(s){var n=e.elements[s],a=e.attributes[s]||{},c=Object.keys(e.styles.hasOwnProperty(s)?e.styles[s]:o[s]),l=c.reduce(function(i,g){return i[g]="",i},{});!ge(n)||!Re(n)||(Object.assign(n.style,l),Object.keys(a).forEach(function(i){n.removeAttribute(i)}))})}}const Fs={name:"applyStyles",enabled:!0,phase:"write",fn:Ns,effect:Us,requires:["computeStyles"]};function De(t){return t.split("-")[0]}var ze=Math.max,Tt=Math.min,Ve=Math.round;function Bt(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Ho(){return!/^((?!chrome|android).)*safari/i.test(Bt())}function qe(t,e,o){e===void 0&&(e=!1),o===void 0&&(o=!1);var s=t.getBoundingClientRect(),n=1,a=1;e&&ge(t)&&(n=t.offsetWidth>0&&Ve(s.width)/t.offsetWidth||1,a=t.offsetHeight>0&&Ve(s.height)/t.offsetHeight||1);var c=Be(t)?fe(t):window,l=c.visualViewport,i=!Ho()&&o,g=(s.left+(i&&l?l.offsetLeft:0))/n,p=(s.top+(i&&l?l.offsetTop:0))/a,y=s.width/n,f=s.height/a;return{width:y,height:f,top:p,right:g+y,bottom:p+f,left:g,x:g,y:p}}function Kt(t){var e=qe(t),o=t.offsetWidth,s=t.offsetHeight;return Math.abs(e.width-o)<=1&&(o=e.width),Math.abs(e.height-s)<=1&&(s=e.height),{x:t.offsetLeft,y:t.offsetTop,width:o,height:s}}function Vo(t,e){var o=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(o&&Yt(o)){var s=e;do{if(s&&t.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function Ee(t){return fe(t).getComputedStyle(t)}function Hs(t){return["table","td","th"].indexOf(Re(t))>=0}function Ie(t){return((Be(t)?t.ownerDocument:t.document)||window.document).documentElement}function Dt(t){return Re(t)==="html"?t:t.assignedSlot||t.parentNode||(Yt(t)?t.host:null)||Ie(t)}function bo(t){return!ge(t)||Ee(t).position==="fixed"?null:t.offsetParent}function Vs(t){var e=/firefox/i.test(Bt()),o=/Trident/i.test(Bt());if(o&&ge(t)){var s=Ee(t);if(s.position==="fixed")return null}var n=Dt(t);for(Yt(n)&&(n=n.host);ge(n)&&["html","body"].indexOf(Re(n))<0;){var a=Ee(n);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||e&&a.willChange==="filter"||e&&a.filter&&a.filter!=="none")return n;n=n.parentNode}return null}function ut(t){for(var e=fe(t),o=bo(t);o&&Hs(o)&&Ee(o).position==="static";)o=bo(o);return o&&(Re(o)==="html"||Re(o)==="body"&&Ee(o).position==="static")?e:o||Vs(t)||e}function Jt(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function at(t,e,o){return ze(t,Tt(e,o))}function qs(t,e,o){var s=at(t,e,o);return s>o?o:s}function qo(){return{top:0,right:0,bottom:0,left:0}}function Go(t){return Object.assign({},qo(),t)}function Xo(t,e){return e.reduce(function(o,s){return o[s]=t,o},{})}var Gs=function(e,o){return e=typeof e=="function"?e(Object.assign({},o.rects,{placement:o.placement})):e,Go(typeof e!="number"?e:Xo(e,dt))};function Xs(t){var e,o=t.state,s=t.name,n=t.options,a=o.elements.arrow,c=o.modifiersData.popperOffsets,l=De(o.placement),i=Jt(l),g=[ce,he].indexOf(l)>=0,p=g?"height":"width";if(!(!a||!c)){var y=Gs(n.padding,o),f=Kt(a),v=i==="y"?le:ce,C=i==="y"?me:he,x=o.rects.reference[p]+o.rects.reference[i]-c[i]-o.rects.popper[p],j=c[i]-o.rects.reference[i],m=ut(a),b=m?i==="y"?m.clientHeight||0:m.clientWidth||0:0,S=x/2-j/2,T=y[v],A=b-f[p]-y[C],h=b/2-f[p]/2+S,w=at(T,h,A),E=i;o.modifiersData[s]=(e={},e[E]=w,e.centerOffset=w-h,e)}}function Ys(t){var e=t.state,o=t.options,s=o.element,n=s===void 0?"[data-popper-arrow]":s;n!=null&&(typeof n=="string"&&(n=e.elements.popper.querySelector(n),!n)||Vo(e.elements.popper,n)&&(e.elements.arrow=n))}const Ks={name:"arrow",enabled:!0,phase:"main",fn:Xs,effect:Ys,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ge(t){return t.split("-")[1]}var Js={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Zs(t,e){var o=t.x,s=t.y,n=e.devicePixelRatio||1;return{x:Ve(o*n)/n||0,y:Ve(s*n)/n||0}}function yo(t){var e,o=t.popper,s=t.popperRect,n=t.placement,a=t.variation,c=t.offsets,l=t.position,i=t.gpuAcceleration,g=t.adaptive,p=t.roundOffsets,y=t.isFixed,f=c.x,v=f===void 0?0:f,C=c.y,x=C===void 0?0:C,j=typeof p=="function"?p({x:v,y:x}):{x:v,y:x};v=j.x,x=j.y;var m=c.hasOwnProperty("x"),b=c.hasOwnProperty("y"),S=ce,T=le,A=window;if(g){var h=ut(o),w="clientHeight",E="clientWidth";if(h===fe(o)&&(h=Ie(o),Ee(h).position!=="static"&&l==="absolute"&&(w="scrollHeight",E="scrollWidth")),h=h,n===le||(n===ce||n===he)&&a===ct){T=me;var I=y&&h===A&&A.visualViewport?A.visualViewport.height:h[w];x-=I-s.height,x*=i?1:-1}if(n===ce||(n===le||n===me)&&a===ct){S=he;var P=y&&h===A&&A.visualViewport?A.visualViewport.width:h[E];v-=P-s.width,v*=i?1:-1}}var $=Object.assign({position:l},g&&Js),V=p===!0?Zs({x:v,y:x},fe(o)):{x:v,y:x};if(v=V.x,x=V.y,i){var _;return Object.assign({},$,(_={},_[T]=b?"0":"",_[S]=m?"0":"",_.transform=(A.devicePixelRatio||1)<=1?"translate("+v+"px, "+x+"px)":"translate3d("+v+"px, "+x+"px, 0)",_))}return Object.assign({},$,(e={},e[T]=b?x+"px":"",e[S]=m?v+"px":"",e.transform="",e))}function Qs(t){var e=t.state,o=t.options,s=o.gpuAcceleration,n=s===void 0?!0:s,a=o.adaptive,c=a===void 0?!0:a,l=o.roundOffsets,i=l===void 0?!0:l,g={placement:De(e.placement),variation:Ge(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:n,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,yo(Object.assign({},g,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:c,roundOffsets:i})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,yo(Object.assign({},g,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:i})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const en={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Qs,data:{}};var xt={passive:!0};function tn(t){var e=t.state,o=t.instance,s=t.options,n=s.scroll,a=n===void 0?!0:n,c=s.resize,l=c===void 0?!0:c,i=fe(e.elements.popper),g=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&g.forEach(function(p){p.addEventListener("scroll",o.update,xt)}),l&&i.addEventListener("resize",o.update,xt),function(){a&&g.forEach(function(p){p.removeEventListener("scroll",o.update,xt)}),l&&i.removeEventListener("resize",o.update,xt)}}const on={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:tn,data:{}};var rn={left:"right",right:"left",bottom:"top",top:"bottom"};function Ct(t){return t.replace(/left|right|bottom|top/g,function(e){return rn[e]})}var sn={start:"end",end:"start"};function wo(t){return t.replace(/start|end/g,function(e){return sn[e]})}function Zt(t){var e=fe(t),o=e.pageXOffset,s=e.pageYOffset;return{scrollLeft:o,scrollTop:s}}function Qt(t){return qe(Ie(t)).left+Zt(t).scrollLeft}function nn(t,e){var o=fe(t),s=Ie(t),n=o.visualViewport,a=s.clientWidth,c=s.clientHeight,l=0,i=0;if(n){a=n.width,c=n.height;var g=Ho();(g||!g&&e==="fixed")&&(l=n.offsetLeft,i=n.offsetTop)}return{width:a,height:c,x:l+Qt(t),y:i}}function an(t){var e,o=Ie(t),s=Zt(t),n=(e=t.ownerDocument)==null?void 0:e.body,a=ze(o.scrollWidth,o.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),c=ze(o.scrollHeight,o.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),l=-s.scrollLeft+Qt(t),i=-s.scrollTop;return Ee(n||o).direction==="rtl"&&(l+=ze(o.clientWidth,n?n.clientWidth:0)-a),{width:a,height:c,x:l,y:i}}function eo(t){var e=Ee(t),o=e.overflow,s=e.overflowX,n=e.overflowY;return/auto|scroll|overlay|hidden/.test(o+n+s)}function Yo(t){return["html","body","#document"].indexOf(Re(t))>=0?t.ownerDocument.body:ge(t)&&eo(t)?t:Yo(Dt(t))}function it(t,e){var o;e===void 0&&(e=[]);var s=Yo(t),n=s===((o=t.ownerDocument)==null?void 0:o.body),a=fe(s),c=n?[a].concat(a.visualViewport||[],eo(s)?s:[]):s,l=e.concat(c);return n?l:l.concat(it(Dt(c)))}function Lt(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function ln(t,e){var o=qe(t,!1,e==="fixed");return o.top=o.top+t.clientTop,o.left=o.left+t.clientLeft,o.bottom=o.top+t.clientHeight,o.right=o.left+t.clientWidth,o.width=t.clientWidth,o.height=t.clientHeight,o.x=o.left,o.y=o.top,o}function Co(t,e,o){return e===Uo?Lt(nn(t,o)):Be(e)?ln(e,o):Lt(an(Ie(t)))}function cn(t){var e=it(Dt(t)),o=["absolute","fixed"].indexOf(Ee(t).position)>=0,s=o&&ge(t)?ut(t):t;return Be(s)?e.filter(function(n){return Be(n)&&Vo(n,s)&&Re(n)!=="body"}):[]}function pn(t,e,o,s){var n=e==="clippingParents"?cn(t):[].concat(e),a=[].concat(n,[o]),c=a[0],l=a.reduce(function(i,g){var p=Co(t,g,s);return i.top=ze(p.top,i.top),i.right=Tt(p.right,i.right),i.bottom=Tt(p.bottom,i.bottom),i.left=ze(p.left,i.left),i},Co(t,c,s));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function Ko(t){var e=t.reference,o=t.element,s=t.placement,n=s?De(s):null,a=s?Ge(s):null,c=e.x+e.width/2-o.width/2,l=e.y+e.height/2-o.height/2,i;switch(n){case le:i={x:c,y:e.y-o.height};break;case me:i={x:c,y:e.y+e.height};break;case he:i={x:e.x+e.width,y:l};break;case ce:i={x:e.x-o.width,y:l};break;default:i={x:e.x,y:e.y}}var g=n?Jt(n):null;if(g!=null){var p=g==="y"?"height":"width";switch(a){case He:i[g]=i[g]-(e[p]/2-o[p]/2);break;case ct:i[g]=i[g]+(e[p]/2-o[p]/2);break}}return i}function pt(t,e){e===void 0&&(e={});var o=e,s=o.placement,n=s===void 0?t.placement:s,a=o.strategy,c=a===void 0?t.strategy:a,l=o.boundary,i=l===void 0?Ds:l,g=o.rootBoundary,p=g===void 0?Uo:g,y=o.elementContext,f=y===void 0?et:y,v=o.altBoundary,C=v===void 0?!1:v,x=o.padding,j=x===void 0?0:x,m=Go(typeof j!="number"?j:Xo(j,dt)),b=f===et?Rs:et,S=t.rects.popper,T=t.elements[C?b:f],A=pn(Be(T)?T:T.contextElement||Ie(t.elements.popper),i,p,c),h=qe(t.elements.reference),w=Ko({reference:h,element:S,placement:n}),E=Lt(Object.assign({},S,w)),I=f===et?E:h,P={top:A.top-I.top+m.top,bottom:I.bottom-A.bottom+m.bottom,left:A.left-I.left+m.left,right:I.right-A.right+m.right},$=t.modifiersData.offset;if(f===et&&$){var V=$[n];Object.keys(P).forEach(function(_){var q=[he,me].indexOf(_)>=0?1:-1,Y=[le,me].indexOf(_)>=0?"y":"x";P[_]+=V[Y]*q})}return P}function dn(t,e){e===void 0&&(e={});var o=e,s=o.placement,n=o.boundary,a=o.rootBoundary,c=o.padding,l=o.flipVariations,i=o.allowedAutoPlacements,g=i===void 0?Fo:i,p=Ge(s),y=p?l?xo:xo.filter(function(C){return Ge(C)===p}):dt,f=y.filter(function(C){return g.indexOf(C)>=0});f.length===0&&(f=y);var v=f.reduce(function(C,x){return C[x]=pt(t,{placement:x,boundary:n,rootBoundary:a,padding:c})[De(x)],C},{});return Object.keys(v).sort(function(C,x){return v[C]-v[x]})}function un(t){if(De(t)===Xt)return[];var e=Ct(t);return[wo(t),e,wo(e)]}function fn(t){var e=t.state,o=t.options,s=t.name;if(!e.modifiersData[s]._skip){for(var n=o.mainAxis,a=n===void 0?!0:n,c=o.altAxis,l=c===void 0?!0:c,i=o.fallbackPlacements,g=o.padding,p=o.boundary,y=o.rootBoundary,f=o.altBoundary,v=o.flipVariations,C=v===void 0?!0:v,x=o.allowedAutoPlacements,j=e.options.placement,m=De(j),b=m===j,S=i||(b||!C?[Ct(j)]:un(j)),T=[j].concat(S).reduce(function(F,K){return F.concat(De(K)===Xt?dn(e,{placement:K,boundary:p,rootBoundary:y,padding:g,flipVariations:C,allowedAutoPlacements:x}):K)},[]),A=e.rects.reference,h=e.rects.popper,w=new Map,E=!0,I=T[0],P=0;P<T.length;P++){var $=T[P],V=De($),_=Ge($)===He,q=[le,me].indexOf(V)>=0,Y=q?"width":"height",H=pt(e,{placement:$,boundary:p,rootBoundary:y,altBoundary:f,padding:g}),z=q?_?he:ce:_?me:le;A[Y]>h[Y]&&(z=Ct(z));var d=Ct(z),D=[];if(a&&D.push(H[V]<=0),l&&D.push(H[z]<=0,H[d]<=0),D.every(function(F){return F})){I=$,E=!1;break}w.set($,D)}if(E)for(var R=C?3:1,O=function(K){var k=T.find(function(X){var J=w.get(X);if(J)return J.slice(0,K).every(function(ne){return ne})});if(k)return I=k,"break"},W=R;W>0;W--){var G=O(W);if(G==="break")break}e.placement!==I&&(e.modifiersData[s]._skip=!0,e.placement=I,e.reset=!0)}}const gn={name:"flip",enabled:!0,phase:"main",fn,requiresIfExists:["offset"],data:{_skip:!1}};function jo(t,e,o){return o===void 0&&(o={x:0,y:0}),{top:t.top-e.height-o.y,right:t.right-e.width+o.x,bottom:t.bottom-e.height+o.y,left:t.left-e.width-o.x}}function To(t){return[le,he,me,ce].some(function(e){return t[e]>=0})}function mn(t){var e=t.state,o=t.name,s=e.rects.reference,n=e.rects.popper,a=e.modifiersData.preventOverflow,c=pt(e,{elementContext:"reference"}),l=pt(e,{altBoundary:!0}),i=jo(c,s),g=jo(l,n,a),p=To(i),y=To(g);e.modifiersData[o]={referenceClippingOffsets:i,popperEscapeOffsets:g,isReferenceHidden:p,hasPopperEscaped:y},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":p,"data-popper-escaped":y})}const hn={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:mn};function vn(t,e,o){var s=De(t),n=[ce,le].indexOf(s)>=0?-1:1,a=typeof o=="function"?o(Object.assign({},e,{placement:t})):o,c=a[0],l=a[1];return c=c||0,l=(l||0)*n,[ce,he].indexOf(s)>=0?{x:l,y:c}:{x:c,y:l}}function xn(t){var e=t.state,o=t.options,s=t.name,n=o.offset,a=n===void 0?[0,0]:n,c=Fo.reduce(function(p,y){return p[y]=vn(y,e.rects,a),p},{}),l=c[e.placement],i=l.x,g=l.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=i,e.modifiersData.popperOffsets.y+=g),e.modifiersData[s]=c}const bn={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:xn};function yn(t){var e=t.state,o=t.name;e.modifiersData[o]=Ko({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const wn={name:"popperOffsets",enabled:!0,phase:"read",fn:yn,data:{}};function Cn(t){return t==="x"?"y":"x"}function jn(t){var e=t.state,o=t.options,s=t.name,n=o.mainAxis,a=n===void 0?!0:n,c=o.altAxis,l=c===void 0?!1:c,i=o.boundary,g=o.rootBoundary,p=o.altBoundary,y=o.padding,f=o.tether,v=f===void 0?!0:f,C=o.tetherOffset,x=C===void 0?0:C,j=pt(e,{boundary:i,rootBoundary:g,padding:y,altBoundary:p}),m=De(e.placement),b=Ge(e.placement),S=!b,T=Jt(m),A=Cn(T),h=e.modifiersData.popperOffsets,w=e.rects.reference,E=e.rects.popper,I=typeof x=="function"?x(Object.assign({},e.rects,{placement:e.placement})):x,P=typeof I=="number"?{mainAxis:I,altAxis:I}:Object.assign({mainAxis:0,altAxis:0},I),$=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,V={x:0,y:0};if(h){if(a){var _,q=T==="y"?le:ce,Y=T==="y"?me:he,H=T==="y"?"height":"width",z=h[T],d=z+j[q],D=z-j[Y],R=v?-E[H]/2:0,O=b===He?w[H]:E[H],W=b===He?-E[H]:-w[H],G=e.elements.arrow,F=v&&G?Kt(G):{width:0,height:0},K=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:qo(),k=K[q],X=K[Y],J=at(0,w[H],F[H]),ne=S?w[H]/2-R-J-k-P.mainAxis:O-J-k-P.mainAxis,ae=S?-w[H]/2+R+J+X+P.mainAxis:W+J+X+P.mainAxis,M=e.elements.arrow&&ut(e.elements.arrow),Z=M?T==="y"?M.clientTop||0:M.clientLeft||0:0,N=(_=$==null?void 0:$[T])!=null?_:0,Q=z+ne-N-Z,Se=z+ae-N,Ne=at(v?Tt(d,Q):d,z,v?ze(D,Se):D);h[T]=Ne,V[T]=Ne-z}if(l){var ie,Me=T==="x"?le:ce,Xe=T==="x"?me:he,Pe=h[A],$e=A==="y"?"height":"width",Ye=Pe+j[Me],Ke=Pe-j[Xe],Je=[le,ce].indexOf(m)!==-1,ft=(ie=$==null?void 0:$[A])!=null?ie:0,gt=Je?Ye:Pe-w[$e]-E[$e]-ft+P.altAxis,Ue=Je?Pe+w[$e]+E[$e]-ft-P.altAxis:Ke,mt=v&&Je?qs(gt,Pe,Ue):at(v?gt:Ye,Pe,v?Ue:Ke);h[A]=mt,V[A]=mt-Pe}e.modifiersData[s]=V}}const Tn={name:"preventOverflow",enabled:!0,phase:"main",fn:jn,requiresIfExists:["offset"]};function An(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function Sn(t){return t===fe(t)||!ge(t)?Zt(t):An(t)}function Mn(t){var e=t.getBoundingClientRect(),o=Ve(e.width)/t.offsetWidth||1,s=Ve(e.height)/t.offsetHeight||1;return o!==1||s!==1}function Pn(t,e,o){o===void 0&&(o=!1);var s=ge(e),n=ge(e)&&Mn(e),a=Ie(e),c=qe(t,n,o),l={scrollLeft:0,scrollTop:0},i={x:0,y:0};return(s||!s&&!o)&&((Re(e)!=="body"||eo(a))&&(l=Sn(e)),ge(e)?(i=qe(e,!0),i.x+=e.clientLeft,i.y+=e.clientTop):a&&(i.x=Qt(a))),{x:c.left+l.scrollLeft-i.x,y:c.top+l.scrollTop-i.y,width:c.width,height:c.height}}function Dn(t){var e=new Map,o=new Set,s=[];t.forEach(function(a){e.set(a.name,a)});function n(a){o.add(a.name);var c=[].concat(a.requires||[],a.requiresIfExists||[]);c.forEach(function(l){if(!o.has(l)){var i=e.get(l);i&&n(i)}}),s.push(a)}return t.forEach(function(a){o.has(a.name)||n(a)}),s}function Rn(t){var e=Dn(t);return Ls.reduce(function(o,s){return o.concat(e.filter(function(n){return n.phase===s}))},[])}function En(t){var e;return function(){return e||(e=new Promise(function(o){Promise.resolve().then(function(){e=void 0,o(t())})})),e}}function On(t){var e=t.reduce(function(o,s){var n=o[s.name];return o[s.name]=n?Object.assign({},n,s,{options:Object.assign({},n.options,s.options),data:Object.assign({},n.data,s.data)}):s,o},{});return Object.keys(e).map(function(o){return e[o]})}var Ao={placement:"bottom",modifiers:[],strategy:"absolute"};function So(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];return!e.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function kn(t){t===void 0&&(t={});var e=t,o=e.defaultModifiers,s=o===void 0?[]:o,n=e.defaultOptions,a=n===void 0?Ao:n;return function(l,i,g){g===void 0&&(g=a);var p={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ao,a),modifiersData:{},elements:{reference:l,popper:i},attributes:{},styles:{}},y=[],f=!1,v={state:p,setOptions:function(m){var b=typeof m=="function"?m(p.options):m;x(),p.options=Object.assign({},a,p.options,b),p.scrollParents={reference:Be(l)?it(l):l.contextElement?it(l.contextElement):[],popper:it(i)};var S=Rn(On([].concat(s,p.options.modifiers)));return p.orderedModifiers=S.filter(function(T){return T.enabled}),C(),v.update()},forceUpdate:function(){if(!f){var m=p.elements,b=m.reference,S=m.popper;if(So(b,S)){p.rects={reference:Pn(b,ut(S),p.options.strategy==="fixed"),popper:Kt(S)},p.reset=!1,p.placement=p.options.placement,p.orderedModifiers.forEach(function(P){return p.modifiersData[P.name]=Object.assign({},P.data)});for(var T=0;T<p.orderedModifiers.length;T++){if(p.reset===!0){p.reset=!1,T=-1;continue}var A=p.orderedModifiers[T],h=A.fn,w=A.options,E=w===void 0?{}:w,I=A.name;typeof h=="function"&&(p=h({state:p,options:E,name:I,instance:v})||p)}}}},update:En(function(){return new Promise(function(j){v.forceUpdate(),j(p)})}),destroy:function(){x(),f=!0}};if(!So(l,i))return v;v.setOptions(g).then(function(j){!f&&g.onFirstUpdate&&g.onFirstUpdate(j)});function C(){p.orderedModifiers.forEach(function(j){var m=j.name,b=j.options,S=b===void 0?{}:b,T=j.effect;if(typeof T=="function"){var A=T({state:p,name:m,instance:v,options:S}),h=function(){};y.push(A||h)}})}function x(){y.forEach(function(j){return j()}),y=[]}return v}}var In=[on,wn,en,Fs,bn,gn,Tn,Ks,hn],$n=kn({defaultModifiers:In});function _n(t){return ve("MuiPopper",t)}xe("MuiPopper",["root"]);function Wn(t,e){if(e==="ltr")return t;switch(t){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return t}}function Nt(t){return typeof t=="function"?t():t}function zn(t){return t.nodeType!==void 0}const Bn=t=>{const{classes:e}=t;return ye({root:["root"]},_n,e)},Ln={},Nn=u.forwardRef(function(e,o){const{anchorEl:s,children:n,direction:a,disablePortal:c,modifiers:l,open:i,placement:g,popperOptions:p,popperRef:y,slotProps:f={},slots:v={},TransitionProps:C,ownerState:x,...j}=e,m=u.useRef(null),b=jt(m,o),S=u.useRef(null),T=jt(S,y),A=u.useRef(T);so(()=>{A.current=T},[T]),u.useImperativeHandle(y,()=>S.current,[]);const h=Wn(g,a),[w,E]=u.useState(h),[I,P]=u.useState(Nt(s));u.useEffect(()=>{S.current&&S.current.forceUpdate()}),u.useEffect(()=>{s&&P(Nt(s))},[s]),so(()=>{if(!I||!i)return;const Y=d=>{E(d.placement)};let H=[{name:"preventOverflow",options:{altBoundary:c}},{name:"flip",options:{altBoundary:c}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:d})=>{Y(d)}}];l!=null&&(H=H.concat(l)),p&&p.modifiers!=null&&(H=H.concat(p.modifiers));const z=$n(I,m.current,{placement:h,...p,modifiers:H});return A.current(z),()=>{z.destroy(),A.current(null)}},[I,c,l,i,p,h]);const $={placement:w};C!==null&&($.TransitionProps=C);const V=Bn(e),_=v.root??"div",q=ts({elementType:_,externalSlotProps:f.root,externalForwardedProps:j,additionalProps:{role:"tooltip",ref:b},ownerState:e,className:V.root});return r.jsx(_,{...q,children:typeof n=="function"?n($):n})}),Un=u.forwardRef(function(e,o){const{anchorEl:s,children:n,container:a,direction:c="ltr",disablePortal:l=!1,keepMounted:i=!1,modifiers:g,open:p,placement:y="bottom",popperOptions:f=Ln,popperRef:v,style:C,transition:x=!1,slotProps:j={},slots:m={},...b}=e,[S,T]=u.useState(!0),A=()=>{T(!1)},h=()=>{T(!0)};if(!i&&!p&&(!x||S))return null;let w;if(a)w=a;else if(s){const P=Nt(s);w=P&&zn(P)?go(P).body:go(null).body}const E=!p&&i&&(!x||S)?"none":void 0,I=x?{in:p,onEnter:A,onExited:h}:void 0;return r.jsx(es,{disablePortal:l,container:w,children:r.jsx(Nn,{anchorEl:s,direction:c,disablePortal:l,modifiers:g,ref:o,open:x?!S:p,placement:y,popperOptions:f,popperRef:v,slotProps:j,slots:m,...b,style:{position:"fixed",top:0,left:0,display:E,...C},TransitionProps:I,children:n})})}),Fn=ee(Un,{name:"MuiPopper",slot:"Root"})({}),Jo=u.forwardRef(function(e,o){const s=Oo(),n=be({props:e,name:"MuiPopper"}),{anchorEl:a,component:c,components:l,componentsProps:i,container:g,disablePortal:p,keepMounted:y,modifiers:f,open:v,placement:C,popperOptions:x,popperRef:j,transition:m,slots:b,slotProps:S,...T}=n,A=(b==null?void 0:b.root)??(l==null?void 0:l.Root),h={anchorEl:a,container:g,disablePortal:p,keepMounted:y,modifiers:f,open:v,placement:C,popperOptions:x,popperRef:j,transition:m,...T};return r.jsx(Fn,{as:c,direction:s?"rtl":"ltr",slots:{root:A},slotProps:S??i,...h,ref:o})});function Hn(t){const{badgeContent:e,invisible:o=!1,max:s=99,showZero:n=!1}=t,a=No({badgeContent:e,max:s});let c=o;o===!1&&e===0&&!n&&(c=!0);const{badgeContent:l,max:i=s}=c?a:t,g=l&&Number(l)>i?`${i}+`:l;return{badgeContent:l,invisible:c,max:i,displayValue:g}}function Vn(t){return ve("MuiBadge",t)}const Oe=xe("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),Ot=10,kt=4,qn=t=>{const{color:e,anchorOrigin:o,invisible:s,overlap:n,variant:a,classes:c={}}=t,l={root:["root"],badge:["badge",a,s&&"invisible",`anchorOrigin${oe(o.vertical)}${oe(o.horizontal)}`,`anchorOrigin${oe(o.vertical)}${oe(o.horizontal)}${oe(n)}`,`overlap${oe(n)}`,e!=="default"&&`color${oe(e)}`]};return ye(l,Vn,c)},Gn=ee("span",{name:"MuiBadge",slot:"Root"})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),Xn=ee("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[e.badge,e[o.variant],e[`anchorOrigin${oe(o.anchorOrigin.vertical)}${oe(o.anchorOrigin.horizontal)}${oe(o.overlap)}`],o.color!=="default"&&e[`color${oe(o.color)}`],o.invisible&&e.invisible]}})(ue(({theme:t})=>({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(12),minWidth:Ot*2,lineHeight:1,padding:"0 6px",height:Ot*2,borderRadius:Ot,zIndex:1,transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.enteringScreen}),variants:[...Object.entries(t.palette).filter(Dr(["contrastText"])).map(([e])=>({props:{color:e},style:{backgroundColor:(t.vars||t).palette[e].main,color:(t.vars||t).palette[e].contrastText}})),{props:{variant:"dot"},style:{borderRadius:kt,height:kt*2,minWidth:kt*2,padding:0}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="top"&&e.anchorOrigin.horizontal==="right"&&e.overlap==="rectangular",style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${Oe.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="bottom"&&e.anchorOrigin.horizontal==="right"&&e.overlap==="rectangular",style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${Oe.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="top"&&e.anchorOrigin.horizontal==="left"&&e.overlap==="rectangular",style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${Oe.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="bottom"&&e.anchorOrigin.horizontal==="left"&&e.overlap==="rectangular",style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${Oe.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="top"&&e.anchorOrigin.horizontal==="right"&&e.overlap==="circular",style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${Oe.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="bottom"&&e.anchorOrigin.horizontal==="right"&&e.overlap==="circular",style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${Oe.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="top"&&e.anchorOrigin.horizontal==="left"&&e.overlap==="circular",style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${Oe.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="bottom"&&e.anchorOrigin.horizontal==="left"&&e.overlap==="circular",style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${Oe.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.leavingScreen})}}]})));function Mo(t){return{vertical:(t==null?void 0:t.vertical)??"top",horizontal:(t==null?void 0:t.horizontal)??"right"}}const Yn=u.forwardRef(function(e,o){const s=be({props:e,name:"MuiBadge"}),{anchorOrigin:n,className:a,classes:c,component:l,components:i={},componentsProps:g={},children:p,overlap:y="rectangular",color:f="default",invisible:v=!1,max:C=99,badgeContent:x,slots:j,slotProps:m,showZero:b=!1,variant:S="standard",...T}=s,{badgeContent:A,invisible:h,max:w,displayValue:E}=Hn({max:C,invisible:v,badgeContent:x,showZero:b}),I=No({anchorOrigin:Mo(n),color:f,overlap:y,variant:S,badgeContent:x}),P=h||A==null&&S!=="dot",{color:$=f,overlap:V=y,anchorOrigin:_,variant:q=S}=P?I:s,Y=Mo(_),H=q!=="dot"?E:void 0,z={...s,badgeContent:A,invisible:P,max:w,displayValue:H,showZero:b,anchorOrigin:Y,color:$,overlap:V,variant:q},d=qn(z),D={slots:{root:(j==null?void 0:j.root)??i.Root,badge:(j==null?void 0:j.badge)??i.Badge},slotProps:{root:(m==null?void 0:m.root)??g.root,badge:(m==null?void 0:m.badge)??g.badge}},[R,O]=re("root",{elementType:Gn,externalForwardedProps:{...D,...T},ownerState:z,className:pe(d.root,a),ref:o,additionalProps:{as:l}}),[W,G]=re("badge",{elementType:Xn,externalForwardedProps:D,ownerState:z,className:d.badge});return r.jsxs(R,{...O,children:[p,r.jsx(W,{...G,children:H})]})});function Kn(t){return ve("MuiDialog",t)}const It=xe("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),Zo=u.createContext({}),Jn=ee(rs,{name:"MuiDialog",slot:"Backdrop",overrides:(t,e)=>e.backdrop})({zIndex:-1}),Zn=t=>{const{classes:e,scroll:o,maxWidth:s,fullWidth:n,fullScreen:a}=t,c={root:["root"],container:["container",`scroll${oe(o)}`],paper:["paper",`paperScroll${oe(o)}`,`paperWidth${oe(String(s))}`,n&&"paperFullWidth",a&&"paperFullScreen"]};return ye(c,Kn,e)},Qn=ee(os,{name:"MuiDialog",slot:"Root"})({"@media print":{position:"absolute !important"}}),ea=ee("div",{name:"MuiDialog",slot:"Container",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[e.container,e[`scroll${oe(o.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),ta=ee(Gt,{name:"MuiDialog",slot:"Paper",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[e.paper,e[`scrollPaper${oe(o.scroll)}`],e[`paperWidth${oe(String(o.maxWidth))}`],o.fullWidth&&e.paperFullWidth,o.fullScreen&&e.paperFullScreen]}})(ue(({theme:t})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:e})=>!e.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:t.breakpoints.unit==="px"?Math.max(t.breakpoints.values.xs,444):`max(${t.breakpoints.values.xs}${t.breakpoints.unit}, 444px)`,[`&.${It.paperScrollBody}`]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(t.breakpoints.values).filter(e=>e!=="xs").map(e=>({props:{maxWidth:e},style:{maxWidth:`${t.breakpoints.values[e]}${t.breakpoints.unit}`,[`&.${It.paperScrollBody}`]:{[t.breakpoints.down(t.breakpoints.values[e]+32*2)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:e})=>e.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:e})=>e.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${It.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),At=u.forwardRef(function(e,o){const s=be({props:e,name:"MuiDialog"}),n=Pt(),a={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{"aria-describedby":c,"aria-labelledby":l,"aria-modal":i=!0,BackdropComponent:g,BackdropProps:p,children:y,className:f,disableEscapeKeyDown:v=!1,fullScreen:C=!1,fullWidth:x=!1,maxWidth:j="sm",onClick:m,onClose:b,open:S,PaperComponent:T=Gt,PaperProps:A={},scroll:h="paper",slots:w={},slotProps:E={},TransitionComponent:I=mo,transitionDuration:P=a,TransitionProps:$,...V}=s,_={...s,disableEscapeKeyDown:v,fullScreen:C,fullWidth:x,maxWidth:j,scroll:h},q=Zn(_),Y=u.useRef(),H=N=>{Y.current=N.target===N.currentTarget},z=N=>{m&&m(N),Y.current&&(Y.current=null,b&&b(N,"backdropClick"))},d=zo(l),D=u.useMemo(()=>({titleId:d}),[d]),R={transition:I,...w},O={transition:$,paper:A,backdrop:p,...E},W={slots:R,slotProps:O},[G,F]=re("root",{elementType:Qn,shouldForwardComponentProp:!0,externalForwardedProps:W,ownerState:_,className:pe(q.root,f),ref:o}),[K,k]=re("backdrop",{elementType:Jn,shouldForwardComponentProp:!0,externalForwardedProps:W,ownerState:_}),[X,J]=re("paper",{elementType:ta,shouldForwardComponentProp:!0,externalForwardedProps:W,ownerState:_,className:pe(q.paper,A.className)}),[ne,ae]=re("container",{elementType:ea,externalForwardedProps:W,ownerState:_,className:q.container}),[M,Z]=re("transition",{elementType:mo,externalForwardedProps:W,ownerState:_,additionalProps:{appear:!0,in:S,timeout:P,role:"presentation"}});return r.jsx(G,{closeAfterTransition:!0,slots:{backdrop:K},slotProps:{backdrop:{transitionDuration:P,as:g,...k}},disableEscapeKeyDown:v,onClose:b,open:S,onClick:z,...F,...V,children:r.jsx(M,{...Z,children:r.jsx(ne,{onMouseDown:H,...ae,children:r.jsx(X,{as:T,elevation:24,role:"dialog","aria-describedby":c,"aria-labelledby":d,"aria-modal":i,...J,children:r.jsx(Zo.Provider,{value:D,children:y})})})})})});function oa(t){return ve("MuiDialogActions",t)}xe("MuiDialogActions",["root","spacing"]);const ra=t=>{const{classes:e,disableSpacing:o}=t;return ye({root:["root",!o&&"spacing"]},oa,e)},sa=ee("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[e.root,!o.disableSpacing&&e.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:t})=>!t.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),to=u.forwardRef(function(e,o){const s=be({props:e,name:"MuiDialogActions"}),{className:n,disableSpacing:a=!1,...c}=s,l={...s,disableSpacing:a},i=ra(l);return r.jsx(sa,{className:pe(i.root,n),ownerState:l,ref:o,...c})});function na(t){return ve("MuiDialogContent",t)}xe("MuiDialogContent",["root","dividers"]);function aa(t){return ve("MuiDialogTitle",t)}const ia=xe("MuiDialogTitle",["root"]),la=t=>{const{classes:e,dividers:o}=t;return ye({root:["root",o&&"dividers"]},na,e)},ca=ee("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[e.root,o.dividers&&e.dividers]}})(ue(({theme:t})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:e})=>e.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(t.vars||t).palette.divider}`,borderBottom:`1px solid ${(t.vars||t).palette.divider}`}},{props:({ownerState:e})=>!e.dividers,style:{[`.${ia.root} + &`]:{paddingTop:0}}}]}))),St=u.forwardRef(function(e,o){const s=be({props:e,name:"MuiDialogContent"}),{className:n,dividers:a=!1,...c}=s,l={...s,dividers:a},i=la(l);return r.jsx(ca,{className:pe(i.root,n),ownerState:l,ref:o,...c})}),pa=t=>{const{classes:e}=t;return ye({root:["root"]},aa,e)},da=ee(B,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),Mt=u.forwardRef(function(e,o){const s=be({props:e,name:"MuiDialogTitle"}),{className:n,id:a,...c}=s,l=s,i=pa(l),{titleId:g=a}=u.useContext(Zo);return r.jsx(da,{component:"h2",className:pe(i.root,n),ownerState:l,ref:o,variant:"h6",id:a??g,...c})});function ua(t){return ve("MuiListItemAvatar",t)}xe("MuiListItemAvatar",["root","alignItemsFlexStart"]);const fa=t=>{const{alignItems:e,classes:o}=t;return ye({root:["root",e==="flex-start"&&"alignItemsFlexStart"]},ua,o)},ga=ee("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[e.root,o.alignItems==="flex-start"&&e.alignItemsFlexStart]}})({minWidth:56,flexShrink:0,variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}),Qo=u.forwardRef(function(e,o){const s=be({props:e,name:"MuiListItemAvatar"}),{className:n,...a}=s,c=u.useContext(Rr),l={...s,alignItems:c.alignItems},i=fa(l);return r.jsx(ga,{className:pe(i.root,n),ownerState:l,ref:o,...a})});function ma(t){return ve("MuiTooltip",t)}const te=xe("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);function ha(t){return Math.round(t*1e5)/1e5}const va=t=>{const{classes:e,disableInteractive:o,arrow:s,touch:n,placement:a}=t,c={popper:["popper",!o&&"popperInteractive",s&&"popperArrow"],tooltip:["tooltip",s&&"tooltipArrow",n&&"touch",`tooltipPlacement${oe(a.split("-")[0])}`],arrow:["arrow"]};return ye(c,ma,e)},xa=ee(Jo,{name:"MuiTooltip",slot:"Popper",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[e.popper,!o.disableInteractive&&e.popperInteractive,o.arrow&&e.popperArrow,!o.open&&e.popperClose]}})(ue(({theme:t})=>({zIndex:(t.vars||t).zIndex.tooltip,pointerEvents:"none",variants:[{props:({ownerState:e})=>!e.disableInteractive,style:{pointerEvents:"auto"}},{props:({open:e})=>!e,style:{pointerEvents:"none"}},{props:({ownerState:e})=>e.arrow,style:{[`&[data-popper-placement*="bottom"] .${te.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${te.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${te.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},[`&[data-popper-placement*="left"] .${te.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}},{props:({ownerState:e})=>e.arrow&&!e.isRtl,style:{[`&[data-popper-placement*="right"] .${te.arrow}`]:{left:0,marginLeft:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!!e.isRtl,style:{[`&[data-popper-placement*="right"] .${te.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!e.isRtl,style:{[`&[data-popper-placement*="left"] .${te.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!!e.isRtl,style:{[`&[data-popper-placement*="left"] .${te.arrow}`]:{left:0,marginLeft:"-0.71em"}}}]}))),ba=ee("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[e.tooltip,o.touch&&e.touch,o.arrow&&e.tooltipArrow,e[`tooltipPlacement${oe(o.placement.split("-")[0])}`]]}})(ue(({theme:t})=>({backgroundColor:t.vars?t.vars.palette.Tooltip.bg:ko(t.palette.grey[700],.92),borderRadius:(t.vars||t).shape.borderRadius,color:(t.vars||t).palette.common.white,fontFamily:t.typography.fontFamily,padding:"4px 8px",fontSize:t.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:t.typography.fontWeightMedium,[`.${te.popper}[data-popper-placement*="left"] &`]:{transformOrigin:"right center"},[`.${te.popper}[data-popper-placement*="right"] &`]:{transformOrigin:"left center"},[`.${te.popper}[data-popper-placement*="top"] &`]:{transformOrigin:"center bottom",marginBottom:"14px"},[`.${te.popper}[data-popper-placement*="bottom"] &`]:{transformOrigin:"center top",marginTop:"14px"},variants:[{props:({ownerState:e})=>e.arrow,style:{position:"relative",margin:0}},{props:({ownerState:e})=>e.touch,style:{padding:"8px 16px",fontSize:t.typography.pxToRem(14),lineHeight:`${ha(16/14)}em`,fontWeight:t.typography.fontWeightRegular}},{props:({ownerState:e})=>!e.isRtl,style:{[`.${te.popper}[data-popper-placement*="left"] &`]:{marginRight:"14px"},[`.${te.popper}[data-popper-placement*="right"] &`]:{marginLeft:"14px"}}},{props:({ownerState:e})=>!e.isRtl&&e.touch,style:{[`.${te.popper}[data-popper-placement*="left"] &`]:{marginRight:"24px"},[`.${te.popper}[data-popper-placement*="right"] &`]:{marginLeft:"24px"}}},{props:({ownerState:e})=>!!e.isRtl,style:{[`.${te.popper}[data-popper-placement*="left"] &`]:{marginLeft:"14px"},[`.${te.popper}[data-popper-placement*="right"] &`]:{marginRight:"14px"}}},{props:({ownerState:e})=>!!e.isRtl&&e.touch,style:{[`.${te.popper}[data-popper-placement*="left"] &`]:{marginLeft:"24px"},[`.${te.popper}[data-popper-placement*="right"] &`]:{marginRight:"24px"}}},{props:({ownerState:e})=>e.touch,style:{[`.${te.popper}[data-popper-placement*="top"] &`]:{marginBottom:"24px"}}},{props:({ownerState:e})=>e.touch,style:{[`.${te.popper}[data-popper-placement*="bottom"] &`]:{marginTop:"24px"}}}]}))),ya=ee("span",{name:"MuiTooltip",slot:"Arrow"})(ue(({theme:t})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:t.vars?t.vars.palette.Tooltip.bg:ko(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})));let bt=!1;const Po=new Er;let tt={x:0,y:0};function yt(t,e){return(o,...s)=>{e&&e(o,...s),t(o,...s)}}const oo=u.forwardRef(function(e,o){const s=be({props:e,name:"MuiTooltip"}),{arrow:n=!1,children:a,classes:c,components:l={},componentsProps:i={},describeChild:g=!1,disableFocusListener:p=!1,disableHoverListener:y=!1,disableInteractive:f=!1,disableTouchListener:v=!1,enterDelay:C=100,enterNextDelay:x=0,enterTouchDelay:j=700,followCursor:m=!1,id:b,leaveDelay:S=0,leaveTouchDelay:T=1500,onClose:A,onOpen:h,open:w,placement:E="bottom",PopperComponent:I,PopperProps:P={},slotProps:$={},slots:V={},title:_,TransitionComponent:q,TransitionProps:Y,...H}=s,z=u.isValidElement(a)?a:r.jsx("span",{children:a}),d=Pt(),D=Oo(),[R,O]=u.useState(),[W,G]=u.useState(null),F=u.useRef(!1),K=f||m,k=rt(),X=rt(),J=rt(),ne=rt(),[ae,M]=Wo({controlled:w,default:!1,name:"Tooltip",state:"open"});let Z=ae;const N=zo(b),Q=u.useRef(),Se=no(()=>{Q.current!==void 0&&(document.body.style.WebkitUserSelect=Q.current,Q.current=void 0),ne.clear()});u.useEffect(()=>Se,[Se]);const Ne=U=>{Po.clear(),bt=!0,M(!0),h&&!Z&&h(U)},ie=no(U=>{Po.start(800+S,()=>{bt=!1}),M(!1),A&&Z&&A(U),k.start(d.transitions.duration.shortest,()=>{F.current=!1})}),Me=U=>{F.current&&U.type!=="touchstart"||(R&&R.removeAttribute("title"),X.clear(),J.clear(),C||bt&&x?X.start(bt?x:C,()=>{Ne(U)}):Ne(U))},Xe=U=>{X.clear(),J.start(S,()=>{ie(U)})},[,Pe]=u.useState(!1),$e=U=>{ao(U.target)||(Pe(!1),Xe(U))},Ye=U=>{R||O(U.currentTarget),ao(U.target)&&(Pe(!0),Me(U))},Ke=U=>{F.current=!0;const Te=z.props;Te.onTouchStart&&Te.onTouchStart(U)},Je=U=>{Ke(U),J.clear(),k.clear(),Se(),Q.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",ne.start(j,()=>{document.body.style.WebkitUserSelect=Q.current,Me(U)})},ft=U=>{z.props.onTouchEnd&&z.props.onTouchEnd(U),Se(),J.start(T,()=>{ie(U)})};u.useEffect(()=>{if(!Z)return;function U(Te){Te.key==="Escape"&&ie(Te)}return document.addEventListener("keydown",U),()=>{document.removeEventListener("keydown",U)}},[ie,Z]);const gt=jt(ss(z),O,o);!_&&_!==0&&(Z=!1);const Ue=u.useRef(),mt=U=>{const Te=z.props;Te.onMouseMove&&Te.onMouseMove(U),tt={x:U.clientX,y:U.clientY},Ue.current&&Ue.current.update()},Ze={},Rt=typeof _=="string";g?(Ze.title=!Z&&Rt&&!y?_:null,Ze["aria-describedby"]=Z?N:null):(Ze["aria-label"]=Rt?_:null,Ze["aria-labelledby"]=Z&&!Rt?N:null);const Ce={...Ze,...H,...z.props,className:pe(H.className,z.props.className),onTouchStart:Ke,ref:gt,...m?{onMouseMove:mt}:{}},Qe={};v||(Ce.onTouchStart=Je,Ce.onTouchEnd=ft),y||(Ce.onMouseOver=yt(Me,Ce.onMouseOver),Ce.onMouseLeave=yt(Xe,Ce.onMouseLeave),K||(Qe.onMouseOver=Me,Qe.onMouseLeave=Xe)),p||(Ce.onFocus=yt(Ye,Ce.onFocus),Ce.onBlur=yt($e,Ce.onBlur),K||(Qe.onFocus=Ye,Qe.onBlur=$e));const _e={...s,isRtl:D,arrow:n,disableInteractive:K,placement:E,PopperComponentProp:I,touch:F.current},je=typeof $.popper=="function"?$.popper(_e):$.popper,vr=u.useMemo(()=>{var Te,ro;let U=[{name:"arrow",enabled:!!W,options:{element:W,padding:4}}];return(Te=P.popperOptions)!=null&&Te.modifiers&&(U=U.concat(P.popperOptions.modifiers)),(ro=je==null?void 0:je.popperOptions)!=null&&ro.modifiers&&(U=U.concat(je.popperOptions.modifiers)),{...P.popperOptions,...je==null?void 0:je.popperOptions,modifiers:U}},[W,P.popperOptions,je==null?void 0:je.popperOptions]),Et=va(_e),xr=typeof $.transition=="function"?$.transition(_e):$.transition,ht={slots:{popper:l.Popper,transition:l.Transition??q,tooltip:l.Tooltip,arrow:l.Arrow,...V},slotProps:{arrow:$.arrow??i.arrow,popper:{...P,...je??i.popper},tooltip:$.tooltip??i.tooltip,transition:{...Y,...xr??i.transition}}},[br,yr]=re("popper",{elementType:xa,externalForwardedProps:ht,ownerState:_e,className:pe(Et.popper,P==null?void 0:P.className)}),[wr,Cr]=re("transition",{elementType:ns,externalForwardedProps:ht,ownerState:_e}),[jr,Tr]=re("tooltip",{elementType:ba,className:Et.tooltip,externalForwardedProps:ht,ownerState:_e}),[Ar,Sr]=re("arrow",{elementType:ya,className:Et.arrow,externalForwardedProps:ht,ownerState:_e,ref:G});return r.jsxs(u.Fragment,{children:[u.cloneElement(z,Ce),r.jsx(br,{as:I??Jo,placement:E,anchorEl:m?{getBoundingClientRect:()=>({top:tt.y,left:tt.x,right:tt.x,bottom:tt.y,width:0,height:0})}:R,popperRef:Ue,open:R?Z:!1,id:N,transition:!0,...Qe,...yr,popperOptions:vr,children:({TransitionProps:U})=>r.jsx(wr,{timeout:d.transitions.duration.shorter,...U,...Cr,children:r.jsxs(jr,{...Tr,children:[_,n?r.jsx(Ar,{...Sr}):null]})})})]})});class wa extends u.Component{getSnapshotBeforeUpdate(e){const o=this.props.childRef.current;if(o&&e.isPresent&&!this.props.isPresent){const s=o.offsetParent,n=kr(s)&&s.offsetWidth||0,a=this.props.sizeRef.current;a.height=o.offsetHeight||0,a.width=o.offsetWidth||0,a.top=o.offsetTop,a.left=o.offsetLeft,a.right=n-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Ca({children:t,isPresent:e,anchorX:o,root:s}){const n=u.useId(),a=u.useRef(null),c=u.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=u.useContext(Or);return u.useInsertionEffect(()=>{const{width:i,height:g,top:p,left:y,right:f}=c.current;if(e||!a.current||!i||!g)return;const v=o==="left"?`left: ${y}`:`right: ${f}`;a.current.dataset.motionPopId=n;const C=document.createElement("style");l&&(C.nonce=l);const x=s??document.head;return x.appendChild(C),C.sheet&&C.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${g}px !important;
            ${v}px !important;
            top: ${p}px !important;
          }
        `),()=>{x.removeChild(C),x.contains(C)&&x.removeChild(C)}},[e]),r.jsx(wa,{isPresent:e,childRef:a,sizeRef:c,children:u.cloneElement(t,{ref:a})})}const ja=({children:t,initial:e,isPresent:o,onExitComplete:s,custom:n,presenceAffectsLayout:a,mode:c,anchorX:l,root:i})=>{const g=Io(Ta),p=u.useId();let y=!0,f=u.useMemo(()=>(y=!1,{id:p,initial:e,isPresent:o,custom:n,onExitComplete:v=>{g.set(v,!0);for(const C of g.values())if(!C)return;s&&s()},register:v=>(g.set(v,!1),()=>g.delete(v))}),[o,g,s]);return a&&y&&(f={...f}),u.useMemo(()=>{g.forEach((v,C)=>g.set(C,!1))},[o]),u.useEffect(()=>{!o&&!g.size&&s&&s()},[o]),c==="popLayout"&&(t=r.jsx(Ca,{isPresent:o,anchorX:l,root:i,children:t})),r.jsx(Ir.Provider,{value:f,children:t})};function Ta(){return new Map}const wt=t=>t.key||"";function Do(t){const e=[];return u.Children.forEach(t,o=>{u.isValidElement(o)&&e.push(o)}),e}const Aa=({children:t,custom:e,initial:o=!0,onExitComplete:s,presenceAffectsLayout:n=!0,mode:a="sync",propagate:c=!1,anchorX:l="left",root:i})=>{const[g,p]=$r(c),y=u.useMemo(()=>Do(t),[t]),f=c&&!g?[]:y.map(wt),v=u.useRef(!0),C=u.useRef(y),x=Io(()=>new Map),[j,m]=u.useState(y),[b,S]=u.useState(y);_r(()=>{v.current=!1,C.current=y;for(let h=0;h<b.length;h++){const w=wt(b[h]);f.includes(w)?x.delete(w):x.get(w)!==!0&&x.set(w,!1)}},[b,f.length,f.join("-")]);const T=[];if(y!==j){let h=[...y];for(let w=0;w<b.length;w++){const E=b[w],I=wt(E);f.includes(I)||(h.splice(w,0,E),T.push(E))}return a==="wait"&&T.length&&(h=T),S(Do(h)),m(y),null}const{forceRender:A}=u.useContext(Wr);return r.jsx(r.Fragment,{children:b.map(h=>{const w=wt(h),E=c&&!g?!1:y===b||f.includes(w),I=()=>{if(x.has(w))x.set(w,!0);else return;let P=!0;x.forEach($=>{$||(P=!1)}),P&&(A==null||A(),S(C.current),c&&(p==null||p()),s&&s())};return r.jsx(ja,{isPresent:E,initial:!v.current||o?void 0:!1,custom:e,presenceAffectsLayout:n,mode:a,root:i,onExitComplete:E?void 0:I,anchorX:l,children:h},w)})})},Sa=we(r.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"})),Ma=we([r.jsx("circle",{cx:"12",cy:"12",r:"3.2"},"0"),r.jsx("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5"},"1")]),$t=we(r.jsx("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2M6 9h12v2H6zm8 5H6v-2h8zm4-6H6V6h12z"})),Pa=we(r.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"})),Ro=we(r.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"})),Da=we(r.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-2h2zm0-4h-2V7h2z"})),Ra=we(r.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"})),er=we(r.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"})),Eo=we(r.jsx("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"})),Ea=we(r.jsx("path",{d:"M14 8c0-2.21-1.79-4-4-4S6 5.79 6 8s1.79 4 4 4 4-1.79 4-4m3 2v2h6v-2zM2 18v2h16v-2c0-2.66-5.33-4-8-4s-8 1.34-8 4"})),Oa=we([r.jsx("circle",{cx:"12",cy:"12",r:"3.2"},"0"),r.jsx("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5"},"1")]),ka=we(r.jsx("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"})),tr=()=>{var t;if(console.log("Инициализация Telegram WebApp..."),sr(),typeof window<"u"&&((t=window.Telegram)!=null&&t.WebApp))try{const e=window.Telegram.WebApp;return e.ready(),e.expand(),e.setHeaderColor("#232b3b"),e.setBackgroundColor("#232b3b"),e.enableClosingConfirmation(),console.log("Telegram WebApp успешно инициализирован"),console.log("WebApp version:",e.version),console.log("WebApp platform:",e.platform),console.log("WebApp theme:",e.colorScheme),!0}catch(e){return console.error("Ошибка инициализации Telegram WebApp:",e),!1}return console.log("Telegram WebApp не найден"),!1},Ia=()=>{var t,e,o;return typeof window<"u"&&((o=(e=(t=window.Telegram)==null?void 0:t.WebApp)==null?void 0:e.initDataUnsafe)!=null&&o.user)?window.Telegram.WebApp.initDataUnsafe.user:null},or=()=>{var t;if(console.log("=== Telegram WebApp Debug Info ==="),typeof window>"u"){console.log("❌ Window object not available");return}if(console.log("🔍 Telegram object:",window.Telegram?"✅ Available":"❌ Not available"),(t=window.Telegram)!=null&&t.WebApp){const e=window.Telegram.WebApp;console.log("🔍 WebApp object:","✅ Available"),console.log("🔍 WebApp version:",e.version),console.log("🔍 WebApp platform:",e.platform),console.log("🔍 WebApp colorScheme:",e.colorScheme),console.log("🔍 WebApp isExpanded:",e.isExpanded),console.log("🔍 WebApp viewportHeight:",e.viewportHeight),console.log("🔍 WebApp viewportStableHeight:",e.viewportStableHeight),console.log("🔍 InitData:",e.initData?`✅ Available (${e.initData.length} chars)`:"❌ Not available"),console.log("🔍 InitDataUnsafe:",e.initDataUnsafe?"✅ Available":"❌ Not available"),e.initDataUnsafe&&(console.log("🔍 InitDataUnsafe.user:",e.initDataUnsafe.user?"✅ Available":"❌ Not available"),console.log("🔍 InitDataUnsafe.query_id:",e.initDataUnsafe.query_id?"✅ Available":"❌ Not available"),console.log("🔍 InitDataUnsafe.auth_date:",e.initDataUnsafe.auth_date?"✅ Available":"❌ Not available"),console.log("🔍 InitDataUnsafe.hash:",e.initDataUnsafe.hash?"✅ Available":"❌ Not available"),e.initDataUnsafe.user&&console.log("🔍 User data:",JSON.stringify(e.initDataUnsafe.user,null,2)))}else console.log("❌ WebApp object not available");console.log("==================================")},Le=()=>{var t;if(console.log("Получение данных авторизации Telegram..."),or(),typeof window<"u"&&((t=window.Telegram)!=null&&t.WebApp)){console.log("Telegram WebApp найден");const e=window.Telegram.WebApp.initData;if(console.log("Telegram initData:",e?"найден":"отсутствует"),e)return console.log("✅ Используем реальные данные initData"),e;const o=window.Telegram.WebApp.initDataUnsafe;if(console.log("Telegram initDataUnsafe:",o),o!=null&&o.user){const s=Math.floor(Date.now()/1e3),n=JSON.stringify(o.user),a=`user=${encodeURIComponent(n)}`,c=`auth_date=${s}`,l=`${a}&${c}`,i=btoa(l).replace(/[^a-zA-Z0-9]/g,"").substring(0,32),g=`${a}&${c}&hash=${i}`;return console.log("✅ Создаем данные авторизации из initDataUnsafe"),console.log("Generated auth data length:",g.length),g}}return console.warn("❌ Приложение запущено не из Telegram WebApp"),console.warn("❌ Данные авторизации недоступны"),""},rr=()=>{var t;return typeof window<"u"&&!!((t=window.Telegram)!=null&&t.WebApp)},$a=()=>{if(console.log("🔄 Очищаем и пересоздаем данные авторизации..."),typeof window<"u"){localStorage.removeItem("telegram_init_data"),console.log("✅ Старые данные очищены");const t=Le();return console.log("✅ Новые данные созданы:",t?"успешно":"ошибка"),t}return""},sr=()=>{typeof window<"u"&&(localStorage.removeItem("telegram_init_data"),console.log("🧹 Очищены старые данные авторизации"))},_a=()=>{console.log("🧪 Тестируем данные авторизации...");const t=Le();if(t){console.log("✅ Данные авторизации найдены"),console.log("📊 Длина:",t.length),console.log("📋 Превью:",t.substring(0,100)+"...");try{const e=new URLSearchParams(t),o=e.get("user"),s=e.get("auth_date"),n=e.get("hash");if(console.log("🔍 Структура данных:"),console.log("  - user:",o?"есть":"отсутствует"),console.log("  - auth_date:",s?"есть":"отсутствует"),console.log("  - hash:",n?"есть":"отсутствует"),o){const a=JSON.parse(decodeURIComponent(o));console.log("👤 Данные пользователя:",a)}return!0}catch(e){return console.error("❌ Ошибка парсинга данных:",e),!1}}else return console.error("❌ Данные авторизации не найдены"),!1},Wa=async()=>{console.log("🔬 Диагностика проблемы авторизации на сервере...");try{const{debugAuthConfig:t,debugValidateTelegramData:e}=await Wt(async()=>{const{debugAuthConfig:s,debugValidateTelegramData:n}=await Promise.resolve().then(()=>qt);return{debugAuthConfig:s,debugValidateTelegramData:n}},void 0);console.log("🔍 Проверяем конфигурацию сервера...");try{const s=await t();if(console.log("🏃 Конфигурация сервера:",s),!s.telegram_bot_token_set)return console.error("❌ На сервере не установлен токен Telegram бота!"),console.error("💡 Решение: Администратор должен установить TELEGRAM_BOT_TOKEN на сервере"),"server_no_token";console.log("✅ Токен бота на сервере установлен")}catch(s){return console.error("❌ Ошибка получения конфигурации сервера:",s),"server_config_error"}const o=Le();if(o){console.log("🧪 Тестируем валидацию данных на сервере...");try{const s=await e(o);return console.log("📊 Результат валидации:",s),s.success?(console.log("✅ Валидация на сервере прошла успешно!"),console.log("❓ Возможно, проблема в другом месте"),"validation_success"):(console.error("❌ Валидация на сервере не прошла"),console.error("💡 Причина: Неправильная подпись или истекшие данные"),"validation_failed")}catch(s){return console.error("❌ Ошибка тестирования валидации:",s),"validation_error"}}else return console.error("❌ Нет данных для тестирования"),"no_data"}catch(t){return console.error("❌ Общая ошибка диагностики:",t),"general_error"}};typeof window<"u"&&(window.telegramUtils={debugTelegramWebApp:or,getTelegramInitData:Le,clearAndRecreateAuthData:$a,cleanupOldAuthData:sr,testAuthData:_a,initTelegramWebApp:tr,diagnoseServerAuth:Wa},console.log("🔧 Утилиты Telegram доступны через window.telegramUtils"));const za=()=>{console.log("=== Aeon Messenger API Configuration ==="),console.log("VITE_CHAT_URL:","https://aeon-messenger-app-09faae856b73.herokuapp.com"),console.log("Base URL:","https://aeon-messenger-app-09faae856b73.herokuapp.com"),console.log("Environment:","production"),console.log("🆕 NEW BACKEND URL: https://aeon-backend-2892-d50dfbe26b14.herokuapp.com"),console.log("=========================================")};za();const se=zr.create({baseURL:"https://aeon-backend-2892-d50dfbe26b14.herokuapp.com",timeout:3e4,headers:{"Content-Type":"application/json"}}),nr=async(t,e=3,o=1e3)=>{var s,n;for(let a=0;a<e;a++)try{return await t()}catch(c){if(console.log(`Attempt ${a+1} failed:`,c.message),((s=c.response)==null?void 0:s.status)===401||((n=c.response)==null?void 0:n.status)===403||a===e-1)throw c;await new Promise(l=>setTimeout(l,o*(a+1)))}throw new Error("Max retries reached")};se.interceptors.request.use(t=>{const e=Le();return console.log("=== Aeon API Request Debug ==="),console.log("URL:",t.url),console.log("Method:",t.method),console.log("Base URL:",t.baseURL),console.log("Init Data Length:",e?e.length:0),console.log("Init Data Preview:",e?e.substring(0,100)+"...":"No data"),e?(t.headers["x-telegram-init-data"]=e,console.log("✅ Auth header attached")):(console.warn("❌ No auth data available - running in development mode"),console.warn("❌ This request will likely fail with 401 error")),console.log("==============================="),t},t=>(console.error("Request interceptor error:",t),Promise.reject(t)));se.interceptors.response.use(t=>(console.log("✅ API Response:",t.config.url,t.status),t),t=>{var e,o,s,n,a,c,l,i,g,p,y,f,v,C,x,j;throw console.error("=== Aeon API Error ==="),console.error("URL:",(e=t.config)==null?void 0:e.url),console.error("Method:",(o=t.config)==null?void 0:o.method),console.error("Status:",(s=t.response)==null?void 0:s.status),console.error("Status Text:",(n=t.response)==null?void 0:n.statusText),console.error("Response Data:",(a=t.response)==null?void 0:a.data),console.error("Request Headers:",(c=t.config)==null?void 0:c.headers),console.error("======================"),((l=t.response)==null?void 0:l.status)===405?(console.error("❌ Method Not Allowed (405)"),console.error("❌ Possible reasons:"),console.error(`   1. HTTP method ${(g=(i=t.config)==null?void 0:i.method)==null?void 0:g.toUpperCase()} is not supported for URL: ${(p=t.config)==null?void 0:p.url}`),console.error("   2. Server endpoint configuration issue"),console.error("   3. API endpoint does not exist or is disabled"),console.error("❌ Solution: Check API documentation and server configuration"),{...t,message:`HTTP method ${(f=(y=t.config)==null?void 0:y.method)==null?void 0:f.toUpperCase()} not allowed for this endpoint`,isMethodError:!0,response:{...t.response,data:{...(v=t.response)==null?void 0:v.data,error:"HTTP метод не поддерживается для данного endpoint"}}}):((C=t.response)==null?void 0:C.status)===401?(console.error("❌ Authorization failed"),console.error("❌ Possible reasons:"),console.error("   1. App is not running inside Telegram WebApp"),console.error("   2. Invalid or expired Telegram init data"),console.error("   3. Server-side authorization issue"),console.error("❌ Solution: Open this app from Telegram bot/mini app"),{...t,message:"Authorization failed - app must be opened from Telegram",isAuthError:!0,response:{...t.response,data:{...(x=t.response)==null?void 0:x.data,error:"Приложение должно быть открыто из Telegram"}}}):t.code==="ECONNABORTED"&&t.message.includes("timeout")?(console.error("❌ Request timeout"),console.error("❌ Possible reasons:"),console.error("   1. Server is starting up (cold start)"),console.error("   2. Server is overloaded"),console.error("   3. Network connectivity issues"),console.error("❌ Solution: Try again in a moment"),{...t,message:"Server is starting up, please try again in a moment",isTimeoutError:!0}):((j=t.response)==null?void 0:j.status)===503?(console.error("❌ Service Unavailable"),console.error("❌ Server is temporarily unavailable"),{...t,message:"Server is temporarily unavailable, please try again",isServiceError:!0}):t});const Ut=async()=>(await nr(()=>se.get("/api/v1/chats/"))).data,ar=async t=>(await nr(()=>se.post("/api/v1/chats/",t,{timeout:6e4}))).data,Ba=async t=>(await se.get(`/api/v1/chats/${t}`)).data,ir=async(t,e)=>{await se.post(`/api/v1/chats/${t}/members/${e}`)},lr=async(t,e)=>{await se.delete(`/api/v1/chats/${t}/members/${e}`)},Ft=async(t,e=1,o=50)=>(await se.get(`/api/v1/messages/chat/${t}?page=${e}&per_page=${o}`)).data,cr=async t=>(await se.post("/api/v1/messages/",t)).data,pr=async t=>{await se.post(`/api/v1/messages/chat/${t}/read-all`)},dr=async t=>{console.log("uploadMedia: Starting upload for file:",t.name,t.size,t.type);const e=new FormData;e.append("file",t);try{const o=await se.post("/api/v1/messages/upload-media",e,{headers:{},timeout:6e4});return console.log("uploadMedia: Upload successful:",o.data),o.data}catch(o){throw console.error("uploadMedia: Upload failed:",o),o.response&&(console.error("Response status:",o.response.status),console.error("Response data:",o.response.data),console.error("Response headers:",o.response.headers)),o}},ur=async()=>(await se.get("/api/v1/me")).data,fr=async()=>(await se.get("/api/v1/health")).data,gr=async()=>(await se.get("/api/v1/debug/auth")).data,mr=async t=>(await se.post("/api/v1/debug/validate-telegram-data",t,{headers:{"Content-Type":"application/json"}})).data,Ht=async(t,e)=>(await se.post(`/api/v1/chats/${t}/invite-by-username`,{username:e})).data,Vt=async()=>(await se.post("/api/v1/users/check-invitations")).data,qt=Object.freeze(Object.defineProperty({__proto__:null,addMemberToChat:ir,checkAndAcceptInvitations:Vt,createChat:ar,debugAuthConfig:gr,debugValidateTelegramData:mr,getChat:Ba,getChatMessages:Ft,getChats:Ut,getCurrentUser:ur,healthCheck:fr,inviteMemberByUsername:Ht,markAllMessagesAsRead:pr,removeMemberFromChat:lr,sendMessage:cr,uploadMedia:dr},Symbol.toStringTag,{value:"Module"})),La=()=>Br(),ot=t=>Lr(t),_t=t=>{console.log("🔍 Normalizing user data:",t);const e={...t,subordinates:Array.isArray(t.subordinates)?t.subordinates:[],managers:Array.isArray(t.managers)?t.managers:[]};return console.log("✅ Normalized user data:",e),e},Na=()=>{const t=La(),[e,o]=u.useState([]),[s,n]=u.useState(null),[a,c]=u.useState(null),[l,i]=u.useState(!0),[g,p]=u.useState(null),[y,f]=u.useState(!1),[v,C]=u.useState(!1),x=ot(d=>s?Xr(d,s.id):[]),j=ot(d=>s?Kr(d,s.id):!1),m=ot(d=>s?Yr(d,s.id):null),b=ot(d=>s?Gr(d,s.id):0),S=ot(Vr),T=u.useCallback(()=>tr(),[]);u.useEffect(()=>{t(Nr()),console.log("📱 Сессия инициализирована")},[t]),u.useEffect(()=>{const d=setInterval(()=>{S>5e3&&(t(io({maxMessagesPerChat:500,maxChatAge:216e5})),console.log("🧹 Хранилище оптимизировано, сообщений было:",S))},6e5);return()=>clearInterval(d)},[t,S]),u.useEffect(()=>{const d=()=>{t(qr()),console.log("📱 Сессия завершена")},D=()=>{document.hidden&&t(io({maxMessagesPerChat:1e3}))};return window.addEventListener("beforeunload",d),document.addEventListener("visibilitychange",D),()=>{window.removeEventListener("beforeunload",d),document.removeEventListener("visibilitychange",D)}},[t]);const A=u.useCallback(async()=>{var d,D;try{const R=await ur(),O=_t(R);c(O),p(null),f(!1);try{const W=await Vt(),G=_t(W);c(G)}catch(W){((d=W.response)==null?void 0:d.status)===404?console.log("Check invitations endpoint not available (404) - skipping"):console.log("No pending invitations or error checking invitations:",W)}}catch(R){if(console.error("Error loading current user:",R),((D=R.response)==null?void 0:D.status)===401||R.isAuthError?(f(!0),p("Приложение должно быть открыто из Telegram для корректной работы")):p("Ошибка загрузки данных пользователя"),!rr()){const O=Ia();c(O?{id:O.id,telegram_id:O.id,username:O.username,first_name:O.first_name,last_name:O.last_name,profile_photo_url:O.photo_url,is_premium:!1,is_admin:!1,is_active:!0,created_at:new Date().toISOString(),subordinates:[],managers:[]}:{id:123456789,telegram_id:123456789,username:"testuser",first_name:"Test",last_name:"User",profile_photo_url:void 0,is_premium:!1,is_admin:!1,is_active:!0,created_at:new Date().toISOString(),subordinates:[],managers:[]}),f(!1)}}},[T]),h=u.useCallback(async()=>{var d,D;try{i(!0);const O=(await Ut()).sort((W,G)=>!W.last_message_time&&!G.last_message_time?0:W.last_message_time?G.last_message_time?new Date(G.last_message_time).getTime()-new Date(W.last_message_time).getTime():-1:1);o(O),p(null),f(!1)}catch(R){console.error("Error loading chats:",R),((d=R.response)==null?void 0:d.status)===401||R.isAuthError?(f(!0),p("Приложение должно быть открыто из Telegram для корректной работы")):R.isTimeoutError||R.code==="ECONNABORTED"?p("⏱️ Сервер запускается, попробуйте обновить страницу через минуту"):R.isServiceError||((D=R.response)==null?void 0:D.status)===503?p("🔧 Сервер временно недоступен, попробуйте через несколько минут"):p("Ошибка загрузки чатов")}finally{i(!1)}},[]),w=u.useCallback(async()=>{var d;try{const R=(await Ut()).sort((O,W)=>!O.last_message_time&&!W.last_message_time?0:O.last_message_time?W.last_message_time?new Date(W.last_message_time).getTime()-new Date(O.last_message_time).getTime():-1:1);o(R),p(null),f(!1)}catch(D){console.error("Error refreshing chats:",D),(((d=D.response)==null?void 0:d.status)===401||D.isAuthError)&&f(!0)}},[]),E=u.useCallback(async d=>{var D,R;try{t(lo({chatId:d,loading:!0}));const O=await Ft(d);t(Ur({chatId:d,messages:O.messages})),p(null),f(!1)}catch(O){console.error("Error loading messages:",O),t(Fr({chatId:d,error:O.message})),((D=O.response)==null?void 0:D.status)===401||O.isAuthError?(f(!0),p("Приложение должно быть открыто из Telegram для корректной работы")):O.isTimeoutError||O.code==="ECONNABORTED"?p("⏱️ Сервер запускается, сообщения загрузятся автоматически"):O.isServiceError||((R=O.response)==null?void 0:R.status)===503?p("🔧 Сервер временно недоступен, попробуйте обновить чат"):p("Ошибка загрузки сообщений")}finally{t(lo({chatId:d,loading:!1}))}},[t]),I=u.useCallback(async d=>{var D,R;try{const W=(await Ft(d)).messages;if(W.length>0){const G=W[W.length-1].id;if(b&&G>b){const F=x,K=new Set(F.map(X=>X.id)),k=W.filter(X=>!K.has(X.id));if(k.length>0){t(Hr({chatId:d,messages:k})),C(!0),w();try{(R=(D=window.Telegram)==null?void 0:D.WebApp)!=null&&R.HapticFeedback&&window.Telegram.WebApp.HapticFeedback.notificationOccurred("success")}catch{console.log("Haptic feedback not available")}console.log("🔄 Получены новые сообщения")}}}}catch(O){console.error("Error checking new messages:",O)}},[b,x,t,w]),P=u.useCallback(async(d,D)=>{if(D.trim())try{const R={text:D.trim(),message_type:"text",chat_id:d},O=await cr(R);t(co({chatId:d,message:O})),o(W=>W.map(F=>F.id===d?{...F,last_message:D.trim(),last_message_time:new Date().toISOString()}:F).sort((F,K)=>!F.last_message_time&&!K.last_message_time?0:F.last_message_time?K.last_message_time?new Date(K.last_message_time).getTime()-new Date(F.last_message_time).getTime():-1:1))}catch(R){if(console.error("Error sending message:",R),p("Ошибка отправки сообщения"),a){const O={id:Date.now(),text:D.trim(),message_type:"text",chat_id:d,sender_id:a.id,sender:{id:a.id,telegram_id:a.telegram_id,username:a.username,first_name:a.first_name,last_name:a.last_name,profile_photo_url:a.profile_photo_url},is_edited:!1,is_deleted:!1,read_by:[],created_at:new Date().toISOString(),updated_at:new Date().toISOString()};t(co({chatId:d,message:O})),o(W=>W.map(F=>F.id===d?{...F,last_message:D.trim(),last_message_time:new Date().toISOString()}:F).sort((F,K)=>!F.last_message_time&&!K.last_message_time?0:F.last_message_time?K.last_message_time?new Date(K.last_message_time).getTime()-new Date(F.last_message_time).getTime():-1:1))}}},[a,t]),$=u.useCallback(async(d,D=[],R=[],O)=>{try{const W={title:d,chat_type:D.length+R.length>0?"group":"private",member_ids:D,...O&&{photo_url:O}},G=await ar(W);if(R.length>0){const{inviteMemberByUsername:K}=await Wt(async()=>{const{inviteMemberByUsername:k}=await Promise.resolve().then(()=>qt);return{inviteMemberByUsername:k}},void 0);for(const k of R)try{await K(G.id,k)}catch(X){console.error(`Error inviting ${k}:`,X)}}await h();const F={id:G.id,title:G.title,chat_type:G.chat_type,photo_url:G.photo_url,last_message:void 0,last_message_time:void 0,unread_count:0};return n(F),await E(G.id),G}catch(W){throw console.error("Error creating chat:",W),p("Ошибка создания чата"),W}},[h,E]),V=u.useCallback(d=>{n(d),C(!1),E(d.id),d.unread_count>0&&pr(d.id).catch(D=>console.error("Error marking messages as read:",D))},[E]),_=u.useCallback(()=>{n(null),C(!1)},[]),q=u.useCallback(()=>{C(!1)},[]),Y=u.useCallback(async d=>{try{const{getChat:D}=await Wt(async()=>{const{getChat:O}=await Promise.resolve().then(()=>qt);return{getChat:O}},void 0);return await D(d)}catch(D){throw console.error("Error loading chat info:",D),p("Ошибка загрузки информации о чате"),D}},[]),H=u.useCallback(async(d,D)=>{try{await ir(d,D),p(null),s&&s.id===d&&setTimeout(()=>w(),1e3)}catch(R){throw console.error("Error adding member to chat:",R),p("Ошибка добавления участника"),R}},[s,w]),z=u.useCallback(async(d,D)=>{try{await lr(d,D),p(null),s&&s.id===d&&setTimeout(()=>w(),1e3)}catch(R){throw console.error("Error removing member from chat:",R),p("Ошибка удаления участника"),R}},[s,w]);return u.useEffect(()=>{T(),A(),h()},[T,A,h]),u.useEffect(()=>{if(y)return;const d=setInterval(()=>{w()},3e4);return()=>clearInterval(d)},[y,w]),u.useEffect(()=>{if(!s||y)return;const d=setInterval(()=>{I(s.id)},5e3);return()=>clearInterval(d)},[s,y,I]),u.useEffect(()=>{if(y)return;const d=setInterval(async()=>{var D;try{const R=await Vt(),O=_t(R);c(O),w()}catch(R){((D=R.response)==null?void 0:D.status)===404?console.log("Check invitations endpoint not available (404) - skipping"):console.log("No new invitations or error:",R)}},12e4);return()=>clearInterval(d)},[y,w]),{chats:e,currentChat:s,messages:x,currentUser:a,loading:l,messagesLoading:j,error:g||m,isAuthError:y,hasNewMessages:v,markMessagesAsViewed:q,sendNewMessage:P,createNewChat:$,selectChat:V,refreshChats:w,refreshMessages:()=>s&&E(s.id),loadChatInfo:Y,addMemberToChat:H,removeMemberFromChat:z,clearCurrentChat:_,checkNewMessages:()=>s&&I(s.id)}},Ua=({open:t,onClose:e})=>{const[o,s]=u.useState([]),[n,a]=u.useState(!1),c=async()=>{var C,x,j;a(!0);const f=[];try{const m=rr();f.push({name:"Telegram WebApp",status:m?"success":"warning",message:m?"Приложение запущено в Telegram WebApp":"Приложение запущено вне Telegram (режим разработки)",details:m?"Все функции Telegram WebApp доступны":"Некоторые функции могут работать с ограничениями",suggestions:m?void 0:["Откройте приложение через Telegram бота","Проверьте настройки WebApp в боте"]})}catch(m){f.push({name:"Telegram WebApp",status:"error",message:"Ошибка при проверке Telegram WebApp",details:m instanceof Error?m.message:"Неизвестная ошибка"})}try{const m=Le();f.push({name:"Telegram Init Data",status:m?"success":"error",message:m?`Данные авторизации найдены (${m.length} символов)`:"Данные авторизации отсутствуют",details:m?`Подпись: ${m.substring(0,50)}...`:"Невозможно получить данные для авторизации на сервере",suggestions:m?void 0:["Перезапустите приложение из Telegram","Проверьте настройки бота","Убедитесь что WebApp правильно настроен"]})}catch(m){f.push({name:"Telegram Init Data",status:"error",message:"Ошибка при получении данных авторизации",details:m instanceof Error?m.message:"Неизвестная ошибка"})}try{await fr(),f.push({name:"Подключение к серверу",status:"success",message:"Сервер отвечает на запросы",details:"Health check прошел успешно"})}catch(m){const b=m.isMethodError||((C=m.response)==null?void 0:C.status)===405;f.push({name:"Подключение к серверу",status:b?"warning":"error",message:b?"Сервер доступен, но некоторые endpoints могут не работать (ошибка 405)":"Сервер недоступен или не отвечает",details:m.message||"Неизвестная ошибка сервера",suggestions:b?["Проверьте настройки API на сервере","Убедитесь что все endpoints правильно настроены","Свяжитесь с администратором сервера"]:["Проверьте подключение к интернету","Сервер может быть временно недоступен","Попробуйте позже"]})}try{await gr(),f.push({name:"Конфигурация авторизации",status:"success",message:"Настройки авторизации на сервере корректны",details:"Сервер готов к обработке Telegram авторизации"})}catch(m){const b=m.isMethodError||((x=m.response)==null?void 0:x.status)===405;f.push({name:"Конфигурация авторизации",status:b?"warning":"error",message:b?"Endpoint диагностики недоступен (405), но это не критично":"Проблема с настройками авторизации на сервере",details:m.message||"Ошибка при проверке конфигурации",suggestions:b?["Функция диагностики может быть отключена на сервере","Это не влияет на основную работу приложения"]:["Проверьте настройки Telegram бота на сервере","Убедитесь что TELEGRAM_BOT_TOKEN настроен правильно"]})}const v=Le();if(v)try{await mr(v),f.push({name:"Валидация Telegram данных",status:"success",message:"Данные Telegram проходят валидацию на сервере",details:"Подпись данных корректна"})}catch(m){const b=m.isMethodError||((j=m.response)==null?void 0:j.status)===405;f.push({name:"Валидация Telegram данных",status:b?"warning":"error",message:b?"Endpoint валидации недоступен (405)":"Данные Telegram не проходят валидацию",details:m.message||"Ошибка валидации данных",suggestions:b?["Endpoint валидации может быть отключен","Попробуйте основные функции приложения"]:["Данные авторизации могли быть повреждены","Перезапустите приложение из Telegram","Проверьте настройки бота"]})}s(f),a(!1)};u.useEffect(()=>{t&&c()},[t]);const l=f=>{switch(f){case"success":return r.jsx(is,{sx:{color:"#4CAF50"}});case"error":return r.jsx(Da,{sx:{color:"#f44336"}});case"warning":return r.jsx(ka,{sx:{color:"#ff9800"}});case"loading":return r.jsx(Ae,{size:24});default:return r.jsx(er,{sx:{color:"#2196f3"}})}},i=f=>{switch(f){case"success":return"#4CAF50";case"error":return"#f44336";case"warning":return"#ff9800";default:return"#2196f3"}},g=o.filter(f=>f.status==="error").length,p=o.filter(f=>f.status==="warning").length,y=o.filter(f=>f.status==="success").length;return r.jsxs(At,{open:t,onClose:e,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{bgcolor:"rgba(35, 43, 59, 0.95)",color:"white",maxHeight:"90vh"}},children:[r.jsxs(Mt,{children:[r.jsxs(L,{sx:{display:"flex",alignItems:"center",gap:2},children:[r.jsx(B,{variant:"h6",children:"Диагностика системы"}),n&&r.jsx(Ae,{size:24})]}),!n&&o.length>0&&r.jsxs(L,{sx:{display:"flex",gap:1,mt:1},children:[r.jsx(st,{label:`${y} успешно`,color:"success",size:"small"}),p>0&&r.jsx(st,{label:`${p} предупр.`,sx:{bgcolor:"#ff9800",color:"white"},size:"small"}),g>0&&r.jsx(st,{label:`${g} ошибок`,color:"error",size:"small"})]})]}),r.jsx(St,{sx:{pb:1},children:n?r.jsxs(L,{sx:{display:"flex",alignItems:"center",gap:2,py:4},children:[r.jsx(Ae,{}),r.jsx(B,{children:"Выполняется диагностика..."})]}):r.jsxs(L,{sx:{display:"flex",flexDirection:"column",gap:1},children:[o.map((f,v)=>r.jsxs(xs,{sx:{bgcolor:"rgba(255, 255, 255, 0.05)","&:before":{display:"none"},"&.Mui-expanded":{margin:"8px 0"}},children:[r.jsx(Ps,{expandIcon:r.jsx(Ra,{sx:{color:"white"}}),children:r.jsxs(L,{sx:{display:"flex",alignItems:"center",gap:2,width:"100%"},children:[l(f.status),r.jsx(B,{sx:{fontWeight:500,flex:1},children:f.name}),r.jsx(st,{label:f.status==="success"?"OK":f.status==="error"?"Ошибка":"Внимание",size:"small",sx:{bgcolor:i(f.status),color:"white",minWidth:80}})]})}),r.jsxs(Cs,{children:[r.jsx(B,{variant:"body2",sx:{mb:1},children:f.message}),f.details&&r.jsxs(r.Fragment,{children:[r.jsx(ho,{sx:{my:1,bgcolor:"rgba(255,255,255,0.1)"}}),r.jsxs(B,{variant:"caption",sx:{color:"#8b95a1"},children:["Детали: ",f.details]})]}),f.suggestions&&f.suggestions.length>0&&r.jsxs(r.Fragment,{children:[r.jsx(ho,{sx:{my:1,bgcolor:"rgba(255,255,255,0.1)"}}),r.jsx(B,{variant:"caption",sx:{color:"#8b95a1",display:"block",mb:.5},children:"Рекомендации:"}),f.suggestions.map((C,x)=>r.jsxs(B,{variant:"caption",sx:{color:"#8b95a1",display:"block",ml:2},children:["• ",C]},x))]})]})]},v)),g>0&&r.jsx(ke,{severity:"error",sx:{mt:2,bgcolor:"rgba(244, 67, 54, 0.1)"},children:r.jsx(B,{variant:"body2",children:"Обнаружены критические ошибки. Рекомендуется перезапустить приложение из Telegram."})}),g===0&&p>0&&r.jsx(ke,{severity:"warning",sx:{mt:2,bgcolor:"rgba(255, 152, 0, 0.1)"},children:r.jsx(B,{variant:"body2",children:"Есть некритичные проблемы. Основные функции должны работать."})}),g===0&&p===0&&o.length>0&&r.jsx(ke,{severity:"success",sx:{mt:2,bgcolor:"rgba(76, 175, 80, 0.1)"},children:r.jsx(B,{variant:"body2",children:"Все проверки прошли успешно! Система работает корректно."})})]})}),r.jsxs(to,{children:[r.jsx(de,{onClick:()=>c(),disabled:n,children:"Повторить диагностику"}),r.jsx(de,{onClick:e,variant:"contained",children:"Закрыть"})]})]})},hr=({currentPhotoUrl:t,onPhotoChange:e,disabled:o=!1,size:s=80})=>{const[n,a]=u.useState(!1),[c,l]=u.useState(null),[i,g]=u.useState(t||null),p=u.useRef(null),y=x=>{var b;const j=(b=x.target.files)==null?void 0:b[0];if(!j)return;if(!j.type.startsWith("image/")){l("Пожалуйста, выберите изображение");return}if(j.size>5*1024*1024){l("Размер файла не должен превышать 5MB");return}const m=new FileReader;m.onload=S=>{var T;g((T=S.target)==null?void 0:T.result)},m.readAsDataURL(j),f(j)},f=async x=>{var j,m,b,S,T;try{a(!0),l(null),console.log("Загружаем файл:",x.name,x.size,x.type);const A=await dr(x);e(A.media_url),g(A.media_url),console.log("Фото успешно загружено:",A.media_url)}catch(A){console.error("Error uploading photo:",A);let h="Ошибка загрузки фото";((j=A.response)==null?void 0:j.status)===405?(h="Загрузка фото временно недоступна",console.warn("405 Error: uploadMedia endpoint may not be available")):((m=A.response)==null?void 0:m.status)===413?h="Файл слишком большой":((b=A.response)==null?void 0:b.status)===422?h="Неподдерживаемый формат файла":((S=A.response)==null?void 0:S.status)===401?h="Ошибка авторизации":A.isAuthError?h="Требуется авторизация в Telegram":A.code==="ECONNABORTED"?h="Превышено время ожидания":((T=A.response)==null?void 0:T.status)>=500&&(h="Ошибка сервера, попробуйте позже"),l(h),g(t||null)}finally{a(!1)}},v=()=>{g(null),e(null),l(null),p.current&&(p.current.value="")},C=()=>{var x;o||n||(x=p.current)==null||x.click()};return r.jsxs(L,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[r.jsxs(L,{sx:{position:"relative"},children:[r.jsx(lt,{src:i||void 0,sx:{width:s,height:s,bgcolor:"#4a9eff",cursor:o||n?"default":"pointer",border:c?"2px solid #f44336":"2px solid transparent","&:hover":{opacity:o||n?1:.8}},onClick:C,children:n?r.jsx(Ae,{size:s*.4,sx:{color:"white"}}):r.jsx(Oa,{sx:{fontSize:s*.4}})}),i&&!n&&r.jsx(We,{size:"small",sx:{position:"absolute",top:-8,right:-8,bgcolor:"#f44336",color:"white",width:24,height:24,"&:hover":{bgcolor:"#d32f2f"}},onClick:v,children:r.jsx(Ro,{sx:{fontSize:14}})}),n&&r.jsx(L,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"rgba(0,0,0,0.5)",borderRadius:"50%"},children:r.jsx(Ae,{size:s*.3,sx:{color:"white"}})})]}),r.jsxs(L,{sx:{display:"flex",gap:1},children:[r.jsx(de,{variant:"outlined",size:"small",startIcon:r.jsx(Pa,{}),onClick:C,disabled:o||n,sx:{borderColor:"#4a9eff",color:"#4a9eff","&:hover":{borderColor:"#3d8bdb",bgcolor:"rgba(74, 158, 255, 0.1)"}},children:n?"Загрузка...":"Выбрать фото"}),i&&r.jsx(oo,{title:"Удалить фото",children:r.jsx(We,{size:"small",onClick:v,disabled:o||n,sx:{color:"#f44336","&:hover":{bgcolor:"rgba(244, 67, 54, 0.1)"}},children:r.jsx(Ro,{})})})]}),r.jsxs(B,{variant:"caption",sx:{color:"#8b95a1",textAlign:"center"},children:["Нажмите на аватар или кнопку для выбора фото",r.jsx("br",{}),"Максимальный размер: 5MB",c&&r.jsxs(r.Fragment,{children:[r.jsx("br",{}),r.jsx("span",{style:{color:"#f44336"},children:c}),r.jsx("br",{}),r.jsx("span",{style:{color:"#8b95a1"},children:"Чат можно создать и без фото"})]})]}),r.jsx("input",{ref:p,type:"file",accept:"image/*",style:{display:"none"},onChange:y})]})},Fa=({open:t,onClose:e,currentChat:o,loadChatInfo:s,addMemberToChat:n,removeMemberFromChat:a,currentUserId:c,onChatPhotoUpdate:l})=>{var z;const[i,g]=u.useState(null),[p,y]=u.useState(!1),[f,v]=u.useState(null),[C,x]=u.useState(""),[j,m]=u.useState(""),[b,S]=u.useState("username"),[T,A]=u.useState(!1),[h,w]=u.useState(null),[E,I]=u.useState(!1);u.useEffect(()=>{t&&o&&P()},[t,o]);const P=async()=>{if(o)try{y(!0),v(null);const d=await s(o.id);g(d)}catch(d){v("Не удалось загрузить информацию о чате"),console.error("Error loading chat details:",d)}finally{y(!1)}},$=async d=>{o&&await n(o.id,d)},V=async d=>{if(!o)return;const D=await Ht(o.id,d);D.status==="added"?w({type:"success",message:`✅ @${d} найден и добавлен в чат!`}):D.status==="invited"&&w({type:"info",message:`📨 @${d} не найден в базе. Приглашение создано - пользователь будет добавлен при входе в приложение.`}),setTimeout(()=>w(null),5e3)},_=async()=>{if(!C.trim())return;const d=C.trim(),D=parseInt(d);try{A(!0),v(null),isNaN(D)?await V(d.replace(/^@/,"")):await $(D),x(""),await P()}catch(R){console.error("Error adding member (ID path):",R),v("Не удалось добавить участника")}finally{A(!1)}},q=async()=>{if(!(!j.trim()||!o))try{A(!0),v(null),w(null);const d=await Ht(o.id,j.trim());d.status==="added"?(w({type:"success",message:`✅ @${j.trim()} добавлен в чат!`}),m(""),await P()):d.status==="invited"&&(w({type:"info",message:`📨 Приглашение отправлено @${j.trim()}. Пользователь будет добавлен автоматически при входе в приложение.`}),m("")),setTimeout(()=>w(null),5e3)}catch(d){console.error("Error adding member by username:",d),w({type:"warning",message:"Не удалось добавить участника. Проверьте username и попробуйте снова."})}finally{A(!1)}},Y=async d=>{if(o)try{v(null),await a(o.id,d),await P()}catch(D){v("Не удалось удалить участника"),console.error("Error removing member:",D)}},H=d=>{i&&g({...i,photo_url:d}),l&&l(d),I(!1)};return o?r.jsxs(At,{open:t,onClose:e,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{bgcolor:"rgba(35, 43, 59, 0.95)",color:"white"}},children:[r.jsxs(Mt,{sx:{display:"flex",alignItems:"center",gap:2},children:[r.jsxs(L,{sx:{position:"relative"},children:[r.jsx(lt,{src:(i==null?void 0:i.photo_url)||o.photo_url||void 0,sx:{bgcolor:"#4a9eff",width:64,height:64},children:o.title?o.title[0].toUpperCase():r.jsx(vo,{})}),r.jsx(We,{onClick:()=>I(!0),sx:{position:"absolute",bottom:-4,right:-4,bgcolor:"#4a9eff",color:"white",width:24,height:24,"&:hover":{bgcolor:"#3d8bdb"}},children:r.jsx(Ma,{sx:{fontSize:14}})})]}),r.jsxs(L,{children:[r.jsx(B,{variant:"h6",children:o.title||"Безымянный чат"}),r.jsx(B,{variant:"caption",sx:{color:"#8b95a1"},children:o.chat_type==="private"?"Личный чат":"Групповой чат"})]})]}),r.jsxs(St,{children:[f&&r.jsx(ke,{severity:"error",sx:{mb:2},children:f}),p?r.jsx(L,{sx:{display:"flex",justifyContent:"center",py:3},children:r.jsx(Ae,{sx:{color:"#4a9eff"}})}):i?r.jsxs(r.Fragment,{children:[r.jsxs(L,{sx:{mb:3},children:[r.jsx(B,{variant:"subtitle1",sx:{mb:1,fontWeight:600},children:"Информация"}),r.jsxs(B,{variant:"body2",sx:{color:"#8b95a1",mb:1},children:["ID чата: ",i.id]}),r.jsxs(B,{variant:"body2",sx:{color:"#8b95a1",mb:1},children:["Создан: ",new Date(i.created_at).toLocaleDateString("ru-RU")]}),i.description&&r.jsxs(B,{variant:"body2",sx:{color:"#8b95a1"},children:["Описание: ",i.description]})]}),r.jsxs(L,{sx:{mb:3},children:[r.jsxs(B,{variant:"subtitle1",sx:{mb:2,fontWeight:600},children:["Участники (",((z=i.members)==null?void 0:z.length)||0,")"]}),i.members&&i.members.length>0?r.jsx($o,{sx:{maxHeight:200,overflow:"auto"},children:i.members.map(d=>r.jsxs(_o,{sx:{bgcolor:"rgba(43, 52, 65, 0.5)",borderRadius:1,mb:1},children:[r.jsx(Qo,{children:r.jsx(lt,{src:d.profile_photo_url||void 0,sx:{bgcolor:"#4a9eff"},children:d.first_name?d.first_name[0].toUpperCase():r.jsx(vo,{})})}),r.jsx(Bo,{primary:r.jsxs(L,{sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsxs(B,{children:[d.first_name," ",d.last_name]}),d.is_admin&&r.jsx(st,{icon:r.jsx(as,{}),label:"Админ",size:"small",sx:{bgcolor:"#4a9eff",color:"white",fontSize:"0.7rem"}})]}),secondary:r.jsx(B,{variant:"caption",sx:{color:"#8b95a1"},children:d.username?`@${d.username}`:`ID: ${d.telegram_id}`})}),c!==d.telegram_id&&r.jsx(oo,{title:"Удалить участника",children:r.jsx(We,{onClick:()=>Y(d.telegram_id),sx:{color:"#f44336","&:hover":{bgcolor:"rgba(244, 67, 54, 0.1)"}},children:r.jsx(Ea,{})})})]},d.id))}):r.jsx(B,{variant:"body2",sx:{color:"#8b95a1",textAlign:"center",py:2},children:"Нет участников"})]}),r.jsxs(L,{children:[r.jsx(B,{variant:"subtitle1",sx:{mb:2,fontWeight:600},children:"Добавить участника"}),h&&r.jsx(ke,{severity:h.type==="success"?"success":h.type==="info"?"info":"warning",sx:{mb:2,"& .MuiAlert-message":{color:"white"},bgcolor:h.type==="success"?"rgba(76, 175, 80, 0.2)":h.type==="info"?"rgba(33, 150, 243, 0.2)":"rgba(255, 152, 0, 0.2)",border:`1px solid ${h.type==="success"?"#4CAF50":h.type==="info"?"#2196F3":"#FF9800"}`},children:h.message}),r.jsxs(L,{sx:{display:"flex",gap:1,mb:2},children:[r.jsx(de,{variant:b==="username"?"contained":"outlined",onClick:()=>S("username"),size:"small",sx:{bgcolor:b==="username"?"#4a9eff":"transparent",color:b==="username"?"white":"#4a9eff",borderColor:"#4a9eff","&:hover":{bgcolor:b==="username"?"#3d8bdb":"rgba(74, 158, 255, 0.1)"}},children:"По @username"}),r.jsx(de,{variant:b==="id"?"contained":"outlined",onClick:()=>S("id"),size:"small",sx:{bgcolor:b==="id"?"#4a9eff":"transparent",color:b==="id"?"white":"#4a9eff",borderColor:"#4a9eff","&:hover":{bgcolor:b==="id"?"#3d8bdb":"rgba(74, 158, 255, 0.1)"}},children:"По ID (авто)"})]}),b==="username"?r.jsxs(L,{sx:{display:"flex",gap:1},children:[r.jsx(nt,{size:"small",placeholder:"@username пользователя",value:j,onChange:d=>m(d.target.value),helperText:"💡 Если пользователь уже использовал приложение - добавится сразу. Если нет - получит приглашение.",sx:{flex:1,"& .MuiOutlinedInput-root":{color:"white","& fieldset":{borderColor:"rgba(255, 255, 255, 0.3)"},"&:hover fieldset":{borderColor:"#4a9eff"},"&.Mui-focused fieldset":{borderColor:"#4a9eff"}},"& .MuiFormHelperText-root":{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem"}}}),r.jsx(de,{variant:"contained",onClick:q,disabled:!j.trim()||T,startIcon:T?r.jsx(Ae,{size:16}):r.jsx(Eo,{}),sx:{bgcolor:"#4a9eff","&:hover":{bgcolor:"#3d8bdb"},minWidth:"120px"},children:T?"Поиск...":"Добавить"})]}):r.jsxs(L,{sx:{display:"flex",gap:1},children:[r.jsx(nt,{size:"small",placeholder:"ID или @username",value:C,onChange:d=>x(d.target.value),helperText:"💡 Можете ввести как Telegram ID (числа), так и @username - система определит автоматически",sx:{flex:1,"& .MuiOutlinedInput-root":{color:"white","& fieldset":{borderColor:"rgba(255, 255, 255, 0.3)"},"&:hover fieldset":{borderColor:"#4a9eff"},"&.Mui-focused fieldset":{borderColor:"#4a9eff"}},"& .MuiFormHelperText-root":{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem"}}}),r.jsx(de,{variant:"contained",onClick:_,disabled:!C.trim()||T,startIcon:T?r.jsx(Ae,{size:16}):r.jsx(Eo,{}),sx:{bgcolor:"#4a9eff","&:hover":{bgcolor:"#3d8bdb"},minWidth:"120px"},children:T?"Поиск...":"Добавить"})]})]})]}):r.jsx(B,{variant:"body2",sx:{textAlign:"center",py:3,color:"#8b95a1"},children:"Не удалось загрузить информацию о чате"})]}),r.jsx(to,{children:r.jsx(de,{onClick:e,sx:{color:"#8b95a1"},children:"Закрыть"})}),r.jsxs(At,{open:E,onClose:()=>I(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{bgcolor:"rgba(35, 43, 59, 0.95)",color:"white"}},children:[r.jsx(Mt,{children:"Изменить фото чата"}),r.jsxs(St,{children:[r.jsx(hr,{currentPhotoUrl:(i==null?void 0:i.photo_url)||o.photo_url||void 0,onPhotoChange:d=>{d?H(d):(i&&g({...i,photo_url:void 0}),l&&l(""))}}),r.jsx(L,{sx:{display:"flex",gap:1,mt:2,justifyContent:"flex-end"},children:r.jsx(de,{onClick:()=>I(!1),sx:{color:"#8b95a1"},children:"Отмена"})})]})]})]}):null},ei=()=>{const t=Pt(),e=Jr(t.breakpoints.down("md")),[o,s]=u.useState(""),[n,a]=u.useState(!1),[c,l]=u.useState(""),[i,g]=u.useState(""),[p,y]=u.useState(null),[f,v]=u.useState(null),[C,x]=u.useState(!1),[j,m]=u.useState(!1),[b,S]=u.useState(!1),T=u.useRef(null),{chats:A,currentChat:h,messages:w,currentUser:E,loading:I,messagesLoading:P,error:$,isAuthError:V,hasNewMessages:_,markMessagesAsViewed:q,sendNewMessage:Y,createNewChat:H,selectChat:z,loadChatInfo:d,addMemberToChat:D,removeMemberFromChat:R,clearCurrentChat:O}=Na(),W=()=>{var M;(M=T.current)==null||M.scrollIntoView({behavior:"smooth"})},G=()=>{O()};u.useEffect(W,[w]),u.useEffect(()=>{if(_&&w.length>0){const M=setTimeout(()=>{q()},2e3);return()=>clearTimeout(M)}},[_,w.length,q]);const F=async()=>{if(!(!o.trim()||!h))try{q(),await Y(h.id,o.trim()),s(""),W()}catch(M){console.error("Error sending message:",M)}},K=M=>{M.key==="Enter"&&!M.shiftKey&&(M.preventDefault(),F())},k=async()=>{var M,Z;try{x(!0),v(null);const N=[],Q=[];i.trim()&&i.split(",").map(ie=>ie.trim()).filter(ie=>ie.length>0).forEach(ie=>{const Me=parseInt(ie);!isNaN(Me)&&Me>0?N.push(Me):Q.push(ie.replace(/^@/,""))}),await H(c.trim(),N,Q,p||void 0);let Se=`✅ Чат "${c.trim()}" создан успешно!`;N.length>0&&(Se+=` Добавлено ${N.length} участников.`),Q.length>0&&(Se+=` Отправлено ${Q.length} приглашений по username.`),v({type:"success",message:Se}),setTimeout(()=>{v(null),a(!1)},2e3),l(""),g(""),y(null)}catch(N){console.error("Error creating chat:",N);let Q="Не удалось создать чат. Попробуйте еще раз.";N!=null&&N.isTimeoutError?Q="⏱️ Сервер запускается, это может занять до минуты. Попробуйте еще раз.":N!=null&&N.isServiceError?Q="🔧 Сервер временно недоступен. Попробуйте через несколько минут.":N!=null&&N.isAuthError?Q="🔐 Ошибка авторизации. Откройте приложение из Telegram.":(N==null?void 0:N.code)==="ECONNABORTED"?Q="⏱️ Превышено время ожидания. Сервер может запускаться - попробуйте еще раз.":((M=N==null?void 0:N.response)==null?void 0:M.status)===503?Q="🔧 Сервер временно недоступен. Попробуйте через несколько минут.":((Z=N==null?void 0:N.response)==null?void 0:Z.status)===500&&(Q="⚠️ Ошибка на сервере. Попробуйте еще раз или обратитесь в поддержку."),v({type:"warning",message:Q})}finally{x(!1)}},X=M=>new Date(M).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"}),J=M=>{const Z=new Date(M),N=new Date,Q=new Date(N);return Q.setDate(Q.getDate()-1),Z.toDateString()===N.toDateString()?"Сегодня":Z.toDateString()===Q.toDateString()?"Вчера":Z.toLocaleDateString("ru-RU",{day:"numeric",month:"short"})},ne=M=>{const Z=M.sender;return Z.username?`@${Z.username}`:`${Z.first_name}${Z.last_name?` ${Z.last_name}`:""}`},ae=M=>E&&M.sender_id===E.id;return I?r.jsx(L,{sx:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"rgba(35, 43, 59, 0.95)"},children:r.jsx(Ae,{sx:{color:"#4a9eff"}})}):V?r.jsxs(L,{sx:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",bgcolor:"rgba(35, 43, 59, 0.95)",p:3},children:[r.jsxs(ke,{severity:"error",sx:{mb:3,maxWidth:"600px"},children:[r.jsx(B,{variant:"h6",sx:{mb:2},children:"🚫 Ошибка авторизации"}),r.jsx(B,{variant:"body1",sx:{mb:2,fontWeight:"bold"},children:"Проблема с авторизацией на сервере"}),r.jsx(B,{variant:"body2",sx:{mb:2},children:"Сервер отклоняет авторизацию. Возможные причины:"}),r.jsxs(B,{variant:"body2",component:"ul",sx:{pl:2,mb:2},children:[r.jsx("li",{children:"На сервере не настроен токен Telegram бота"}),r.jsx("li",{children:"Неправильный или истёкший токен бота"}),r.jsx("li",{children:"Проблема с подписью данных авторизации"}),r.jsx("li",{children:"Приложение запущено не из Telegram"})]}),r.jsx(B,{variant:"body2",sx:{mb:2},children:r.jsx("strong",{children:"Что делать:"})}),r.jsxs(B,{variant:"body2",component:"ul",sx:{pl:2,mb:2},children:[r.jsx("li",{children:'Нажмите "Диагностика" для подробной проверки'}),r.jsx("li",{children:"Убедитесь, что приложение открыто из Telegram"}),r.jsx("li",{children:"Если вы администратор - проверьте настройки сервера"}),r.jsx("li",{children:"Если проблема повторяется - обратитесь в поддержку"})]})]}),r.jsxs(L,{sx:{display:"flex",gap:2,flexWrap:"wrap",justifyContent:"center"},children:[r.jsx(de,{variant:"contained",onClick:()=>m(!0),sx:{bgcolor:"#f44336","&:hover":{bgcolor:"#d32f2f"}},children:"🔬 Диагностика проблемы"}),r.jsx(de,{variant:"outlined",onClick:()=>{var M;(M=window.Telegram)!=null&&M.WebApp?window.Telegram.WebApp.close():window.history.back()},sx:{borderColor:"#4a9eff",color:"#4a9eff","&:hover":{borderColor:"#3d8bdb",color:"#3d8bdb"}},children:"⬅️ Назад"})]})]}):r.jsxs(L,{sx:{height:"100vh",display:"flex",bgcolor:"rgba(35, 43, 59, 0.95)",color:"white",overflow:"hidden"},children:[r.jsxs(L,{sx:{width:e?"100%":"350px",display:e&&h?"none":"flex",flexDirection:"column",borderRight:"1px solid rgba(43, 52, 65, 1)",bgcolor:"rgba(35, 43, 59, 0.95)"},children:[r.jsx(L,{sx:{p:e?1:2,borderBottom:"1px solid rgba(43, 52, 65, 1)",display:"flex",alignItems:"center",justifyContent:"space-between",minHeight:e?"52px":"auto"},children:r.jsxs(L,{sx:{display:"flex",alignItems:"center",gap:1,cursor:"pointer",p:1,borderRadius:2,"&:hover":{bgcolor:"rgba(74, 158, 255, 0.1)"},"&:active":{bgcolor:"rgba(74, 158, 255, 0.2)"}},onClick:()=>a(!0),onContextMenu:M=>{M.preventDefault(),a(!0)},children:[r.jsx(B,{variant:e?"body1":"h6",sx:{fontWeight:600,fontSize:e?"1rem":"inherit"},children:"Чаты"}),r.jsx(B,{variant:"caption",sx:{color:"#8b95a1",fontSize:e?"0.6rem":"0.7rem",ml:.5},children:"(нажмите для создания)"})]})}),r.jsx($o,{sx:{flex:1,overflow:"auto",p:0},children:A.map(M=>r.jsx(po.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:r.jsx(_o,{disablePadding:!0,sx:{borderBottom:"1px solid rgba(43, 52, 65, 0.5)"},children:r.jsxs(Zr,{selected:(h==null?void 0:h.id)===M.id,onClick:()=>z(M),sx:{py:e?1.25:1.5,px:e?1:2,bgcolor:(h==null?void 0:h.id)===M.id?"rgba(74, 158, 255, 0.1)":"transparent","&:hover":{bgcolor:(h==null?void 0:h.id)===M.id?"rgba(74, 158, 255, 0.15)":"rgba(255, 255, 255, 0.05)"},minHeight:e?64:"auto"},children:[r.jsx(Qo,{children:r.jsx(Yn,{badgeContent:M.unread_count,color:"error",invisible:M.unread_count===0,children:r.jsx(lt,{src:M.photo_url||void 0,sx:{bgcolor:"#4a9eff",width:e?44:45,height:e?44:45},children:M.title?M.title[0].toUpperCase():r.jsx($t,{})})})}),r.jsx(Bo,{primary:r.jsx(B,{variant:"body1",sx:{fontWeight:M.unread_count>0?600:400,color:"white",fontSize:e?"0.9rem":"inherit"},children:M.title||"Безымянный чат"}),secondary:r.jsxs(L,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx(B,{variant:"caption",sx:{color:"#8b95a1",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:e?"120px":"150px",fontSize:e?"0.75rem":"inherit"},children:M.last_message||"Нет сообщений"}),M.last_message_time&&r.jsx(B,{variant:"caption",sx:{color:"#8b95a1",fontSize:e?"0.65rem":"0.7rem",ml:1},children:J(M.last_message_time)})]})})]})})},M.id))})]}),r.jsx(L,{sx:{flex:1,display:"flex",flexDirection:"column",position:"relative"},children:h?r.jsxs(r.Fragment,{children:[r.jsxs(L,{sx:{position:"fixed",top:0,left:e?0:"350px",right:0,zIndex:1300,p:e?.75:2,borderBottom:"1px solid rgba(43, 52, 65, 1)",bgcolor:"rgba(35, 43, 59, 0.98)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",display:"flex",alignItems:"center",justifyContent:"space-between",minHeight:e?"56px":"64px",boxShadow:"0 2px 20px rgba(0,0,0,0.15)"},children:[r.jsxs(L,{sx:{display:"flex",alignItems:"center",flex:1},children:[e&&r.jsx(We,{onClick:G,sx:{color:"#4a9eff",mr:.5,p:.5,"&:hover":{bgcolor:"rgba(74, 158, 255, 0.1)"}},children:r.jsx(Sa,{})}),r.jsx(lt,{src:h.photo_url||void 0,sx:{bgcolor:"#4a9eff",width:e?32:40,height:e?32:40,mr:e?1:2},children:h.title?h.title[0].toUpperCase():r.jsx($t,{})}),r.jsxs(L,{sx:{flex:1,minWidth:0},children:[r.jsxs(B,{variant:e?"body2":"h6",sx:{fontWeight:600,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:e?.5:1,fontSize:e?"0.875rem":"inherit"},children:[h.title||"Безымянный чат",_&&r.jsx(L,{sx:{width:e?6:8,height:e?6:8,borderRadius:"50%",bgcolor:"#4CAF50",animation:"pulse 2s infinite","@keyframes pulse":{"0%":{transform:"scale(1)",opacity:1},"50%":{transform:"scale(1.2)",opacity:.7},"100%":{transform:"scale(1)",opacity:1}}}})]}),r.jsxs(B,{variant:"caption",sx:{color:"#8b95a1",fontSize:e?"0.65rem":"0.75rem",lineHeight:e?1.2:"inherit"},children:[h.chat_type==="private"?"Личный чат":"Групповой чат",_&&(e?" • Новые":" • Новые сообщения")]})]})]}),r.jsx(L,{sx:{display:"flex",gap:e?.25:1},children:r.jsx(oo,{title:"Информация о чате",children:r.jsx(We,{onClick:()=>S(!0),sx:{color:"#4a9eff",p:e?.5:1.5,"&:hover":{bgcolor:"rgba(74, 158, 255, 0.1)"}},children:r.jsx(er,{fontSize:e?"small":"medium"})})})})]}),r.jsxs(L,{sx:{flex:1,overflow:"auto",p:e?.5:1.5,pt:e?7:9,bgcolor:"rgba(35, 43, 59, 0.95)",backgroundImage:`url(${uo})`,backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"local",position:"relative","&::-webkit-scrollbar":{width:e?"3px":"6px"},"&::-webkit-scrollbar-track":{background:"transparent"},"&::-webkit-scrollbar-thumb":{background:"rgba(255, 255, 255, 0.2)",borderRadius:e?"1.5px":"3px"},"&::-webkit-scrollbar-thumb:hover":{background:"rgba(255, 255, 255, 0.3)"}},children:[$&&r.jsx(ke,{severity:"error",sx:{mb:e?1:2},children:$}),P?r.jsx(L,{sx:{display:"flex",justifyContent:"center",py:e?2:4},children:r.jsx(Ae,{sx:{color:"#4a9eff"}})}):r.jsx(Aa,{children:w.map(M=>r.jsx(po.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},style:{display:"flex",justifyContent:ae(M)?"flex-end":"flex-start",marginBottom:e?"8px":"12px"},children:r.jsxs(L,{sx:{maxWidth:e?"85%":"70%",px:e?1.25:2,py:e?.75:1.2,borderRadius:ae(M)?"18px 18px 4px 18px":"18px 18px 18px 4px",bgcolor:ae(M)?"#4a9eff":"rgba(43, 52, 65, 0.9)",color:"white",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",wordBreak:"break-word"},children:[!ae(M)&&r.jsx(B,{variant:"caption",sx:{color:"#40C4FF",fontWeight:600,display:"block",mb:e?.25:.5,fontSize:e?"0.7rem":"0.75rem"},children:ne(M)}),r.jsx(B,{variant:"body1",sx:{mb:e?.25:.5,fontSize:e?"0.875rem":"0.95rem",lineHeight:e?1.3:1.4},children:M.text}),r.jsx(B,{variant:"caption",sx:{opacity:.7,fontSize:e?"0.6rem":"0.7rem",display:"block",textAlign:"right",mt:e?.125:.25,color:ae(M)?"rgba(255,255,255,0.8)":"#8b95a1"},children:X(M.created_at)})]})},M.id))}),r.jsx("div",{ref:T})]}),r.jsxs(L,{sx:{p:e?1:2,bgcolor:"rgba(35, 43, 59, 0.95)",display:"flex",gap:e?.75:1.5,alignItems:"flex-end",borderTop:"1px solid rgba(43, 52, 65, 1)",pb:e?"max(1rem, env(safe-area-inset-bottom))":2},children:[r.jsx(nt,{fullWidth:!0,multiline:!0,maxRows:e?2:4,value:o,onChange:M=>s(M.target.value),onKeyPress:K,placeholder:"Напишите сообщение...",variant:"outlined",size:"small",sx:{"& .MuiOutlinedInput-root":{borderRadius:e?"16px":"20px",bgcolor:"rgba(35, 46, 60, 1)",border:"none",fontSize:e?"0.875rem":"0.95rem",color:"white","& fieldset":{border:"1px solid rgba(60, 72, 84, 1)"},"&:hover fieldset":{border:"1px solid #4a9eff"},"&.Mui-focused fieldset":{border:"2px solid #4a9eff"},"& .MuiInputBase-input":{padding:e?"8px 12px":"12px 16px",color:"white","&::placeholder":{color:"rgba(255, 255, 255, 0.5)",opacity:1}}}}}),r.jsx(We,{onClick:F,disabled:!o.trim(),size:"medium",sx:{bgcolor:"#4a9eff",color:"white",width:e?36:44,height:e?36:44,minWidth:e?36:44,minHeight:e?36:44,"&:hover":{bgcolor:"#3d8bdb",transform:"scale(1.05)"},"&:disabled":{bgcolor:"rgba(60, 72, 84, 1)",color:"#8b95a1"},transition:"all 0.2s ease"},children:r.jsx(ls,{sx:{fontSize:e?"1rem":"1.2rem"}})})]})]}):r.jsx(L,{sx:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",bgcolor:"rgba(35, 43, 59, 0.95)",backgroundImage:`url(${uo})`,backgroundSize:"cover",backgroundPosition:"center",backgroundBlendMode:"overlay"},children:r.jsxs(L,{sx:{textAlign:"center"},children:[r.jsx($t,{sx:{fontSize:80,color:"#4a9eff",mb:2}}),r.jsx(B,{variant:"h5",sx:{mb:1,color:"white"},children:"Выберите чат"}),r.jsx(B,{variant:"body1",sx:{color:"#8b95a1"},children:"Выберите чат из списка или создайте новый"})]})})}),r.jsxs(At,{open:n,onClose:()=>{a(!1),v(null),y(null)},maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{bgcolor:"rgba(35, 43, 59, 0.95)",color:"white"}},children:[r.jsx(Mt,{children:"Создать новый чат"}),r.jsxs(St,{children:[f&&r.jsx(ke,{severity:f.type==="success"?"success":"warning",sx:{mb:2,"& .MuiAlert-message":{color:"white"},bgcolor:f.type==="success"?"rgba(76, 175, 80, 0.2)":"rgba(255, 152, 0, 0.2)",border:`1px solid ${f.type==="success"?"#4CAF50":"#FF9800"}`},children:f.message}),r.jsx(nt,{autoFocus:!0,margin:"dense",label:"Название чата",fullWidth:!0,variant:"outlined",value:c,onChange:M=>l(M.target.value),sx:{mb:2,"& .MuiOutlinedInput-root":{color:"white","& fieldset":{borderColor:"rgba(255, 255, 255, 0.3)"},"&:hover fieldset":{borderColor:"#4a9eff"},"&.Mui-focused fieldset":{borderColor:"#4a9eff"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.7)","&.Mui-focused":{color:"#4a9eff"}}}}),r.jsx(nt,{margin:"dense",label:"Участники (ID или @username, через запятую)",fullWidth:!0,variant:"outlined",placeholder:"Например: 123456789, @username, 987654321, @user2",value:i,onChange:M=>g(M.target.value),helperText:"💡 Поддерживаются как Telegram ID (числа), так и @username. Если пользователь не найден по username - получит приглашение.",sx:{mb:1,"& .MuiOutlinedInput-root":{color:"white","& fieldset":{borderColor:"rgba(255, 255, 255, 0.3)"},"&:hover fieldset":{borderColor:"#4a9eff"},"&.Mui-focused fieldset":{borderColor:"#4a9eff"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.7)","&.Mui-focused":{color:"#4a9eff"}},"& .MuiFormHelperText-root":{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem"}}}),r.jsxs(L,{sx:{mt:3,mb:2},children:[r.jsx(B,{variant:"subtitle2",sx:{mb:2,color:"rgba(255, 255, 255, 0.8)"},children:"Фото чата (необязательно)"}),r.jsx(hr,{currentPhotoUrl:p||void 0,onPhotoChange:y,disabled:C,size:100})]})]}),r.jsxs(to,{children:[r.jsx(de,{onClick:()=>{a(!1),v(null)},sx:{color:"#8b95a1"},children:"Отмена"}),r.jsx(de,{onClick:k,disabled:!c.trim()||C,startIcon:C?r.jsx(Ae,{size:16}):void 0,sx:{bgcolor:"#4a9eff",color:"white","&:hover":{bgcolor:"#3d8bdb"},"&:disabled":{bgcolor:"rgba(60, 72, 84, 1)",color:"#8b95a1"}},children:C?"Создаём...":"Создать"})]})]}),r.jsx(Ua,{open:j,onClose:()=>m(!1)}),r.jsx(Fa,{open:b,onClose:()=>S(!1),currentChat:h,loadChatInfo:d,addMemberToChat:D,removeMemberFromChat:R,currentUserId:E==null?void 0:E.telegram_id,onChatPhotoUpdate:M=>{console.log("Chat photo updated:",M)}})]})};export{ei as default};
