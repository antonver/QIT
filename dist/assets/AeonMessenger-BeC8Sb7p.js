import{r as d,d as Se,g as Ae,j as o,t as Mt,Q as rr,i as De,a2 as Sr,e as Pe,s as re,v as se,f as ye,h as Q,l as Xe,o as ho,a as Lt,y as Ar,T as B,a4 as Dr,a5 as or,a0 as mt,U as ar,a6 as vo,n as Pr,a7 as sr,a8 as bo,a9 as xo,aa as Or,ab as yo,ac as wo,ad as Co,ae as jo,q as Oe,af as st,B as N,ag as wt,a1 as Rr,ah as Mr,b as To,m as nr,ai as So,c as ir}from"./index-ugtuY0BA.js";import{a as Ao,S as Do}from"./index-CJN16iYn.js";import{o as lr,P as Po,u as Oo,F as cr,M as Ro,B as Mo,a as _o,g as ko,G as Eo,T as rt}from"./TextField-Byc-He9d.js";import{u as _r,C as _e}from"./CircularProgress-CYYChRep.js";import{C as kr}from"./Chip-DJLzqdpx.js";import{A as Be}from"./Alert-B_imdosk.js";import{B as ce}from"./Button-CDXpJt97.js";import{I as We}from"./IconButton-CVToBmFk.js";const Er=t=>{const e=d.useRef({});return d.useEffect(()=>{e.current=t}),e.current};var ne="top",ue="bottom",fe="right",ie="left",Nt="auto",lt=[ne,ue,fe,ie],Fe="start",nt="end",Io="clippingParents",Ir="viewport",et="popper",$o="reference",pr=lt.reduce(function(t,e){return t.concat([e+"-"+Fe,e+"-"+nt])},[]),$r=[].concat(lt,[Nt]).reduce(function(t,e){return t.concat([e,e+"-"+Fe,e+"-"+nt])},[]),Wo="beforeRead",Bo="read",Lo="afterRead",No="beforeMain",Uo="main",zo="afterMain",Fo="beforeWrite",Ho="write",Vo="afterWrite",qo=[Wo,Bo,Lo,No,Uo,zo,Fo,Ho,Vo];function we(t){return t?(t.nodeName||"").toLowerCase():null}function pe(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Ne(t){var e=pe(t).Element;return t instanceof e||t instanceof Element}function de(t){var e=pe(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Ut(t){if(typeof ShadowRoot>"u")return!1;var e=pe(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function Xo(t){var e=t.state;Object.keys(e.elements).forEach(function(r){var a=e.styles[r]||{},s=e.attributes[r]||{},n=e.elements[r];!de(n)||!we(n)||(Object.assign(n.style,a),Object.keys(s).forEach(function(l){var i=s[l];i===!1?n.removeAttribute(l):n.setAttribute(l,i===!0?"":i)}))})}function Yo(t){var e=t.state,r={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,r.popper),e.styles=r,e.elements.arrow&&Object.assign(e.elements.arrow.style,r.arrow),function(){Object.keys(e.elements).forEach(function(a){var s=e.elements[a],n=e.attributes[a]||{},l=Object.keys(e.styles.hasOwnProperty(a)?e.styles[a]:r[a]),i=l.reduce(function(c,u){return c[u]="",c},{});!de(s)||!we(s)||(Object.assign(s.style,i),Object.keys(n).forEach(function(c){s.removeAttribute(c)}))})}}const Ko={name:"applyStyles",enabled:!0,phase:"write",fn:Xo,effect:Yo,requires:["computeStyles"]};function xe(t){return t.split("-")[0]}var Le=Math.max,Ct=Math.min,He=Math.round;function _t(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Wr(){return!/^((?!chrome|android).)*safari/i.test(_t())}function Ve(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!1);var a=t.getBoundingClientRect(),s=1,n=1;e&&de(t)&&(s=t.offsetWidth>0&&He(a.width)/t.offsetWidth||1,n=t.offsetHeight>0&&He(a.height)/t.offsetHeight||1);var l=Ne(t)?pe(t):window,i=l.visualViewport,c=!Wr()&&r,u=(a.left+(c&&i?i.offsetLeft:0))/s,p=(a.top+(c&&i?i.offsetTop:0))/n,v=a.width/s,j=a.height/n;return{width:v,height:j,top:p,right:u+v,bottom:p+j,left:u,x:u,y:p}}function zt(t){var e=Ve(t),r=t.offsetWidth,a=t.offsetHeight;return Math.abs(e.width-r)<=1&&(r=e.width),Math.abs(e.height-a)<=1&&(a=e.height),{x:t.offsetLeft,y:t.offsetTop,width:r,height:a}}function Br(t,e){var r=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(r&&Ut(r)){var a=e;do{if(a&&t.isSameNode(a))return!0;a=a.parentNode||a.host}while(a)}return!1}function Te(t){return pe(t).getComputedStyle(t)}function Go(t){return["table","td","th"].indexOf(we(t))>=0}function ke(t){return((Ne(t)?t.ownerDocument:t.document)||window.document).documentElement}function Tt(t){return we(t)==="html"?t:t.assignedSlot||t.parentNode||(Ut(t)?t.host:null)||ke(t)}function dr(t){return!de(t)||Te(t).position==="fixed"?null:t.offsetParent}function Jo(t){var e=/firefox/i.test(_t()),r=/Trident/i.test(_t());if(r&&de(t)){var a=Te(t);if(a.position==="fixed")return null}var s=Tt(t);for(Ut(s)&&(s=s.host);de(s)&&["html","body"].indexOf(we(s))<0;){var n=Te(s);if(n.transform!=="none"||n.perspective!=="none"||n.contain==="paint"||["transform","perspective"].indexOf(n.willChange)!==-1||e&&n.willChange==="filter"||e&&n.filter&&n.filter!=="none")return s;s=s.parentNode}return null}function ct(t){for(var e=pe(t),r=dr(t);r&&Go(r)&&Te(r).position==="static";)r=dr(r);return r&&(we(r)==="html"||we(r)==="body"&&Te(r).position==="static")?e:r||Jo(t)||e}function Ft(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function ot(t,e,r){return Le(t,Ct(e,r))}function Zo(t,e,r){var a=ot(t,e,r);return a>r?r:a}function Lr(){return{top:0,right:0,bottom:0,left:0}}function Nr(t){return Object.assign({},Lr(),t)}function Ur(t,e){return e.reduce(function(r,a){return r[a]=t,r},{})}var Qo=function(e,r){return e=typeof e=="function"?e(Object.assign({},r.rects,{placement:r.placement})):e,Nr(typeof e!="number"?e:Ur(e,lt))};function ea(t){var e,r=t.state,a=t.name,s=t.options,n=r.elements.arrow,l=r.modifiersData.popperOffsets,i=xe(r.placement),c=Ft(i),u=[ie,fe].indexOf(i)>=0,p=u?"height":"width";if(!(!n||!l)){var v=Qo(s.padding,r),j=zt(n),f=c==="y"?ne:ie,y=c==="y"?ue:fe,m=r.rects.reference[p]+r.rects.reference[c]-l[c]-r.rects.popper[p],x=l[c]-r.rects.reference[c],b=ct(n),S=b?c==="y"?b.clientHeight||0:b.clientWidth||0:0,T=m/2-x/2,g=v[f],w=S-j[p]-v[y],h=S/2-j[p]/2+T,A=ot(g,h,w),k=c;r.modifiersData[a]=(e={},e[k]=A,e.centerOffset=A-h,e)}}function ta(t){var e=t.state,r=t.options,a=r.element,s=a===void 0?"[data-popper-arrow]":a;s!=null&&(typeof s=="string"&&(s=e.elements.popper.querySelector(s),!s)||Br(e.elements.popper,s)&&(e.elements.arrow=s))}const ra={name:"arrow",enabled:!0,phase:"main",fn:ea,effect:ta,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function qe(t){return t.split("-")[1]}var oa={top:"auto",right:"auto",bottom:"auto",left:"auto"};function aa(t,e){var r=t.x,a=t.y,s=e.devicePixelRatio||1;return{x:He(r*s)/s||0,y:He(a*s)/s||0}}function ur(t){var e,r=t.popper,a=t.popperRect,s=t.placement,n=t.variation,l=t.offsets,i=t.position,c=t.gpuAcceleration,u=t.adaptive,p=t.roundOffsets,v=t.isFixed,j=l.x,f=j===void 0?0:j,y=l.y,m=y===void 0?0:y,x=typeof p=="function"?p({x:f,y:m}):{x:f,y:m};f=x.x,m=x.y;var b=l.hasOwnProperty("x"),S=l.hasOwnProperty("y"),T=ie,g=ne,w=window;if(u){var h=ct(r),A="clientHeight",k="clientWidth";if(h===pe(r)&&(h=ke(r),Te(h).position!=="static"&&i==="absolute"&&(A="scrollHeight",k="scrollWidth")),h=h,s===ne||(s===ie||s===fe)&&n===nt){g=ue;var M=v&&h===w&&w.visualViewport?w.visualViewport.height:h[A];m-=M-a.height,m*=c?1:-1}if(s===ie||(s===ne||s===ue)&&n===nt){T=fe;var O=v&&h===w&&w.visualViewport?w.visualViewport.width:h[k];f-=O-a.width,f*=c?1:-1}}var $=Object.assign({position:i},u&&oa),X=p===!0?aa({x:f,y:m},pe(r)):{x:f,y:m};if(f=X.x,m=X.y,c){var W;return Object.assign({},$,(W={},W[g]=S?"0":"",W[T]=b?"0":"",W.transform=(w.devicePixelRatio||1)<=1?"translate("+f+"px, "+m+"px)":"translate3d("+f+"px, "+m+"px, 0)",W))}return Object.assign({},$,(e={},e[g]=S?m+"px":"",e[T]=b?f+"px":"",e.transform="",e))}function sa(t){var e=t.state,r=t.options,a=r.gpuAcceleration,s=a===void 0?!0:a,n=r.adaptive,l=n===void 0?!0:n,i=r.roundOffsets,c=i===void 0?!0:i,u={placement:xe(e.placement),variation:qe(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,ur(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:l,roundOffsets:c})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,ur(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const na={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:sa,data:{}};var gt={passive:!0};function ia(t){var e=t.state,r=t.instance,a=t.options,s=a.scroll,n=s===void 0?!0:s,l=a.resize,i=l===void 0?!0:l,c=pe(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return n&&u.forEach(function(p){p.addEventListener("scroll",r.update,gt)}),i&&c.addEventListener("resize",r.update,gt),function(){n&&u.forEach(function(p){p.removeEventListener("scroll",r.update,gt)}),i&&c.removeEventListener("resize",r.update,gt)}}const la={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:ia,data:{}};var ca={left:"right",right:"left",bottom:"top",top:"bottom"};function yt(t){return t.replace(/left|right|bottom|top/g,function(e){return ca[e]})}var pa={start:"end",end:"start"};function fr(t){return t.replace(/start|end/g,function(e){return pa[e]})}function Ht(t){var e=pe(t),r=e.pageXOffset,a=e.pageYOffset;return{scrollLeft:r,scrollTop:a}}function Vt(t){return Ve(ke(t)).left+Ht(t).scrollLeft}function da(t,e){var r=pe(t),a=ke(t),s=r.visualViewport,n=a.clientWidth,l=a.clientHeight,i=0,c=0;if(s){n=s.width,l=s.height;var u=Wr();(u||!u&&e==="fixed")&&(i=s.offsetLeft,c=s.offsetTop)}return{width:n,height:l,x:i+Vt(t),y:c}}function ua(t){var e,r=ke(t),a=Ht(t),s=(e=t.ownerDocument)==null?void 0:e.body,n=Le(r.scrollWidth,r.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),l=Le(r.scrollHeight,r.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),i=-a.scrollLeft+Vt(t),c=-a.scrollTop;return Te(s||r).direction==="rtl"&&(i+=Le(r.clientWidth,s?s.clientWidth:0)-n),{width:n,height:l,x:i,y:c}}function qt(t){var e=Te(t),r=e.overflow,a=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(r+s+a)}function zr(t){return["html","body","#document"].indexOf(we(t))>=0?t.ownerDocument.body:de(t)&&qt(t)?t:zr(Tt(t))}function at(t,e){var r;e===void 0&&(e=[]);var a=zr(t),s=a===((r=t.ownerDocument)==null?void 0:r.body),n=pe(a),l=s?[n].concat(n.visualViewport||[],qt(a)?a:[]):a,i=e.concat(l);return s?i:i.concat(at(Tt(l)))}function kt(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function fa(t,e){var r=Ve(t,!1,e==="fixed");return r.top=r.top+t.clientTop,r.left=r.left+t.clientLeft,r.bottom=r.top+t.clientHeight,r.right=r.left+t.clientWidth,r.width=t.clientWidth,r.height=t.clientHeight,r.x=r.left,r.y=r.top,r}function mr(t,e,r){return e===Ir?kt(da(t,r)):Ne(e)?fa(e,r):kt(ua(ke(t)))}function ma(t){var e=at(Tt(t)),r=["absolute","fixed"].indexOf(Te(t).position)>=0,a=r&&de(t)?ct(t):t;return Ne(a)?e.filter(function(s){return Ne(s)&&Br(s,a)&&we(s)!=="body"}):[]}function ga(t,e,r,a){var s=e==="clippingParents"?ma(t):[].concat(e),n=[].concat(s,[r]),l=n[0],i=n.reduce(function(c,u){var p=mr(t,u,a);return c.top=Le(p.top,c.top),c.right=Ct(p.right,c.right),c.bottom=Ct(p.bottom,c.bottom),c.left=Le(p.left,c.left),c},mr(t,l,a));return i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}function Fr(t){var e=t.reference,r=t.element,a=t.placement,s=a?xe(a):null,n=a?qe(a):null,l=e.x+e.width/2-r.width/2,i=e.y+e.height/2-r.height/2,c;switch(s){case ne:c={x:l,y:e.y-r.height};break;case ue:c={x:l,y:e.y+e.height};break;case fe:c={x:e.x+e.width,y:i};break;case ie:c={x:e.x-r.width,y:i};break;default:c={x:e.x,y:e.y}}var u=s?Ft(s):null;if(u!=null){var p=u==="y"?"height":"width";switch(n){case Fe:c[u]=c[u]-(e[p]/2-r[p]/2);break;case nt:c[u]=c[u]+(e[p]/2-r[p]/2);break}}return c}function it(t,e){e===void 0&&(e={});var r=e,a=r.placement,s=a===void 0?t.placement:a,n=r.strategy,l=n===void 0?t.strategy:n,i=r.boundary,c=i===void 0?Io:i,u=r.rootBoundary,p=u===void 0?Ir:u,v=r.elementContext,j=v===void 0?et:v,f=r.altBoundary,y=f===void 0?!1:f,m=r.padding,x=m===void 0?0:m,b=Nr(typeof x!="number"?x:Ur(x,lt)),S=j===et?$o:et,T=t.rects.popper,g=t.elements[y?S:j],w=ga(Ne(g)?g:g.contextElement||ke(t.elements.popper),c,p,l),h=Ve(t.elements.reference),A=Fr({reference:h,element:T,placement:s}),k=kt(Object.assign({},T,A)),M=j===et?k:h,O={top:w.top-M.top+b.top,bottom:M.bottom-w.bottom+b.bottom,left:w.left-M.left+b.left,right:M.right-w.right+b.right},$=t.modifiersData.offset;if(j===et&&$){var X=$[s];Object.keys(O).forEach(function(W){var D=[fe,ue].indexOf(W)>=0?1:-1,V=[ne,ue].indexOf(W)>=0?"y":"x";O[W]+=X[V]*D})}return O}function ha(t,e){e===void 0&&(e={});var r=e,a=r.placement,s=r.boundary,n=r.rootBoundary,l=r.padding,i=r.flipVariations,c=r.allowedAutoPlacements,u=c===void 0?$r:c,p=qe(a),v=p?i?pr:pr.filter(function(y){return qe(y)===p}):lt,j=v.filter(function(y){return u.indexOf(y)>=0});j.length===0&&(j=v);var f=j.reduce(function(y,m){return y[m]=it(t,{placement:m,boundary:s,rootBoundary:n,padding:l})[xe(m)],y},{});return Object.keys(f).sort(function(y,m){return f[y]-f[m]})}function va(t){if(xe(t)===Nt)return[];var e=yt(t);return[fr(t),e,fr(e)]}function ba(t){var e=t.state,r=t.options,a=t.name;if(!e.modifiersData[a]._skip){for(var s=r.mainAxis,n=s===void 0?!0:s,l=r.altAxis,i=l===void 0?!0:l,c=r.fallbackPlacements,u=r.padding,p=r.boundary,v=r.rootBoundary,j=r.altBoundary,f=r.flipVariations,y=f===void 0?!0:f,m=r.allowedAutoPlacements,x=e.options.placement,b=xe(x),S=b===x,T=c||(S||!y?[yt(x)]:va(x)),g=[x].concat(T).reduce(function(I,q){return I.concat(xe(q)===Nt?ha(e,{placement:q,boundary:p,rootBoundary:v,padding:u,flipVariations:y,allowedAutoPlacements:m}):q)},[]),w=e.rects.reference,h=e.rects.popper,A=new Map,k=!0,M=g[0],O=0;O<g.length;O++){var $=g[O],X=xe($),W=qe($)===Fe,D=[ne,ue].indexOf(X)>=0,V=D?"width":"height",z=it(e,{placement:$,boundary:p,rootBoundary:v,altBoundary:j,padding:u}),F=D?W?fe:ie:W?ue:ne;w[V]>h[V]&&(F=yt(F));var J=yt(F),ee=[];if(n&&ee.push(z[X]<=0),i&&ee.push(z[F]<=0,z[J]<=0),ee.every(function(I){return I})){M=$,k=!1;break}A.set($,ee)}if(k)for(var R=y?3:1,_=function(q){var H=g.find(function(Y){var te=A.get(Y);if(te)return te.slice(0,q).every(function(ve){return ve})});if(H)return M=H,"break"},P=R;P>0;P--){var E=_(P);if(E==="break")break}e.placement!==M&&(e.modifiersData[a]._skip=!0,e.placement=M,e.reset=!0)}}const xa={name:"flip",enabled:!0,phase:"main",fn:ba,requiresIfExists:["offset"],data:{_skip:!1}};function gr(t,e,r){return r===void 0&&(r={x:0,y:0}),{top:t.top-e.height-r.y,right:t.right-e.width+r.x,bottom:t.bottom-e.height+r.y,left:t.left-e.width-r.x}}function hr(t){return[ne,fe,ue,ie].some(function(e){return t[e]>=0})}function ya(t){var e=t.state,r=t.name,a=e.rects.reference,s=e.rects.popper,n=e.modifiersData.preventOverflow,l=it(e,{elementContext:"reference"}),i=it(e,{altBoundary:!0}),c=gr(l,a),u=gr(i,s,n),p=hr(c),v=hr(u);e.modifiersData[r]={referenceClippingOffsets:c,popperEscapeOffsets:u,isReferenceHidden:p,hasPopperEscaped:v},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":p,"data-popper-escaped":v})}const wa={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:ya};function Ca(t,e,r){var a=xe(t),s=[ie,ne].indexOf(a)>=0?-1:1,n=typeof r=="function"?r(Object.assign({},e,{placement:t})):r,l=n[0],i=n[1];return l=l||0,i=(i||0)*s,[ie,fe].indexOf(a)>=0?{x:i,y:l}:{x:l,y:i}}function ja(t){var e=t.state,r=t.options,a=t.name,s=r.offset,n=s===void 0?[0,0]:s,l=$r.reduce(function(p,v){return p[v]=Ca(v,e.rects,n),p},{}),i=l[e.placement],c=i.x,u=i.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=c,e.modifiersData.popperOffsets.y+=u),e.modifiersData[a]=l}const Ta={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:ja};function Sa(t){var e=t.state,r=t.name;e.modifiersData[r]=Fr({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const Aa={name:"popperOffsets",enabled:!0,phase:"read",fn:Sa,data:{}};function Da(t){return t==="x"?"y":"x"}function Pa(t){var e=t.state,r=t.options,a=t.name,s=r.mainAxis,n=s===void 0?!0:s,l=r.altAxis,i=l===void 0?!1:l,c=r.boundary,u=r.rootBoundary,p=r.altBoundary,v=r.padding,j=r.tether,f=j===void 0?!0:j,y=r.tetherOffset,m=y===void 0?0:y,x=it(e,{boundary:c,rootBoundary:u,padding:v,altBoundary:p}),b=xe(e.placement),S=qe(e.placement),T=!S,g=Ft(b),w=Da(g),h=e.modifiersData.popperOffsets,A=e.rects.reference,k=e.rects.popper,M=typeof m=="function"?m(Object.assign({},e.rects,{placement:e.placement})):m,O=typeof M=="number"?{mainAxis:M,altAxis:M}:Object.assign({mainAxis:0,altAxis:0},M),$=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,X={x:0,y:0};if(h){if(n){var W,D=g==="y"?ne:ie,V=g==="y"?ue:fe,z=g==="y"?"height":"width",F=h[g],J=F+x[D],ee=F-x[V],R=f?-k[z]/2:0,_=S===Fe?A[z]:k[z],P=S===Fe?-k[z]:-A[z],E=e.elements.arrow,I=f&&E?zt(E):{width:0,height:0},q=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Lr(),H=q[D],Y=q[V],te=ot(0,A[z],I[z]),ve=T?A[z]/2-R-te-H-O.mainAxis:_-te-H-O.mainAxis,Ee=T?-A[z]/2+R+te+Y+O.mainAxis:P+te+Y+O.mainAxis,ae=e.elements.arrow&&ct(e.elements.arrow),C=ae?g==="y"?ae.clientTop||0:ae.clientLeft||0:0,K=(W=$==null?void 0:$[g])!=null?W:0,U=F+ve-K-C,G=F+Ee-K,Ce=ot(f?Ct(J,U):J,F,f?Le(ee,G):ee);h[g]=Ce,X[g]=Ce-F}if(i){var Re,le=g==="x"?ne:ie,je=g==="x"?ue:fe,be=h[w],Ie=w==="y"?"height":"width",Ke=be+x[le],Ge=be-x[je],Je=[ne,ie].indexOf(b)!==-1,pt=(Re=$==null?void 0:$[w])!=null?Re:0,dt=Je?Ke:be-A[Ie]-k[Ie]-pt+O.altAxis,Ue=Je?be+A[Ie]+k[Ie]-pt-O.altAxis:Ge,ut=f&&Je?Zo(dt,be,Ue):ot(f?dt:Ke,be,f?Ue:Ge);h[w]=ut,X[w]=ut-be}e.modifiersData[a]=X}}const Oa={name:"preventOverflow",enabled:!0,phase:"main",fn:Pa,requiresIfExists:["offset"]};function Ra(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function Ma(t){return t===pe(t)||!de(t)?Ht(t):Ra(t)}function _a(t){var e=t.getBoundingClientRect(),r=He(e.width)/t.offsetWidth||1,a=He(e.height)/t.offsetHeight||1;return r!==1||a!==1}function ka(t,e,r){r===void 0&&(r=!1);var a=de(e),s=de(e)&&_a(e),n=ke(e),l=Ve(t,s,r),i={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(a||!a&&!r)&&((we(e)!=="body"||qt(n))&&(i=Ma(e)),de(e)?(c=Ve(e,!0),c.x+=e.clientLeft,c.y+=e.clientTop):n&&(c.x=Vt(n))),{x:l.left+i.scrollLeft-c.x,y:l.top+i.scrollTop-c.y,width:l.width,height:l.height}}function Ea(t){var e=new Map,r=new Set,a=[];t.forEach(function(n){e.set(n.name,n)});function s(n){r.add(n.name);var l=[].concat(n.requires||[],n.requiresIfExists||[]);l.forEach(function(i){if(!r.has(i)){var c=e.get(i);c&&s(c)}}),a.push(n)}return t.forEach(function(n){r.has(n.name)||s(n)}),a}function Ia(t){var e=Ea(t);return qo.reduce(function(r,a){return r.concat(e.filter(function(s){return s.phase===a}))},[])}function $a(t){var e;return function(){return e||(e=new Promise(function(r){Promise.resolve().then(function(){e=void 0,r(t())})})),e}}function Wa(t){var e=t.reduce(function(r,a){var s=r[a.name];return r[a.name]=s?Object.assign({},s,a,{options:Object.assign({},s.options,a.options),data:Object.assign({},s.data,a.data)}):a,r},{});return Object.keys(e).map(function(r){return e[r]})}var vr={placement:"bottom",modifiers:[],strategy:"absolute"};function br(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return!e.some(function(a){return!(a&&typeof a.getBoundingClientRect=="function")})}function Ba(t){t===void 0&&(t={});var e=t,r=e.defaultModifiers,a=r===void 0?[]:r,s=e.defaultOptions,n=s===void 0?vr:s;return function(i,c,u){u===void 0&&(u=n);var p={placement:"bottom",orderedModifiers:[],options:Object.assign({},vr,n),modifiersData:{},elements:{reference:i,popper:c},attributes:{},styles:{}},v=[],j=!1,f={state:p,setOptions:function(b){var S=typeof b=="function"?b(p.options):b;m(),p.options=Object.assign({},n,p.options,S),p.scrollParents={reference:Ne(i)?at(i):i.contextElement?at(i.contextElement):[],popper:at(c)};var T=Ia(Wa([].concat(a,p.options.modifiers)));return p.orderedModifiers=T.filter(function(g){return g.enabled}),y(),f.update()},forceUpdate:function(){if(!j){var b=p.elements,S=b.reference,T=b.popper;if(br(S,T)){p.rects={reference:ka(S,ct(T),p.options.strategy==="fixed"),popper:zt(T)},p.reset=!1,p.placement=p.options.placement,p.orderedModifiers.forEach(function(O){return p.modifiersData[O.name]=Object.assign({},O.data)});for(var g=0;g<p.orderedModifiers.length;g++){if(p.reset===!0){p.reset=!1,g=-1;continue}var w=p.orderedModifiers[g],h=w.fn,A=w.options,k=A===void 0?{}:A,M=w.name;typeof h=="function"&&(p=h({state:p,options:k,name:M,instance:f})||p)}}}},update:$a(function(){return new Promise(function(x){f.forceUpdate(),x(p)})}),destroy:function(){m(),j=!0}};if(!br(i,c))return f;f.setOptions(u).then(function(x){!j&&u.onFirstUpdate&&u.onFirstUpdate(x)});function y(){p.orderedModifiers.forEach(function(x){var b=x.name,S=x.options,T=S===void 0?{}:S,g=x.effect;if(typeof g=="function"){var w=g({state:p,name:b,instance:f,options:T}),h=function(){};v.push(w||h)}})}function m(){v.forEach(function(x){return x()}),v=[]}return f}}var La=[la,Aa,na,Ko,Ta,xa,Oa,ra,wa],Na=Ba({defaultModifiers:La});function Ua(t){return Se("MuiPopper",t)}Ae("MuiPopper",["root"]);function za(t,e){if(e==="ltr")return t;switch(t){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return t}}function Et(t){return typeof t=="function"?t():t}function Fa(t){return t.nodeType!==void 0}const Ha=t=>{const{classes:e}=t;return De({root:["root"]},Ua,e)},Va={},qa=d.forwardRef(function(e,r){const{anchorEl:a,children:s,direction:n,disablePortal:l,modifiers:i,open:c,placement:u,popperOptions:p,popperRef:v,slotProps:j={},slots:f={},TransitionProps:y,ownerState:m,...x}=e,b=d.useRef(null),S=Mt(b,r),T=d.useRef(null),g=Mt(T,v),w=d.useRef(g);rr(()=>{w.current=g},[g]),d.useImperativeHandle(v,()=>T.current,[]);const h=za(u,n),[A,k]=d.useState(h),[M,O]=d.useState(Et(a));d.useEffect(()=>{T.current&&T.current.forceUpdate()}),d.useEffect(()=>{a&&O(Et(a))},[a]),rr(()=>{if(!M||!c)return;const V=J=>{k(J.placement)};let z=[{name:"preventOverflow",options:{altBoundary:l}},{name:"flip",options:{altBoundary:l}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:J})=>{V(J)}}];i!=null&&(z=z.concat(i)),p&&p.modifiers!=null&&(z=z.concat(p.modifiers));const F=Na(M,b.current,{placement:h,...p,modifiers:z});return w.current(F),()=>{F.destroy(),w.current(null)}},[M,l,i,c,p,h]);const $={placement:A};y!==null&&($.TransitionProps=y);const X=Ha(e),W=f.root??"div",D=Oo({elementType:W,externalSlotProps:j.root,externalForwardedProps:x,additionalProps:{role:"tooltip",ref:S},ownerState:e,className:X.root});return o.jsx(W,{...D,children:typeof s=="function"?s($):s})}),Xa=d.forwardRef(function(e,r){const{anchorEl:a,children:s,container:n,direction:l="ltr",disablePortal:i=!1,keepMounted:c=!1,modifiers:u,open:p,placement:v="bottom",popperOptions:j=Va,popperRef:f,style:y,transition:m=!1,slotProps:x={},slots:b={},...S}=e,[T,g]=d.useState(!0),w=()=>{g(!1)},h=()=>{g(!0)};if(!c&&!p&&(!m||T))return null;let A;if(n)A=n;else if(a){const O=Et(a);A=O&&Fa(O)?lr(O).body:lr(null).body}const k=!p&&c&&(!m||T)?"none":void 0,M=m?{in:p,onEnter:w,onExited:h}:void 0;return o.jsx(Po,{disablePortal:i,container:A,children:o.jsx(qa,{anchorEl:a,direction:l,disablePortal:i,modifiers:u,ref:r,open:m?!T:p,placement:v,popperOptions:j,popperRef:f,slotProps:x,slots:b,...S,style:{position:"fixed",top:0,left:0,display:k,...y},TransitionProps:M,children:s})})}),Ya=re(Xa,{name:"MuiPopper",slot:"Root"})({}),Hr=d.forwardRef(function(e,r){const a=Sr(),s=Pe({props:e,name:"MuiPopper"}),{anchorEl:n,component:l,components:i,componentsProps:c,container:u,disablePortal:p,keepMounted:v,modifiers:j,open:f,placement:y,popperOptions:m,popperRef:x,transition:b,slots:S,slotProps:T,...g}=s,w=(S==null?void 0:S.root)??(i==null?void 0:i.Root),h={anchorEl:n,container:u,disablePortal:p,keepMounted:v,modifiers:j,open:f,placement:y,popperOptions:m,popperRef:x,transition:b,...g};return o.jsx(Ya,{as:l,direction:a?"rtl":"ltr",slots:{root:w},slotProps:T??c,...h,ref:r})});function Ka(t){const{badgeContent:e,invisible:r=!1,max:a=99,showZero:s=!1}=t,n=Er({badgeContent:e,max:a});let l=r;r===!1&&e===0&&!s&&(l=!0);const{badgeContent:i,max:c=a}=l?n:t,u=i&&Number(i)>c?`${c}+`:i;return{badgeContent:i,invisible:l,max:c,displayValue:u}}function Ga(t){return Se("MuiBadge",t)}const Me=Ae("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),Dt=10,Pt=4,Ja=t=>{const{color:e,anchorOrigin:r,invisible:a,overlap:s,variant:n,classes:l={}}=t,i={root:["root"],badge:["badge",n,a&&"invisible",`anchorOrigin${Q(r.vertical)}${Q(r.horizontal)}`,`anchorOrigin${Q(r.vertical)}${Q(r.horizontal)}${Q(s)}`,`overlap${Q(s)}`,e!=="default"&&`color${Q(e)}`]};return De(i,Ga,l)},Za=re("span",{name:"MuiBadge",slot:"Root"})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),Qa=re("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.badge,e[r.variant],e[`anchorOrigin${Q(r.anchorOrigin.vertical)}${Q(r.anchorOrigin.horizontal)}${Q(r.overlap)}`],r.color!=="default"&&e[`color${Q(r.color)}`],r.invisible&&e.invisible]}})(Xe(({theme:t})=>({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(12),minWidth:Dt*2,lineHeight:1,padding:"0 6px",height:Dt*2,borderRadius:Dt,zIndex:1,transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.enteringScreen}),variants:[...Object.entries(t.palette).filter(ho(["contrastText"])).map(([e])=>({props:{color:e},style:{backgroundColor:(t.vars||t).palette[e].main,color:(t.vars||t).palette[e].contrastText}})),{props:{variant:"dot"},style:{borderRadius:Pt,height:Pt*2,minWidth:Pt*2,padding:0}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="top"&&e.anchorOrigin.horizontal==="right"&&e.overlap==="rectangular",style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${Me.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="bottom"&&e.anchorOrigin.horizontal==="right"&&e.overlap==="rectangular",style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${Me.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="top"&&e.anchorOrigin.horizontal==="left"&&e.overlap==="rectangular",style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${Me.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="bottom"&&e.anchorOrigin.horizontal==="left"&&e.overlap==="rectangular",style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${Me.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="top"&&e.anchorOrigin.horizontal==="right"&&e.overlap==="circular",style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${Me.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="bottom"&&e.anchorOrigin.horizontal==="right"&&e.overlap==="circular",style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${Me.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="top"&&e.anchorOrigin.horizontal==="left"&&e.overlap==="circular",style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${Me.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="bottom"&&e.anchorOrigin.horizontal==="left"&&e.overlap==="circular",style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${Me.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.leavingScreen})}}]})));function xr(t){return{vertical:(t==null?void 0:t.vertical)??"top",horizontal:(t==null?void 0:t.horizontal)??"right"}}const es=d.forwardRef(function(e,r){const a=Pe({props:e,name:"MuiBadge"}),{anchorOrigin:s,className:n,classes:l,component:i,components:c={},componentsProps:u={},children:p,overlap:v="rectangular",color:j="default",invisible:f=!1,max:y=99,badgeContent:m,slots:x,slotProps:b,showZero:S=!1,variant:T="standard",...g}=a,{badgeContent:w,invisible:h,max:A,displayValue:k}=Ka({max:y,invisible:f,badgeContent:m,showZero:S}),M=Er({anchorOrigin:xr(s),color:j,overlap:v,variant:T,badgeContent:m}),O=h||w==null&&T!=="dot",{color:$=j,overlap:X=v,anchorOrigin:W,variant:D=T}=O?M:a,V=xr(W),z=D!=="dot"?k:void 0,F={...a,badgeContent:w,invisible:O,max:A,displayValue:z,showZero:S,anchorOrigin:V,color:$,overlap:X,variant:D},J=Ja(F),ee={slots:{root:(x==null?void 0:x.root)??c.Root,badge:(x==null?void 0:x.badge)??c.Badge},slotProps:{root:(b==null?void 0:b.root)??u.root,badge:(b==null?void 0:b.badge)??u.badge}},[R,_]=se("root",{elementType:Za,externalForwardedProps:{...ee,...g},ownerState:F,className:ye(J.root,n),ref:r,additionalProps:{as:i}}),[P,E]=se("badge",{elementType:Qa,externalForwardedProps:ee,ownerState:F,className:J.badge});return o.jsxs(R,{..._,children:[p,o.jsx(P,{...E,children:z})]})});function ts(t){return Se("MuiDialog",t)}const Ot=Ae("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),Vr=d.createContext({}),rs=re(Mo,{name:"MuiDialog",slot:"Backdrop",overrides:(t,e)=>e.backdrop})({zIndex:-1}),os=t=>{const{classes:e,scroll:r,maxWidth:a,fullWidth:s,fullScreen:n}=t,l={root:["root"],container:["container",`scroll${Q(r)}`],paper:["paper",`paperScroll${Q(r)}`,`paperWidth${Q(String(a))}`,s&&"paperFullWidth",n&&"paperFullScreen"]};return De(l,ts,e)},as=re(Ro,{name:"MuiDialog",slot:"Root"})({"@media print":{position:"absolute !important"}}),ss=re("div",{name:"MuiDialog",slot:"Container",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.container,e[`scroll${Q(r.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),ns=re(Ar,{name:"MuiDialog",slot:"Paper",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.paper,e[`scrollPaper${Q(r.scroll)}`],e[`paperWidth${Q(String(r.maxWidth))}`],r.fullWidth&&e.paperFullWidth,r.fullScreen&&e.paperFullScreen]}})(Xe(({theme:t})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:e})=>!e.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:t.breakpoints.unit==="px"?Math.max(t.breakpoints.values.xs,444):`max(${t.breakpoints.values.xs}${t.breakpoints.unit}, 444px)`,[`&.${Ot.paperScrollBody}`]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(t.breakpoints.values).filter(e=>e!=="xs").map(e=>({props:{maxWidth:e},style:{maxWidth:`${t.breakpoints.values[e]}${t.breakpoints.unit}`,[`&.${Ot.paperScrollBody}`]:{[t.breakpoints.down(t.breakpoints.values[e]+32*2)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:e})=>e.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:e})=>e.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${Ot.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),Xt=d.forwardRef(function(e,r){const a=Pe({props:e,name:"MuiDialog"}),s=Lt(),n={enter:s.transitions.duration.enteringScreen,exit:s.transitions.duration.leavingScreen},{"aria-describedby":l,"aria-labelledby":i,"aria-modal":c=!0,BackdropComponent:u,BackdropProps:p,children:v,className:j,disableEscapeKeyDown:f=!1,fullScreen:y=!1,fullWidth:m=!1,maxWidth:x="sm",onClick:b,onClose:S,open:T,PaperComponent:g=Ar,PaperProps:w={},scroll:h="paper",slots:A={},slotProps:k={},TransitionComponent:M=cr,transitionDuration:O=n,TransitionProps:$,...X}=a,W={...a,disableEscapeKeyDown:f,fullScreen:y,fullWidth:m,maxWidth:x,scroll:h},D=os(W),V=d.useRef(),z=K=>{V.current=K.target===K.currentTarget},F=K=>{b&&b(K),V.current&&(V.current=null,S&&S(K,"backdropClick"))},J=_r(i),ee=d.useMemo(()=>({titleId:J}),[J]),R={transition:M,...A},_={transition:$,paper:w,backdrop:p,...k},P={slots:R,slotProps:_},[E,I]=se("root",{elementType:as,shouldForwardComponentProp:!0,externalForwardedProps:P,ownerState:W,className:ye(D.root,j),ref:r}),[q,H]=se("backdrop",{elementType:rs,shouldForwardComponentProp:!0,externalForwardedProps:P,ownerState:W}),[Y,te]=se("paper",{elementType:ns,shouldForwardComponentProp:!0,externalForwardedProps:P,ownerState:W,className:ye(D.paper,w.className)}),[ve,Ee]=se("container",{elementType:ss,externalForwardedProps:P,ownerState:W,className:D.container}),[ae,C]=se("transition",{elementType:cr,externalForwardedProps:P,ownerState:W,additionalProps:{appear:!0,in:T,timeout:O,role:"presentation"}});return o.jsx(E,{closeAfterTransition:!0,slots:{backdrop:q},slotProps:{backdrop:{transitionDuration:O,as:u,...H}},disableEscapeKeyDown:f,onClose:S,open:T,onClick:F,...I,...X,children:o.jsx(ae,{...C,children:o.jsx(ve,{onMouseDown:z,...Ee,children:o.jsx(Y,{as:g,elevation:24,role:"dialog","aria-describedby":l,"aria-labelledby":J,"aria-modal":c,...te,children:o.jsx(Vr.Provider,{value:ee,children:v})})})})})});function is(t){return Se("MuiDialogActions",t)}Ae("MuiDialogActions",["root","spacing"]);const ls=t=>{const{classes:e,disableSpacing:r}=t;return De({root:["root",!r&&"spacing"]},is,e)},cs=re("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.root,!r.disableSpacing&&e.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:t})=>!t.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),Yt=d.forwardRef(function(e,r){const a=Pe({props:e,name:"MuiDialogActions"}),{className:s,disableSpacing:n=!1,...l}=a,i={...a,disableSpacing:n},c=ls(i);return o.jsx(cs,{className:ye(c.root,s),ownerState:i,ref:r,...l})});function ps(t){return Se("MuiDialogContent",t)}Ae("MuiDialogContent",["root","dividers"]);function ds(t){return Se("MuiDialogTitle",t)}const us=Ae("MuiDialogTitle",["root"]),fs=t=>{const{classes:e,dividers:r}=t;return De({root:["root",r&&"dividers"]},ps,e)},ms=re("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.root,r.dividers&&e.dividers]}})(Xe(({theme:t})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:e})=>e.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(t.vars||t).palette.divider}`,borderBottom:`1px solid ${(t.vars||t).palette.divider}`}},{props:({ownerState:e})=>!e.dividers,style:{[`.${us.root} + &`]:{paddingTop:0}}}]}))),Kt=d.forwardRef(function(e,r){const a=Pe({props:e,name:"MuiDialogContent"}),{className:s,dividers:n=!1,...l}=a,i={...a,dividers:n},c=fs(i);return o.jsx(ms,{className:ye(c.root,s),ownerState:i,ref:r,...l})}),gs=t=>{const{classes:e}=t;return De({root:["root"]},ds,e)},hs=re(B,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),Gt=d.forwardRef(function(e,r){const a=Pe({props:e,name:"MuiDialogTitle"}),{className:s,id:n,...l}=a,i=a,c=gs(i),{titleId:u=n}=d.useContext(Vr);return o.jsx(hs,{component:"h2",className:ye(c.root,s),ownerState:i,ref:r,variant:"h6",id:n??u,...l})});function vs(t){return Se("MuiListItemAvatar",t)}Ae("MuiListItemAvatar",["root","alignItemsFlexStart"]);const bs=t=>{const{alignItems:e,classes:r}=t;return De({root:["root",e==="flex-start"&&"alignItemsFlexStart"]},vs,r)},xs=re("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.root,r.alignItems==="flex-start"&&e.alignItemsFlexStart]}})({minWidth:56,flexShrink:0,variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}),qr=d.forwardRef(function(e,r){const a=Pe({props:e,name:"MuiListItemAvatar"}),{className:s,...n}=a,l=d.useContext(Dr),i={...a,alignItems:l.alignItems},c=bs(i);return o.jsx(xs,{className:ye(c.root,s),ownerState:i,ref:r,...n})});function ys(t){return Se("MuiListItemText",t)}const ht=Ae("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),ws=t=>{const{classes:e,inset:r,primary:a,secondary:s,dense:n}=t;return De({root:["root",r&&"inset",n&&"dense",a&&s&&"multiline"],primary:["primary"],secondary:["secondary"]},ys,e)},Cs=re("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[{[`& .${ht.primary}`]:e.primary},{[`& .${ht.secondary}`]:e.secondary},e.root,r.inset&&e.inset,r.primary&&r.secondary&&e.multiline,r.dense&&e.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${or.root}:where(& .${ht.primary})`]:{display:"block"},[`.${or.root}:where(& .${ht.secondary})`]:{display:"block"},variants:[{props:({ownerState:t})=>t.primary&&t.secondary,style:{marginTop:6,marginBottom:6}},{props:({ownerState:t})=>t.inset,style:{paddingLeft:56}}]}),Xr=d.forwardRef(function(e,r){const a=Pe({props:e,name:"MuiListItemText"}),{children:s,className:n,disableTypography:l=!1,inset:i=!1,primary:c,primaryTypographyProps:u,secondary:p,secondaryTypographyProps:v,slots:j={},slotProps:f={},...y}=a,{dense:m}=d.useContext(Dr);let x=c??s,b=p;const S={...a,disableTypography:l,inset:i,primary:!!x,secondary:!!b,dense:m},T=ws(S),g={slots:j,slotProps:{primary:u,secondary:v,...f}},[w,h]=se("root",{className:ye(T.root,n),elementType:Cs,externalForwardedProps:{...g,...y},ownerState:S,ref:r}),[A,k]=se("primary",{className:T.primary,elementType:B,externalForwardedProps:g,ownerState:S}),[M,O]=se("secondary",{className:T.secondary,elementType:B,externalForwardedProps:g,ownerState:S});return x!=null&&x.type!==B&&!l&&(x=o.jsx(A,{variant:m?"body2":"body1",component:k!=null&&k.variant?void 0:"span",...k,children:x})),b!=null&&b.type!==B&&!l&&(b=o.jsx(M,{variant:"body2",color:"textSecondary",...O,children:b})),o.jsxs(w,{...h,children:[x,b]})});function js(t){return Se("MuiTooltip",t)}const Z=Ae("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);function Ts(t){return Math.round(t*1e5)/1e5}const Ss=t=>{const{classes:e,disableInteractive:r,arrow:a,touch:s,placement:n}=t,l={popper:["popper",!r&&"popperInteractive",a&&"popperArrow"],tooltip:["tooltip",a&&"tooltipArrow",s&&"touch",`tooltipPlacement${Q(n.split("-")[0])}`],arrow:["arrow"]};return De(l,js,e)},As=re(Hr,{name:"MuiTooltip",slot:"Popper",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.popper,!r.disableInteractive&&e.popperInteractive,r.arrow&&e.popperArrow,!r.open&&e.popperClose]}})(Xe(({theme:t})=>({zIndex:(t.vars||t).zIndex.tooltip,pointerEvents:"none",variants:[{props:({ownerState:e})=>!e.disableInteractive,style:{pointerEvents:"auto"}},{props:({open:e})=>!e,style:{pointerEvents:"none"}},{props:({ownerState:e})=>e.arrow,style:{[`&[data-popper-placement*="bottom"] .${Z.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${Z.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${Z.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},[`&[data-popper-placement*="left"] .${Z.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}},{props:({ownerState:e})=>e.arrow&&!e.isRtl,style:{[`&[data-popper-placement*="right"] .${Z.arrow}`]:{left:0,marginLeft:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!!e.isRtl,style:{[`&[data-popper-placement*="right"] .${Z.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!e.isRtl,style:{[`&[data-popper-placement*="left"] .${Z.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!!e.isRtl,style:{[`&[data-popper-placement*="left"] .${Z.arrow}`]:{left:0,marginLeft:"-0.71em"}}}]}))),Ds=re("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.tooltip,r.touch&&e.touch,r.arrow&&e.tooltipArrow,e[`tooltipPlacement${Q(r.placement.split("-")[0])}`]]}})(Xe(({theme:t})=>({backgroundColor:t.vars?t.vars.palette.Tooltip.bg:Pr(t.palette.grey[700],.92),borderRadius:(t.vars||t).shape.borderRadius,color:(t.vars||t).palette.common.white,fontFamily:t.typography.fontFamily,padding:"4px 8px",fontSize:t.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:t.typography.fontWeightMedium,[`.${Z.popper}[data-popper-placement*="left"] &`]:{transformOrigin:"right center"},[`.${Z.popper}[data-popper-placement*="right"] &`]:{transformOrigin:"left center"},[`.${Z.popper}[data-popper-placement*="top"] &`]:{transformOrigin:"center bottom",marginBottom:"14px"},[`.${Z.popper}[data-popper-placement*="bottom"] &`]:{transformOrigin:"center top",marginTop:"14px"},variants:[{props:({ownerState:e})=>e.arrow,style:{position:"relative",margin:0}},{props:({ownerState:e})=>e.touch,style:{padding:"8px 16px",fontSize:t.typography.pxToRem(14),lineHeight:`${Ts(16/14)}em`,fontWeight:t.typography.fontWeightRegular}},{props:({ownerState:e})=>!e.isRtl,style:{[`.${Z.popper}[data-popper-placement*="left"] &`]:{marginRight:"14px"},[`.${Z.popper}[data-popper-placement*="right"] &`]:{marginLeft:"14px"}}},{props:({ownerState:e})=>!e.isRtl&&e.touch,style:{[`.${Z.popper}[data-popper-placement*="left"] &`]:{marginRight:"24px"},[`.${Z.popper}[data-popper-placement*="right"] &`]:{marginLeft:"24px"}}},{props:({ownerState:e})=>!!e.isRtl,style:{[`.${Z.popper}[data-popper-placement*="left"] &`]:{marginLeft:"14px"},[`.${Z.popper}[data-popper-placement*="right"] &`]:{marginRight:"14px"}}},{props:({ownerState:e})=>!!e.isRtl&&e.touch,style:{[`.${Z.popper}[data-popper-placement*="left"] &`]:{marginLeft:"24px"},[`.${Z.popper}[data-popper-placement*="right"] &`]:{marginRight:"24px"}}},{props:({ownerState:e})=>e.touch,style:{[`.${Z.popper}[data-popper-placement*="top"] &`]:{marginBottom:"24px"}}},{props:({ownerState:e})=>e.touch,style:{[`.${Z.popper}[data-popper-placement*="bottom"] &`]:{marginTop:"24px"}}}]}))),Ps=re("span",{name:"MuiTooltip",slot:"Arrow"})(Xe(({theme:t})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:t.vars?t.vars.palette.Tooltip.bg:Pr(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})));let vt=!1;const yr=new vo;let tt={x:0,y:0};function bt(t,e){return(r,...a)=>{e&&e(r,...a),t(r,...a)}}const ze=d.forwardRef(function(e,r){const a=Pe({props:e,name:"MuiTooltip"}),{arrow:s=!1,children:n,classes:l,components:i={},componentsProps:c={},describeChild:u=!1,disableFocusListener:p=!1,disableHoverListener:v=!1,disableInteractive:j=!1,disableTouchListener:f=!1,enterDelay:y=100,enterNextDelay:m=0,enterTouchDelay:x=700,followCursor:b=!1,id:S,leaveDelay:T=0,leaveTouchDelay:g=1500,onClose:w,onOpen:h,open:A,placement:k="bottom",PopperComponent:M,PopperProps:O={},slotProps:$={},slots:X={},title:W,TransitionComponent:D,TransitionProps:V,...z}=a,F=d.isValidElement(n)?n:o.jsx("span",{children:n}),J=Lt(),ee=Sr(),[R,_]=d.useState(),[P,E]=d.useState(null),I=d.useRef(!1),q=j||b,H=mt(),Y=mt(),te=mt(),ve=mt(),[Ee,ae]=_o({controlled:A,default:!1,name:"Tooltip",state:"open"});let C=Ee;const K=_r(S),U=d.useRef(),G=ar(()=>{U.current!==void 0&&(document.body.style.WebkitUserSelect=U.current,U.current=void 0),ve.clear()});d.useEffect(()=>G,[G]);const Ce=L=>{yr.clear(),vt=!0,ae(!0),h&&!C&&h(L)},Re=ar(L=>{yr.start(800+T,()=>{vt=!1}),ae(!1),w&&C&&w(L),H.start(J.transitions.duration.shortest,()=>{I.current=!1})}),le=L=>{I.current&&L.type!=="touchstart"||(R&&R.removeAttribute("title"),Y.clear(),te.clear(),y||vt&&m?Y.start(vt?m:y,()=>{Ce(L)}):Ce(L))},je=L=>{Y.clear(),te.start(T,()=>{Re(L)})},[,be]=d.useState(!1),Ie=L=>{sr(L.target)||(be(!1),je(L))},Ke=L=>{R||_(L.currentTarget),sr(L.target)&&(be(!0),le(L))},Ge=L=>{I.current=!0;const he=F.props;he.onTouchStart&&he.onTouchStart(L)},Je=L=>{Ge(L),te.clear(),H.clear(),G(),U.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",ve.start(x,()=>{document.body.style.WebkitUserSelect=U.current,le(L)})},pt=L=>{F.props.onTouchEnd&&F.props.onTouchEnd(L),G(),te.start(g,()=>{Re(L)})};d.useEffect(()=>{if(!C)return;function L(he){he.key==="Escape"&&Re(he)}return document.addEventListener("keydown",L),()=>{document.removeEventListener("keydown",L)}},[Re,C]);const dt=Mt(ko(F),_,r);!W&&W!==0&&(C=!1);const Ue=d.useRef(),ut=L=>{const he=F.props;he.onMouseMove&&he.onMouseMove(L),tt={x:L.clientX,y:L.clientY},Ue.current&&Ue.current.update()},Ze={},St=typeof W=="string";u?(Ze.title=!C&&St&&!v?W:null,Ze["aria-describedby"]=C?K:null):(Ze["aria-label"]=St?W:null,Ze["aria-labelledby"]=C&&!St?K:null);const me={...Ze,...z,...F.props,className:ye(z.className,F.props.className),onTouchStart:Ge,ref:dt,...b?{onMouseMove:ut}:{}},Qe={};f||(me.onTouchStart=Je,me.onTouchEnd=pt),v||(me.onMouseOver=bt(le,me.onMouseOver),me.onMouseLeave=bt(je,me.onMouseLeave),q||(Qe.onMouseOver=le,Qe.onMouseLeave=je)),p||(me.onFocus=bt(Ke,me.onFocus),me.onBlur=bt(Ie,me.onBlur),q||(Qe.onFocus=Ke,Qe.onBlur=Ie));const $e={...a,isRtl:ee,arrow:s,disableInteractive:q,placement:k,PopperComponentProp:M,touch:I.current},ge=typeof $.popper=="function"?$.popper($e):$.popper,so=d.useMemo(()=>{var he,tr;let L=[{name:"arrow",enabled:!!P,options:{element:P,padding:4}}];return(he=O.popperOptions)!=null&&he.modifiers&&(L=L.concat(O.popperOptions.modifiers)),(tr=ge==null?void 0:ge.popperOptions)!=null&&tr.modifiers&&(L=L.concat(ge.popperOptions.modifiers)),{...O.popperOptions,...ge==null?void 0:ge.popperOptions,modifiers:L}},[P,O.popperOptions,ge==null?void 0:ge.popperOptions]),At=Ss($e),no=typeof $.transition=="function"?$.transition($e):$.transition,ft={slots:{popper:i.Popper,transition:i.Transition??D,tooltip:i.Tooltip,arrow:i.Arrow,...X},slotProps:{arrow:$.arrow??c.arrow,popper:{...O,...ge??c.popper},tooltip:$.tooltip??c.tooltip,transition:{...V,...no??c.transition}}},[io,lo]=se("popper",{elementType:As,externalForwardedProps:ft,ownerState:$e,className:ye(At.popper,O==null?void 0:O.className)}),[co,po]=se("transition",{elementType:Eo,externalForwardedProps:ft,ownerState:$e}),[uo,fo]=se("tooltip",{elementType:Ds,className:At.tooltip,externalForwardedProps:ft,ownerState:$e}),[mo,go]=se("arrow",{elementType:Ps,className:At.arrow,externalForwardedProps:ft,ownerState:$e,ref:E});return o.jsxs(d.Fragment,{children:[d.cloneElement(F,me),o.jsx(io,{as:M??Hr,placement:k,anchorEl:b?{getBoundingClientRect:()=>({top:tt.y,left:tt.x,right:tt.x,bottom:tt.y,width:0,height:0})}:R,popperRef:Ue,open:R?C:!1,id:K,transition:!0,...Qe,...lo,popperOptions:so,children:({TransitionProps:L})=>o.jsx(co,{timeout:J.transitions.duration.shorter,...L,...po,children:o.jsxs(uo,{...fo,children:[W,s?o.jsx(mo,{...go}):null]})})})]})});class Os extends d.Component{getSnapshotBeforeUpdate(e){const r=this.props.childRef.current;if(r&&e.isPresent&&!this.props.isPresent){const a=r.offsetParent,s=xo(a)&&a.offsetWidth||0,n=this.props.sizeRef.current;n.height=r.offsetHeight||0,n.width=r.offsetWidth||0,n.top=r.offsetTop,n.left=r.offsetLeft,n.right=s-n.width-n.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Rs({children:t,isPresent:e,anchorX:r,root:a}){const s=d.useId(),n=d.useRef(null),l=d.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:i}=d.useContext(bo);return d.useInsertionEffect(()=>{const{width:c,height:u,top:p,left:v,right:j}=l.current;if(e||!n.current||!c||!u)return;const f=r==="left"?`left: ${v}`:`right: ${j}`;n.current.dataset.motionPopId=s;const y=document.createElement("style");i&&(y.nonce=i);const m=a??document.head;return m.appendChild(y),y.sheet&&y.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${u}px !important;
            ${f}px !important;
            top: ${p}px !important;
          }
        `),()=>{m.removeChild(y),m.contains(y)&&m.removeChild(y)}},[e]),o.jsx(Os,{isPresent:e,childRef:n,sizeRef:l,children:d.cloneElement(t,{ref:n})})}const Ms=({children:t,initial:e,isPresent:r,onExitComplete:a,custom:s,presenceAffectsLayout:n,mode:l,anchorX:i,root:c})=>{const u=Or(_s),p=d.useId();let v=!0,j=d.useMemo(()=>(v=!1,{id:p,initial:e,isPresent:r,custom:s,onExitComplete:f=>{u.set(f,!0);for(const y of u.values())if(!y)return;a&&a()},register:f=>(u.set(f,!1),()=>u.delete(f))}),[r,u,a]);return n&&v&&(j={...j}),d.useMemo(()=>{u.forEach((f,y)=>u.set(y,!1))},[r]),d.useEffect(()=>{!r&&!u.size&&a&&a()},[r]),l==="popLayout"&&(t=o.jsx(Rs,{isPresent:r,anchorX:i,root:c,children:t})),o.jsx(yo.Provider,{value:j,children:t})};function _s(){return new Map}const xt=t=>t.key||"";function wr(t){const e=[];return d.Children.forEach(t,r=>{d.isValidElement(r)&&e.push(r)}),e}const ks=({children:t,custom:e,initial:r=!0,onExitComplete:a,presenceAffectsLayout:s=!0,mode:n="sync",propagate:l=!1,anchorX:i="left",root:c})=>{const[u,p]=wo(l),v=d.useMemo(()=>wr(t),[t]),j=l&&!u?[]:v.map(xt),f=d.useRef(!0),y=d.useRef(v),m=Or(()=>new Map),[x,b]=d.useState(v),[S,T]=d.useState(v);Co(()=>{f.current=!1,y.current=v;for(let h=0;h<S.length;h++){const A=xt(S[h]);j.includes(A)?m.delete(A):m.get(A)!==!0&&m.set(A,!1)}},[S,j.length,j.join("-")]);const g=[];if(v!==x){let h=[...v];for(let A=0;A<S.length;A++){const k=S[A],M=xt(k);j.includes(M)||(h.splice(A,0,k),g.push(k))}return n==="wait"&&g.length&&(h=g),T(wr(h)),b(v),null}const{forceRender:w}=d.useContext(jo);return o.jsx(o.Fragment,{children:S.map(h=>{const A=xt(h),k=l&&!u?!1:v===S||j.includes(A),M=()=>{if(m.has(A))m.set(A,!0);else return;let O=!0;m.forEach($=>{$||(O=!1)}),O&&(w==null||w(),T(y.current),l&&(p==null||p()),a&&a())};return o.jsx(Ms,{isPresent:k,initial:!f.current||r?void 0:!1,custom:e,presenceAffectsLayout:s,mode:n,root:c,onExitComplete:k?void 0:M,anchorX:i,children:h},A)})})},Es=Oe(o.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"})),Is=Oe([o.jsx("path",{d:"M17 11c.34 0 .67.04 1 .09V6.27L10.5 3 3 6.27v4.91c0 4.54 3.2 8.79 7.5 9.82.55-.13 1.08-.32 1.6-.55-.69-.98-1.1-2.17-1.1-3.45 0-3.31 2.69-6 6-6"},"0"),o.jsx("path",{d:"M17 13c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 1.38c.62 0 1.12.51 1.12 1.12s-.51 1.12-1.12 1.12-1.12-.51-1.12-1.12.5-1.12 1.12-1.12m0 5.37c-.93 0-1.74-.46-2.24-1.17.05-.72 1.51-1.08 2.24-1.08s2.19.36 2.24 1.08c-.5.71-1.31 1.17-2.24 1.17"},"1")]),$s=Oe(o.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"})),Rt=Oe(o.jsx("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2M6 9h12v2H6zm8 5H6v-2h8zm4-6H6V6h12z"})),Ws=Oe(o.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"})),Cr=Oe(o.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"})),jr=Oe(o.jsx("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"})),Bs=Oe(o.jsx("path",{d:"M14 8c0-2.21-1.79-4-4-4S6 5.79 6 8s1.79 4 4 4 4-1.79 4-4m3 2v2h6v-2zM2 18v2h16v-2c0-2.66-5.33-4-8-4s-8 1.34-8 4"})),Tr=Oe(o.jsx("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"})),Jt=()=>{var t;if(console.log("Инициализация Telegram WebApp..."),Qt(),typeof window<"u"&&((t=window.Telegram)!=null&&t.WebApp))try{const e=window.Telegram.WebApp;return e.ready(),e.expand(),e.setHeaderColor("#232b3b"),e.setBackgroundColor("#232b3b"),e.enableClosingConfirmation(),console.log("Telegram WebApp успешно инициализирован"),console.log("WebApp version:",e.version),console.log("WebApp platform:",e.platform),console.log("WebApp theme:",e.colorScheme),!0}catch(e){return console.error("Ошибка инициализации Telegram WebApp:",e),!1}return console.log("Telegram WebApp не найден"),!1},Yr=()=>{var t,e,r;return typeof window<"u"&&((r=(e=(t=window.Telegram)==null?void 0:t.WebApp)==null?void 0:e.initDataUnsafe)!=null&&r.user)?window.Telegram.WebApp.initDataUnsafe.user:null},Zt=()=>{var t;if(console.log("=== Telegram WebApp Debug Info ==="),typeof window>"u"){console.log("❌ Window object not available");return}if(console.log("🔍 Telegram object:",window.Telegram?"✅ Available":"❌ Not available"),(t=window.Telegram)!=null&&t.WebApp){const e=window.Telegram.WebApp;console.log("🔍 WebApp object:","✅ Available"),console.log("🔍 WebApp version:",e.version),console.log("🔍 WebApp platform:",e.platform),console.log("🔍 WebApp colorScheme:",e.colorScheme),console.log("🔍 WebApp isExpanded:",e.isExpanded),console.log("🔍 WebApp viewportHeight:",e.viewportHeight),console.log("🔍 WebApp viewportStableHeight:",e.viewportStableHeight),console.log("🔍 InitData:",e.initData?`✅ Available (${e.initData.length} chars)`:"❌ Not available"),console.log("🔍 InitDataUnsafe:",e.initDataUnsafe?"✅ Available":"❌ Not available"),e.initDataUnsafe&&(console.log("🔍 InitDataUnsafe.user:",e.initDataUnsafe.user?"✅ Available":"❌ Not available"),console.log("🔍 InitDataUnsafe.query_id:",e.initDataUnsafe.query_id?"✅ Available":"❌ Not available"),console.log("🔍 InitDataUnsafe.auth_date:",e.initDataUnsafe.auth_date?"✅ Available":"❌ Not available"),console.log("🔍 InitDataUnsafe.hash:",e.initDataUnsafe.hash?"✅ Available":"❌ Not available"),e.initDataUnsafe.user&&console.log("🔍 User data:",JSON.stringify(e.initDataUnsafe.user,null,2)))}else console.log("❌ WebApp object not available");console.log("==================================")},Ye=()=>{var t;if(console.log("Получение данных авторизации Telegram..."),Zt(),typeof window<"u"&&((t=window.Telegram)!=null&&t.WebApp)){console.log("Telegram WebApp найден");const e=window.Telegram.WebApp.initData;if(console.log("Telegram initData:",e?"найден":"отсутствует"),e)return console.log("✅ Используем реальные данные initData"),e;const r=window.Telegram.WebApp.initDataUnsafe;if(console.log("Telegram initDataUnsafe:",r),r!=null&&r.user){const a=Math.floor(Date.now()/1e3),s=JSON.stringify(r.user),n=`user=${encodeURIComponent(s)}`,l=`auth_date=${a}`,i=`${n}&${l}`,c=btoa(i).replace(/[^a-zA-Z0-9]/g,"").substring(0,32),u=`${n}&${l}&hash=${c}`;return console.log("✅ Создаем данные авторизации из initDataUnsafe"),console.log("Generated auth data length:",u.length),u}}return console.warn("❌ Приложение запущено не из Telegram WebApp"),console.warn("❌ Данные авторизации недоступны"),""},Kr=()=>{var t;return typeof window<"u"&&!!((t=window.Telegram)!=null&&t.WebApp)},Gr=()=>{if(console.log("🔄 Очищаем и пересоздаем данные авторизации..."),typeof window<"u"){localStorage.removeItem("telegram_init_data"),console.log("✅ Старые данные очищены");const t=Ye();return console.log("✅ Новые данные созданы:",t?"успешно":"ошибка"),t}return""},Qt=()=>{typeof window<"u"&&(localStorage.removeItem("telegram_init_data"),console.log("🧹 Очищены старые данные авторизации"))},Jr=()=>{console.log("🧪 Тестируем данные авторизации...");const t=Ye();if(t){console.log("✅ Данные авторизации найдены"),console.log("📊 Длина:",t.length),console.log("📋 Превью:",t.substring(0,100)+"...");try{const e=new URLSearchParams(t),r=e.get("user"),a=e.get("auth_date"),s=e.get("hash");if(console.log("🔍 Структура данных:"),console.log("  - user:",r?"есть":"отсутствует"),console.log("  - auth_date:",a?"есть":"отсутствует"),console.log("  - hash:",s?"есть":"отсутствует"),r){const n=JSON.parse(decodeURIComponent(r));console.log("👤 Данные пользователя:",n)}return!0}catch(e){return console.error("❌ Ошибка парсинга данных:",e),!1}}else return console.error("❌ Данные авторизации не найдены"),!1},er=async()=>{console.log("🔬 Диагностика проблемы авторизации на сервере...");try{const{debugAuthConfig:t,debugValidateTelegramData:e}=await st(async()=>{const{debugAuthConfig:a,debugValidateTelegramData:s}=await Promise.resolve().then(()=>jt);return{debugAuthConfig:a,debugValidateTelegramData:s}},void 0);console.log("🔍 Проверяем конфигурацию сервера...");try{const a=await t();if(console.log("🏃 Конфигурация сервера:",a),!a.telegram_bot_token_set)return console.error("❌ На сервере не установлен токен Telegram бота!"),console.error("💡 Решение: Администратор должен установить TELEGRAM_BOT_TOKEN на сервере"),"server_no_token";console.log("✅ Токен бота на сервере установлен")}catch(a){return console.error("❌ Ошибка получения конфигурации сервера:",a),"server_config_error"}const r=Ye();if(r){console.log("🧪 Тестируем валидацию данных на сервере...");try{const a=await e(r);return console.log("📊 Результат валидации:",a),a.success?(console.log("✅ Валидация на сервере прошла успешно!"),console.log("❓ Возможно, проблема в другом месте"),"validation_success"):(console.error("❌ Валидация на сервере не прошла"),console.error("💡 Причина: Неправильная подпись или истекшие данные"),"validation_failed")}catch(a){return console.error("❌ Ошибка тестирования валидации:",a),"validation_error"}}else return console.error("❌ Нет данных для тестирования"),"no_data"}catch(t){return console.error("❌ Общая ошибка диагностики:",t),"general_error"}};typeof window<"u"&&(window.telegramUtils={debugTelegramWebApp:Zt,getTelegramInitData:Ye,clearAndRecreateAuthData:Gr,cleanupOldAuthData:Qt,testAuthData:Jr,initTelegramWebApp:Jt,diagnoseServerAuth:er},console.log("🔧 Утилиты Telegram доступны через window.telegramUtils"));const Ls=Object.freeze(Object.defineProperty({__proto__:null,cleanupOldAuthData:Qt,clearAndRecreateAuthData:Gr,debugTelegramWebApp:Zt,diagnoseServerAuth:er,getTelegramInitData:Ye,getTelegramUser:Yr,initTelegramWebApp:Jt,isTelegramWebApp:Kr,testAuthData:Jr},Symbol.toStringTag,{value:"Module"})),Ns=()=>{console.log("=== Aeon Messenger API Configuration ==="),console.log("VITE_CHAT_URL:","https://aeon-messenger-app-09faae856b73.herokuapp.com"),console.log("Base URL:","https://aeon-messenger-app-09faae856b73.herokuapp.com"),console.log("Environment:","production"),console.log("🆕 NEW BACKEND URL: https://aeon-backend-2892-d50dfbe26b14.herokuapp.com"),console.log("=========================================")};Ns();const oe=Ao.create({baseURL:"https://aeon-backend-2892-d50dfbe26b14.herokuapp.com",timeout:3e4,headers:{"Content-Type":"application/json"}}),Zr=async(t,e=3,r=1e3)=>{var a,s;for(let n=0;n<e;n++)try{return await t()}catch(l){if(console.log(`Attempt ${n+1} failed:`,l.message),((a=l.response)==null?void 0:a.status)===401||((s=l.response)==null?void 0:s.status)===403||n===e-1)throw l;await new Promise(i=>setTimeout(i,r*(n+1)))}throw new Error("Max retries reached")};oe.interceptors.request.use(t=>{const e=Ye();return console.log("=== Aeon API Request Debug ==="),console.log("URL:",t.url),console.log("Method:",t.method),console.log("Base URL:",t.baseURL),console.log("Init Data Length:",e?e.length:0),console.log("Init Data Preview:",e?e.substring(0,100)+"...":"No data"),e?(t.headers["x-telegram-init-data"]=e,console.log("✅ Auth header attached")):(console.warn("❌ No auth data available - running in development mode"),console.warn("❌ This request will likely fail with 401 error")),console.log("==============================="),t},t=>(console.error("Request interceptor error:",t),Promise.reject(t)));oe.interceptors.response.use(t=>(console.log("✅ API Response:",t.config.url,t.status),t),t=>{var e,r,a,s,n,l,i,c;throw console.error("=== Aeon API Error ==="),console.error("URL:",(e=t.config)==null?void 0:e.url),console.error("Status:",(r=t.response)==null?void 0:r.status),console.error("Status Text:",(a=t.response)==null?void 0:a.statusText),console.error("Response Data:",(s=t.response)==null?void 0:s.data),console.error("Request Headers:",(n=t.config)==null?void 0:n.headers),console.error("======================"),((l=t.response)==null?void 0:l.status)===401?(console.error("❌ Authorization failed"),console.error("❌ Possible reasons:"),console.error("   1. App is not running inside Telegram WebApp"),console.error("   2. Invalid or expired Telegram init data"),console.error("   3. Server-side authorization issue"),console.error("❌ Solution: Open this app from Telegram bot/mini app"),{...t,message:"Authorization failed - app must be opened from Telegram",isAuthError:!0,response:{...t.response,data:{...(i=t.response)==null?void 0:i.data,error:"Приложение должно быть открыто из Telegram"}}}):t.code==="ECONNABORTED"&&t.message.includes("timeout")?(console.error("❌ Request timeout"),console.error("❌ Possible reasons:"),console.error("   1. Server is starting up (cold start)"),console.error("   2. Server is overloaded"),console.error("   3. Network connectivity issues"),console.error("❌ Solution: Try again in a moment"),{...t,message:"Server is starting up, please try again in a moment",isTimeoutError:!0}):((c=t.response)==null?void 0:c.status)===503?(console.error("❌ Service Unavailable"),console.error("❌ Server is temporarily unavailable"),{...t,message:"Server is temporarily unavailable, please try again",isServiceError:!0}):t});const It=async()=>(await Zr(()=>oe.get("/api/v1/chats/"))).data,Qr=async t=>(await Zr(()=>oe.post("/api/v1/chats/",t,{timeout:6e4}))).data,Us=async t=>(await oe.get(`/api/v1/chats/${t}`)).data,eo=async(t,e)=>{await oe.post(`/api/v1/chats/${t}/members/${e}`)},to=async(t,e)=>{await oe.delete(`/api/v1/chats/${t}/members/${e}`)},$t=async(t,e=1,r=50)=>(await oe.get(`/api/v1/messages/chat/${t}?page=${e}&per_page=${r}`)).data,ro=async t=>(await oe.post("/api/v1/messages/",t)).data,oo=async t=>{await oe.post(`/api/v1/messages/chat/${t}/read-all`)},ao=async()=>(await oe.get("/api/v1/me")).data,zs=async()=>(await oe.get("/api/v1/debug/auth")).data,Fs=async t=>(await oe.post("/api/v1/debug/validate-telegram-data",t,{headers:{"Content-Type":"application/json"}})).data,Wt=async(t,e)=>(await oe.post(`/api/v1/chats/${t}/invite-by-username`,{username:e})).data,Bt=async()=>{await oe.post("/api/v1/users/check-invitations")},jt=Object.freeze(Object.defineProperty({__proto__:null,addMemberToChat:eo,checkAndAcceptInvitations:Bt,createChat:Qr,debugAuthConfig:zs,debugValidateTelegramData:Fs,getChat:Us,getChatMessages:$t,getChats:It,getCurrentUser:ao,inviteMemberByUsername:Wt,markAllMessagesAsRead:oo,removeMemberFromChat:to,sendMessage:ro},Symbol.toStringTag,{value:"Module"})),Hs=()=>{const[t,e]=d.useState([]),[r,a]=d.useState(null),[s,n]=d.useState([]),[l,i]=d.useState(null),[c,u]=d.useState(!0),[p,v]=d.useState(!1),[j,f]=d.useState(null),[y,m]=d.useState(!1),[x,b]=d.useState(!0),[S,T]=d.useState(null),[g,w]=d.useState(!1),h=d.useCallback(()=>Jt(),[]),A=d.useCallback(async()=>{var R;try{const _=await ao();i(_),f(null),m(!1);try{await Bt()}catch(P){console.log("No pending invitations or error checking invitations:",P)}}catch(_){if(console.error("Error loading current user:",_),((R=_.response)==null?void 0:R.status)===401||_.isAuthError?(m(!0),f("Приложение должно быть открыто из Telegram для корректной работы")):f("Ошибка загрузки данных пользователя"),!Kr()){const P=Yr();i(P?{id:P.id,telegram_id:P.id,username:P.username,first_name:P.first_name,last_name:P.last_name,profile_photo_url:P.photo_url}:{id:123456789,telegram_id:123456789,username:"testuser",first_name:"Test",last_name:"User",profile_photo_url:void 0}),m(!1)}}},[h]),k=d.useCallback(async()=>{var R,_;try{u(!0);const E=(await It()).sort((I,q)=>!I.last_message_time&&!q.last_message_time?0:I.last_message_time?q.last_message_time?new Date(q.last_message_time).getTime()-new Date(I.last_message_time).getTime():-1:1);e(E),f(null),m(!1)}catch(P){console.error("Error loading chats:",P),((R=P.response)==null?void 0:R.status)===401||P.isAuthError?(m(!0),f("Приложение должно быть открыто из Telegram для корректной работы")):P.isTimeoutError||P.code==="ECONNABORTED"?f("⏱️ Сервер запускается, попробуйте обновить страницу через минуту"):P.isServiceError||((_=P.response)==null?void 0:_.status)===503?f("🔧 Сервер временно недоступен, попробуйте через несколько минут"):f("Ошибка загрузки чатов")}finally{u(!1)}},[h]),M=d.useCallback(async()=>{var R;try{const P=(await It()).sort((E,I)=>!E.last_message_time&&!I.last_message_time?0:E.last_message_time?I.last_message_time?new Date(I.last_message_time).getTime()-new Date(E.last_message_time).getTime():-1:1);e(P),f(null),m(!1)}catch(_){console.error("Error refreshing chats:",_),(((R=_.response)==null?void 0:R.status)===401||_.isAuthError)&&m(!0)}},[]),O=d.useCallback(async R=>{var _,P;try{v(!0);const E=await $t(R);if(n(E.messages),E.messages.length>0){const I=E.messages[E.messages.length-1];T(I.id)}f(null),m(!1)}catch(E){console.error("Error loading messages:",E),((_=E.response)==null?void 0:_.status)===401||E.isAuthError?(m(!0),f("Приложение должно быть открыто из Telegram для корректной работы")):E.isTimeoutError||E.code==="ECONNABORTED"?f("⏱️ Сервер запускается, сообщения загрузятся автоматически"):E.isServiceError||((P=E.response)==null?void 0:P.status)===503?f("🔧 Сервер временно недоступен, попробуйте обновить чат"):f("Ошибка загрузки сообщений")}finally{v(!1)}},[h]),$=d.useCallback(async R=>{var _,P;try{const I=(await $t(R)).messages;if(I.length>0){const q=I[I.length-1].id;if(S&&q>S){n(I),T(q),w(!0),M();try{(P=(_=window.Telegram)==null?void 0:_.WebApp)!=null&&P.HapticFeedback&&window.Telegram.WebApp.HapticFeedback.notificationOccurred("success")}catch{console.log("Haptic feedback not available")}console.log("🔄 Получены новые сообщения")}}}catch(E){console.error("Error checking new messages:",E)}},[S,M]),X=d.useCallback(async(R,_)=>{if(_.trim())try{const P={text:_.trim(),message_type:"text",chat_id:R},E=await ro(P);n(I=>[...I,E]),T(E.id),e(I=>I.map(H=>H.id===R?{...H,last_message:_.trim(),last_message_time:new Date().toISOString()}:H).sort((H,Y)=>!H.last_message_time&&!Y.last_message_time?0:H.last_message_time?Y.last_message_time?new Date(Y.last_message_time).getTime()-new Date(H.last_message_time).getTime():-1:1))}catch(P){if(console.error("Error sending message:",P),f("Ошибка отправки сообщения"),l){const E={id:Date.now(),text:_.trim(),message_type:"text",chat_id:R,sender_id:l.id,sender:{id:l.id,telegram_id:l.telegram_id,username:l.username,first_name:l.first_name,last_name:l.last_name,profile_photo_url:l.profile_photo_url},is_edited:!1,is_deleted:!1,read_by:[],created_at:new Date().toISOString(),updated_at:new Date().toISOString()};n(I=>[...I,E]),T(E.id),e(I=>I.map(H=>H.id===R?{...H,last_message:_.trim(),last_message_time:new Date().toISOString()}:H).sort((H,Y)=>!H.last_message_time&&!Y.last_message_time?0:H.last_message_time?Y.last_message_time?new Date(Y.last_message_time).getTime()-new Date(H.last_message_time).getTime():-1:1))}}},[l]),W=d.useCallback(async(R,_=[],P=[])=>{try{const E={title:R,chat_type:_.length+P.length>0?"group":"private",member_ids:_},I=await Qr(E);if(P.length>0){const{inviteMemberByUsername:H}=await st(async()=>{const{inviteMemberByUsername:Y}=await Promise.resolve().then(()=>jt);return{inviteMemberByUsername:Y}},void 0);for(const Y of P)try{await H(I.id,Y)}catch(te){console.error(`Error inviting ${Y}:`,te)}}await k();const q={id:I.id,title:I.title,chat_type:I.chat_type,photo_url:I.photo_url,last_message:void 0,last_message_time:void 0,unread_count:0};return a(q),await O(I.id),I}catch(E){throw console.error("Error creating chat:",E),f("Ошибка создания чата"),E}},[k,O]),D=d.useCallback(R=>{a(R),T(null),w(!1),O(R.id),R.unread_count>0&&oo(R.id).catch(_=>console.error("Error marking messages as read:",_))},[O]),V=d.useCallback(()=>{a(null),n([]),T(null),w(!1)},[]),z=d.useCallback(()=>{w(!1)},[]),F=d.useCallback(async R=>{try{const{getChat:_}=await st(async()=>{const{getChat:E}=await Promise.resolve().then(()=>jt);return{getChat:E}},void 0);return await _(R)}catch(_){throw console.error("Error loading chat info:",_),f("Ошибка загрузки информации о чате"),_}},[]),J=d.useCallback(async(R,_)=>{try{await eo(R,_),f(null),r&&r.id===R&&setTimeout(()=>M(),1e3)}catch(P){throw console.error("Error adding member to chat:",P),f("Ошибка добавления участника"),P}},[r,M]),ee=d.useCallback(async(R,_)=>{try{await to(R,_),f(null),r&&r.id===R&&setTimeout(()=>M(),1e3)}catch(P){throw console.error("Error removing member from chat:",P),f("Ошибка удаления участника"),P}},[r,M]);return d.useEffect(()=>{h(),A(),k()},[h,A,k]),d.useEffect(()=>{if(!x||y)return;const R=setInterval(()=>{M()},3e4);return()=>clearInterval(R)},[x,y,M]),d.useEffect(()=>{if(!x||!r||y)return;const R=setInterval(()=>{$(r.id)},5e3);return()=>clearInterval(R)},[x,r,y,$]),d.useEffect(()=>{if(!x||y)return;const R=setInterval(async()=>{try{await Bt(),M()}catch(_){console.log("No new invitations or error:",_)}},12e4);return()=>clearInterval(R)},[x,y,M]),{chats:t,currentChat:r,messages:s,currentUser:l,loading:c,messagesLoading:p,error:j,isAuthError:y,autoRefresh:x,setAutoRefresh:b,hasNewMessages:g,markMessagesAsViewed:z,sendNewMessage:X,createNewChat:W,selectChat:D,refreshChats:M,refreshMessages:()=>r&&O(r.id),loadChatInfo:F,addMemberToChat:J,removeMemberFromChat:ee,clearCurrentChat:V,checkNewMessages:()=>r&&$(r.id)}},Vs=({open:t,onClose:e})=>{const[r,a]=d.useState(!1),[s,n]=d.useState(null),l=async()=>{a(!0),n(null);try{const u=await er(),{debugAuthConfig:p,debugValidateTelegramData:v}=await st(async()=>{const{debugAuthConfig:b,debugValidateTelegramData:S}=await Promise.resolve().then(()=>jt);return{debugAuthConfig:b,debugValidateTelegramData:S}},void 0),{getTelegramInitData:j}=await st(async()=>{const{getTelegramInitData:b}=await Promise.resolve().then(()=>Ls);return{getTelegramInitData:b}},void 0);let f,y,m=[];try{f=await p()}catch{f={error:"Не удалось получить конфигурацию сервера"}}const x=j();if(x)try{y=await v(x)}catch{y={error:"Не удалось протестировать валидацию"}}switch(u){case"server_no_token":m=["Администратор должен установить переменную TELEGRAM_BOT_TOKEN на сервере","Получите токен в @BotFather и добавьте его в настройки Heroku","Перезапустите приложение после установки токена"];break;case"validation_failed":m=["Проверьте правильность токена бота в @BotFather","Убедитесь, что приложение открыто из Telegram","Токен должен соответствовать боту, через который открыто приложение"];break;case"validation_success":m=["Валидация прошла успешно, проблема может быть временной","Попробуйте перезагрузить приложение","Проверьте интернет-соединение"];break;default:m=["Убедитесь, что приложение открыто из Telegram","Проверьте интернет-соединение","Обратитесь к администратору с результатами диагностики"]}n({status:u,serverConfig:f,validationResult:y,recommendations:m})}catch{n({status:"error",recommendations:["Произошла ошибка при диагностике","Проверьте консоль браузера для подробностей"]})}finally{a(!1)}},i=u=>{switch(u){case"validation_success":return"success";case"server_no_token":case"validation_failed":return"error";default:return"warning"}},c=u=>{switch(u){case"server_no_token":return"Токен бота не установлен";case"validation_failed":return"Валидация не прошла";case"validation_success":return"Валидация успешна";case"server_config_error":return"Ошибка конфигурации сервера";case"validation_error":return"Ошибка валидации";case"no_data":return"Нет данных авторизации";case"general_error":return"Общая ошибка";default:return"Неизвестный статус"}};return o.jsxs(Xt,{open:t,onClose:e,maxWidth:"md",fullWidth:!0,children:[o.jsx(Gt,{children:"🔬 Диагностика проблемы авторизации"}),o.jsxs(Kt,{children:[!r&&!s&&o.jsx(N,{sx:{textAlign:"center",py:3},children:o.jsx(B,{variant:"body1",sx:{mb:2},children:'Нажмите "Запустить диагностику" для проверки проблемы авторизации'})}),r&&o.jsxs(N,{sx:{display:"flex",alignItems:"center",justifyContent:"center",py:4},children:[o.jsx(_e,{sx:{mr:2}}),o.jsx(B,{children:"Выполняется диагностика..."})]}),s&&o.jsxs(N,{sx:{py:2},children:[o.jsxs(N,{sx:{mb:3},children:[o.jsx(B,{variant:"h6",sx:{mb:1},children:"Результат диагностики:"}),o.jsx(kr,{label:c(s.status),color:i(s.status),sx:{mb:2}})]}),s.serverConfig&&o.jsxs(N,{sx:{mb:3},children:[o.jsx(B,{variant:"h6",sx:{mb:1},children:"Конфигурация сервера:"}),o.jsxs(Be,{severity:s.serverConfig.telegram_bot_token_set?"success":"error",children:[o.jsxs(B,{variant:"body2",children:["Токен бота: ",s.serverConfig.telegram_bot_token_set?"✅ Установлен":"❌ Не установлен"]}),o.jsxs(B,{variant:"body2",children:["Режим отладки: ",s.serverConfig.debug_mode?"Включен":"Выключен"]})]})]}),s.validationResult&&o.jsxs(N,{sx:{mb:3},children:[o.jsx(B,{variant:"h6",sx:{mb:1},children:"Результат валидации:"}),o.jsx(Be,{severity:s.validationResult.success?"success":"error",children:o.jsxs(B,{variant:"body2",children:["Валидация: ",s.validationResult.success?"✅ Успешна":"❌ Не прошла"]})})]}),o.jsxs(N,{sx:{mb:2},children:[o.jsx(B,{variant:"h6",sx:{mb:1},children:"Рекомендации:"}),s.recommendations.map((u,p)=>o.jsxs(B,{variant:"body2",sx:{mb:1,pl:2},children:["• ",u]},p))]})]})]}),o.jsxs(Yt,{children:[!s&&o.jsx(ce,{onClick:l,disabled:r,variant:"contained",color:"primary",children:"Запустить диагностику"}),s&&o.jsx(ce,{onClick:l,variant:"outlined",children:"Повторить диагностику"}),o.jsx(ce,{onClick:e,children:"Закрыть"})]})]})},qs=({open:t,onClose:e,currentChat:r,loadChatInfo:a,addMemberToChat:s,removeMemberFromChat:n,currentUserId:l})=>{var W;const[i,c]=d.useState(null),[u,p]=d.useState(!1),[v,j]=d.useState(null),[f,y]=d.useState(""),[m,x]=d.useState(""),[b,S]=d.useState("username"),[T,g]=d.useState(!1),[w,h]=d.useState(null);d.useEffect(()=>{t&&r&&A()},[t,r]);const A=async()=>{if(r)try{p(!0),j(null);const D=await a(r.id);c(D)}catch(D){j("Не удалось загрузить информацию о чате"),console.error("Error loading chat details:",D)}finally{p(!1)}},k=async D=>{r&&await s(r.id,D)},M=async D=>{if(!r)return;const V=await Wt(r.id,D);V.status==="added"?h({type:"success",message:`✅ @${D} найден и добавлен в чат!`}):V.status==="invited"&&h({type:"info",message:`📨 @${D} не найден в базе. Приглашение создано - пользователь будет добавлен при входе в приложение.`}),setTimeout(()=>h(null),5e3)},O=async()=>{if(!f.trim())return;const D=f.trim(),V=parseInt(D);try{g(!0),j(null),isNaN(V)?await M(D.replace(/^@/,"")):await k(V),y(""),await A()}catch(z){console.error("Error adding member (ID path):",z),j("Не удалось добавить участника")}finally{g(!1)}},$=async()=>{if(!(!m.trim()||!r))try{g(!0),j(null),h(null);const D=await Wt(r.id,m.trim());D.status==="added"?(h({type:"success",message:`✅ @${m.trim()} добавлен в чат!`}),x(""),await A()):D.status==="invited"&&(h({type:"info",message:`📨 Приглашение отправлено @${m.trim()}. Пользователь будет добавлен автоматически при входе в приложение.`}),x("")),setTimeout(()=>h(null),5e3)}catch(D){console.error("Error adding member by username:",D),h({type:"warning",message:"Не удалось добавить участника. Проверьте username и попробуйте снова."})}finally{g(!1)}},X=async D=>{if(r)try{j(null),await n(r.id,D),await A()}catch(V){j("Не удалось удалить участника"),console.error("Error removing member:",V)}};return r?o.jsxs(Xt,{open:t,onClose:e,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{bgcolor:"rgba(35, 43, 59, 0.95)",color:"white"}},children:[o.jsxs(Gt,{sx:{display:"flex",alignItems:"center",gap:2},children:[o.jsx(wt,{src:r.photo_url||void 0,sx:{bgcolor:"#4a9eff"},children:r.title?r.title[0].toUpperCase():o.jsx(Cr,{})}),o.jsxs(N,{children:[o.jsx(B,{variant:"h6",children:r.title||"Безымянный чат"}),o.jsx(B,{variant:"caption",sx:{color:"#8b95a1"},children:r.chat_type==="private"?"Личный чат":"Групповой чат"})]})]}),o.jsxs(Kt,{children:[v&&o.jsx(Be,{severity:"error",sx:{mb:2},children:v}),u?o.jsx(N,{sx:{display:"flex",justifyContent:"center",py:3},children:o.jsx(_e,{sx:{color:"#4a9eff"}})}):i?o.jsxs(o.Fragment,{children:[o.jsxs(N,{sx:{mb:3},children:[o.jsx(B,{variant:"subtitle1",sx:{mb:1,fontWeight:600},children:"Информация"}),o.jsxs(B,{variant:"body2",sx:{color:"#8b95a1",mb:1},children:["ID чата: ",i.id]}),o.jsxs(B,{variant:"body2",sx:{color:"#8b95a1",mb:1},children:["Создан: ",new Date(i.created_at).toLocaleDateString("ru-RU")]}),i.description&&o.jsxs(B,{variant:"body2",sx:{color:"#8b95a1"},children:["Описание: ",i.description]})]}),o.jsxs(N,{sx:{mb:3},children:[o.jsxs(B,{variant:"subtitle1",sx:{mb:2,fontWeight:600},children:["Участники (",((W=i.members)==null?void 0:W.length)||0,")"]}),i.members&&i.members.length>0?o.jsx(Rr,{sx:{maxHeight:200,overflow:"auto"},children:i.members.map(D=>o.jsxs(Mr,{sx:{bgcolor:"rgba(43, 52, 65, 0.5)",borderRadius:1,mb:1},children:[o.jsx(qr,{children:o.jsx(wt,{src:D.profile_photo_url||void 0,sx:{bgcolor:"#4a9eff"},children:D.first_name?D.first_name[0].toUpperCase():o.jsx(Cr,{})})}),o.jsx(Xr,{primary:o.jsxs(N,{sx:{display:"flex",alignItems:"center",gap:1},children:[o.jsxs(B,{children:[D.first_name," ",D.last_name]}),D.is_admin&&o.jsx(kr,{icon:o.jsx(Is,{}),label:"Админ",size:"small",sx:{bgcolor:"#4a9eff",color:"white",fontSize:"0.7rem"}})]}),secondary:o.jsx(B,{variant:"caption",sx:{color:"#8b95a1"},children:D.username?`@${D.username}`:`ID: ${D.telegram_id}`})}),l!==D.telegram_id&&o.jsx(ze,{title:"Удалить участника",children:o.jsx(We,{onClick:()=>X(D.telegram_id),sx:{color:"#f44336","&:hover":{bgcolor:"rgba(244, 67, 54, 0.1)"}},children:o.jsx(Bs,{})})})]},D.id))}):o.jsx(B,{variant:"body2",sx:{color:"#8b95a1",textAlign:"center",py:2},children:"Нет участников"})]}),o.jsxs(N,{children:[o.jsx(B,{variant:"subtitle1",sx:{mb:2,fontWeight:600},children:"Добавить участника"}),w&&o.jsx(Be,{severity:w.type==="success"?"success":w.type==="info"?"info":"warning",sx:{mb:2,"& .MuiAlert-message":{color:"white"},bgcolor:w.type==="success"?"rgba(76, 175, 80, 0.2)":w.type==="info"?"rgba(33, 150, 243, 0.2)":"rgba(255, 152, 0, 0.2)",border:`1px solid ${w.type==="success"?"#4CAF50":w.type==="info"?"#2196F3":"#FF9800"}`},children:w.message}),o.jsxs(N,{sx:{display:"flex",gap:1,mb:2},children:[o.jsx(ce,{variant:b==="username"?"contained":"outlined",onClick:()=>S("username"),size:"small",sx:{bgcolor:b==="username"?"#4a9eff":"transparent",color:b==="username"?"white":"#4a9eff",borderColor:"#4a9eff","&:hover":{bgcolor:b==="username"?"#3d8bdb":"rgba(74, 158, 255, 0.1)"}},children:"По @username"}),o.jsx(ce,{variant:b==="id"?"contained":"outlined",onClick:()=>S("id"),size:"small",sx:{bgcolor:b==="id"?"#4a9eff":"transparent",color:b==="id"?"white":"#4a9eff",borderColor:"#4a9eff","&:hover":{bgcolor:b==="id"?"#3d8bdb":"rgba(74, 158, 255, 0.1)"}},children:"По ID (авто)"})]}),b==="username"?o.jsxs(N,{sx:{display:"flex",gap:1},children:[o.jsx(rt,{size:"small",placeholder:"@username пользователя",value:m,onChange:D=>x(D.target.value),helperText:"💡 Если пользователь уже использовал приложение - добавится сразу. Если нет - получит приглашение.",sx:{flex:1,"& .MuiOutlinedInput-root":{color:"white","& fieldset":{borderColor:"rgba(255, 255, 255, 0.3)"},"&:hover fieldset":{borderColor:"#4a9eff"},"&.Mui-focused fieldset":{borderColor:"#4a9eff"}},"& .MuiFormHelperText-root":{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem"}}}),o.jsx(ce,{variant:"contained",onClick:$,disabled:!m.trim()||T,startIcon:T?o.jsx(_e,{size:16}):o.jsx(jr,{}),sx:{bgcolor:"#4a9eff","&:hover":{bgcolor:"#3d8bdb"},minWidth:"120px"},children:T?"Поиск...":"Добавить"})]}):o.jsxs(N,{sx:{display:"flex",gap:1},children:[o.jsx(rt,{size:"small",placeholder:"ID или @username",value:f,onChange:D=>y(D.target.value),helperText:"💡 Можете ввести как Telegram ID (числа), так и @username - система определит автоматически",sx:{flex:1,"& .MuiOutlinedInput-root":{color:"white","& fieldset":{borderColor:"rgba(255, 255, 255, 0.3)"},"&:hover fieldset":{borderColor:"#4a9eff"},"&.Mui-focused fieldset":{borderColor:"#4a9eff"}},"& .MuiFormHelperText-root":{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem"}}}),o.jsx(ce,{variant:"contained",onClick:O,disabled:!f.trim()||T,startIcon:T?o.jsx(_e,{size:16}):o.jsx(jr,{}),sx:{bgcolor:"#4a9eff","&:hover":{bgcolor:"#3d8bdb"},minWidth:"120px"},children:T?"Поиск...":"Добавить"})]})]})]}):o.jsx(B,{variant:"body2",sx:{textAlign:"center",py:3,color:"#8b95a1"},children:"Не удалось загрузить информацию о чате"})]}),o.jsx(Yt,{children:o.jsx(ce,{onClick:e,sx:{color:"#8b95a1"},children:"Закрыть"})})]}):null},tn=()=>{const t=Lt(),e=To(t.breakpoints.down("md")),[r,a]=d.useState(""),[s,n]=d.useState(!1),[l,i]=d.useState(""),[c,u]=d.useState(""),[p,v]=d.useState(null),[j,f]=d.useState(!1),[y,m]=d.useState(!1),[x,b]=d.useState(!1),S=d.useRef(null),{chats:T,currentChat:g,messages:w,currentUser:h,loading:A,messagesLoading:k,error:M,isAuthError:O,autoRefresh:$,setAutoRefresh:X,hasNewMessages:W,markMessagesAsViewed:D,sendNewMessage:V,createNewChat:z,selectChat:F,loadChatInfo:J,addMemberToChat:ee,removeMemberFromChat:R,clearCurrentChat:_,checkNewMessages:P}=Hs(),E=()=>{var C;(C=S.current)==null||C.scrollIntoView({behavior:"smooth"})},I=()=>{_()};d.useEffect(E,[w]),d.useEffect(()=>{if(W&&w.length>0){const C=setTimeout(()=>{D()},2e3);return()=>clearTimeout(C)}},[W,w.length,D]);const q=async()=>{if(!(!r.trim()||!g))try{D(),await V(g.id,r.trim()),a(""),E()}catch(C){console.error("Error sending message:",C)}},H=C=>{C.key==="Enter"&&!C.shiftKey&&(C.preventDefault(),q())},Y=async()=>{var C,K;try{f(!0),v(null);const U=[],G=[];c.trim()&&c.split(",").map(le=>le.trim()).filter(le=>le.length>0).forEach(le=>{const je=parseInt(le);!isNaN(je)&&je>0?U.push(je):G.push(le.replace(/^@/,""))}),await z(l.trim(),U,G);let Ce=`✅ Чат "${l.trim()}" создан успешно!`;U.length>0&&(Ce+=` Добавлено ${U.length} участников.`),G.length>0&&(Ce+=` Отправлено ${G.length} приглашений по username.`),v({type:"success",message:Ce}),setTimeout(()=>{v(null),n(!1)},2e3),i(""),u("")}catch(U){console.error("Error creating chat:",U);let G="Не удалось создать чат. Попробуйте еще раз.";U!=null&&U.isTimeoutError?G="⏱️ Сервер запускается, это может занять до минуты. Попробуйте еще раз.":U!=null&&U.isServiceError?G="🔧 Сервер временно недоступен. Попробуйте через несколько минут.":U!=null&&U.isAuthError?G="🔐 Ошибка авторизации. Откройте приложение из Telegram.":(U==null?void 0:U.code)==="ECONNABORTED"?G="⏱️ Превышено время ожидания. Сервер может запускаться - попробуйте еще раз.":((C=U==null?void 0:U.response)==null?void 0:C.status)===503?G="🔧 Сервер временно недоступен. Попробуйте через несколько минут.":((K=U==null?void 0:U.response)==null?void 0:K.status)===500&&(G="⚠️ Ошибка на сервере. Попробуйте еще раз или обратитесь в поддержку."),v({type:"warning",message:G})}finally{f(!1)}},te=C=>new Date(C).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"}),ve=C=>{const K=new Date(C),U=new Date,G=new Date(U);return G.setDate(G.getDate()-1),K.toDateString()===U.toDateString()?"Сегодня":K.toDateString()===G.toDateString()?"Вчера":K.toLocaleDateString("ru-RU",{day:"numeric",month:"short"})},Ee=C=>{const K=C.sender;return K.username?`@${K.username}`:`${K.first_name}${K.last_name?` ${K.last_name}`:""}`},ae=C=>h&&C.sender_id===h.id;return A?o.jsx(N,{sx:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"rgba(35, 43, 59, 0.95)"},children:o.jsx(_e,{sx:{color:"#4a9eff"}})}):O?o.jsxs(N,{sx:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",bgcolor:"rgba(35, 43, 59, 0.95)",p:3},children:[o.jsxs(Be,{severity:"error",sx:{mb:3,maxWidth:"600px"},children:[o.jsx(B,{variant:"h6",sx:{mb:2},children:"🚫 Ошибка авторизации"}),o.jsx(B,{variant:"body1",sx:{mb:2,fontWeight:"bold"},children:"Проблема с авторизацией на сервере"}),o.jsx(B,{variant:"body2",sx:{mb:2},children:"Сервер отклоняет авторизацию. Возможные причины:"}),o.jsxs(B,{variant:"body2",component:"ul",sx:{pl:2,mb:2},children:[o.jsx("li",{children:"На сервере не настроен токен Telegram бота"}),o.jsx("li",{children:"Неправильный или истёкший токен бота"}),o.jsx("li",{children:"Проблема с подписью данных авторизации"}),o.jsx("li",{children:"Приложение запущено не из Telegram"})]}),o.jsx(B,{variant:"body2",sx:{mb:2},children:o.jsx("strong",{children:"Что делать:"})}),o.jsxs(B,{variant:"body2",component:"ul",sx:{pl:2,mb:2},children:[o.jsx("li",{children:'Нажмите "Диагностика" для подробной проверки'}),o.jsx("li",{children:"Убедитесь, что приложение открыто из Telegram"}),o.jsx("li",{children:"Если вы администратор - проверьте настройки сервера"}),o.jsx("li",{children:"Если проблема повторяется - обратитесь в поддержку"})]})]}),o.jsxs(N,{sx:{display:"flex",gap:2,flexWrap:"wrap",justifyContent:"center"},children:[o.jsx(ce,{variant:"contained",onClick:()=>m(!0),sx:{bgcolor:"#f44336","&:hover":{bgcolor:"#d32f2f"}},children:"🔬 Диагностика проблемы"}),o.jsx(ce,{variant:"contained",onClick:()=>window.location.reload(),sx:{bgcolor:"#4a9eff","&:hover":{bgcolor:"#3d8bdb"}},children:"🔄 Перезагрузить приложение"}),o.jsx(ce,{variant:"outlined",onClick:()=>{var C;(C=window.Telegram)!=null&&C.WebApp?window.Telegram.WebApp.close():window.history.back()},sx:{borderColor:"#4a9eff",color:"#4a9eff","&:hover":{borderColor:"#3d8bdb",color:"#3d8bdb"}},children:"⬅️ Назад"})]})]}):o.jsxs(N,{sx:{height:"100vh",display:"flex",bgcolor:"rgba(35, 43, 59, 0.95)",color:"white",overflow:"hidden"},children:[o.jsxs(N,{sx:{width:e?"100%":"350px",display:e&&g?"none":"flex",flexDirection:"column",borderRight:"1px solid rgba(43, 52, 65, 1)",bgcolor:"rgba(35, 43, 59, 0.95)"},children:[o.jsxs(N,{sx:{p:e?1:2,borderBottom:"1px solid rgba(43, 52, 65, 1)",display:"flex",alignItems:"center",justifyContent:"space-between",minHeight:e?"52px":"auto"},children:[o.jsxs(N,{sx:{display:"flex",alignItems:"center",gap:1},children:[o.jsx(B,{variant:e?"body1":"h6",sx:{fontWeight:600,fontSize:e?"1rem":"inherit"},children:"Чаты"}),$&&o.jsx(ze,{title:"Автообновление включено",children:o.jsx(_e,{size:e?14:16,sx:{color:"#4a9eff",animation:"spin 2s linear infinite","@keyframes spin":{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}}})})]}),o.jsxs(N,{sx:{display:"flex",gap:e?.5:1},children:[o.jsx(ze,{title:$?"Отключить автообновление":"Включить автообновление",children:o.jsx(We,{onClick:()=>X(!$),sx:{color:$?"#4a9eff":"#8b95a1",p:e?.75:1,"&:hover":{bgcolor:"rgba(74, 158, 255, 0.1)"}},children:o.jsx(Tr,{fontSize:e?"small":"medium"})})}),o.jsx(ze,{title:"Создать новый чат",children:o.jsx(We,{onClick:()=>n(!0),sx:{bgcolor:"#4a9eff",color:"white",p:e?.75:1,"&:hover":{bgcolor:"#3d8bdb"}},children:o.jsx(Es,{fontSize:e?"small":"medium"})})})]})]}),o.jsx(Rr,{sx:{flex:1,overflow:"auto",p:0},children:T.map(C=>o.jsx(nr.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:o.jsx(Mr,{disablePadding:!0,sx:{borderBottom:"1px solid rgba(43, 52, 65, 0.5)"},children:o.jsxs(So,{selected:(g==null?void 0:g.id)===C.id,onClick:()=>F(C),sx:{py:e?1.25:1.5,px:e?1:2,bgcolor:(g==null?void 0:g.id)===C.id?"rgba(74, 158, 255, 0.1)":"transparent","&:hover":{bgcolor:(g==null?void 0:g.id)===C.id?"rgba(74, 158, 255, 0.15)":"rgba(255, 255, 255, 0.05)"},minHeight:e?64:"auto"},children:[o.jsx(qr,{children:o.jsx(es,{badgeContent:C.unread_count,color:"error",invisible:C.unread_count===0,children:o.jsx(wt,{src:C.photo_url||void 0,sx:{bgcolor:"#4a9eff",width:e?44:45,height:e?44:45},children:C.title?C.title[0].toUpperCase():o.jsx(Rt,{})})})}),o.jsx(Xr,{primary:o.jsx(B,{variant:"body1",sx:{fontWeight:C.unread_count>0?600:400,color:"white",fontSize:e?"0.9rem":"inherit"},children:C.title||"Безымянный чат"}),secondary:o.jsxs(N,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsx(B,{variant:"caption",sx:{color:"#8b95a1",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:e?"120px":"150px",fontSize:e?"0.75rem":"inherit"},children:C.last_message||"Нет сообщений"}),C.last_message_time&&o.jsx(B,{variant:"caption",sx:{color:"#8b95a1",fontSize:e?"0.65rem":"0.7rem",ml:1},children:ve(C.last_message_time)})]})})]})})},C.id))})]}),o.jsx(N,{sx:{flex:1,display:"flex",flexDirection:"column",position:"relative"},children:g?o.jsxs(o.Fragment,{children:[o.jsxs(N,{sx:{p:e?.75:2,borderBottom:"1px solid rgba(43, 52, 65, 1)",bgcolor:"rgba(35, 43, 59, 0.95)",display:"flex",alignItems:"center",justifyContent:"space-between",minHeight:e?"56px":"auto"},children:[o.jsxs(N,{sx:{display:"flex",alignItems:"center",flex:1},children:[e&&o.jsx(We,{onClick:I,sx:{color:"#4a9eff",mr:.5,p:.5,"&:hover":{bgcolor:"rgba(74, 158, 255, 0.1)"}},children:o.jsx($s,{})}),o.jsx(wt,{src:g.photo_url||void 0,sx:{bgcolor:"#4a9eff",width:e?32:40,height:e?32:40,mr:e?1:2},children:g.title?g.title[0].toUpperCase():o.jsx(Rt,{})}),o.jsxs(N,{sx:{flex:1,minWidth:0},children:[o.jsxs(B,{variant:e?"body2":"h6",sx:{fontWeight:600,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:e?.5:1,fontSize:e?"0.875rem":"inherit"},children:[g.title||"Безымянный чат",W&&o.jsx(N,{sx:{width:e?6:8,height:e?6:8,borderRadius:"50%",bgcolor:"#4CAF50",animation:"pulse 2s infinite","@keyframes pulse":{"0%":{transform:"scale(1)",opacity:1},"50%":{transform:"scale(1.2)",opacity:.7},"100%":{transform:"scale(1)",opacity:1}}}})]}),o.jsxs(B,{variant:"caption",sx:{color:"#8b95a1",fontSize:e?"0.65rem":"0.75rem",lineHeight:e?1.2:"inherit"},children:[g.chat_type==="private"?"Личный чат":"Групповой чат",W&&(e?" • Новые":" • Новые сообщения")]})]})]}),o.jsxs(N,{sx:{display:"flex",gap:e?.25:1},children:[o.jsx(ze,{title:"Обновить сообщения",children:o.jsx(We,{onClick:()=>g&&P(),sx:{color:"#4a9eff",p:e?.5:1.5,"&:hover":{bgcolor:"rgba(74, 158, 255, 0.1)"}},children:o.jsx(Tr,{fontSize:e?"small":"medium"})})}),o.jsx(ze,{title:"Информация о чате",children:o.jsx(We,{onClick:()=>b(!0),sx:{color:"#4a9eff",p:e?.5:1.5,"&:hover":{bgcolor:"rgba(74, 158, 255, 0.1)"}},children:o.jsx(Ws,{fontSize:e?"small":"medium"})})})]})]}),o.jsxs(N,{sx:{flex:1,overflow:"auto",p:e?.5:1.5,bgcolor:"rgba(35, 43, 59, 0.95)",backgroundImage:`url(${ir})`,backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"local","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(35, 43, 59, 0.8)",pointerEvents:"none",zIndex:0},position:"relative","&::-webkit-scrollbar":{width:e?"3px":"6px"},"&::-webkit-scrollbar-track":{background:"transparent"},"&::-webkit-scrollbar-thumb":{background:"rgba(255, 255, 255, 0.2)",borderRadius:e?"1.5px":"3px"},"&::-webkit-scrollbar-thumb:hover":{background:"rgba(255, 255, 255, 0.3)"}},children:[M&&o.jsx(Be,{severity:"error",sx:{mb:e?1:2,zIndex:1,position:"relative"},children:M}),k?o.jsx(N,{sx:{display:"flex",justifyContent:"center",py:e?2:4,zIndex:1,position:"relative"},children:o.jsx(_e,{sx:{color:"#4a9eff"}})}):o.jsx(ks,{children:w.map(C=>o.jsx(nr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},style:{display:"flex",justifyContent:ae(C)?"flex-end":"flex-start",marginBottom:e?"8px":"12px",position:"relative",zIndex:1},children:o.jsxs(N,{sx:{maxWidth:e?"85%":"70%",px:e?1.25:2,py:e?.75:1.2,borderRadius:ae(C)?"18px 18px 4px 18px":"18px 18px 18px 4px",bgcolor:ae(C)?"#4a9eff":"rgba(43, 52, 65, 0.9)",color:"white",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",wordBreak:"break-word"},children:[!ae(C)&&o.jsx(B,{variant:"caption",sx:{color:"#40C4FF",fontWeight:600,display:"block",mb:e?.25:.5,fontSize:e?"0.7rem":"0.75rem"},children:Ee(C)}),o.jsx(B,{variant:"body1",sx:{mb:e?.25:.5,fontSize:e?"0.875rem":"0.95rem",lineHeight:e?1.3:1.4},children:C.text}),o.jsx(B,{variant:"caption",sx:{opacity:.7,fontSize:e?"0.6rem":"0.7rem",display:"block",textAlign:"right",mt:e?.125:.25,color:ae(C)?"rgba(255,255,255,0.8)":"#8b95a1"},children:te(C.created_at)})]})},C.id))}),o.jsx("div",{ref:S,style:{position:"relative",zIndex:1}})]}),o.jsxs(N,{sx:{p:e?1:2,bgcolor:"rgba(35, 43, 59, 0.95)",display:"flex",gap:e?.75:1.5,alignItems:"flex-end",borderTop:"1px solid rgba(43, 52, 65, 1)",pb:e?"max(1rem, env(safe-area-inset-bottom))":2},children:[o.jsx(rt,{fullWidth:!0,multiline:!0,maxRows:e?2:4,value:r,onChange:C=>a(C.target.value),onKeyPress:H,placeholder:"Напишите сообщение...",variant:"outlined",size:"small",sx:{"& .MuiOutlinedInput-root":{borderRadius:e?"16px":"20px",bgcolor:"rgba(35, 46, 60, 1)",border:"none",fontSize:e?"0.875rem":"0.95rem",color:"white","& fieldset":{border:"1px solid rgba(60, 72, 84, 1)"},"&:hover fieldset":{border:"1px solid #4a9eff"},"&.Mui-focused fieldset":{border:"2px solid #4a9eff"},"& .MuiInputBase-input":{padding:e?"8px 12px":"12px 16px",color:"white","&::placeholder":{color:"rgba(255, 255, 255, 0.5)",opacity:1}}}}}),o.jsx(We,{onClick:q,disabled:!r.trim(),size:"medium",sx:{bgcolor:"#4a9eff",color:"white",width:e?36:44,height:e?36:44,minWidth:e?36:44,minHeight:e?36:44,"&:hover":{bgcolor:"#3d8bdb",transform:"scale(1.05)"},"&:disabled":{bgcolor:"rgba(60, 72, 84, 1)",color:"#8b95a1"},transition:"all 0.2s ease"},children:o.jsx(Do,{sx:{fontSize:e?"1rem":"1.2rem"}})})]})]}):o.jsx(N,{sx:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",bgcolor:"rgba(35, 43, 59, 0.95)",backgroundImage:`url(${ir})`,backgroundSize:"cover",backgroundPosition:"center","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(35, 43, 59, 0.8)",pointerEvents:"none"}},children:o.jsxs(N,{sx:{position:"relative",zIndex:1,textAlign:"center"},children:[o.jsx(Rt,{sx:{fontSize:80,color:"#4a9eff",mb:2}}),o.jsx(B,{variant:"h5",sx:{mb:1,color:"white"},children:"Выберите чат"}),o.jsx(B,{variant:"body1",sx:{color:"#8b95a1"},children:"Выберите чат из списка или создайте новый"})]})})}),o.jsxs(Xt,{open:s,onClose:()=>{n(!1),v(null)},maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{bgcolor:"rgba(35, 43, 59, 0.95)",color:"white"}},children:[o.jsx(Gt,{children:"Создать новый чат"}),o.jsxs(Kt,{children:[p&&o.jsx(Be,{severity:p.type==="success"?"success":"warning",sx:{mb:2,"& .MuiAlert-message":{color:"white"},bgcolor:p.type==="success"?"rgba(76, 175, 80, 0.2)":"rgba(255, 152, 0, 0.2)",border:`1px solid ${p.type==="success"?"#4CAF50":"#FF9800"}`},children:p.message}),o.jsx(rt,{autoFocus:!0,margin:"dense",label:"Название чата",fullWidth:!0,variant:"outlined",value:l,onChange:C=>i(C.target.value),sx:{mb:2,"& .MuiOutlinedInput-root":{color:"white","& fieldset":{borderColor:"rgba(255, 255, 255, 0.3)"},"&:hover fieldset":{borderColor:"#4a9eff"},"&.Mui-focused fieldset":{borderColor:"#4a9eff"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.7)","&.Mui-focused":{color:"#4a9eff"}}}}),o.jsx(rt,{margin:"dense",label:"Участники (ID или @username, через запятую)",fullWidth:!0,variant:"outlined",placeholder:"Например: 123456789, @username, 987654321, @user2",value:c,onChange:C=>u(C.target.value),helperText:"💡 Поддерживаются как Telegram ID (числа), так и @username. Если пользователь не найден по username - получит приглашение.",sx:{mb:1,"& .MuiOutlinedInput-root":{color:"white","& fieldset":{borderColor:"rgba(255, 255, 255, 0.3)"},"&:hover fieldset":{borderColor:"#4a9eff"},"&.Mui-focused fieldset":{borderColor:"#4a9eff"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.7)","&.Mui-focused":{color:"#4a9eff"}},"& .MuiFormHelperText-root":{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem"}}})]}),o.jsxs(Yt,{children:[o.jsx(ce,{onClick:()=>{n(!1),v(null)},sx:{color:"#8b95a1"},children:"Отмена"}),o.jsx(ce,{onClick:Y,disabled:!l.trim()||j,startIcon:j?o.jsx(_e,{size:16}):void 0,sx:{bgcolor:"#4a9eff",color:"white","&:hover":{bgcolor:"#3d8bdb"},"&:disabled":{bgcolor:"rgba(60, 72, 84, 1)",color:"#8b95a1"}},children:j?"Создаём...":"Создать"})]})]}),o.jsx(Vs,{open:y,onClose:()=>m(!1)}),o.jsx(qs,{open:x,onClose:()=>b(!1),currentChat:g,loadChatInfo:J,addMemberToChat:ee,removeMemberFromChat:R,currentUserId:h==null?void 0:h.telegram_id})]})};export{tn as default};
