import{r as l,a as E,b as U,c as W,j as e,s as z,d as k,e as F,f as Z,h as be,i as _,k as X,l as me,n as ge,o as Se,p as ye,T as S,B as h,A as oe,q as ne,t as se,v as je}from"./index-CPsAi7gg.js";import{C as ae}from"./Container-uvwqwQyV.js";import{A as ie}from"./Alert-b5b2f2eR.js";import{T as Ce,A as le}from"./ArrowBack-qhwjsXw-.js";import{I as ce}from"./IconButton-BH35efnM.js";import{R as Le,W as pe}from"./Work-ccCiZAcB.js";import{C as de}from"./CircularProgress-CXFRefgw.js";import{C as we,a as Ie}from"./CardContent-C7uEvFoc.js";import{C as Me}from"./Chip-fN361k0a.js";import{B as H}from"./Button-C1smkmiK.js";import{Q as Re,L as ue}from"./QuestionAnswer-C3ZJJuOt.js";import{T as Ae}from"./TextField-Ltz92wI-.js";import{D as ze}from"./Divider-QgutM9kn.js";const Q=l.createContext({}),ee=l.createContext({});function Be(t){return E("MuiStep",t)}U("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]);const De=t=>{const{classes:o,orientation:n,alternativeLabel:s,completed:c}=t;return F({root:["root",n,s&&"alternativeLabel",c&&"completed"]},Be,o)},Pe=z("div",{name:"MuiStep",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:n}=t;return[o.root,o[n.orientation],n.alternativeLabel&&o.alternativeLabel,n.completed&&o.completed]}})({variants:[{props:{orientation:"horizontal"},style:{paddingLeft:8,paddingRight:8}},{props:{alternativeLabel:!0},style:{flex:1,position:"relative"}}]}),Te=l.forwardRef(function(o,n){const s=W({props:o,name:"MuiStep"}),{active:c,children:a,className:v,component:p="div",completed:f,disabled:b,expanded:x=!1,index:d,last:m,...B}=s,{activeStep:y,connector:u,alternativeLabel:A,orientation:L,nonLinear:j}=l.useContext(Q);let[g=!1,w=!1,I=!1]=[c,f,b];y===d?g=c!==void 0?c:!0:!j&&y>d?w=f!==void 0?f:!0:!j&&y<d&&(I=b!==void 0?b:!0);const M=l.useMemo(()=>({index:d,last:m,expanded:x,icon:d+1,active:g,completed:w,disabled:I}),[d,m,x,g,w,I]),R={...s,active:g,orientation:L,alternativeLabel:A,completed:w,disabled:I,expanded:x,component:p},D=De(R),P=e.jsxs(Pe,{as:p,className:k(D.root,v),ref:n,ownerState:R,...B,children:[u&&A&&d!==0?u:null,a]});return e.jsx(ee.Provider,{value:M,children:u&&!A&&d!==0?e.jsxs(l.Fragment,{children:[u,P]}):P})}),$e=Z(e.jsx("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z"})),Ne=Z(e.jsx("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}));function ke(t){return E("MuiStepIcon",t)}const J=U("MuiStepIcon",["root","active","completed","error","text"]);var xe;const Ee=t=>{const{classes:o,active:n,completed:s,error:c}=t;return F({root:["root",n&&"active",s&&"completed",c&&"error"],text:["text"]},ke,o)},K=z(be,{name:"MuiStepIcon",slot:"Root"})(_(({theme:t})=>({display:"block",transition:t.transitions.create("color",{duration:t.transitions.duration.shortest}),color:(t.vars||t).palette.text.disabled,[`&.${J.completed}`]:{color:(t.vars||t).palette.primary.main},[`&.${J.active}`]:{color:(t.vars||t).palette.primary.main},[`&.${J.error}`]:{color:(t.vars||t).palette.error.main}}))),Ue=z("text",{name:"MuiStepIcon",slot:"Text"})(_(({theme:t})=>({fill:(t.vars||t).palette.primary.contrastText,fontSize:t.typography.caption.fontSize,fontFamily:t.typography.fontFamily}))),We=l.forwardRef(function(o,n){const s=W({props:o,name:"MuiStepIcon"}),{active:c=!1,className:a,completed:v=!1,error:p=!1,icon:f,...b}=s,x={...s,active:c,completed:v,error:p},d=Ee(x);if(typeof f=="number"||typeof f=="string"){const m=k(a,d.root);return p?e.jsx(K,{as:Ne,className:m,ref:n,ownerState:x,...b}):v?e.jsx(K,{as:$e,className:m,ref:n,ownerState:x,...b}):e.jsxs(K,{className:m,ref:n,ownerState:x,...b,children:[xe||(xe=e.jsx("circle",{cx:"12",cy:"12",r:"12"})),e.jsx(Ue,{className:d.text,x:"12",y:"12",textAnchor:"middle",dominantBaseline:"central",ownerState:x,children:f})]})}return f});function Fe(t){return E("MuiStepLabel",t)}const T=U("MuiStepLabel",["root","horizontal","vertical","label","active","completed","error","disabled","iconContainer","alternativeLabel","labelContainer"]),_e=t=>{const{classes:o,orientation:n,active:s,completed:c,error:a,disabled:v,alternativeLabel:p}=t;return F({root:["root",n,a&&"error",v&&"disabled",p&&"alternativeLabel"],label:["label",s&&"active",c&&"completed",a&&"error",v&&"disabled",p&&"alternativeLabel"],iconContainer:["iconContainer",s&&"active",c&&"completed",a&&"error",v&&"disabled",p&&"alternativeLabel"],labelContainer:["labelContainer",p&&"alternativeLabel"]},Fe,o)},qe=z("span",{name:"MuiStepLabel",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:n}=t;return[o.root,o[n.orientation]]}})({display:"flex",alignItems:"center",[`&.${T.alternativeLabel}`]:{flexDirection:"column"},[`&.${T.disabled}`]:{cursor:"default"},variants:[{props:{orientation:"vertical"},style:{textAlign:"left",padding:"8px 0"}}]}),He=z("span",{name:"MuiStepLabel",slot:"Label"})(_(({theme:t})=>({...t.typography.body2,display:"block",transition:t.transitions.create("color",{duration:t.transitions.duration.shortest}),[`&.${T.active}`]:{color:(t.vars||t).palette.text.primary,fontWeight:500},[`&.${T.completed}`]:{color:(t.vars||t).palette.text.primary,fontWeight:500},[`&.${T.alternativeLabel}`]:{marginTop:16},[`&.${T.error}`]:{color:(t.vars||t).palette.error.main}}))),Qe=z("span",{name:"MuiStepLabel",slot:"IconContainer"})({flexShrink:0,display:"flex",paddingRight:8,[`&.${T.alternativeLabel}`]:{paddingRight:0}}),Ve=z("span",{name:"MuiStepLabel",slot:"LabelContainer"})(_(({theme:t})=>({width:"100%",color:(t.vars||t).palette.text.secondary,[`&.${T.alternativeLabel}`]:{textAlign:"center"}}))),he=l.forwardRef(function(o,n){const s=W({props:o,name:"MuiStepLabel"}),{children:c,className:a,componentsProps:v={},error:p=!1,icon:f,optional:b,slots:x={},slotProps:d={},StepIconComponent:m,StepIconProps:B,...y}=s,{alternativeLabel:u,orientation:A}=l.useContext(Q),{active:L,disabled:j,completed:g,icon:w}=l.useContext(ee),I=f||w;let M=m;I&&!M&&(M=We);const R={...s,active:L,alternativeLabel:u,completed:g,disabled:j,error:p,orientation:A},D=_e(R),P={slots:x,slotProps:{stepIcon:B,...v,...d}},[V,Y]=X("root",{elementType:qe,externalForwardedProps:{...P,...y},ownerState:R,ref:n,className:k(D.root,a)}),[G,$]=X("label",{elementType:He,externalForwardedProps:P,ownerState:R}),[q,O]=X("stepIcon",{elementType:M,externalForwardedProps:P,ownerState:R});return e.jsxs(V,{...Y,children:[I||q?e.jsx(Qe,{className:D.iconContainer,ownerState:R,children:e.jsx(q,{completed:g,active:L,error:p,icon:I,...O})}):null,e.jsxs(Ve,{className:D.labelContainer,ownerState:R,children:[c?e.jsx(G,{...$,className:k(D.label,$==null?void 0:$.className),children:c}):null,b]})]})});he.muiName="StepLabel";function Ye(t){return E("MuiStepConnector",t)}U("MuiStepConnector",["root","horizontal","vertical","alternativeLabel","active","completed","disabled","line","lineHorizontal","lineVertical"]);const Ge=t=>{const{classes:o,orientation:n,alternativeLabel:s,active:c,completed:a,disabled:v}=t,p={root:["root",n,s&&"alternativeLabel",c&&"active",a&&"completed",v&&"disabled"],line:["line",`line${me(n)}`]};return F(p,Ye,o)},Oe=z("div",{name:"MuiStepConnector",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:n}=t;return[o.root,o[n.orientation],n.alternativeLabel&&o.alternativeLabel,n.completed&&o.completed]}})({flex:"1 1 auto",variants:[{props:{orientation:"vertical"},style:{marginLeft:12}},{props:{alternativeLabel:!0},style:{position:"absolute",top:12,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"}}]}),Xe=z("span",{name:"MuiStepConnector",slot:"Line",overridesResolver:(t,o)=>{const{ownerState:n}=t;return[o.line,o[`line${me(n.orientation)}`]]}})(_(({theme:t})=>{const o=t.palette.mode==="light"?t.palette.grey[400]:t.palette.grey[600];return{display:"block",borderColor:t.vars?t.vars.palette.StepConnector.border:o,variants:[{props:{orientation:"horizontal"},style:{borderTopStyle:"solid",borderTopWidth:1}},{props:{orientation:"vertical"},style:{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24}}]}})),Je=l.forwardRef(function(o,n){const s=W({props:o,name:"MuiStepConnector"}),{className:c,...a}=s,{alternativeLabel:v,orientation:p="horizontal"}=l.useContext(Q),{active:f,disabled:b,completed:x}=l.useContext(ee),d={...s,alternativeLabel:v,orientation:p,active:f,completed:x,disabled:b},m=Ge(d);return e.jsx(Oe,{className:k(m.root,c),ref:n,ownerState:d,...a,children:e.jsx(Xe,{className:m.line,ownerState:d})})});function Ke(t){return E("MuiStepper",t)}U("MuiStepper",["root","horizontal","vertical","nonLinear","alternativeLabel"]);const Ze=t=>{const{orientation:o,nonLinear:n,alternativeLabel:s,classes:c}=t;return F({root:["root",o,n&&"nonLinear",s&&"alternativeLabel"]},Ke,c)},et=z("div",{name:"MuiStepper",slot:"Root",overridesResolver:(t,o)=>{const{ownerState:n}=t;return[o.root,o[n.orientation],n.alternativeLabel&&o.alternativeLabel,n.nonLinear&&o.nonLinear]}})({display:"flex",variants:[{props:{orientation:"horizontal"},style:{flexDirection:"row",alignItems:"center"}},{props:{orientation:"vertical"},style:{flexDirection:"column"}},{props:{alternativeLabel:!0},style:{alignItems:"flex-start"}}]}),tt=e.jsx(Je,{}),rt=l.forwardRef(function(o,n){const s=W({props:o,name:"MuiStepper"}),{activeStep:c=0,alternativeLabel:a=!1,children:v,className:p,component:f="div",connector:b=tt,nonLinear:x=!1,orientation:d="horizontal",...m}=s,B={...s,nonLinear:x,alternativeLabel:a,orientation:d,component:f},y=Ze(B),u=l.Children.toArray(v).filter(Boolean),A=u.map((j,g)=>l.cloneElement(j,{index:g,last:g+1===u.length,...j.props})),L=l.useMemo(()=>({activeStep:c,alternativeLabel:a,connector:b,nonLinear:x,orientation:d}),[c,a,b,x,d]);return e.jsx(Q.Provider,{value:L,children:e.jsx(et,{as:f,ownerState:B,className:k(y.root,p),ref:n,...m,children:A})})}),ot=Z(e.jsx("path",{d:"M9 1h6v2H9zm10.03 6.39 1.42-1.42c-.43-.51-.9-.99-1.41-1.41l-1.42 1.42C16.07 4.74 14.12 4 12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9 9-4.03 9-9c0-2.12-.74-4.07-1.97-5.61M13 14h-2V8h2z"})),ft=()=>{var te;const{currentUser:t}=ge(r=>r.aeonChat),[o,n]=l.useState([]),[s,c]=l.useState(null),[a,v]=l.useState(null),[p,f]=l.useState(0),[b,x]=l.useState(""),[d,m]=l.useState(!1),[B,y]=l.useState(null),[u,A]=l.useState(null),[L,j]=l.useState(0),[g,w]=l.useState(90),[I,M]=l.useState(!1);l.useEffect(()=>{let r;return I&&g>0&&(r=setInterval(()=>{w(i=>i<=1?(M(!1),D(),90):i-1)},1e3)),()=>clearInterval(r)},[I,g]),l.useEffect(()=>{(async()=>{try{m(!0),console.log("Загружаем позиции...");const i=await se();console.log("Полученные позиции:",i),n(i.filter(C=>C.is_active))}catch(i){console.error("Error loading positions:",i),y("Ошибка при загрузке позиций: "+(i==null?void 0:i.message)||"Неизвестная ошибка")}finally{m(!1)}})()},[t]);const R=async r=>{try{m(!0),y(null);const i=await je({position_id:r.id});c(r),v(i),j(1),f(0),x(""),w(90),M(!0)}catch(i){console.error("Error creating interview:",i),y("Ошибка при создании интервью")}finally{m(!1)}},D=async()=>{if(!(!a||!b.trim()))try{if(m(!0),M(!1),await Se(a.id,p,b),v(r=>r?{...r,answers:{...r.answers,[p.toString()]:b}}:null),p<a.questions.length-1)f(r=>r+1),x(""),w(90),M(!0);else{const r=await ye(a.id);A({glyph:V((s==null?void 0:s.title)||""),title:`Анализ интервью: ${s==null?void 0:s.title}`,description:Y(r.score,r.max_score),status:G(r.score,r.max_score),score:r.score,max_score:r.max_score,recommendations:$(r.score,r.max_score,(s==null?void 0:s.qualities)||[])}),j(2)}}catch(r){console.error("Error submitting answer:",r),y("Ошибка при сохранении ответа")}finally{m(!1)}},P=async()=>{try{m(!0),y(null);const r=await se();n(r.filter(i=>i.is_active))}catch(r){console.error("Error refreshing positions:",r),y("Ошибка при обновлении списка позиций")}finally{m(!1)}},V=r=>({"Frontend Developer":"🎨","Backend Developer":"⚙️","Full Stack Developer":"🔄","DevOps Engineer":"🚀","Data Scientist":"📊","Product Manager":"📋","UI/UX Designer":"🎭","QA Engineer":"🔍","Mobile Developer":"📱","System Administrator":"🖥️","Network Engineer":"🌐","Security Engineer":"🔒"})[r]||"💼",Y=(r,i)=>{const C=r/i*100;return C>=80?"Отличные результаты! Вы показали высокий уровень компетенций и готовы к работе в данной позиции.":C>=60?"Хорошие результаты. Есть потенциал для развития и роста в данной области.":"Результаты требуют улучшения. Рекомендуется дополнительное обучение и практика."},G=(r,i)=>{const C=r/i*100;return C>=80?"Высокий уровень":C>=60?"Средний уровень":"Требует развития"},$=(r,i,C)=>{const re=r/i*100,N=[];return re<80&&(N.push("Продолжайте развивать ключевые навыки для данной позиции"),N.push("Изучите современные технологии и инструменты в вашей области")),re<60&&(N.push("Рассмотрите возможность дополнительного обучения или курсов"),N.push("Практикуйтесь в решении реальных задач и проектов")),C.length>0&&N.push(`Особое внимание уделите развитию: ${C.map(fe=>fe.name).join(", ")}`),N},q=()=>{c(null),v(null),f(0),x(""),A(null),j(0),y(null),w(90),M(!1)},O=r=>{const i=Math.floor(r/60),C=r%60;return`${i}:${C.toString().padStart(2,"0")}`},ve=["Выбор позиции","Интервью","Результаты"];return t?e.jsxs(ae,{maxWidth:"lg",sx:{mt:4},children:[e.jsx(S,{variant:"h4",gutterBottom:!0,align:"center",sx:{mb:4},children:"🤖 HR Bot - Умное интервью"}),e.jsx(rt,{activeStep:L,sx:{mb:4},children:ve.map(r=>e.jsx(Te,{children:e.jsx(he,{children:r})},r))}),B&&e.jsx(ie,{severity:"error",sx:{mb:2},onClose:()=>y(null),children:B}),L===0&&e.jsxs(h,{children:[e.jsxs(h,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(S,{variant:"h5",gutterBottom:!0,children:"Выберите позицию для интервью"}),e.jsx(Ce,{title:"Обновить список позиций",children:e.jsx(ce,{onClick:P,disabled:d,children:e.jsx(Le,{})})})]}),d?e.jsx(h,{display:"flex",justifyContent:"center",sx:{py:4},children:e.jsx(de,{})}):o.length===0?e.jsxs(h,{textAlign:"center",sx:{py:4},children:[e.jsx(S,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"Нет доступных позиций"}),e.jsx(S,{variant:"body2",color:"text.secondary",children:"Обратитесь к администратору для добавления позиций"})]}):e.jsx(h,{sx:{display:"grid",gridTemplateColumns:{xs:"1fr",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)"},gap:3},children:o.map(r=>e.jsx(we,{elevation:0,sx:{height:"100%",cursor:"pointer",border:"2px solid #7C3AED",borderRadius:4,bgcolor:"rgba(35, 43, 59, 0.95)",color:"white",transition:"all 0.3s",boxShadow:"0 2px 16px 0 rgba(124, 58, 237, 0.10)","&:hover":{transform:"translateY(-4px) scale(1.03)",boxShadow:"0 8px 32px 0 rgba(139, 92, 246, 0.18)",borderColor:"#8B5CF6"}},onClick:()=>R(r),children:e.jsxs(Ie,{sx:{textAlign:"center",py:3},children:[e.jsx(oe,{sx:{width:60,height:60,mx:"auto",mb:2,bgcolor:"#7C3AED",color:"white",fontSize:32},children:e.jsx(pe,{})}),e.jsx(S,{variant:"h6",gutterBottom:!0,sx:{color:"white",fontWeight:700},children:r.title}),r.qualities&&r.qualities.length>0&&e.jsxs(h,{sx:{mt:2},children:[e.jsx(S,{variant:"body2",color:"#B0B0C3",gutterBottom:!0,children:"Ключевые качества:"}),e.jsx(h,{sx:{display:"flex",flexWrap:"wrap",gap:.5,justifyContent:"center"},children:r.qualities.map(i=>e.jsx(Me,{label:i.name,size:"small",variant:"outlined",sx:{fontSize:"0.7rem",bgcolor:"#232B3B",color:"white",borderColor:"#7C3AED",fontWeight:500}},i.id))})]}),e.jsx(H,{variant:"contained",fullWidth:!0,startIcon:e.jsx(Re,{}),sx:{mt:2,background:"linear-gradient(90deg, #7C3AED 0%, #8B5CF6 100%)",color:"white",fontWeight:700,fontSize:"1.1rem",borderRadius:"16px",py:1.5,boxShadow:"none",textTransform:"none",letterSpacing:.5,transition:"all 0.2s","&:hover":{background:"linear-gradient(90deg, #6D28D9 0%, #7C3AED 100%)",boxShadow:"0 6px 32px rgba(139, 92, 246, 0.22)",transform:"translateY(-2px)"}},children:"Начать интервью"})]})},r.id))})]}),L===1&&a&&s&&e.jsxs(h,{children:[e.jsxs(h,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(ce,{onClick:()=>j(0),sx:{mr:2},children:e.jsx(le,{})}),e.jsxs(S,{variant:"h5",gutterBottom:!0,children:["Интервью: ",s.title]})]}),e.jsxs(ne,{sx:{p:3,mb:3},children:[e.jsxs(h,{sx:{mb:3},children:[e.jsxs(h,{display:"flex",justifyContent:"space-between",alignItems:"center",sx:{mb:1},children:[e.jsxs(S,{variant:"body2",color:"text.secondary",children:["Вопрос ",p+1," из ",a.questions.length]}),e.jsxs(h,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(ot,{color:"primary"}),e.jsx(S,{variant:"body2",color:g<30?"error":"text.secondary",children:O(g)})]})]}),e.jsx(ue,{variant:"determinate",value:(p+1)/a.questions.length*100,sx:{mb:1}}),e.jsx(ue,{variant:"determinate",value:g/90*100,color:g<30?"error":"primary",sx:{height:4}})]}),e.jsx(S,{variant:"h6",sx:{mb:3},children:(te=a.questions[p])==null?void 0:te.text}),e.jsx(Ae,{fullWidth:!0,multiline:!0,rows:6,variant:"outlined",placeholder:"Введите ваш ответ...",value:b,onChange:r=>x(r.target.value),sx:{mb:3}}),e.jsxs(h,{display:"flex",justifyContent:"space-between",children:[e.jsx(H,{variant:"outlined",onClick:()=>j(0),disabled:d,startIcon:e.jsx(le,{}),children:"Назад"}),e.jsx(H,{variant:"contained",onClick:D,disabled:!b.trim()||d,endIcon:d?e.jsx(de,{size:20}):null,children:p===a.questions.length-1?"Завершить":"Следующий вопрос"})]})]})]}),L===2&&u&&e.jsxs(h,{children:[e.jsx(S,{variant:"h5",gutterBottom:!0,align:"center",sx:{mb:3},children:"🎯 Результаты интервью"}),e.jsxs(ne,{sx:{p:3,mb:3},children:[e.jsxs(h,{display:"flex",alignItems:"center",sx:{mb:3},children:[e.jsx(oe,{sx:{width:60,height:60,fontSize:"2rem",mr:2},children:u.glyph}),e.jsxs(h,{children:[e.jsx(S,{variant:"h6",children:u.title}),e.jsxs(S,{variant:"body2",color:"text.secondary",children:["Статус: ",u.status]})]})]}),e.jsx(ze,{sx:{my:2}}),e.jsx(S,{variant:"body1",sx:{mb:2},children:u.description}),e.jsxs(h,{sx:{mb:3},children:[e.jsxs(S,{variant:"h6",gutterBottom:!0,children:["📊 Оценка: ",u.score,"/",u.max_score,"(",Math.round(u.score/u.max_score*100),"%)"]}),e.jsx(h,{sx:{width:"100%",bgcolor:"grey.200",borderRadius:1,overflow:"hidden"},children:e.jsx(h,{sx:{width:`${u.score/u.max_score*100}%`,height:8,bgcolor:"primary.main",transition:"width 0.5s ease-in-out"}})})]}),u.recommendations.length>0&&e.jsxs(h,{children:[e.jsx(S,{variant:"h6",gutterBottom:!0,children:"💡 Рекомендации:"}),e.jsx(h,{component:"ul",sx:{pl:2},children:u.recommendations.map((r,i)=>e.jsx(S,{component:"li",variant:"body2",sx:{mb:1},children:r},i))})]})]}),e.jsx(h,{display:"flex",justifyContent:"center",gap:2,children:e.jsx(H,{variant:"contained",onClick:q,startIcon:e.jsx(pe,{}),children:"Пройти другое интервью"})})]})]}):e.jsx(ae,{maxWidth:"md",sx:{mt:4},children:e.jsx(ie,{severity:"warning",children:"Для прохождения интервью необходимо авторизоваться"})})};export{ft as default};
