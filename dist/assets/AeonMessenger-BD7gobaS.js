import{r as u,d as Pe,g as Ae,j as o,t as It,Q as or,i as Me,a2 as Ar,e as Re,s as re,v as ae,f as je,h as Q,l as Ve,o as wo,a as Ft,y as Mr,T as E,a4 as Rr,a5 as sr,a0 as mt,U as ar,a6 as Co,n as Or,a7 as nr,a8 as jo,a9 as To,aa as _r,ab as So,ac as Do,ad as Po,ae as Ao,q as fe,af as st,ag as Mo,ah as Ro,ai as ir,aj as Oo,ak as _o,al as ko,am as lr,an as Eo,ao as Io,ap as $o,aq as Wo,B as I,ar as at,a1 as kr,as as Er,b as Bo,m as cr,at as Lo,c as pr}from"./index-BsEPfHKB.js";import{a as No,S as Uo}from"./index-D9BZ89Gi.js";import{o as dr,P as zo,u as Fo,F as ur,M as Ho,B as Vo,a as qo,g as Xo,G as Yo,T as tt}from"./TextField-Da7NTuur.js";import{u as Ir,C as Se}from"./CircularProgress-DbNq649P.js";import{C as $r}from"./Chip-CIOYPfDH.js";import{A as $e}from"./Alert-lK6JNASQ.js";import{B as se}from"./Button-CeTTHR-2.js";import{I as _e}from"./IconButton-CDmFbkYj.js";const Wr=t=>{const e=u.useRef({});return u.useEffect(()=>{e.current=t}),e.current};var ne="top",de="bottom",ue="right",ie="left",Ht="auto",lt=[ne,de,ue,ie],Ue="start",nt="end",Ko="clippingParents",Br="viewport",Qe="popper",Go="reference",fr=lt.reduce(function(t,e){return t.concat([e+"-"+Ue,e+"-"+nt])},[]),Lr=[].concat(lt,[Ht]).reduce(function(t,e){return t.concat([e,e+"-"+Ue,e+"-"+nt])},[]),Jo="beforeRead",Zo="read",Qo="afterRead",es="beforeMain",ts="main",rs="afterMain",os="beforeWrite",ss="write",as="afterWrite",ns=[Jo,Zo,Qo,es,ts,rs,os,ss,as];function Te(t){return t?(t.nodeName||"").toLowerCase():null}function le(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Be(t){var e=le(t).Element;return t instanceof e||t instanceof Element}function pe(t){var e=le(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Vt(t){if(typeof ShadowRoot>"u")return!1;var e=le(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function is(t){var e=t.state;Object.keys(e.elements).forEach(function(r){var s=e.styles[r]||{},a=e.attributes[r]||{},n=e.elements[r];!pe(n)||!Te(n)||(Object.assign(n.style,s),Object.keys(a).forEach(function(c){var l=a[c];l===!1?n.removeAttribute(c):n.setAttribute(c,l===!0?"":l)}))})}function ls(t){var e=t.state,r={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,r.popper),e.styles=r,e.elements.arrow&&Object.assign(e.elements.arrow.style,r.arrow),function(){Object.keys(e.elements).forEach(function(s){var a=e.elements[s],n=e.attributes[s]||{},c=Object.keys(e.styles.hasOwnProperty(s)?e.styles[s]:r[s]),l=c.reduce(function(i,d){return i[d]="",i},{});!pe(a)||!Te(a)||(Object.assign(a.style,l),Object.keys(n).forEach(function(i){a.removeAttribute(i)}))})}}const cs={name:"applyStyles",enabled:!0,phase:"write",fn:is,effect:ls,requires:["computeStyles"]};function Ce(t){return t.split("-")[0]}var We=Math.max,Ct=Math.min,ze=Math.round;function $t(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Nr(){return!/^((?!chrome|android).)*safari/i.test($t())}function Fe(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!1);var s=t.getBoundingClientRect(),a=1,n=1;e&&pe(t)&&(a=t.offsetWidth>0&&ze(s.width)/t.offsetWidth||1,n=t.offsetHeight>0&&ze(s.height)/t.offsetHeight||1);var c=Be(t)?le(t):window,l=c.visualViewport,i=!Nr()&&r,d=(s.left+(i&&l?l.offsetLeft:0))/a,p=(s.top+(i&&l?l.offsetTop:0))/n,x=s.width/a,C=s.height/n;return{width:x,height:C,top:p,right:d+x,bottom:p+C,left:d,x:d,y:p}}function qt(t){var e=Fe(t),r=t.offsetWidth,s=t.offsetHeight;return Math.abs(e.width-r)<=1&&(r=e.width),Math.abs(e.height-s)<=1&&(s=e.height),{x:t.offsetLeft,y:t.offsetTop,width:r,height:s}}function Ur(t,e){var r=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(r&&Vt(r)){var s=e;do{if(s&&t.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function De(t){return le(t).getComputedStyle(t)}function ps(t){return["table","td","th"].indexOf(Te(t))>=0}function ke(t){return((Be(t)?t.ownerDocument:t.document)||window.document).documentElement}function At(t){return Te(t)==="html"?t:t.assignedSlot||t.parentNode||(Vt(t)?t.host:null)||ke(t)}function mr(t){return!pe(t)||De(t).position==="fixed"?null:t.offsetParent}function ds(t){var e=/firefox/i.test($t()),r=/Trident/i.test($t());if(r&&pe(t)){var s=De(t);if(s.position==="fixed")return null}var a=At(t);for(Vt(a)&&(a=a.host);pe(a)&&["html","body"].indexOf(Te(a))<0;){var n=De(a);if(n.transform!=="none"||n.perspective!=="none"||n.contain==="paint"||["transform","perspective"].indexOf(n.willChange)!==-1||e&&n.willChange==="filter"||e&&n.filter&&n.filter!=="none")return a;a=a.parentNode}return null}function ct(t){for(var e=le(t),r=mr(t);r&&ps(r)&&De(r).position==="static";)r=mr(r);return r&&(Te(r)==="html"||Te(r)==="body"&&De(r).position==="static")?e:r||ds(t)||e}function Xt(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function rt(t,e,r){return We(t,Ct(e,r))}function us(t,e,r){var s=rt(t,e,r);return s>r?r:s}function zr(){return{top:0,right:0,bottom:0,left:0}}function Fr(t){return Object.assign({},zr(),t)}function Hr(t,e){return e.reduce(function(r,s){return r[s]=t,r},{})}var fs=function(e,r){return e=typeof e=="function"?e(Object.assign({},r.rects,{placement:r.placement})):e,Fr(typeof e!="number"?e:Hr(e,lt))};function ms(t){var e,r=t.state,s=t.name,a=t.options,n=r.elements.arrow,c=r.modifiersData.popperOffsets,l=Ce(r.placement),i=Xt(l),d=[ie,ue].indexOf(l)>=0,p=d?"height":"width";if(!(!n||!c)){var x=fs(a.padding,r),C=qt(n),g=i==="y"?ne:ie,w=i==="y"?de:ue,h=r.rects.reference[p]+r.rects.reference[i]-c[i]-r.rects.popper[p],b=c[i]-r.rects.reference[i],j=ct(n),S=j?i==="y"?j.clientHeight||0:j.clientWidth||0:0,M=h/2-b/2,y=x[g],T=S-C[p]-x[w],f=S/2-C[p]/2+M,D=rt(y,f,T),_=i;r.modifiersData[s]=(e={},e[_]=D,e.centerOffset=D-f,e)}}function gs(t){var e=t.state,r=t.options,s=r.element,a=s===void 0?"[data-popper-arrow]":s;a!=null&&(typeof a=="string"&&(a=e.elements.popper.querySelector(a),!a)||Ur(e.elements.popper,a)&&(e.elements.arrow=a))}const hs={name:"arrow",enabled:!0,phase:"main",fn:ms,effect:gs,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function He(t){return t.split("-")[1]}var vs={top:"auto",right:"auto",bottom:"auto",left:"auto"};function bs(t,e){var r=t.x,s=t.y,a=e.devicePixelRatio||1;return{x:ze(r*a)/a||0,y:ze(s*a)/a||0}}function gr(t){var e,r=t.popper,s=t.popperRect,a=t.placement,n=t.variation,c=t.offsets,l=t.position,i=t.gpuAcceleration,d=t.adaptive,p=t.roundOffsets,x=t.isFixed,C=c.x,g=C===void 0?0:C,w=c.y,h=w===void 0?0:w,b=typeof p=="function"?p({x:g,y:h}):{x:g,y:h};g=b.x,h=b.y;var j=c.hasOwnProperty("x"),S=c.hasOwnProperty("y"),M=ie,y=ne,T=window;if(d){var f=ct(r),D="clientHeight",_="clientWidth";if(f===le(r)&&(f=ke(r),De(f).position!=="static"&&l==="absolute"&&(D="scrollHeight",_="scrollWidth")),f=f,a===ne||(a===ie||a===ue)&&n===nt){y=de;var k=x&&f===T&&T.visualViewport?T.visualViewport.height:f[D];h-=k-s.height,h*=i?1:-1}if(a===ie||(a===ne||a===de)&&n===nt){M=ue;var O=x&&f===T&&T.visualViewport?T.visualViewport.width:f[_];g-=O-s.width,g*=i?1:-1}}var W=Object.assign({position:l},d&&vs),X=p===!0?bs({x:g,y:h},le(r)):{x:g,y:h};if(g=X.x,h=X.y,i){var $;return Object.assign({},W,($={},$[y]=S?"0":"",$[M]=j?"0":"",$.transform=(T.devicePixelRatio||1)<=1?"translate("+g+"px, "+h+"px)":"translate3d("+g+"px, "+h+"px, 0)",$))}return Object.assign({},W,(e={},e[y]=S?h+"px":"",e[M]=j?g+"px":"",e.transform="",e))}function xs(t){var e=t.state,r=t.options,s=r.gpuAcceleration,a=s===void 0?!0:s,n=r.adaptive,c=n===void 0?!0:n,l=r.roundOffsets,i=l===void 0?!0:l,d={placement:Ce(e.placement),variation:He(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:a,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,gr(Object.assign({},d,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:c,roundOffsets:i})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,gr(Object.assign({},d,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:i})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const ys={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:xs,data:{}};var gt={passive:!0};function ws(t){var e=t.state,r=t.instance,s=t.options,a=s.scroll,n=a===void 0?!0:a,c=s.resize,l=c===void 0?!0:c,i=le(e.elements.popper),d=[].concat(e.scrollParents.reference,e.scrollParents.popper);return n&&d.forEach(function(p){p.addEventListener("scroll",r.update,gt)}),l&&i.addEventListener("resize",r.update,gt),function(){n&&d.forEach(function(p){p.removeEventListener("scroll",r.update,gt)}),l&&i.removeEventListener("resize",r.update,gt)}}const Cs={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:ws,data:{}};var js={left:"right",right:"left",bottom:"top",top:"bottom"};function wt(t){return t.replace(/left|right|bottom|top/g,function(e){return js[e]})}var Ts={start:"end",end:"start"};function hr(t){return t.replace(/start|end/g,function(e){return Ts[e]})}function Yt(t){var e=le(t),r=e.pageXOffset,s=e.pageYOffset;return{scrollLeft:r,scrollTop:s}}function Kt(t){return Fe(ke(t)).left+Yt(t).scrollLeft}function Ss(t,e){var r=le(t),s=ke(t),a=r.visualViewport,n=s.clientWidth,c=s.clientHeight,l=0,i=0;if(a){n=a.width,c=a.height;var d=Nr();(d||!d&&e==="fixed")&&(l=a.offsetLeft,i=a.offsetTop)}return{width:n,height:c,x:l+Kt(t),y:i}}function Ds(t){var e,r=ke(t),s=Yt(t),a=(e=t.ownerDocument)==null?void 0:e.body,n=We(r.scrollWidth,r.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),c=We(r.scrollHeight,r.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),l=-s.scrollLeft+Kt(t),i=-s.scrollTop;return De(a||r).direction==="rtl"&&(l+=We(r.clientWidth,a?a.clientWidth:0)-n),{width:n,height:c,x:l,y:i}}function Gt(t){var e=De(t),r=e.overflow,s=e.overflowX,a=e.overflowY;return/auto|scroll|overlay|hidden/.test(r+a+s)}function Vr(t){return["html","body","#document"].indexOf(Te(t))>=0?t.ownerDocument.body:pe(t)&&Gt(t)?t:Vr(At(t))}function ot(t,e){var r;e===void 0&&(e=[]);var s=Vr(t),a=s===((r=t.ownerDocument)==null?void 0:r.body),n=le(s),c=a?[n].concat(n.visualViewport||[],Gt(s)?s:[]):s,l=e.concat(c);return a?l:l.concat(ot(At(c)))}function Wt(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Ps(t,e){var r=Fe(t,!1,e==="fixed");return r.top=r.top+t.clientTop,r.left=r.left+t.clientLeft,r.bottom=r.top+t.clientHeight,r.right=r.left+t.clientWidth,r.width=t.clientWidth,r.height=t.clientHeight,r.x=r.left,r.y=r.top,r}function vr(t,e,r){return e===Br?Wt(Ss(t,r)):Be(e)?Ps(e,r):Wt(Ds(ke(t)))}function As(t){var e=ot(At(t)),r=["absolute","fixed"].indexOf(De(t).position)>=0,s=r&&pe(t)?ct(t):t;return Be(s)?e.filter(function(a){return Be(a)&&Ur(a,s)&&Te(a)!=="body"}):[]}function Ms(t,e,r,s){var a=e==="clippingParents"?As(t):[].concat(e),n=[].concat(a,[r]),c=n[0],l=n.reduce(function(i,d){var p=vr(t,d,s);return i.top=We(p.top,i.top),i.right=Ct(p.right,i.right),i.bottom=Ct(p.bottom,i.bottom),i.left=We(p.left,i.left),i},vr(t,c,s));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function qr(t){var e=t.reference,r=t.element,s=t.placement,a=s?Ce(s):null,n=s?He(s):null,c=e.x+e.width/2-r.width/2,l=e.y+e.height/2-r.height/2,i;switch(a){case ne:i={x:c,y:e.y-r.height};break;case de:i={x:c,y:e.y+e.height};break;case ue:i={x:e.x+e.width,y:l};break;case ie:i={x:e.x-r.width,y:l};break;default:i={x:e.x,y:e.y}}var d=a?Xt(a):null;if(d!=null){var p=d==="y"?"height":"width";switch(n){case Ue:i[d]=i[d]-(e[p]/2-r[p]/2);break;case nt:i[d]=i[d]+(e[p]/2-r[p]/2);break}}return i}function it(t,e){e===void 0&&(e={});var r=e,s=r.placement,a=s===void 0?t.placement:s,n=r.strategy,c=n===void 0?t.strategy:n,l=r.boundary,i=l===void 0?Ko:l,d=r.rootBoundary,p=d===void 0?Br:d,x=r.elementContext,C=x===void 0?Qe:x,g=r.altBoundary,w=g===void 0?!1:g,h=r.padding,b=h===void 0?0:h,j=Fr(typeof b!="number"?b:Hr(b,lt)),S=C===Qe?Go:Qe,M=t.rects.popper,y=t.elements[w?S:C],T=Ms(Be(y)?y:y.contextElement||ke(t.elements.popper),i,p,c),f=Fe(t.elements.reference),D=qr({reference:f,element:M,placement:a}),_=Wt(Object.assign({},M,D)),k=C===Qe?_:f,O={top:T.top-k.top+j.top,bottom:k.bottom-T.bottom+j.bottom,left:T.left-k.left+j.left,right:k.right-T.right+j.right},W=t.modifiersData.offset;if(C===Qe&&W){var X=W[a];Object.keys(O).forEach(function($){var V=[ue,de].indexOf($)>=0?1:-1,G=[ne,de].indexOf($)>=0?"y":"x";O[$]+=X[G]*V})}return O}function Rs(t,e){e===void 0&&(e={});var r=e,s=r.placement,a=r.boundary,n=r.rootBoundary,c=r.padding,l=r.flipVariations,i=r.allowedAutoPlacements,d=i===void 0?Lr:i,p=He(s),x=p?l?fr:fr.filter(function(w){return He(w)===p}):lt,C=x.filter(function(w){return d.indexOf(w)>=0});C.length===0&&(C=x);var g=C.reduce(function(w,h){return w[h]=it(t,{placement:h,boundary:a,rootBoundary:n,padding:c})[Ce(h)],w},{});return Object.keys(g).sort(function(w,h){return g[w]-g[h]})}function Os(t){if(Ce(t)===Ht)return[];var e=wt(t);return[hr(t),e,hr(e)]}function _s(t){var e=t.state,r=t.options,s=t.name;if(!e.modifiersData[s]._skip){for(var a=r.mainAxis,n=a===void 0?!0:a,c=r.altAxis,l=c===void 0?!0:c,i=r.fallbackPlacements,d=r.padding,p=r.boundary,x=r.rootBoundary,C=r.altBoundary,g=r.flipVariations,w=g===void 0?!0:g,h=r.allowedAutoPlacements,b=e.options.placement,j=Ce(b),S=j===b,M=i||(S||!w?[wt(b)]:Os(b)),y=[b].concat(M).reduce(function(H,Y){return H.concat(Ce(Y)===Ht?Rs(e,{placement:Y,boundary:p,rootBoundary:x,padding:d,flipVariations:w,allowedAutoPlacements:h}):Y)},[]),T=e.rects.reference,f=e.rects.popper,D=new Map,_=!0,k=y[0],O=0;O<y.length;O++){var W=y[O],X=Ce(W),$=He(W)===Ue,V=[ne,de].indexOf(X)>=0,G=V?"width":"height",z=it(e,{placement:W,boundary:p,rootBoundary:x,altBoundary:C,padding:d}),v=V?$?ue:ie:$?de:ne;T[G]>f[G]&&(v=wt(v));var m=wt(v),A=[];if(n&&A.push(z[X]<=0),l&&A.push(z[v]<=0,z[m]<=0),A.every(function(H){return H})){k=W,_=!1;break}D.set(W,A)}if(_)for(var R=w?3:1,U=function(Y){var Z=y.find(function(ce){var ee=D.get(ce);if(ee)return ee.slice(0,Y).every(function(be){return be})});if(Z)return k=Z,"break"},N=R;N>0;N--){var F=U(N);if(F==="break")break}e.placement!==k&&(e.modifiersData[s]._skip=!0,e.placement=k,e.reset=!0)}}const ks={name:"flip",enabled:!0,phase:"main",fn:_s,requiresIfExists:["offset"],data:{_skip:!1}};function br(t,e,r){return r===void 0&&(r={x:0,y:0}),{top:t.top-e.height-r.y,right:t.right-e.width+r.x,bottom:t.bottom-e.height+r.y,left:t.left-e.width-r.x}}function xr(t){return[ne,ue,de,ie].some(function(e){return t[e]>=0})}function Es(t){var e=t.state,r=t.name,s=e.rects.reference,a=e.rects.popper,n=e.modifiersData.preventOverflow,c=it(e,{elementContext:"reference"}),l=it(e,{altBoundary:!0}),i=br(c,s),d=br(l,a,n),p=xr(i),x=xr(d);e.modifiersData[r]={referenceClippingOffsets:i,popperEscapeOffsets:d,isReferenceHidden:p,hasPopperEscaped:x},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":p,"data-popper-escaped":x})}const Is={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Es};function $s(t,e,r){var s=Ce(t),a=[ie,ne].indexOf(s)>=0?-1:1,n=typeof r=="function"?r(Object.assign({},e,{placement:t})):r,c=n[0],l=n[1];return c=c||0,l=(l||0)*a,[ie,ue].indexOf(s)>=0?{x:l,y:c}:{x:c,y:l}}function Ws(t){var e=t.state,r=t.options,s=t.name,a=r.offset,n=a===void 0?[0,0]:a,c=Lr.reduce(function(p,x){return p[x]=$s(x,e.rects,n),p},{}),l=c[e.placement],i=l.x,d=l.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=i,e.modifiersData.popperOffsets.y+=d),e.modifiersData[s]=c}const Bs={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Ws};function Ls(t){var e=t.state,r=t.name;e.modifiersData[r]=qr({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const Ns={name:"popperOffsets",enabled:!0,phase:"read",fn:Ls,data:{}};function Us(t){return t==="x"?"y":"x"}function zs(t){var e=t.state,r=t.options,s=t.name,a=r.mainAxis,n=a===void 0?!0:a,c=r.altAxis,l=c===void 0?!1:c,i=r.boundary,d=r.rootBoundary,p=r.altBoundary,x=r.padding,C=r.tether,g=C===void 0?!0:C,w=r.tetherOffset,h=w===void 0?0:w,b=it(e,{boundary:i,rootBoundary:d,padding:x,altBoundary:p}),j=Ce(e.placement),S=He(e.placement),M=!S,y=Xt(j),T=Us(y),f=e.modifiersData.popperOffsets,D=e.rects.reference,_=e.rects.popper,k=typeof h=="function"?h(Object.assign({},e.rects,{placement:e.placement})):h,O=typeof k=="number"?{mainAxis:k,altAxis:k}:Object.assign({mainAxis:0,altAxis:0},k),W=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,X={x:0,y:0};if(f){if(n){var $,V=y==="y"?ne:ie,G=y==="y"?de:ue,z=y==="y"?"height":"width",v=f[y],m=v+b[V],A=v-b[G],R=g?-_[z]/2:0,U=S===Ue?D[z]:_[z],N=S===Ue?-_[z]:-D[z],F=e.elements.arrow,H=g&&F?qt(F):{width:0,height:0},Y=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:zr(),Z=Y[V],ce=Y[G],ee=rt(0,D[z],H[z]),be=M?D[z]/2-R-ee-Z-O.mainAxis:U-ee-Z-O.mainAxis,me=M?-D[z]/2+R+ee+ce+O.mainAxis:N+ee+ce+O.mainAxis,P=e.elements.arrow&&ct(e.elements.arrow),q=P?y==="y"?P.clientTop||0:P.clientLeft||0:0,B=($=W==null?void 0:W[y])!=null?$:0,K=v+be-B-q,xe=v+me-B,Le=rt(g?Ct(m,K):m,v,g?We(A,xe):A);f[y]=Le,X[y]=Le-v}if(l){var oe,ye=y==="x"?ne:ie,Xe=y==="x"?de:ue,we=f[T],Ee=T==="y"?"height":"width",Ye=we+b[ye],Ke=we-b[Xe],Ge=[ne,ie].indexOf(j)!==-1,pt=(oe=W==null?void 0:W[T])!=null?oe:0,dt=Ge?Ye:we-D[Ee]-_[Ee]-pt+O.altAxis,Ne=Ge?we+D[Ee]+_[Ee]-pt-O.altAxis:Ke,ut=g&&Ge?us(dt,we,Ne):rt(g?dt:Ye,we,g?Ne:Ke);f[T]=ut,X[T]=ut-we}e.modifiersData[s]=X}}const Fs={name:"preventOverflow",enabled:!0,phase:"main",fn:zs,requiresIfExists:["offset"]};function Hs(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function Vs(t){return t===le(t)||!pe(t)?Yt(t):Hs(t)}function qs(t){var e=t.getBoundingClientRect(),r=ze(e.width)/t.offsetWidth||1,s=ze(e.height)/t.offsetHeight||1;return r!==1||s!==1}function Xs(t,e,r){r===void 0&&(r=!1);var s=pe(e),a=pe(e)&&qs(e),n=ke(e),c=Fe(t,a,r),l={scrollLeft:0,scrollTop:0},i={x:0,y:0};return(s||!s&&!r)&&((Te(e)!=="body"||Gt(n))&&(l=Vs(e)),pe(e)?(i=Fe(e,!0),i.x+=e.clientLeft,i.y+=e.clientTop):n&&(i.x=Kt(n))),{x:c.left+l.scrollLeft-i.x,y:c.top+l.scrollTop-i.y,width:c.width,height:c.height}}function Ys(t){var e=new Map,r=new Set,s=[];t.forEach(function(n){e.set(n.name,n)});function a(n){r.add(n.name);var c=[].concat(n.requires||[],n.requiresIfExists||[]);c.forEach(function(l){if(!r.has(l)){var i=e.get(l);i&&a(i)}}),s.push(n)}return t.forEach(function(n){r.has(n.name)||a(n)}),s}function Ks(t){var e=Ys(t);return ns.reduce(function(r,s){return r.concat(e.filter(function(a){return a.phase===s}))},[])}function Gs(t){var e;return function(){return e||(e=new Promise(function(r){Promise.resolve().then(function(){e=void 0,r(t())})})),e}}function Js(t){var e=t.reduce(function(r,s){var a=r[s.name];return r[s.name]=a?Object.assign({},a,s,{options:Object.assign({},a.options,s.options),data:Object.assign({},a.data,s.data)}):s,r},{});return Object.keys(e).map(function(r){return e[r]})}var yr={placement:"bottom",modifiers:[],strategy:"absolute"};function wr(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return!e.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function Zs(t){t===void 0&&(t={});var e=t,r=e.defaultModifiers,s=r===void 0?[]:r,a=e.defaultOptions,n=a===void 0?yr:a;return function(l,i,d){d===void 0&&(d=n);var p={placement:"bottom",orderedModifiers:[],options:Object.assign({},yr,n),modifiersData:{},elements:{reference:l,popper:i},attributes:{},styles:{}},x=[],C=!1,g={state:p,setOptions:function(j){var S=typeof j=="function"?j(p.options):j;h(),p.options=Object.assign({},n,p.options,S),p.scrollParents={reference:Be(l)?ot(l):l.contextElement?ot(l.contextElement):[],popper:ot(i)};var M=Ks(Js([].concat(s,p.options.modifiers)));return p.orderedModifiers=M.filter(function(y){return y.enabled}),w(),g.update()},forceUpdate:function(){if(!C){var j=p.elements,S=j.reference,M=j.popper;if(wr(S,M)){p.rects={reference:Xs(S,ct(M),p.options.strategy==="fixed"),popper:qt(M)},p.reset=!1,p.placement=p.options.placement,p.orderedModifiers.forEach(function(O){return p.modifiersData[O.name]=Object.assign({},O.data)});for(var y=0;y<p.orderedModifiers.length;y++){if(p.reset===!0){p.reset=!1,y=-1;continue}var T=p.orderedModifiers[y],f=T.fn,D=T.options,_=D===void 0?{}:D,k=T.name;typeof f=="function"&&(p=f({state:p,options:_,name:k,instance:g})||p)}}}},update:Gs(function(){return new Promise(function(b){g.forceUpdate(),b(p)})}),destroy:function(){h(),C=!0}};if(!wr(l,i))return g;g.setOptions(d).then(function(b){!C&&d.onFirstUpdate&&d.onFirstUpdate(b)});function w(){p.orderedModifiers.forEach(function(b){var j=b.name,S=b.options,M=S===void 0?{}:S,y=b.effect;if(typeof y=="function"){var T=y({state:p,name:j,instance:g,options:M}),f=function(){};x.push(T||f)}})}function h(){x.forEach(function(b){return b()}),x=[]}return g}}var Qs=[Cs,Ns,ys,cs,Bs,ks,Fs,hs,Is],ea=Zs({defaultModifiers:Qs});function ta(t){return Pe("MuiPopper",t)}Ae("MuiPopper",["root"]);function ra(t,e){if(e==="ltr")return t;switch(t){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return t}}function Bt(t){return typeof t=="function"?t():t}function oa(t){return t.nodeType!==void 0}const sa=t=>{const{classes:e}=t;return Me({root:["root"]},ta,e)},aa={},na=u.forwardRef(function(e,r){const{anchorEl:s,children:a,direction:n,disablePortal:c,modifiers:l,open:i,placement:d,popperOptions:p,popperRef:x,slotProps:C={},slots:g={},TransitionProps:w,ownerState:h,...b}=e,j=u.useRef(null),S=It(j,r),M=u.useRef(null),y=It(M,x),T=u.useRef(y);or(()=>{T.current=y},[y]),u.useImperativeHandle(x,()=>M.current,[]);const f=ra(d,n),[D,_]=u.useState(f),[k,O]=u.useState(Bt(s));u.useEffect(()=>{M.current&&M.current.forceUpdate()}),u.useEffect(()=>{s&&O(Bt(s))},[s]),or(()=>{if(!k||!i)return;const G=m=>{_(m.placement)};let z=[{name:"preventOverflow",options:{altBoundary:c}},{name:"flip",options:{altBoundary:c}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:m})=>{G(m)}}];l!=null&&(z=z.concat(l)),p&&p.modifiers!=null&&(z=z.concat(p.modifiers));const v=ea(k,j.current,{placement:f,...p,modifiers:z});return T.current(v),()=>{v.destroy(),T.current(null)}},[k,c,l,i,p,f]);const W={placement:D};w!==null&&(W.TransitionProps=w);const X=sa(e),$=g.root??"div",V=Fo({elementType:$,externalSlotProps:C.root,externalForwardedProps:b,additionalProps:{role:"tooltip",ref:S},ownerState:e,className:X.root});return o.jsx($,{...V,children:typeof a=="function"?a(W):a})}),ia=u.forwardRef(function(e,r){const{anchorEl:s,children:a,container:n,direction:c="ltr",disablePortal:l=!1,keepMounted:i=!1,modifiers:d,open:p,placement:x="bottom",popperOptions:C=aa,popperRef:g,style:w,transition:h=!1,slotProps:b={},slots:j={},...S}=e,[M,y]=u.useState(!0),T=()=>{y(!1)},f=()=>{y(!0)};if(!i&&!p&&(!h||M))return null;let D;if(n)D=n;else if(s){const O=Bt(s);D=O&&oa(O)?dr(O).body:dr(null).body}const _=!p&&i&&(!h||M)?"none":void 0,k=h?{in:p,onEnter:T,onExited:f}:void 0;return o.jsx(zo,{disablePortal:l,container:D,children:o.jsx(na,{anchorEl:s,direction:c,disablePortal:l,modifiers:d,ref:r,open:h?!M:p,placement:x,popperOptions:C,popperRef:g,slotProps:b,slots:j,...S,style:{position:"fixed",top:0,left:0,display:_,...w},TransitionProps:k,children:a})})}),la=re(ia,{name:"MuiPopper",slot:"Root"})({}),Xr=u.forwardRef(function(e,r){const s=Ar(),a=Re({props:e,name:"MuiPopper"}),{anchorEl:n,component:c,components:l,componentsProps:i,container:d,disablePortal:p,keepMounted:x,modifiers:C,open:g,placement:w,popperOptions:h,popperRef:b,transition:j,slots:S,slotProps:M,...y}=a,T=(S==null?void 0:S.root)??(l==null?void 0:l.Root),f={anchorEl:n,container:d,disablePortal:p,keepMounted:x,modifiers:C,open:g,placement:w,popperOptions:h,popperRef:b,transition:j,...y};return o.jsx(la,{as:c,direction:s?"rtl":"ltr",slots:{root:T},slotProps:M??i,...f,ref:r})});function ca(t){const{badgeContent:e,invisible:r=!1,max:s=99,showZero:a=!1}=t,n=Wr({badgeContent:e,max:s});let c=r;r===!1&&e===0&&!a&&(c=!0);const{badgeContent:l,max:i=s}=c?n:t,d=l&&Number(l)>i?`${i}+`:l;return{badgeContent:l,invisible:c,max:i,displayValue:d}}function pa(t){return Pe("MuiBadge",t)}const Oe=Ae("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),Ot=10,_t=4,da=t=>{const{color:e,anchorOrigin:r,invisible:s,overlap:a,variant:n,classes:c={}}=t,l={root:["root"],badge:["badge",n,s&&"invisible",`anchorOrigin${Q(r.vertical)}${Q(r.horizontal)}`,`anchorOrigin${Q(r.vertical)}${Q(r.horizontal)}${Q(a)}`,`overlap${Q(a)}`,e!=="default"&&`color${Q(e)}`]};return Me(l,pa,c)},ua=re("span",{name:"MuiBadge",slot:"Root"})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),fa=re("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.badge,e[r.variant],e[`anchorOrigin${Q(r.anchorOrigin.vertical)}${Q(r.anchorOrigin.horizontal)}${Q(r.overlap)}`],r.color!=="default"&&e[`color${Q(r.color)}`],r.invisible&&e.invisible]}})(Ve(({theme:t})=>({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(12),minWidth:Ot*2,lineHeight:1,padding:"0 6px",height:Ot*2,borderRadius:Ot,zIndex:1,transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.enteringScreen}),variants:[...Object.entries(t.palette).filter(wo(["contrastText"])).map(([e])=>({props:{color:e},style:{backgroundColor:(t.vars||t).palette[e].main,color:(t.vars||t).palette[e].contrastText}})),{props:{variant:"dot"},style:{borderRadius:_t,height:_t*2,minWidth:_t*2,padding:0}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="top"&&e.anchorOrigin.horizontal==="right"&&e.overlap==="rectangular",style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${Oe.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="bottom"&&e.anchorOrigin.horizontal==="right"&&e.overlap==="rectangular",style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${Oe.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="top"&&e.anchorOrigin.horizontal==="left"&&e.overlap==="rectangular",style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${Oe.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="bottom"&&e.anchorOrigin.horizontal==="left"&&e.overlap==="rectangular",style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${Oe.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="top"&&e.anchorOrigin.horizontal==="right"&&e.overlap==="circular",style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${Oe.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="bottom"&&e.anchorOrigin.horizontal==="right"&&e.overlap==="circular",style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${Oe.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="top"&&e.anchorOrigin.horizontal==="left"&&e.overlap==="circular",style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${Oe.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="bottom"&&e.anchorOrigin.horizontal==="left"&&e.overlap==="circular",style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${Oe.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.leavingScreen})}}]})));function Cr(t){return{vertical:(t==null?void 0:t.vertical)??"top",horizontal:(t==null?void 0:t.horizontal)??"right"}}const ma=u.forwardRef(function(e,r){const s=Re({props:e,name:"MuiBadge"}),{anchorOrigin:a,className:n,classes:c,component:l,components:i={},componentsProps:d={},children:p,overlap:x="rectangular",color:C="default",invisible:g=!1,max:w=99,badgeContent:h,slots:b,slotProps:j,showZero:S=!1,variant:M="standard",...y}=s,{badgeContent:T,invisible:f,max:D,displayValue:_}=ca({max:w,invisible:g,badgeContent:h,showZero:S}),k=Wr({anchorOrigin:Cr(a),color:C,overlap:x,variant:M,badgeContent:h}),O=f||T==null&&M!=="dot",{color:W=C,overlap:X=x,anchorOrigin:$,variant:V=M}=O?k:s,G=Cr($),z=V!=="dot"?_:void 0,v={...s,badgeContent:T,invisible:O,max:D,displayValue:z,showZero:S,anchorOrigin:G,color:W,overlap:X,variant:V},m=da(v),A={slots:{root:(b==null?void 0:b.root)??i.Root,badge:(b==null?void 0:b.badge)??i.Badge},slotProps:{root:(j==null?void 0:j.root)??d.root,badge:(j==null?void 0:j.badge)??d.badge}},[R,U]=ae("root",{elementType:ua,externalForwardedProps:{...A,...y},ownerState:v,className:je(m.root,n),ref:r,additionalProps:{as:l}}),[N,F]=ae("badge",{elementType:fa,externalForwardedProps:A,ownerState:v,className:m.badge});return o.jsxs(R,{...U,children:[p,o.jsx(N,{...F,children:z})]})});function ga(t){return Pe("MuiDialog",t)}const kt=Ae("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),Yr=u.createContext({}),ha=re(Vo,{name:"MuiDialog",slot:"Backdrop",overrides:(t,e)=>e.backdrop})({zIndex:-1}),va=t=>{const{classes:e,scroll:r,maxWidth:s,fullWidth:a,fullScreen:n}=t,c={root:["root"],container:["container",`scroll${Q(r)}`],paper:["paper",`paperScroll${Q(r)}`,`paperWidth${Q(String(s))}`,a&&"paperFullWidth",n&&"paperFullScreen"]};return Me(c,ga,e)},ba=re(Ho,{name:"MuiDialog",slot:"Root"})({"@media print":{position:"absolute !important"}}),xa=re("div",{name:"MuiDialog",slot:"Container",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.container,e[`scroll${Q(r.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),ya=re(Mr,{name:"MuiDialog",slot:"Paper",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.paper,e[`scrollPaper${Q(r.scroll)}`],e[`paperWidth${Q(String(r.maxWidth))}`],r.fullWidth&&e.paperFullWidth,r.fullScreen&&e.paperFullScreen]}})(Ve(({theme:t})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:e})=>!e.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:t.breakpoints.unit==="px"?Math.max(t.breakpoints.values.xs,444):`max(${t.breakpoints.values.xs}${t.breakpoints.unit}, 444px)`,[`&.${kt.paperScrollBody}`]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(t.breakpoints.values).filter(e=>e!=="xs").map(e=>({props:{maxWidth:e},style:{maxWidth:`${t.breakpoints.values[e]}${t.breakpoints.unit}`,[`&.${kt.paperScrollBody}`]:{[t.breakpoints.down(t.breakpoints.values[e]+32*2)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:e})=>e.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:e})=>e.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${kt.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),jt=u.forwardRef(function(e,r){const s=Re({props:e,name:"MuiDialog"}),a=Ft(),n={enter:a.transitions.duration.enteringScreen,exit:a.transitions.duration.leavingScreen},{"aria-describedby":c,"aria-labelledby":l,"aria-modal":i=!0,BackdropComponent:d,BackdropProps:p,children:x,className:C,disableEscapeKeyDown:g=!1,fullScreen:w=!1,fullWidth:h=!1,maxWidth:b="sm",onClick:j,onClose:S,open:M,PaperComponent:y=Mr,PaperProps:T={},scroll:f="paper",slots:D={},slotProps:_={},TransitionComponent:k=ur,transitionDuration:O=n,TransitionProps:W,...X}=s,$={...s,disableEscapeKeyDown:g,fullScreen:w,fullWidth:h,maxWidth:b,scroll:f},V=va($),G=u.useRef(),z=B=>{G.current=B.target===B.currentTarget},v=B=>{j&&j(B),G.current&&(G.current=null,S&&S(B,"backdropClick"))},m=Ir(l),A=u.useMemo(()=>({titleId:m}),[m]),R={transition:k,...D},U={transition:W,paper:T,backdrop:p,..._},N={slots:R,slotProps:U},[F,H]=ae("root",{elementType:ba,shouldForwardComponentProp:!0,externalForwardedProps:N,ownerState:$,className:je(V.root,C),ref:r}),[Y,Z]=ae("backdrop",{elementType:ha,shouldForwardComponentProp:!0,externalForwardedProps:N,ownerState:$}),[ce,ee]=ae("paper",{elementType:ya,shouldForwardComponentProp:!0,externalForwardedProps:N,ownerState:$,className:je(V.paper,T.className)}),[be,me]=ae("container",{elementType:xa,externalForwardedProps:N,ownerState:$,className:V.container}),[P,q]=ae("transition",{elementType:ur,externalForwardedProps:N,ownerState:$,additionalProps:{appear:!0,in:M,timeout:O,role:"presentation"}});return o.jsx(F,{closeAfterTransition:!0,slots:{backdrop:Y},slotProps:{backdrop:{transitionDuration:O,as:d,...Z}},disableEscapeKeyDown:g,onClose:S,open:M,onClick:v,...H,...X,children:o.jsx(P,{...q,children:o.jsx(be,{onMouseDown:z,...me,children:o.jsx(ce,{as:y,elevation:24,role:"dialog","aria-describedby":c,"aria-labelledby":m,"aria-modal":i,...ee,children:o.jsx(Yr.Provider,{value:A,children:x})})})})})});function wa(t){return Pe("MuiDialogActions",t)}Ae("MuiDialogActions",["root","spacing"]);const Ca=t=>{const{classes:e,disableSpacing:r}=t;return Me({root:["root",!r&&"spacing"]},wa,e)},ja=re("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.root,!r.disableSpacing&&e.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:t})=>!t.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),Jt=u.forwardRef(function(e,r){const s=Re({props:e,name:"MuiDialogActions"}),{className:a,disableSpacing:n=!1,...c}=s,l={...s,disableSpacing:n},i=Ca(l);return o.jsx(ja,{className:je(i.root,a),ownerState:l,ref:r,...c})});function Ta(t){return Pe("MuiDialogContent",t)}Ae("MuiDialogContent",["root","dividers"]);function Sa(t){return Pe("MuiDialogTitle",t)}const Da=Ae("MuiDialogTitle",["root"]),Pa=t=>{const{classes:e,dividers:r}=t;return Me({root:["root",r&&"dividers"]},Ta,e)},Aa=re("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.root,r.dividers&&e.dividers]}})(Ve(({theme:t})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:e})=>e.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(t.vars||t).palette.divider}`,borderBottom:`1px solid ${(t.vars||t).palette.divider}`}},{props:({ownerState:e})=>!e.dividers,style:{[`.${Da.root} + &`]:{paddingTop:0}}}]}))),Tt=u.forwardRef(function(e,r){const s=Re({props:e,name:"MuiDialogContent"}),{className:a,dividers:n=!1,...c}=s,l={...s,dividers:n},i=Pa(l);return o.jsx(Aa,{className:je(i.root,a),ownerState:l,ref:r,...c})}),Ma=t=>{const{classes:e}=t;return Me({root:["root"]},Sa,e)},Ra=re(E,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),St=u.forwardRef(function(e,r){const s=Re({props:e,name:"MuiDialogTitle"}),{className:a,id:n,...c}=s,l=s,i=Ma(l),{titleId:d=n}=u.useContext(Yr);return o.jsx(Ra,{component:"h2",className:je(i.root,a),ownerState:l,ref:r,variant:"h6",id:n??d,...c})});function Oa(t){return Pe("MuiListItemAvatar",t)}Ae("MuiListItemAvatar",["root","alignItemsFlexStart"]);const _a=t=>{const{alignItems:e,classes:r}=t;return Me({root:["root",e==="flex-start"&&"alignItemsFlexStart"]},Oa,r)},ka=re("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.root,r.alignItems==="flex-start"&&e.alignItemsFlexStart]}})({minWidth:56,flexShrink:0,variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}),Kr=u.forwardRef(function(e,r){const s=Re({props:e,name:"MuiListItemAvatar"}),{className:a,...n}=s,c=u.useContext(Rr),l={...s,alignItems:c.alignItems},i=_a(l);return o.jsx(ka,{className:je(i.root,a),ownerState:l,ref:r,...n})});function Ea(t){return Pe("MuiListItemText",t)}const ht=Ae("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),Ia=t=>{const{classes:e,inset:r,primary:s,secondary:a,dense:n}=t;return Me({root:["root",r&&"inset",n&&"dense",s&&a&&"multiline"],primary:["primary"],secondary:["secondary"]},Ea,e)},$a=re("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[{[`& .${ht.primary}`]:e.primary},{[`& .${ht.secondary}`]:e.secondary},e.root,r.inset&&e.inset,r.primary&&r.secondary&&e.multiline,r.dense&&e.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${sr.root}:where(& .${ht.primary})`]:{display:"block"},[`.${sr.root}:where(& .${ht.secondary})`]:{display:"block"},variants:[{props:({ownerState:t})=>t.primary&&t.secondary,style:{marginTop:6,marginBottom:6}},{props:({ownerState:t})=>t.inset,style:{paddingLeft:56}}]}),Gr=u.forwardRef(function(e,r){const s=Re({props:e,name:"MuiListItemText"}),{children:a,className:n,disableTypography:c=!1,inset:l=!1,primary:i,primaryTypographyProps:d,secondary:p,secondaryTypographyProps:x,slots:C={},slotProps:g={},...w}=s,{dense:h}=u.useContext(Rr);let b=i??a,j=p;const S={...s,disableTypography:c,inset:l,primary:!!b,secondary:!!j,dense:h},M=Ia(S),y={slots:C,slotProps:{primary:d,secondary:x,...g}},[T,f]=ae("root",{className:je(M.root,n),elementType:$a,externalForwardedProps:{...y,...w},ownerState:S,ref:r}),[D,_]=ae("primary",{className:M.primary,elementType:E,externalForwardedProps:y,ownerState:S}),[k,O]=ae("secondary",{className:M.secondary,elementType:E,externalForwardedProps:y,ownerState:S});return b!=null&&b.type!==E&&!c&&(b=o.jsx(D,{variant:h?"body2":"body1",component:_!=null&&_.variant?void 0:"span",..._,children:b})),j!=null&&j.type!==E&&!c&&(j=o.jsx(k,{variant:"body2",color:"textSecondary",...O,children:j})),o.jsxs(T,{...f,children:[b,j]})});function Wa(t){return Pe("MuiTooltip",t)}const J=Ae("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);function Ba(t){return Math.round(t*1e5)/1e5}const La=t=>{const{classes:e,disableInteractive:r,arrow:s,touch:a,placement:n}=t,c={popper:["popper",!r&&"popperInteractive",s&&"popperArrow"],tooltip:["tooltip",s&&"tooltipArrow",a&&"touch",`tooltipPlacement${Q(n.split("-")[0])}`],arrow:["arrow"]};return Me(c,Wa,e)},Na=re(Xr,{name:"MuiTooltip",slot:"Popper",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.popper,!r.disableInteractive&&e.popperInteractive,r.arrow&&e.popperArrow,!r.open&&e.popperClose]}})(Ve(({theme:t})=>({zIndex:(t.vars||t).zIndex.tooltip,pointerEvents:"none",variants:[{props:({ownerState:e})=>!e.disableInteractive,style:{pointerEvents:"auto"}},{props:({open:e})=>!e,style:{pointerEvents:"none"}},{props:({ownerState:e})=>e.arrow,style:{[`&[data-popper-placement*="bottom"] .${J.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${J.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${J.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},[`&[data-popper-placement*="left"] .${J.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}},{props:({ownerState:e})=>e.arrow&&!e.isRtl,style:{[`&[data-popper-placement*="right"] .${J.arrow}`]:{left:0,marginLeft:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!!e.isRtl,style:{[`&[data-popper-placement*="right"] .${J.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!e.isRtl,style:{[`&[data-popper-placement*="left"] .${J.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!!e.isRtl,style:{[`&[data-popper-placement*="left"] .${J.arrow}`]:{left:0,marginLeft:"-0.71em"}}}]}))),Ua=re("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.tooltip,r.touch&&e.touch,r.arrow&&e.tooltipArrow,e[`tooltipPlacement${Q(r.placement.split("-")[0])}`]]}})(Ve(({theme:t})=>({backgroundColor:t.vars?t.vars.palette.Tooltip.bg:Or(t.palette.grey[700],.92),borderRadius:(t.vars||t).shape.borderRadius,color:(t.vars||t).palette.common.white,fontFamily:t.typography.fontFamily,padding:"4px 8px",fontSize:t.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:t.typography.fontWeightMedium,[`.${J.popper}[data-popper-placement*="left"] &`]:{transformOrigin:"right center"},[`.${J.popper}[data-popper-placement*="right"] &`]:{transformOrigin:"left center"},[`.${J.popper}[data-popper-placement*="top"] &`]:{transformOrigin:"center bottom",marginBottom:"14px"},[`.${J.popper}[data-popper-placement*="bottom"] &`]:{transformOrigin:"center top",marginTop:"14px"},variants:[{props:({ownerState:e})=>e.arrow,style:{position:"relative",margin:0}},{props:({ownerState:e})=>e.touch,style:{padding:"8px 16px",fontSize:t.typography.pxToRem(14),lineHeight:`${Ba(16/14)}em`,fontWeight:t.typography.fontWeightRegular}},{props:({ownerState:e})=>!e.isRtl,style:{[`.${J.popper}[data-popper-placement*="left"] &`]:{marginRight:"14px"},[`.${J.popper}[data-popper-placement*="right"] &`]:{marginLeft:"14px"}}},{props:({ownerState:e})=>!e.isRtl&&e.touch,style:{[`.${J.popper}[data-popper-placement*="left"] &`]:{marginRight:"24px"},[`.${J.popper}[data-popper-placement*="right"] &`]:{marginLeft:"24px"}}},{props:({ownerState:e})=>!!e.isRtl,style:{[`.${J.popper}[data-popper-placement*="left"] &`]:{marginLeft:"14px"},[`.${J.popper}[data-popper-placement*="right"] &`]:{marginRight:"14px"}}},{props:({ownerState:e})=>!!e.isRtl&&e.touch,style:{[`.${J.popper}[data-popper-placement*="left"] &`]:{marginLeft:"24px"},[`.${J.popper}[data-popper-placement*="right"] &`]:{marginRight:"24px"}}},{props:({ownerState:e})=>e.touch,style:{[`.${J.popper}[data-popper-placement*="top"] &`]:{marginBottom:"24px"}}},{props:({ownerState:e})=>e.touch,style:{[`.${J.popper}[data-popper-placement*="bottom"] &`]:{marginTop:"24px"}}}]}))),za=re("span",{name:"MuiTooltip",slot:"Arrow"})(Ve(({theme:t})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:t.vars?t.vars.palette.Tooltip.bg:Or(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})));let vt=!1;const jr=new Co;let et={x:0,y:0};function bt(t,e){return(r,...s)=>{e&&e(r,...s),t(r,...s)}}const Dt=u.forwardRef(function(e,r){const s=Re({props:e,name:"MuiTooltip"}),{arrow:a=!1,children:n,classes:c,components:l={},componentsProps:i={},describeChild:d=!1,disableFocusListener:p=!1,disableHoverListener:x=!1,disableInteractive:C=!1,disableTouchListener:g=!1,enterDelay:w=100,enterNextDelay:h=0,enterTouchDelay:b=700,followCursor:j=!1,id:S,leaveDelay:M=0,leaveTouchDelay:y=1500,onClose:T,onOpen:f,open:D,placement:_="bottom",PopperComponent:k,PopperProps:O={},slotProps:W={},slots:X={},title:$,TransitionComponent:V,TransitionProps:G,...z}=s,v=u.isValidElement(n)?n:o.jsx("span",{children:n}),m=Ft(),A=Ar(),[R,U]=u.useState(),[N,F]=u.useState(null),H=u.useRef(!1),Y=C||j,Z=mt(),ce=mt(),ee=mt(),be=mt(),[me,P]=qo({controlled:D,default:!1,name:"Tooltip",state:"open"});let q=me;const B=Ir(S),K=u.useRef(),xe=ar(()=>{K.current!==void 0&&(document.body.style.WebkitUserSelect=K.current,K.current=void 0),be.clear()});u.useEffect(()=>xe,[xe]);const Le=L=>{jr.clear(),vt=!0,P(!0),f&&!q&&f(L)},oe=ar(L=>{jr.start(800+M,()=>{vt=!1}),P(!1),T&&q&&T(L),Z.start(m.transitions.duration.shortest,()=>{H.current=!1})}),ye=L=>{H.current&&L.type!=="touchstart"||(R&&R.removeAttribute("title"),ce.clear(),ee.clear(),w||vt&&h?ce.start(vt?h:w,()=>{Le(L)}):Le(L))},Xe=L=>{ce.clear(),ee.start(M,()=>{oe(L)})},[,we]=u.useState(!1),Ee=L=>{nr(L.target)||(we(!1),Xe(L))},Ye=L=>{R||U(L.currentTarget),nr(L.target)&&(we(!0),ye(L))},Ke=L=>{H.current=!0;const ve=v.props;ve.onTouchStart&&ve.onTouchStart(L)},Ge=L=>{Ke(L),ee.clear(),Z.clear(),xe(),K.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",be.start(b,()=>{document.body.style.WebkitUserSelect=K.current,ye(L)})},pt=L=>{v.props.onTouchEnd&&v.props.onTouchEnd(L),xe(),ee.start(y,()=>{oe(L)})};u.useEffect(()=>{if(!q)return;function L(ve){ve.key==="Escape"&&oe(ve)}return document.addEventListener("keydown",L),()=>{document.removeEventListener("keydown",L)}},[oe,q]);const dt=It(Xo(v),U,r);!$&&$!==0&&(q=!1);const Ne=u.useRef(),ut=L=>{const ve=v.props;ve.onMouseMove&&ve.onMouseMove(L),et={x:L.clientX,y:L.clientY},Ne.current&&Ne.current.update()},Je={},Mt=typeof $=="string";d?(Je.title=!q&&Mt&&!x?$:null,Je["aria-describedby"]=q?B:null):(Je["aria-label"]=Mt?$:null,Je["aria-labelledby"]=q&&!Mt?B:null);const ge={...Je,...z,...v.props,className:je(z.className,v.props.className),onTouchStart:Ke,ref:dt,...j?{onMouseMove:ut}:{}},Ze={};g||(ge.onTouchStart=Ge,ge.onTouchEnd=pt),x||(ge.onMouseOver=bt(ye,ge.onMouseOver),ge.onMouseLeave=bt(Xe,ge.onMouseLeave),Y||(Ze.onMouseOver=ye,Ze.onMouseLeave=Xe)),p||(ge.onFocus=bt(Ye,ge.onFocus),ge.onBlur=bt(Ee,ge.onBlur),Y||(Ze.onFocus=Ye,Ze.onBlur=Ee));const Ie={...s,isRtl:A,arrow:a,disableInteractive:Y,placement:_,PopperComponentProp:k,touch:H.current},he=typeof W.popper=="function"?W.popper(Ie):W.popper,po=u.useMemo(()=>{var ve,rr;let L=[{name:"arrow",enabled:!!N,options:{element:N,padding:4}}];return(ve=O.popperOptions)!=null&&ve.modifiers&&(L=L.concat(O.popperOptions.modifiers)),(rr=he==null?void 0:he.popperOptions)!=null&&rr.modifiers&&(L=L.concat(he.popperOptions.modifiers)),{...O.popperOptions,...he==null?void 0:he.popperOptions,modifiers:L}},[N,O.popperOptions,he==null?void 0:he.popperOptions]),Rt=La(Ie),uo=typeof W.transition=="function"?W.transition(Ie):W.transition,ft={slots:{popper:l.Popper,transition:l.Transition??V,tooltip:l.Tooltip,arrow:l.Arrow,...X},slotProps:{arrow:W.arrow??i.arrow,popper:{...O,...he??i.popper},tooltip:W.tooltip??i.tooltip,transition:{...G,...uo??i.transition}}},[fo,mo]=ae("popper",{elementType:Na,externalForwardedProps:ft,ownerState:Ie,className:je(Rt.popper,O==null?void 0:O.className)}),[go,ho]=ae("transition",{elementType:Yo,externalForwardedProps:ft,ownerState:Ie}),[vo,bo]=ae("tooltip",{elementType:Ua,className:Rt.tooltip,externalForwardedProps:ft,ownerState:Ie}),[xo,yo]=ae("arrow",{elementType:za,className:Rt.arrow,externalForwardedProps:ft,ownerState:Ie,ref:F});return o.jsxs(u.Fragment,{children:[u.cloneElement(v,ge),o.jsx(fo,{as:k??Xr,placement:_,anchorEl:j?{getBoundingClientRect:()=>({top:et.y,left:et.x,right:et.x,bottom:et.y,width:0,height:0})}:R,popperRef:Ne,open:R?q:!1,id:B,transition:!0,...Ze,...mo,popperOptions:po,children:({TransitionProps:L})=>o.jsx(go,{timeout:m.transitions.duration.shorter,...L,...ho,children:o.jsxs(vo,{...bo,children:[$,a?o.jsx(xo,{...yo}):null]})})})]})});class Fa extends u.Component{getSnapshotBeforeUpdate(e){const r=this.props.childRef.current;if(r&&e.isPresent&&!this.props.isPresent){const s=r.offsetParent,a=To(s)&&s.offsetWidth||0,n=this.props.sizeRef.current;n.height=r.offsetHeight||0,n.width=r.offsetWidth||0,n.top=r.offsetTop,n.left=r.offsetLeft,n.right=a-n.width-n.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Ha({children:t,isPresent:e,anchorX:r,root:s}){const a=u.useId(),n=u.useRef(null),c=u.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=u.useContext(jo);return u.useInsertionEffect(()=>{const{width:i,height:d,top:p,left:x,right:C}=c.current;if(e||!n.current||!i||!d)return;const g=r==="left"?`left: ${x}`:`right: ${C}`;n.current.dataset.motionPopId=a;const w=document.createElement("style");l&&(w.nonce=l);const h=s??document.head;return h.appendChild(w),w.sheet&&w.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${d}px !important;
            ${g}px !important;
            top: ${p}px !important;
          }
        `),()=>{h.removeChild(w),h.contains(w)&&h.removeChild(w)}},[e]),o.jsx(Fa,{isPresent:e,childRef:n,sizeRef:c,children:u.cloneElement(t,{ref:n})})}const Va=({children:t,initial:e,isPresent:r,onExitComplete:s,custom:a,presenceAffectsLayout:n,mode:c,anchorX:l,root:i})=>{const d=_r(qa),p=u.useId();let x=!0,C=u.useMemo(()=>(x=!1,{id:p,initial:e,isPresent:r,custom:a,onExitComplete:g=>{d.set(g,!0);for(const w of d.values())if(!w)return;s&&s()},register:g=>(d.set(g,!1),()=>d.delete(g))}),[r,d,s]);return n&&x&&(C={...C}),u.useMemo(()=>{d.forEach((g,w)=>d.set(w,!1))},[r]),u.useEffect(()=>{!r&&!d.size&&s&&s()},[r]),c==="popLayout"&&(t=o.jsx(Ha,{isPresent:r,anchorX:l,root:i,children:t})),o.jsx(So.Provider,{value:C,children:t})};function qa(){return new Map}const xt=t=>t.key||"";function Tr(t){const e=[];return u.Children.forEach(t,r=>{u.isValidElement(r)&&e.push(r)}),e}const Xa=({children:t,custom:e,initial:r=!0,onExitComplete:s,presenceAffectsLayout:a=!0,mode:n="sync",propagate:c=!1,anchorX:l="left",root:i})=>{const[d,p]=Do(c),x=u.useMemo(()=>Tr(t),[t]),C=c&&!d?[]:x.map(xt),g=u.useRef(!0),w=u.useRef(x),h=_r(()=>new Map),[b,j]=u.useState(x),[S,M]=u.useState(x);Po(()=>{g.current=!1,w.current=x;for(let f=0;f<S.length;f++){const D=xt(S[f]);C.includes(D)?h.delete(D):h.get(D)!==!0&&h.set(D,!1)}},[S,C.length,C.join("-")]);const y=[];if(x!==b){let f=[...x];for(let D=0;D<S.length;D++){const _=S[D],k=xt(_);C.includes(k)||(f.splice(D,0,_),y.push(_))}return n==="wait"&&y.length&&(f=y),M(Tr(f)),j(x),null}const{forceRender:T}=u.useContext(Ao);return o.jsx(o.Fragment,{children:S.map(f=>{const D=xt(f),_=c&&!d?!1:x===S||C.includes(D),k=()=>{if(h.has(D))h.set(D,!0);else return;let O=!0;h.forEach(W=>{W||(O=!1)}),O&&(T==null||T(),M(w.current),c&&(p==null||p()),s&&s())};return o.jsx(Va,{isPresent:_,initial:!g.current||r?void 0:!1,custom:e,presenceAffectsLayout:a,mode:n,root:i,onExitComplete:_?void 0:k,anchorX:l,children:f},D)})})},Ya=fe(o.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"})),Ka=fe([o.jsx("path",{d:"M17 11c.34 0 .67.04 1 .09V6.27L10.5 3 3 6.27v4.91c0 4.54 3.2 8.79 7.5 9.82.55-.13 1.08-.32 1.6-.55-.69-.98-1.1-2.17-1.1-3.45 0-3.31 2.69-6 6-6"},"0"),o.jsx("path",{d:"M17 13c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 1.38c.62 0 1.12.51 1.12 1.12s-.51 1.12-1.12 1.12-1.12-.51-1.12-1.12.5-1.12 1.12-1.12m0 5.37c-.93 0-1.74-.46-2.24-1.17.05-.72 1.51-1.08 2.24-1.08s2.19.36 2.24 1.08c-.5.71-1.31 1.17-2.24 1.17"},"1")]),Ga=fe(o.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"})),Ja=fe([o.jsx("circle",{cx:"12",cy:"12",r:"3.2"},"0"),o.jsx("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5"},"1")]),Et=fe(o.jsx("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2M6 9h12v2H6zm8 5H6v-2h8zm4-6H6V6h12z"})),Za=fe(o.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"})),Sr=fe(o.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"})),Qa=fe(o.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"})),Dr=fe(o.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"})),Pr=fe(o.jsx("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"})),en=fe(o.jsx("path",{d:"M14 8c0-2.21-1.79-4-4-4S6 5.79 6 8s1.79 4 4 4 4-1.79 4-4m3 2v2h6v-2zM2 18v2h16v-2c0-2.66-5.33-4-8-4s-8 1.34-8 4"})),tn=fe([o.jsx("circle",{cx:"12",cy:"12",r:"3.2"},"0"),o.jsx("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5"},"1")]),Zt=()=>{var t;if(console.log("Инициализация Telegram WebApp..."),er(),typeof window<"u"&&((t=window.Telegram)!=null&&t.WebApp))try{const e=window.Telegram.WebApp;return e.ready(),e.expand(),e.setHeaderColor("#232b3b"),e.setBackgroundColor("#232b3b"),e.enableClosingConfirmation(),console.log("Telegram WebApp успешно инициализирован"),console.log("WebApp version:",e.version),console.log("WebApp platform:",e.platform),console.log("WebApp theme:",e.colorScheme),!0}catch(e){return console.error("Ошибка инициализации Telegram WebApp:",e),!1}return console.log("Telegram WebApp не найден"),!1},Jr=()=>{var t,e,r;return typeof window<"u"&&((r=(e=(t=window.Telegram)==null?void 0:t.WebApp)==null?void 0:e.initDataUnsafe)!=null&&r.user)?window.Telegram.WebApp.initDataUnsafe.user:null},Qt=()=>{var t;if(console.log("=== Telegram WebApp Debug Info ==="),typeof window>"u"){console.log("❌ Window object not available");return}if(console.log("🔍 Telegram object:",window.Telegram?"✅ Available":"❌ Not available"),(t=window.Telegram)!=null&&t.WebApp){const e=window.Telegram.WebApp;console.log("🔍 WebApp object:","✅ Available"),console.log("🔍 WebApp version:",e.version),console.log("🔍 WebApp platform:",e.platform),console.log("🔍 WebApp colorScheme:",e.colorScheme),console.log("🔍 WebApp isExpanded:",e.isExpanded),console.log("🔍 WebApp viewportHeight:",e.viewportHeight),console.log("🔍 WebApp viewportStableHeight:",e.viewportStableHeight),console.log("🔍 InitData:",e.initData?`✅ Available (${e.initData.length} chars)`:"❌ Not available"),console.log("🔍 InitDataUnsafe:",e.initDataUnsafe?"✅ Available":"❌ Not available"),e.initDataUnsafe&&(console.log("🔍 InitDataUnsafe.user:",e.initDataUnsafe.user?"✅ Available":"❌ Not available"),console.log("🔍 InitDataUnsafe.query_id:",e.initDataUnsafe.query_id?"✅ Available":"❌ Not available"),console.log("🔍 InitDataUnsafe.auth_date:",e.initDataUnsafe.auth_date?"✅ Available":"❌ Not available"),console.log("🔍 InitDataUnsafe.hash:",e.initDataUnsafe.hash?"✅ Available":"❌ Not available"),e.initDataUnsafe.user&&console.log("🔍 User data:",JSON.stringify(e.initDataUnsafe.user,null,2)))}else console.log("❌ WebApp object not available");console.log("==================================")},qe=()=>{var t;if(console.log("Получение данных авторизации Telegram..."),Qt(),typeof window<"u"&&((t=window.Telegram)!=null&&t.WebApp)){console.log("Telegram WebApp найден");const e=window.Telegram.WebApp.initData;if(console.log("Telegram initData:",e?"найден":"отсутствует"),e)return console.log("✅ Используем реальные данные initData"),e;const r=window.Telegram.WebApp.initDataUnsafe;if(console.log("Telegram initDataUnsafe:",r),r!=null&&r.user){const s=Math.floor(Date.now()/1e3),a=JSON.stringify(r.user),n=`user=${encodeURIComponent(a)}`,c=`auth_date=${s}`,l=`${n}&${c}`,i=btoa(l).replace(/[^a-zA-Z0-9]/g,"").substring(0,32),d=`${n}&${c}&hash=${i}`;return console.log("✅ Создаем данные авторизации из initDataUnsafe"),console.log("Generated auth data length:",d.length),d}}return console.warn("❌ Приложение запущено не из Telegram WebApp"),console.warn("❌ Данные авторизации недоступны"),""},Zr=()=>{var t;return typeof window<"u"&&!!((t=window.Telegram)!=null&&t.WebApp)},Qr=()=>{if(console.log("🔄 Очищаем и пересоздаем данные авторизации..."),typeof window<"u"){localStorage.removeItem("telegram_init_data"),console.log("✅ Старые данные очищены");const t=qe();return console.log("✅ Новые данные созданы:",t?"успешно":"ошибка"),t}return""},er=()=>{typeof window<"u"&&(localStorage.removeItem("telegram_init_data"),console.log("🧹 Очищены старые данные авторизации"))},eo=()=>{console.log("🧪 Тестируем данные авторизации...");const t=qe();if(t){console.log("✅ Данные авторизации найдены"),console.log("📊 Длина:",t.length),console.log("📋 Превью:",t.substring(0,100)+"...");try{const e=new URLSearchParams(t),r=e.get("user"),s=e.get("auth_date"),a=e.get("hash");if(console.log("🔍 Структура данных:"),console.log("  - user:",r?"есть":"отсутствует"),console.log("  - auth_date:",s?"есть":"отсутствует"),console.log("  - hash:",a?"есть":"отсутствует"),r){const n=JSON.parse(decodeURIComponent(r));console.log("👤 Данные пользователя:",n)}return!0}catch(e){return console.error("❌ Ошибка парсинга данных:",e),!1}}else return console.error("❌ Данные авторизации не найдены"),!1},tr=async()=>{console.log("🔬 Диагностика проблемы авторизации на сервере...");try{const{debugAuthConfig:t,debugValidateTelegramData:e}=await st(async()=>{const{debugAuthConfig:s,debugValidateTelegramData:a}=await Promise.resolve().then(()=>Pt);return{debugAuthConfig:s,debugValidateTelegramData:a}},void 0);console.log("🔍 Проверяем конфигурацию сервера...");try{const s=await t();if(console.log("🏃 Конфигурация сервера:",s),!s.telegram_bot_token_set)return console.error("❌ На сервере не установлен токен Telegram бота!"),console.error("💡 Решение: Администратор должен установить TELEGRAM_BOT_TOKEN на сервере"),"server_no_token";console.log("✅ Токен бота на сервере установлен")}catch(s){return console.error("❌ Ошибка получения конфигурации сервера:",s),"server_config_error"}const r=qe();if(r){console.log("🧪 Тестируем валидацию данных на сервере...");try{const s=await e(r);return console.log("📊 Результат валидации:",s),s.success?(console.log("✅ Валидация на сервере прошла успешно!"),console.log("❓ Возможно, проблема в другом месте"),"validation_success"):(console.error("❌ Валидация на сервере не прошла"),console.error("💡 Причина: Неправильная подпись или истекшие данные"),"validation_failed")}catch(s){return console.error("❌ Ошибка тестирования валидации:",s),"validation_error"}}else return console.error("❌ Нет данных для тестирования"),"no_data"}catch(t){return console.error("❌ Общая ошибка диагностики:",t),"general_error"}};typeof window<"u"&&(window.telegramUtils={debugTelegramWebApp:Qt,getTelegramInitData:qe,clearAndRecreateAuthData:Qr,cleanupOldAuthData:er,testAuthData:eo,initTelegramWebApp:Zt,diagnoseServerAuth:tr},console.log("🔧 Утилиты Telegram доступны через window.telegramUtils"));const rn=Object.freeze(Object.defineProperty({__proto__:null,cleanupOldAuthData:er,clearAndRecreateAuthData:Qr,debugTelegramWebApp:Qt,diagnoseServerAuth:tr,getTelegramInitData:qe,getTelegramUser:Jr,initTelegramWebApp:Zt,isTelegramWebApp:Zr,testAuthData:eo},Symbol.toStringTag,{value:"Module"})),on=()=>{console.log("=== Aeon Messenger API Configuration ==="),console.log("VITE_CHAT_URL:","https://aeon-messenger-app-09faae856b73.herokuapp.com"),console.log("Base URL:","https://aeon-messenger-app-09faae856b73.herokuapp.com"),console.log("Environment:","production"),console.log("🆕 NEW BACKEND URL: https://aeon-backend-2892-d50dfbe26b14.herokuapp.com"),console.log("=========================================")};on();const te=No.create({baseURL:"https://aeon-backend-2892-d50dfbe26b14.herokuapp.com",timeout:3e4,headers:{"Content-Type":"application/json"}}),to=async(t,e=3,r=1e3)=>{var s,a;for(let n=0;n<e;n++)try{return await t()}catch(c){if(console.log(`Attempt ${n+1} failed:`,c.message),((s=c.response)==null?void 0:s.status)===401||((a=c.response)==null?void 0:a.status)===403||n===e-1)throw c;await new Promise(l=>setTimeout(l,r*(n+1)))}throw new Error("Max retries reached")};te.interceptors.request.use(t=>{const e=qe();return console.log("=== Aeon API Request Debug ==="),console.log("URL:",t.url),console.log("Method:",t.method),console.log("Base URL:",t.baseURL),console.log("Init Data Length:",e?e.length:0),console.log("Init Data Preview:",e?e.substring(0,100)+"...":"No data"),e?(t.headers["x-telegram-init-data"]=e,console.log("✅ Auth header attached")):(console.warn("❌ No auth data available - running in development mode"),console.warn("❌ This request will likely fail with 401 error")),console.log("==============================="),t},t=>(console.error("Request interceptor error:",t),Promise.reject(t)));te.interceptors.response.use(t=>(console.log("✅ API Response:",t.config.url,t.status),t),t=>{var e,r,s,a,n,c,l,i;throw console.error("=== Aeon API Error ==="),console.error("URL:",(e=t.config)==null?void 0:e.url),console.error("Status:",(r=t.response)==null?void 0:r.status),console.error("Status Text:",(s=t.response)==null?void 0:s.statusText),console.error("Response Data:",(a=t.response)==null?void 0:a.data),console.error("Request Headers:",(n=t.config)==null?void 0:n.headers),console.error("======================"),((c=t.response)==null?void 0:c.status)===401?(console.error("❌ Authorization failed"),console.error("❌ Possible reasons:"),console.error("   1. App is not running inside Telegram WebApp"),console.error("   2. Invalid or expired Telegram init data"),console.error("   3. Server-side authorization issue"),console.error("❌ Solution: Open this app from Telegram bot/mini app"),{...t,message:"Authorization failed - app must be opened from Telegram",isAuthError:!0,response:{...t.response,data:{...(l=t.response)==null?void 0:l.data,error:"Приложение должно быть открыто из Telegram"}}}):t.code==="ECONNABORTED"&&t.message.includes("timeout")?(console.error("❌ Request timeout"),console.error("❌ Possible reasons:"),console.error("   1. Server is starting up (cold start)"),console.error("   2. Server is overloaded"),console.error("   3. Network connectivity issues"),console.error("❌ Solution: Try again in a moment"),{...t,message:"Server is starting up, please try again in a moment",isTimeoutError:!0}):((i=t.response)==null?void 0:i.status)===503?(console.error("❌ Service Unavailable"),console.error("❌ Server is temporarily unavailable"),{...t,message:"Server is temporarily unavailable, please try again",isServiceError:!0}):t});const Lt=async()=>(await to(()=>te.get("/api/v1/chats/"))).data,ro=async t=>(await to(()=>te.post("/api/v1/chats/",t,{timeout:6e4}))).data,sn=async t=>(await te.get(`/api/v1/chats/${t}`)).data,oo=async(t,e)=>{await te.post(`/api/v1/chats/${t}/members/${e}`)},so=async(t,e)=>{await te.delete(`/api/v1/chats/${t}/members/${e}`)},Nt=async(t,e=1,r=50)=>(await te.get(`/api/v1/messages/chat/${t}?page=${e}&per_page=${r}`)).data,ao=async t=>(await te.post("/api/v1/messages/",t)).data,no=async t=>{await te.post(`/api/v1/messages/chat/${t}/read-all`)},io=async t=>{console.log("uploadMedia: Starting upload for file:",t.name,t.size,t.type);const e=new FormData;e.append("file",t);try{const r=await te.post("/api/v1/messages/upload-media",e,{headers:{},timeout:6e4});return console.log("uploadMedia: Upload successful:",r.data),r.data}catch(r){throw console.error("uploadMedia: Upload failed:",r),r.response&&(console.error("Response status:",r.response.status),console.error("Response data:",r.response.data),console.error("Response headers:",r.response.headers)),r}},lo=async()=>(await te.get("/api/v1/me")).data,an=async()=>(await te.get("/api/v1/debug/auth")).data,nn=async t=>(await te.post("/api/v1/debug/validate-telegram-data",t,{headers:{"Content-Type":"application/json"}})).data,Ut=async(t,e)=>(await te.post(`/api/v1/chats/${t}/invite-by-username`,{username:e})).data,zt=async()=>{await te.post("/api/v1/users/check-invitations")},Pt=Object.freeze(Object.defineProperty({__proto__:null,addMemberToChat:oo,checkAndAcceptInvitations:zt,createChat:ro,debugAuthConfig:an,debugValidateTelegramData:nn,getChat:sn,getChatMessages:Nt,getChats:Lt,getCurrentUser:lo,inviteMemberByUsername:Ut,markAllMessagesAsRead:no,removeMemberFromChat:so,sendMessage:ao,uploadMedia:io},Symbol.toStringTag,{value:"Module"})),ln=()=>Mo(),yt=t=>Ro(t),cn=()=>{const t=ln(),[e,r]=u.useState([]),[s,a]=u.useState(null),[n,c]=u.useState(null),[l,i]=u.useState(!0),[d,p]=u.useState(null),[x,C]=u.useState(!1),[g,w]=u.useState(!1),h=yt(v=>s?Io(v,s.id):[]),b=yt(v=>s?Wo(v,s.id):!1),j=yt(v=>s?$o(v,s.id):null),S=yt(v=>s?Eo(v,s.id):0),M=u.useCallback(()=>Zt(),[]),y=u.useCallback(async()=>{var v,m;try{const A=await lo();c(A),p(null),C(!1);try{await zt()}catch(R){((v=R.response)==null?void 0:v.status)===404?console.log("Check invitations endpoint not available (404) - skipping"):console.log("No pending invitations or error checking invitations:",R)}}catch(A){if(console.error("Error loading current user:",A),((m=A.response)==null?void 0:m.status)===401||A.isAuthError?(C(!0),p("Приложение должно быть открыто из Telegram для корректной работы")):p("Ошибка загрузки данных пользователя"),!Zr()){const R=Jr();c(R?{id:R.id,telegram_id:R.id,username:R.username,first_name:R.first_name,last_name:R.last_name,profile_photo_url:R.photo_url}:{id:123456789,telegram_id:123456789,username:"testuser",first_name:"Test",last_name:"User",profile_photo_url:void 0}),C(!1)}}},[M]),T=u.useCallback(async()=>{var v,m;try{i(!0);const R=(await Lt()).sort((U,N)=>!U.last_message_time&&!N.last_message_time?0:U.last_message_time?N.last_message_time?new Date(N.last_message_time).getTime()-new Date(U.last_message_time).getTime():-1:1);r(R),p(null),C(!1)}catch(A){console.error("Error loading chats:",A),((v=A.response)==null?void 0:v.status)===401||A.isAuthError?(C(!0),p("Приложение должно быть открыто из Telegram для корректной работы")):A.isTimeoutError||A.code==="ECONNABORTED"?p("⏱️ Сервер запускается, попробуйте обновить страницу через минуту"):A.isServiceError||((m=A.response)==null?void 0:m.status)===503?p("🔧 Сервер временно недоступен, попробуйте через несколько минут"):p("Ошибка загрузки чатов")}finally{i(!1)}},[]),f=u.useCallback(async()=>{var v;try{const A=(await Lt()).sort((R,U)=>!R.last_message_time&&!U.last_message_time?0:R.last_message_time?U.last_message_time?new Date(U.last_message_time).getTime()-new Date(R.last_message_time).getTime():-1:1);r(A),p(null),C(!1)}catch(m){console.error("Error refreshing chats:",m),(((v=m.response)==null?void 0:v.status)===401||m.isAuthError)&&C(!0)}},[]),D=u.useCallback(async v=>{var m,A;try{t(ir({chatId:v,loading:!0}));const R=await Nt(v);t(Oo({chatId:v,messages:R.messages})),p(null),C(!1)}catch(R){console.error("Error loading messages:",R),t(_o({chatId:v,error:R.message})),((m=R.response)==null?void 0:m.status)===401||R.isAuthError?(C(!0),p("Приложение должно быть открыто из Telegram для корректной работы")):R.isTimeoutError||R.code==="ECONNABORTED"?p("⏱️ Сервер запускается, сообщения загрузятся автоматически"):R.isServiceError||((A=R.response)==null?void 0:A.status)===503?p("🔧 Сервер временно недоступен, попробуйте обновить чат"):p("Ошибка загрузки сообщений")}finally{t(ir({chatId:v,loading:!1}))}},[t]),_=u.useCallback(async v=>{var m,A;try{const U=(await Nt(v)).messages;if(U.length>0){const N=U[U.length-1].id;if(S&&N>S){const F=h,H=new Set(F.map(Z=>Z.id)),Y=U.filter(Z=>!H.has(Z.id));if(Y.length>0){t(ko({chatId:v,messages:Y})),w(!0),f();try{(A=(m=window.Telegram)==null?void 0:m.WebApp)!=null&&A.HapticFeedback&&window.Telegram.WebApp.HapticFeedback.notificationOccurred("success")}catch{console.log("Haptic feedback not available")}console.log("🔄 Получены новые сообщения")}}}}catch(R){console.error("Error checking new messages:",R)}},[S,h,t,f]),k=u.useCallback(async(v,m)=>{if(m.trim())try{const A={text:m.trim(),message_type:"text",chat_id:v},R=await ao(A);t(lr({chatId:v,message:R})),r(U=>U.map(F=>F.id===v?{...F,last_message:m.trim(),last_message_time:new Date().toISOString()}:F).sort((F,H)=>!F.last_message_time&&!H.last_message_time?0:F.last_message_time?H.last_message_time?new Date(H.last_message_time).getTime()-new Date(F.last_message_time).getTime():-1:1))}catch(A){if(console.error("Error sending message:",A),p("Ошибка отправки сообщения"),n){const R={id:Date.now(),text:m.trim(),message_type:"text",chat_id:v,sender_id:n.id,sender:{id:n.id,telegram_id:n.telegram_id,username:n.username,first_name:n.first_name,last_name:n.last_name,profile_photo_url:n.profile_photo_url},is_edited:!1,is_deleted:!1,read_by:[],created_at:new Date().toISOString(),updated_at:new Date().toISOString()};t(lr({chatId:v,message:R})),r(U=>U.map(F=>F.id===v?{...F,last_message:m.trim(),last_message_time:new Date().toISOString()}:F).sort((F,H)=>!F.last_message_time&&!H.last_message_time?0:F.last_message_time?H.last_message_time?new Date(H.last_message_time).getTime()-new Date(F.last_message_time).getTime():-1:1))}}},[n,t]),O=u.useCallback(async(v,m=[],A=[],R)=>{try{const U={title:v,chat_type:m.length+A.length>0?"group":"private",member_ids:m,...R&&{photo_url:R}},N=await ro(U);if(A.length>0){const{inviteMemberByUsername:H}=await st(async()=>{const{inviteMemberByUsername:Y}=await Promise.resolve().then(()=>Pt);return{inviteMemberByUsername:Y}},void 0);for(const Y of A)try{await H(N.id,Y)}catch(Z){console.error(`Error inviting ${Y}:`,Z)}}await T();const F={id:N.id,title:N.title,chat_type:N.chat_type,photo_url:N.photo_url,last_message:void 0,last_message_time:void 0,unread_count:0};return a(F),await D(N.id),N}catch(U){throw console.error("Error creating chat:",U),p("Ошибка создания чата"),U}},[T,D]),W=u.useCallback(v=>{a(v),w(!1),D(v.id),v.unread_count>0&&no(v.id).catch(m=>console.error("Error marking messages as read:",m))},[D]),X=u.useCallback(()=>{a(null),w(!1)},[]),$=u.useCallback(()=>{w(!1)},[]),V=u.useCallback(async v=>{try{const{getChat:m}=await st(async()=>{const{getChat:R}=await Promise.resolve().then(()=>Pt);return{getChat:R}},void 0);return await m(v)}catch(m){throw console.error("Error loading chat info:",m),p("Ошибка загрузки информации о чате"),m}},[]),G=u.useCallback(async(v,m)=>{try{await oo(v,m),p(null),s&&s.id===v&&setTimeout(()=>f(),1e3)}catch(A){throw console.error("Error adding member to chat:",A),p("Ошибка добавления участника"),A}},[s,f]),z=u.useCallback(async(v,m)=>{try{await so(v,m),p(null),s&&s.id===v&&setTimeout(()=>f(),1e3)}catch(A){throw console.error("Error removing member from chat:",A),p("Ошибка удаления участника"),A}},[s,f]);return u.useEffect(()=>{M(),y(),T()},[M,y,T]),u.useEffect(()=>{if(x)return;const v=setInterval(()=>{f()},3e4);return()=>clearInterval(v)},[x,f]),u.useEffect(()=>{if(!s||x)return;const v=setInterval(()=>{_(s.id)},5e3);return()=>clearInterval(v)},[s,x,_]),u.useEffect(()=>{if(x)return;const v=setInterval(async()=>{var m;try{await zt(),f()}catch(A){((m=A.response)==null?void 0:m.status)===404?console.log("Check invitations endpoint not available (404) - skipping"):console.log("No new invitations or error:",A)}},12e4);return()=>clearInterval(v)},[x,f]),{chats:e,currentChat:s,messages:h,currentUser:n,loading:l,messagesLoading:b,error:d||j,isAuthError:x,hasNewMessages:g,markMessagesAsViewed:$,sendNewMessage:k,createNewChat:O,selectChat:W,refreshChats:f,refreshMessages:()=>s&&D(s.id),loadChatInfo:V,addMemberToChat:G,removeMemberFromChat:z,clearCurrentChat:X,checkNewMessages:()=>s&&_(s.id)}},pn=({open:t,onClose:e})=>{const[r,s]=u.useState(!1),[a,n]=u.useState(null),c=async()=>{s(!0),n(null);try{const d=await tr(),{debugAuthConfig:p,debugValidateTelegramData:x}=await st(async()=>{const{debugAuthConfig:j,debugValidateTelegramData:S}=await Promise.resolve().then(()=>Pt);return{debugAuthConfig:j,debugValidateTelegramData:S}},void 0),{getTelegramInitData:C}=await st(async()=>{const{getTelegramInitData:j}=await Promise.resolve().then(()=>rn);return{getTelegramInitData:j}},void 0);let g,w,h=[];try{g=await p()}catch{g={error:"Не удалось получить конфигурацию сервера"}}const b=C();if(b)try{w=await x(b)}catch{w={error:"Не удалось протестировать валидацию"}}switch(d){case"server_no_token":h=["Администратор должен установить переменную TELEGRAM_BOT_TOKEN на сервере","Получите токен в @BotFather и добавьте его в настройки Heroku","Перезапустите приложение после установки токена"];break;case"validation_failed":h=["Проверьте правильность токена бота в @BotFather","Убедитесь, что приложение открыто из Telegram","Токен должен соответствовать боту, через который открыто приложение"];break;case"validation_success":h=["Валидация прошла успешно, проблема может быть временной","Попробуйте перезагрузить приложение","Проверьте интернет-соединение"];break;default:h=["Убедитесь, что приложение открыто из Telegram","Проверьте интернет-соединение","Обратитесь к администратору с результатами диагностики"]}n({status:d,serverConfig:g,validationResult:w,recommendations:h})}catch{n({status:"error",recommendations:["Произошла ошибка при диагностике","Проверьте консоль браузера для подробностей"]})}finally{s(!1)}},l=d=>{switch(d){case"validation_success":return"success";case"server_no_token":case"validation_failed":return"error";default:return"warning"}},i=d=>{switch(d){case"server_no_token":return"Токен бота не установлен";case"validation_failed":return"Валидация не прошла";case"validation_success":return"Валидация успешна";case"server_config_error":return"Ошибка конфигурации сервера";case"validation_error":return"Ошибка валидации";case"no_data":return"Нет данных авторизации";case"general_error":return"Общая ошибка";default:return"Неизвестный статус"}};return o.jsxs(jt,{open:t,onClose:e,maxWidth:"md",fullWidth:!0,children:[o.jsx(St,{children:"🔬 Диагностика проблемы авторизации"}),o.jsxs(Tt,{children:[!r&&!a&&o.jsx(I,{sx:{textAlign:"center",py:3},children:o.jsx(E,{variant:"body1",sx:{mb:2},children:'Нажмите "Запустить диагностику" для проверки проблемы авторизации'})}),r&&o.jsxs(I,{sx:{display:"flex",alignItems:"center",justifyContent:"center",py:4},children:[o.jsx(Se,{sx:{mr:2}}),o.jsx(E,{children:"Выполняется диагностика..."})]}),a&&o.jsxs(I,{sx:{py:2},children:[o.jsxs(I,{sx:{mb:3},children:[o.jsx(E,{variant:"h6",sx:{mb:1},children:"Результат диагностики:"}),o.jsx($r,{label:i(a.status),color:l(a.status),sx:{mb:2}})]}),a.serverConfig&&o.jsxs(I,{sx:{mb:3},children:[o.jsx(E,{variant:"h6",sx:{mb:1},children:"Конфигурация сервера:"}),o.jsxs($e,{severity:a.serverConfig.telegram_bot_token_set?"success":"error",children:[o.jsxs(E,{variant:"body2",children:["Токен бота: ",a.serverConfig.telegram_bot_token_set?"✅ Установлен":"❌ Не установлен"]}),o.jsxs(E,{variant:"body2",children:["Режим отладки: ",a.serverConfig.debug_mode?"Включен":"Выключен"]})]})]}),a.validationResult&&o.jsxs(I,{sx:{mb:3},children:[o.jsx(E,{variant:"h6",sx:{mb:1},children:"Результат валидации:"}),o.jsx($e,{severity:a.validationResult.success?"success":"error",children:o.jsxs(E,{variant:"body2",children:["Валидация: ",a.validationResult.success?"✅ Успешна":"❌ Не прошла"]})})]}),o.jsxs(I,{sx:{mb:2},children:[o.jsx(E,{variant:"h6",sx:{mb:1},children:"Рекомендации:"}),a.recommendations.map((d,p)=>o.jsxs(E,{variant:"body2",sx:{mb:1,pl:2},children:["• ",d]},p))]})]})]}),o.jsxs(Jt,{children:[!a&&o.jsx(se,{onClick:c,disabled:r,variant:"contained",color:"primary",children:"Запустить диагностику"}),a&&o.jsx(se,{onClick:c,variant:"outlined",children:"Повторить диагностику"}),o.jsx(se,{onClick:e,children:"Закрыть"})]})]})},co=({currentPhotoUrl:t,onPhotoChange:e,disabled:r=!1,size:s=80})=>{const[a,n]=u.useState(!1),[c,l]=u.useState(null),[i,d]=u.useState(t||null),p=u.useRef(null),x=h=>{var S;const b=(S=h.target.files)==null?void 0:S[0];if(!b)return;if(!b.type.startsWith("image/")){l("Пожалуйста, выберите изображение");return}if(b.size>5*1024*1024){l("Размер файла не должен превышать 5MB");return}const j=new FileReader;j.onload=M=>{var y;d((y=M.target)==null?void 0:y.result)},j.readAsDataURL(b),C(b)},C=async h=>{var b,j,S,M,y;try{n(!0),l(null),console.log("Загружаем файл:",h.name,h.size,h.type);const T=await io(h);e(T.media_url),d(T.media_url),console.log("Фото успешно загружено:",T.media_url)}catch(T){console.error("Error uploading photo:",T);let f="Ошибка загрузки фото";((b=T.response)==null?void 0:b.status)===405?(f="Загрузка фото временно недоступна",console.warn("405 Error: uploadMedia endpoint may not be available")):((j=T.response)==null?void 0:j.status)===413?f="Файл слишком большой":((S=T.response)==null?void 0:S.status)===422?f="Неподдерживаемый формат файла":((M=T.response)==null?void 0:M.status)===401?f="Ошибка авторизации":T.isAuthError?f="Требуется авторизация в Telegram":T.code==="ECONNABORTED"?f="Превышено время ожидания":((y=T.response)==null?void 0:y.status)>=500&&(f="Ошибка сервера, попробуйте позже"),l(f),d(t||null)}finally{n(!1)}},g=()=>{d(null),e(null),l(null),p.current&&(p.current.value="")},w=()=>{var h;r||a||(h=p.current)==null||h.click()};return o.jsxs(I,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[o.jsxs(I,{sx:{position:"relative"},children:[o.jsx(at,{src:i||void 0,sx:{width:s,height:s,bgcolor:"#4a9eff",cursor:r||a?"default":"pointer",border:c?"2px solid #f44336":"2px solid transparent","&:hover":{opacity:r||a?1:.8}},onClick:w,children:a?o.jsx(Se,{size:s*.4,sx:{color:"white"}}):o.jsx(tn,{sx:{fontSize:s*.4}})}),i&&!a&&o.jsx(_e,{size:"small",sx:{position:"absolute",top:-8,right:-8,bgcolor:"#f44336",color:"white",width:24,height:24,"&:hover":{bgcolor:"#d32f2f"}},onClick:g,children:o.jsx(Sr,{sx:{fontSize:14}})}),a&&o.jsx(I,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"rgba(0,0,0,0.5)",borderRadius:"50%"},children:o.jsx(Se,{size:s*.3,sx:{color:"white"}})})]}),o.jsxs(I,{sx:{display:"flex",gap:1},children:[o.jsx(se,{variant:"outlined",size:"small",startIcon:o.jsx(Za,{}),onClick:w,disabled:r||a,sx:{borderColor:"#4a9eff",color:"#4a9eff","&:hover":{borderColor:"#3d8bdb",bgcolor:"rgba(74, 158, 255, 0.1)"}},children:a?"Загрузка...":"Выбрать фото"}),i&&o.jsx(Dt,{title:"Удалить фото",children:o.jsx(_e,{size:"small",onClick:g,disabled:r||a,sx:{color:"#f44336","&:hover":{bgcolor:"rgba(244, 67, 54, 0.1)"}},children:o.jsx(Sr,{})})})]}),o.jsxs(E,{variant:"caption",sx:{color:"#8b95a1",textAlign:"center"},children:["Нажмите на аватар или кнопку для выбора фото",o.jsx("br",{}),"Максимальный размер: 5MB",c&&o.jsxs(o.Fragment,{children:[o.jsx("br",{}),o.jsx("span",{style:{color:"#f44336"},children:c}),o.jsx("br",{}),o.jsx("span",{style:{color:"#8b95a1"},children:"Чат можно создать и без фото"})]})]}),o.jsx("input",{ref:p,type:"file",accept:"image/*",style:{display:"none"},onChange:x})]})},dn=({open:t,onClose:e,currentChat:r,loadChatInfo:s,addMemberToChat:a,removeMemberFromChat:n,currentUserId:c,onChatPhotoUpdate:l})=>{var v;const[i,d]=u.useState(null),[p,x]=u.useState(!1),[C,g]=u.useState(null),[w,h]=u.useState(""),[b,j]=u.useState(""),[S,M]=u.useState("username"),[y,T]=u.useState(!1),[f,D]=u.useState(null),[_,k]=u.useState(!1);u.useEffect(()=>{t&&r&&O()},[t,r]);const O=async()=>{if(r)try{x(!0),g(null);const m=await s(r.id);d(m)}catch(m){g("Не удалось загрузить информацию о чате"),console.error("Error loading chat details:",m)}finally{x(!1)}},W=async m=>{r&&await a(r.id,m)},X=async m=>{if(!r)return;const A=await Ut(r.id,m);A.status==="added"?D({type:"success",message:`✅ @${m} найден и добавлен в чат!`}):A.status==="invited"&&D({type:"info",message:`📨 @${m} не найден в базе. Приглашение создано - пользователь будет добавлен при входе в приложение.`}),setTimeout(()=>D(null),5e3)},$=async()=>{if(!w.trim())return;const m=w.trim(),A=parseInt(m);try{T(!0),g(null),isNaN(A)?await X(m.replace(/^@/,"")):await W(A),h(""),await O()}catch(R){console.error("Error adding member (ID path):",R),g("Не удалось добавить участника")}finally{T(!1)}},V=async()=>{if(!(!b.trim()||!r))try{T(!0),g(null),D(null);const m=await Ut(r.id,b.trim());m.status==="added"?(D({type:"success",message:`✅ @${b.trim()} добавлен в чат!`}),j(""),await O()):m.status==="invited"&&(D({type:"info",message:`📨 Приглашение отправлено @${b.trim()}. Пользователь будет добавлен автоматически при входе в приложение.`}),j("")),setTimeout(()=>D(null),5e3)}catch(m){console.error("Error adding member by username:",m),D({type:"warning",message:"Не удалось добавить участника. Проверьте username и попробуйте снова."})}finally{T(!1)}},G=async m=>{if(r)try{g(null),await n(r.id,m),await O()}catch(A){g("Не удалось удалить участника"),console.error("Error removing member:",A)}},z=m=>{i&&d({...i,photo_url:m}),l&&l(m),k(!1)};return r?o.jsxs(jt,{open:t,onClose:e,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{bgcolor:"rgba(35, 43, 59, 0.95)",color:"white"}},children:[o.jsxs(St,{sx:{display:"flex",alignItems:"center",gap:2},children:[o.jsxs(I,{sx:{position:"relative"},children:[o.jsx(at,{src:(i==null?void 0:i.photo_url)||r.photo_url||void 0,sx:{bgcolor:"#4a9eff",width:64,height:64},children:r.title?r.title[0].toUpperCase():o.jsx(Dr,{})}),o.jsx(_e,{onClick:()=>k(!0),sx:{position:"absolute",bottom:-4,right:-4,bgcolor:"#4a9eff",color:"white",width:24,height:24,"&:hover":{bgcolor:"#3d8bdb"}},children:o.jsx(Ja,{sx:{fontSize:14}})})]}),o.jsxs(I,{children:[o.jsx(E,{variant:"h6",children:r.title||"Безымянный чат"}),o.jsx(E,{variant:"caption",sx:{color:"#8b95a1"},children:r.chat_type==="private"?"Личный чат":"Групповой чат"})]})]}),o.jsxs(Tt,{children:[C&&o.jsx($e,{severity:"error",sx:{mb:2},children:C}),p?o.jsx(I,{sx:{display:"flex",justifyContent:"center",py:3},children:o.jsx(Se,{sx:{color:"#4a9eff"}})}):i?o.jsxs(o.Fragment,{children:[o.jsxs(I,{sx:{mb:3},children:[o.jsx(E,{variant:"subtitle1",sx:{mb:1,fontWeight:600},children:"Информация"}),o.jsxs(E,{variant:"body2",sx:{color:"#8b95a1",mb:1},children:["ID чата: ",i.id]}),o.jsxs(E,{variant:"body2",sx:{color:"#8b95a1",mb:1},children:["Создан: ",new Date(i.created_at).toLocaleDateString("ru-RU")]}),i.description&&o.jsxs(E,{variant:"body2",sx:{color:"#8b95a1"},children:["Описание: ",i.description]})]}),o.jsxs(I,{sx:{mb:3},children:[o.jsxs(E,{variant:"subtitle1",sx:{mb:2,fontWeight:600},children:["Участники (",((v=i.members)==null?void 0:v.length)||0,")"]}),i.members&&i.members.length>0?o.jsx(kr,{sx:{maxHeight:200,overflow:"auto"},children:i.members.map(m=>o.jsxs(Er,{sx:{bgcolor:"rgba(43, 52, 65, 0.5)",borderRadius:1,mb:1},children:[o.jsx(Kr,{children:o.jsx(at,{src:m.profile_photo_url||void 0,sx:{bgcolor:"#4a9eff"},children:m.first_name?m.first_name[0].toUpperCase():o.jsx(Dr,{})})}),o.jsx(Gr,{primary:o.jsxs(I,{sx:{display:"flex",alignItems:"center",gap:1},children:[o.jsxs(E,{children:[m.first_name," ",m.last_name]}),m.is_admin&&o.jsx($r,{icon:o.jsx(Ka,{}),label:"Админ",size:"small",sx:{bgcolor:"#4a9eff",color:"white",fontSize:"0.7rem"}})]}),secondary:o.jsx(E,{variant:"caption",sx:{color:"#8b95a1"},children:m.username?`@${m.username}`:`ID: ${m.telegram_id}`})}),c!==m.telegram_id&&o.jsx(Dt,{title:"Удалить участника",children:o.jsx(_e,{onClick:()=>G(m.telegram_id),sx:{color:"#f44336","&:hover":{bgcolor:"rgba(244, 67, 54, 0.1)"}},children:o.jsx(en,{})})})]},m.id))}):o.jsx(E,{variant:"body2",sx:{color:"#8b95a1",textAlign:"center",py:2},children:"Нет участников"})]}),o.jsxs(I,{children:[o.jsx(E,{variant:"subtitle1",sx:{mb:2,fontWeight:600},children:"Добавить участника"}),f&&o.jsx($e,{severity:f.type==="success"?"success":f.type==="info"?"info":"warning",sx:{mb:2,"& .MuiAlert-message":{color:"white"},bgcolor:f.type==="success"?"rgba(76, 175, 80, 0.2)":f.type==="info"?"rgba(33, 150, 243, 0.2)":"rgba(255, 152, 0, 0.2)",border:`1px solid ${f.type==="success"?"#4CAF50":f.type==="info"?"#2196F3":"#FF9800"}`},children:f.message}),o.jsxs(I,{sx:{display:"flex",gap:1,mb:2},children:[o.jsx(se,{variant:S==="username"?"contained":"outlined",onClick:()=>M("username"),size:"small",sx:{bgcolor:S==="username"?"#4a9eff":"transparent",color:S==="username"?"white":"#4a9eff",borderColor:"#4a9eff","&:hover":{bgcolor:S==="username"?"#3d8bdb":"rgba(74, 158, 255, 0.1)"}},children:"По @username"}),o.jsx(se,{variant:S==="id"?"contained":"outlined",onClick:()=>M("id"),size:"small",sx:{bgcolor:S==="id"?"#4a9eff":"transparent",color:S==="id"?"white":"#4a9eff",borderColor:"#4a9eff","&:hover":{bgcolor:S==="id"?"#3d8bdb":"rgba(74, 158, 255, 0.1)"}},children:"По ID (авто)"})]}),S==="username"?o.jsxs(I,{sx:{display:"flex",gap:1},children:[o.jsx(tt,{size:"small",placeholder:"@username пользователя",value:b,onChange:m=>j(m.target.value),helperText:"💡 Если пользователь уже использовал приложение - добавится сразу. Если нет - получит приглашение.",sx:{flex:1,"& .MuiOutlinedInput-root":{color:"white","& fieldset":{borderColor:"rgba(255, 255, 255, 0.3)"},"&:hover fieldset":{borderColor:"#4a9eff"},"&.Mui-focused fieldset":{borderColor:"#4a9eff"}},"& .MuiFormHelperText-root":{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem"}}}),o.jsx(se,{variant:"contained",onClick:V,disabled:!b.trim()||y,startIcon:y?o.jsx(Se,{size:16}):o.jsx(Pr,{}),sx:{bgcolor:"#4a9eff","&:hover":{bgcolor:"#3d8bdb"},minWidth:"120px"},children:y?"Поиск...":"Добавить"})]}):o.jsxs(I,{sx:{display:"flex",gap:1},children:[o.jsx(tt,{size:"small",placeholder:"ID или @username",value:w,onChange:m=>h(m.target.value),helperText:"💡 Можете ввести как Telegram ID (числа), так и @username - система определит автоматически",sx:{flex:1,"& .MuiOutlinedInput-root":{color:"white","& fieldset":{borderColor:"rgba(255, 255, 255, 0.3)"},"&:hover fieldset":{borderColor:"#4a9eff"},"&.Mui-focused fieldset":{borderColor:"#4a9eff"}},"& .MuiFormHelperText-root":{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem"}}}),o.jsx(se,{variant:"contained",onClick:$,disabled:!w.trim()||y,startIcon:y?o.jsx(Se,{size:16}):o.jsx(Pr,{}),sx:{bgcolor:"#4a9eff","&:hover":{bgcolor:"#3d8bdb"},minWidth:"120px"},children:y?"Поиск...":"Добавить"})]})]})]}):o.jsx(E,{variant:"body2",sx:{textAlign:"center",py:3,color:"#8b95a1"},children:"Не удалось загрузить информацию о чате"})]}),o.jsx(Jt,{children:o.jsx(se,{onClick:e,sx:{color:"#8b95a1"},children:"Закрыть"})}),o.jsxs(jt,{open:_,onClose:()=>k(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{bgcolor:"rgba(35, 43, 59, 0.95)",color:"white"}},children:[o.jsx(St,{children:"Изменить фото чата"}),o.jsxs(Tt,{children:[o.jsx(co,{currentPhotoUrl:(i==null?void 0:i.photo_url)||r.photo_url||void 0,onPhotoChange:m=>{m?z(m):(i&&d({...i,photo_url:void 0}),l&&l(""))}}),o.jsx(I,{sx:{display:"flex",gap:1,mt:2,justifyContent:"flex-end"},children:o.jsx(se,{onClick:()=>k(!1),sx:{color:"#8b95a1"},children:"Отмена"})})]})]})]}):null},yn=()=>{const t=Ft(),e=Bo(t.breakpoints.down("md")),[r,s]=u.useState(""),[a,n]=u.useState(!1),[c,l]=u.useState(""),[i,d]=u.useState(""),[p,x]=u.useState(null),[C,g]=u.useState(null),[w,h]=u.useState(!1),[b,j]=u.useState(!1),[S,M]=u.useState(!1),y=u.useRef(null),{chats:T,currentChat:f,messages:D,currentUser:_,loading:k,messagesLoading:O,error:W,isAuthError:X,hasNewMessages:$,markMessagesAsViewed:V,sendNewMessage:G,createNewChat:z,selectChat:v,loadChatInfo:m,addMemberToChat:A,removeMemberFromChat:R,clearCurrentChat:U}=cn(),N=()=>{var P;(P=y.current)==null||P.scrollIntoView({behavior:"smooth"})},F=()=>{U()};u.useEffect(N,[D]),u.useEffect(()=>{if($&&D.length>0){const P=setTimeout(()=>{V()},2e3);return()=>clearTimeout(P)}},[$,D.length,V]);const H=async()=>{if(!(!r.trim()||!f))try{V(),await G(f.id,r.trim()),s(""),N()}catch(P){console.error("Error sending message:",P)}},Y=P=>{P.key==="Enter"&&!P.shiftKey&&(P.preventDefault(),H())},Z=async()=>{var P,q;try{h(!0),g(null);const B=[],K=[];i.trim()&&i.split(",").map(oe=>oe.trim()).filter(oe=>oe.length>0).forEach(oe=>{const ye=parseInt(oe);!isNaN(ye)&&ye>0?B.push(ye):K.push(oe.replace(/^@/,""))}),await z(c.trim(),B,K,p||void 0);let xe=`✅ Чат "${c.trim()}" создан успешно!`;B.length>0&&(xe+=` Добавлено ${B.length} участников.`),K.length>0&&(xe+=` Отправлено ${K.length} приглашений по username.`),g({type:"success",message:xe}),setTimeout(()=>{g(null),n(!1)},2e3),l(""),d(""),x(null)}catch(B){console.error("Error creating chat:",B);let K="Не удалось создать чат. Попробуйте еще раз.";B!=null&&B.isTimeoutError?K="⏱️ Сервер запускается, это может занять до минуты. Попробуйте еще раз.":B!=null&&B.isServiceError?K="🔧 Сервер временно недоступен. Попробуйте через несколько минут.":B!=null&&B.isAuthError?K="🔐 Ошибка авторизации. Откройте приложение из Telegram.":(B==null?void 0:B.code)==="ECONNABORTED"?K="⏱️ Превышено время ожидания. Сервер может запускаться - попробуйте еще раз.":((P=B==null?void 0:B.response)==null?void 0:P.status)===503?K="🔧 Сервер временно недоступен. Попробуйте через несколько минут.":((q=B==null?void 0:B.response)==null?void 0:q.status)===500&&(K="⚠️ Ошибка на сервере. Попробуйте еще раз или обратитесь в поддержку."),g({type:"warning",message:K})}finally{h(!1)}},ce=P=>new Date(P).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"}),ee=P=>{const q=new Date(P),B=new Date,K=new Date(B);return K.setDate(K.getDate()-1),q.toDateString()===B.toDateString()?"Сегодня":q.toDateString()===K.toDateString()?"Вчера":q.toLocaleDateString("ru-RU",{day:"numeric",month:"short"})},be=P=>{const q=P.sender;return q.username?`@${q.username}`:`${q.first_name}${q.last_name?` ${q.last_name}`:""}`},me=P=>_&&P.sender_id===_.id;return k?o.jsx(I,{sx:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"rgba(35, 43, 59, 0.95)"},children:o.jsx(Se,{sx:{color:"#4a9eff"}})}):X?o.jsxs(I,{sx:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",bgcolor:"rgba(35, 43, 59, 0.95)",p:3},children:[o.jsxs($e,{severity:"error",sx:{mb:3,maxWidth:"600px"},children:[o.jsx(E,{variant:"h6",sx:{mb:2},children:"🚫 Ошибка авторизации"}),o.jsx(E,{variant:"body1",sx:{mb:2,fontWeight:"bold"},children:"Проблема с авторизацией на сервере"}),o.jsx(E,{variant:"body2",sx:{mb:2},children:"Сервер отклоняет авторизацию. Возможные причины:"}),o.jsxs(E,{variant:"body2",component:"ul",sx:{pl:2,mb:2},children:[o.jsx("li",{children:"На сервере не настроен токен Telegram бота"}),o.jsx("li",{children:"Неправильный или истёкший токен бота"}),o.jsx("li",{children:"Проблема с подписью данных авторизации"}),o.jsx("li",{children:"Приложение запущено не из Telegram"})]}),o.jsx(E,{variant:"body2",sx:{mb:2},children:o.jsx("strong",{children:"Что делать:"})}),o.jsxs(E,{variant:"body2",component:"ul",sx:{pl:2,mb:2},children:[o.jsx("li",{children:'Нажмите "Диагностика" для подробной проверки'}),o.jsx("li",{children:"Убедитесь, что приложение открыто из Telegram"}),o.jsx("li",{children:"Если вы администратор - проверьте настройки сервера"}),o.jsx("li",{children:"Если проблема повторяется - обратитесь в поддержку"})]})]}),o.jsxs(I,{sx:{display:"flex",gap:2,flexWrap:"wrap",justifyContent:"center"},children:[o.jsx(se,{variant:"contained",onClick:()=>j(!0),sx:{bgcolor:"#f44336","&:hover":{bgcolor:"#d32f2f"}},children:"🔬 Диагностика проблемы"}),o.jsx(se,{variant:"outlined",onClick:()=>{var P;(P=window.Telegram)!=null&&P.WebApp?window.Telegram.WebApp.close():window.history.back()},sx:{borderColor:"#4a9eff",color:"#4a9eff","&:hover":{borderColor:"#3d8bdb",color:"#3d8bdb"}},children:"⬅️ Назад"})]})]}):o.jsxs(I,{sx:{height:"100vh",display:"flex",bgcolor:"rgba(35, 43, 59, 0.95)",color:"white",overflow:"hidden"},children:[o.jsxs(I,{sx:{width:e?"100%":"350px",display:e&&f?"none":"flex",flexDirection:"column",borderRight:"1px solid rgba(43, 52, 65, 1)",bgcolor:"rgba(35, 43, 59, 0.95)"},children:[o.jsxs(I,{sx:{p:e?1:2,borderBottom:"1px solid rgba(43, 52, 65, 1)",display:"flex",alignItems:"center",justifyContent:"space-between",minHeight:e?"52px":"auto"},children:[o.jsx(I,{sx:{display:"flex",alignItems:"center",gap:1},children:o.jsx(E,{variant:e?"body1":"h6",sx:{fontWeight:600,fontSize:e?"1rem":"inherit"},children:"Чаты"})}),o.jsx(I,{sx:{display:"flex",gap:e?.5:1},children:o.jsx(Dt,{title:"Создать новый чат",children:o.jsx(_e,{onClick:()=>n(!0),sx:{bgcolor:"#4a9eff",color:"white",p:e?.75:1,"&:hover":{bgcolor:"#3d8bdb"}},children:o.jsx(Ya,{fontSize:e?"small":"medium"})})})})]}),o.jsx(kr,{sx:{flex:1,overflow:"auto",p:0},children:T.map(P=>o.jsx(cr.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:o.jsx(Er,{disablePadding:!0,sx:{borderBottom:"1px solid rgba(43, 52, 65, 0.5)"},children:o.jsxs(Lo,{selected:(f==null?void 0:f.id)===P.id,onClick:()=>v(P),sx:{py:e?1.25:1.5,px:e?1:2,bgcolor:(f==null?void 0:f.id)===P.id?"rgba(74, 158, 255, 0.1)":"transparent","&:hover":{bgcolor:(f==null?void 0:f.id)===P.id?"rgba(74, 158, 255, 0.15)":"rgba(255, 255, 255, 0.05)"},minHeight:e?64:"auto"},children:[o.jsx(Kr,{children:o.jsx(ma,{badgeContent:P.unread_count,color:"error",invisible:P.unread_count===0,children:o.jsx(at,{src:P.photo_url||void 0,sx:{bgcolor:"#4a9eff",width:e?44:45,height:e?44:45},children:P.title?P.title[0].toUpperCase():o.jsx(Et,{})})})}),o.jsx(Gr,{primary:o.jsx(E,{variant:"body1",sx:{fontWeight:P.unread_count>0?600:400,color:"white",fontSize:e?"0.9rem":"inherit"},children:P.title||"Безымянный чат"}),secondary:o.jsxs(I,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsx(E,{variant:"caption",sx:{color:"#8b95a1",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:e?"120px":"150px",fontSize:e?"0.75rem":"inherit"},children:P.last_message||"Нет сообщений"}),P.last_message_time&&o.jsx(E,{variant:"caption",sx:{color:"#8b95a1",fontSize:e?"0.65rem":"0.7rem",ml:1},children:ee(P.last_message_time)})]})})]})})},P.id))})]}),o.jsx(I,{sx:{flex:1,display:"flex",flexDirection:"column",position:"relative"},children:f?o.jsxs(o.Fragment,{children:[o.jsxs(I,{sx:{position:"sticky",top:0,zIndex:10,p:e?.75:2,borderBottom:"1px solid rgba(43, 52, 65, 1)",bgcolor:"rgba(35, 43, 59, 0.95)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"space-between",minHeight:e?"56px":"auto"},children:[o.jsxs(I,{sx:{display:"flex",alignItems:"center",flex:1},children:[e&&o.jsx(_e,{onClick:F,sx:{color:"#4a9eff",mr:.5,p:.5,"&:hover":{bgcolor:"rgba(74, 158, 255, 0.1)"}},children:o.jsx(Ga,{})}),o.jsx(at,{src:f.photo_url||void 0,sx:{bgcolor:"#4a9eff",width:e?32:40,height:e?32:40,mr:e?1:2},children:f.title?f.title[0].toUpperCase():o.jsx(Et,{})}),o.jsxs(I,{sx:{flex:1,minWidth:0},children:[o.jsxs(E,{variant:e?"body2":"h6",sx:{fontWeight:600,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:e?.5:1,fontSize:e?"0.875rem":"inherit"},children:[f.title||"Безымянный чат",$&&o.jsx(I,{sx:{width:e?6:8,height:e?6:8,borderRadius:"50%",bgcolor:"#4CAF50",animation:"pulse 2s infinite","@keyframes pulse":{"0%":{transform:"scale(1)",opacity:1},"50%":{transform:"scale(1.2)",opacity:.7},"100%":{transform:"scale(1)",opacity:1}}}})]}),o.jsxs(E,{variant:"caption",sx:{color:"#8b95a1",fontSize:e?"0.65rem":"0.75rem",lineHeight:e?1.2:"inherit"},children:[f.chat_type==="private"?"Личный чат":"Групповой чат",$&&(e?" • Новые":" • Новые сообщения")]})]})]}),o.jsx(I,{sx:{display:"flex",gap:e?.25:1},children:o.jsx(Dt,{title:"Информация о чате",children:o.jsx(_e,{onClick:()=>M(!0),sx:{color:"#4a9eff",p:e?.5:1.5,"&:hover":{bgcolor:"rgba(74, 158, 255, 0.1)"}},children:o.jsx(Qa,{fontSize:e?"small":"medium"})})})})]}),o.jsxs(I,{sx:{flex:1,overflow:"auto",p:e?.5:1.5,bgcolor:"rgba(35, 43, 59, 0.95)",backgroundImage:`url(${pr})`,backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"local",position:"relative","&::-webkit-scrollbar":{width:e?"3px":"6px"},"&::-webkit-scrollbar-track":{background:"transparent"},"&::-webkit-scrollbar-thumb":{background:"rgba(255, 255, 255, 0.2)",borderRadius:e?"1.5px":"3px"},"&::-webkit-scrollbar-thumb:hover":{background:"rgba(255, 255, 255, 0.3)"}},children:[W&&o.jsx($e,{severity:"error",sx:{mb:e?1:2},children:W}),O?o.jsx(I,{sx:{display:"flex",justifyContent:"center",py:e?2:4},children:o.jsx(Se,{sx:{color:"#4a9eff"}})}):o.jsx(Xa,{children:D.map(P=>o.jsx(cr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},style:{display:"flex",justifyContent:me(P)?"flex-end":"flex-start",marginBottom:e?"8px":"12px"},children:o.jsxs(I,{sx:{maxWidth:e?"85%":"70%",px:e?1.25:2,py:e?.75:1.2,borderRadius:me(P)?"18px 18px 4px 18px":"18px 18px 18px 4px",bgcolor:me(P)?"#4a9eff":"rgba(43, 52, 65, 0.9)",color:"white",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",wordBreak:"break-word"},children:[!me(P)&&o.jsx(E,{variant:"caption",sx:{color:"#40C4FF",fontWeight:600,display:"block",mb:e?.25:.5,fontSize:e?"0.7rem":"0.75rem"},children:be(P)}),o.jsx(E,{variant:"body1",sx:{mb:e?.25:.5,fontSize:e?"0.875rem":"0.95rem",lineHeight:e?1.3:1.4},children:P.text}),o.jsx(E,{variant:"caption",sx:{opacity:.7,fontSize:e?"0.6rem":"0.7rem",display:"block",textAlign:"right",mt:e?.125:.25,color:me(P)?"rgba(255,255,255,0.8)":"#8b95a1"},children:ce(P.created_at)})]})},P.id))}),o.jsx("div",{ref:y})]}),o.jsxs(I,{sx:{p:e?1:2,bgcolor:"rgba(35, 43, 59, 0.95)",display:"flex",gap:e?.75:1.5,alignItems:"flex-end",borderTop:"1px solid rgba(43, 52, 65, 1)",pb:e?"max(1rem, env(safe-area-inset-bottom))":2},children:[o.jsx(tt,{fullWidth:!0,multiline:!0,maxRows:e?2:4,value:r,onChange:P=>s(P.target.value),onKeyPress:Y,placeholder:"Напишите сообщение...",variant:"outlined",size:"small",sx:{"& .MuiOutlinedInput-root":{borderRadius:e?"16px":"20px",bgcolor:"rgba(35, 46, 60, 1)",border:"none",fontSize:e?"0.875rem":"0.95rem",color:"white","& fieldset":{border:"1px solid rgba(60, 72, 84, 1)"},"&:hover fieldset":{border:"1px solid #4a9eff"},"&.Mui-focused fieldset":{border:"2px solid #4a9eff"},"& .MuiInputBase-input":{padding:e?"8px 12px":"12px 16px",color:"white","&::placeholder":{color:"rgba(255, 255, 255, 0.5)",opacity:1}}}}}),o.jsx(_e,{onClick:H,disabled:!r.trim(),size:"medium",sx:{bgcolor:"#4a9eff",color:"white",width:e?36:44,height:e?36:44,minWidth:e?36:44,minHeight:e?36:44,"&:hover":{bgcolor:"#3d8bdb",transform:"scale(1.05)"},"&:disabled":{bgcolor:"rgba(60, 72, 84, 1)",color:"#8b95a1"},transition:"all 0.2s ease"},children:o.jsx(Uo,{sx:{fontSize:e?"1rem":"1.2rem"}})})]})]}):o.jsx(I,{sx:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",bgcolor:"rgba(35, 43, 59, 0.95)",backgroundImage:`url(${pr})`,backgroundSize:"cover",backgroundPosition:"center",backgroundBlendMode:"overlay"},children:o.jsxs(I,{sx:{textAlign:"center"},children:[o.jsx(Et,{sx:{fontSize:80,color:"#4a9eff",mb:2}}),o.jsx(E,{variant:"h5",sx:{mb:1,color:"white"},children:"Выберите чат"}),o.jsx(E,{variant:"body1",sx:{color:"#8b95a1"},children:"Выберите чат из списка или создайте новый"})]})})}),o.jsxs(jt,{open:a,onClose:()=>{n(!1),g(null),x(null)},maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{bgcolor:"rgba(35, 43, 59, 0.95)",color:"white"}},children:[o.jsx(St,{children:"Создать новый чат"}),o.jsxs(Tt,{children:[C&&o.jsx($e,{severity:C.type==="success"?"success":"warning",sx:{mb:2,"& .MuiAlert-message":{color:"white"},bgcolor:C.type==="success"?"rgba(76, 175, 80, 0.2)":"rgba(255, 152, 0, 0.2)",border:`1px solid ${C.type==="success"?"#4CAF50":"#FF9800"}`},children:C.message}),o.jsx(tt,{autoFocus:!0,margin:"dense",label:"Название чата",fullWidth:!0,variant:"outlined",value:c,onChange:P=>l(P.target.value),sx:{mb:2,"& .MuiOutlinedInput-root":{color:"white","& fieldset":{borderColor:"rgba(255, 255, 255, 0.3)"},"&:hover fieldset":{borderColor:"#4a9eff"},"&.Mui-focused fieldset":{borderColor:"#4a9eff"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.7)","&.Mui-focused":{color:"#4a9eff"}}}}),o.jsx(tt,{margin:"dense",label:"Участники (ID или @username, через запятую)",fullWidth:!0,variant:"outlined",placeholder:"Например: 123456789, @username, 987654321, @user2",value:i,onChange:P=>d(P.target.value),helperText:"💡 Поддерживаются как Telegram ID (числа), так и @username. Если пользователь не найден по username - получит приглашение.",sx:{mb:1,"& .MuiOutlinedInput-root":{color:"white","& fieldset":{borderColor:"rgba(255, 255, 255, 0.3)"},"&:hover fieldset":{borderColor:"#4a9eff"},"&.Mui-focused fieldset":{borderColor:"#4a9eff"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.7)","&.Mui-focused":{color:"#4a9eff"}},"& .MuiFormHelperText-root":{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem"}}}),o.jsxs(I,{sx:{mt:3,mb:2},children:[o.jsx(E,{variant:"subtitle2",sx:{mb:2,color:"rgba(255, 255, 255, 0.8)"},children:"Фото чата (необязательно)"}),o.jsx(co,{currentPhotoUrl:p||void 0,onPhotoChange:x,disabled:w,size:100})]})]}),o.jsxs(Jt,{children:[o.jsx(se,{onClick:()=>{n(!1),g(null)},sx:{color:"#8b95a1"},children:"Отмена"}),o.jsx(se,{onClick:Z,disabled:!c.trim()||w,startIcon:w?o.jsx(Se,{size:16}):void 0,sx:{bgcolor:"#4a9eff",color:"white","&:hover":{bgcolor:"#3d8bdb"},"&:disabled":{bgcolor:"rgba(60, 72, 84, 1)",color:"#8b95a1"}},children:w?"Создаём...":"Создать"})]})]}),o.jsx(pn,{open:b,onClose:()=>j(!1)}),o.jsx(dn,{open:S,onClose:()=>M(!1),currentChat:f,loadChatInfo:m,addMemberToChat:A,removeMemberFromChat:R,currentUserId:_==null?void 0:_.telegram_id,onChatPhotoUpdate:P=>{console.log("Chat photo updated:",P)}})]})};export{yn as default};
