import{r as u,d as be,g as xe,j as n,t as St,Q as Qt,i as ye,a2 as Co,e as we,s as Y,v as Z,f as ge,h as V,l as ze,o as mr,a as $t,y as jo,T as I,a4 as To,a5 as eo,a0 as ut,U as to,a6 as gr,n as Po,a7 as oo,a8 as hr,a9 as vr,aa as Ao,ab as br,ac as xr,ad as yr,ae as wr,q as Pe,af as xt,B,ag as yt,a1 as Oo,ah as Do,b as Cr,m as ro,ai as jr,c as no}from"./index-O7IMSiq9.js";import{a as Tr,S as Pr}from"./index-BMI2U2Lz.js";import{o as ao,P as Ar,u as Or,F as so,M as Dr,B as Sr,a as Rr,g as Mr,G as kr,T as tt}from"./TextField-B9ZA_KkD.js";import{u as So,C as _e}from"./CircularProgress-D0nS9D6p.js";import{C as Ro}from"./Chip-BK3IFvvU.js";import{A as We}from"./Alert-pqRUSe1r.js";import{B as oe}from"./Button-CrH_-SRz.js";import{I as et}from"./IconButton-DeGJEQB9.js";const Mo=t=>{const e=u.useRef({});return u.useEffect(()=>{e.current=t}),e.current};var Q="top",ie="bottom",le="right",ee="left",_t="auto",st=[Q,ie,le,ee],Be="start",nt="end",Ir="clippingParents",ko="viewport",Ze="popper",Er="reference",io=st.reduce(function(t,e){return t.concat([e+"-"+Be,e+"-"+nt])},[]),Io=[].concat(st,[_t]).reduce(function(t,e){return t.concat([e,e+"-"+Be,e+"-"+nt])},[]),$r="beforeRead",_r="read",Wr="afterRead",Br="beforeMain",Lr="main",Ur="afterMain",Nr="beforeWrite",zr="write",Fr="afterWrite",Hr=[$r,_r,Wr,Br,Lr,Ur,Nr,zr,Fr];function he(t){return t?(t.nodeName||"").toLowerCase():null}function re(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function ke(t){var e=re(t).Element;return t instanceof e||t instanceof Element}function se(t){var e=re(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Wt(t){if(typeof ShadowRoot>"u")return!1;var e=re(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function Vr(t){var e=t.state;Object.keys(e.elements).forEach(function(o){var r=e.styles[o]||{},a=e.attributes[o]||{},s=e.elements[o];!se(s)||!he(s)||(Object.assign(s.style,r),Object.keys(a).forEach(function(l){var i=a[l];i===!1?s.removeAttribute(l):s.setAttribute(l,i===!0?"":i)}))})}function qr(t){var e=t.state,o={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,o.popper),e.styles=o,e.elements.arrow&&Object.assign(e.elements.arrow.style,o.arrow),function(){Object.keys(e.elements).forEach(function(r){var a=e.elements[r],s=e.attributes[r]||{},l=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:o[r]),i=l.reduce(function(c,d){return c[d]="",c},{});!se(a)||!he(a)||(Object.assign(a.style,i),Object.keys(s).forEach(function(c){a.removeAttribute(c)}))})}}const Xr={name:"applyStyles",enabled:!0,phase:"write",fn:Vr,effect:qr,requires:["computeStyles"]};function me(t){return t.split("-")[0]}var Me=Math.max,wt=Math.min,Le=Math.round;function Rt(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Eo(){return!/^((?!chrome|android).)*safari/i.test(Rt())}function Ue(t,e,o){e===void 0&&(e=!1),o===void 0&&(o=!1);var r=t.getBoundingClientRect(),a=1,s=1;e&&se(t)&&(a=t.offsetWidth>0&&Le(r.width)/t.offsetWidth||1,s=t.offsetHeight>0&&Le(r.height)/t.offsetHeight||1);var l=ke(t)?re(t):window,i=l.visualViewport,c=!Eo()&&o,d=(r.left+(c&&i?i.offsetLeft:0))/a,p=(r.top+(c&&i?i.offsetTop:0))/s,v=r.width/a,j=r.height/s;return{width:v,height:j,top:p,right:d+v,bottom:p+j,left:d,x:d,y:p}}function Bt(t){var e=Ue(t),o=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-o)<=1&&(o=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:o,height:r}}function $o(t,e){var o=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(o&&Wt(o)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function ve(t){return re(t).getComputedStyle(t)}function Yr(t){return["table","td","th"].indexOf(he(t))>=0}function Ae(t){return((ke(t)?t.ownerDocument:t.document)||window.document).documentElement}function Ct(t){return he(t)==="html"?t:t.assignedSlot||t.parentNode||(Wt(t)?t.host:null)||Ae(t)}function lo(t){return!se(t)||ve(t).position==="fixed"?null:t.offsetParent}function Kr(t){var e=/firefox/i.test(Rt()),o=/Trident/i.test(Rt());if(o&&se(t)){var r=ve(t);if(r.position==="fixed")return null}var a=Ct(t);for(Wt(a)&&(a=a.host);se(a)&&["html","body"].indexOf(he(a))<0;){var s=ve(a);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return a;a=a.parentNode}return null}function it(t){for(var e=re(t),o=lo(t);o&&Yr(o)&&ve(o).position==="static";)o=lo(o);return o&&(he(o)==="html"||he(o)==="body"&&ve(o).position==="static")?e:o||Kr(t)||e}function Lt(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function ot(t,e,o){return Me(t,wt(e,o))}function Gr(t,e,o){var r=ot(t,e,o);return r>o?o:r}function _o(){return{top:0,right:0,bottom:0,left:0}}function Wo(t){return Object.assign({},_o(),t)}function Bo(t,e){return e.reduce(function(o,r){return o[r]=t,o},{})}var Jr=function(e,o){return e=typeof e=="function"?e(Object.assign({},o.rects,{placement:o.placement})):e,Wo(typeof e!="number"?e:Bo(e,st))};function Zr(t){var e,o=t.state,r=t.name,a=t.options,s=o.elements.arrow,l=o.modifiersData.popperOffsets,i=me(o.placement),c=Lt(i),d=[ee,le].indexOf(i)>=0,p=d?"height":"width";if(!(!s||!l)){var v=Jr(a.padding,o),j=Bt(s),f=c==="y"?Q:ee,T=c==="y"?ie:le,g=o.rects.reference[p]+o.rects.reference[c]-l[c]-o.rects.popper[p],m=l[c]-o.rects.reference[c],h=it(s),w=h?c==="y"?h.clientHeight||0:h.clientWidth||0:0,O=g/2-m/2,C=v[f],P=w-j[p]-v[T],y=w/2-j[p]/2+O,S=ot(C,y,P),k=c;o.modifiersData[r]=(e={},e[k]=S,e.centerOffset=S-y,e)}}function Qr(t){var e=t.state,o=t.options,r=o.element,a=r===void 0?"[data-popper-arrow]":r;a!=null&&(typeof a=="string"&&(a=e.elements.popper.querySelector(a),!a)||$o(e.elements.popper,a)&&(e.elements.arrow=a))}const en={name:"arrow",enabled:!0,phase:"main",fn:Zr,effect:Qr,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ne(t){return t.split("-")[1]}var tn={top:"auto",right:"auto",bottom:"auto",left:"auto"};function on(t,e){var o=t.x,r=t.y,a=e.devicePixelRatio||1;return{x:Le(o*a)/a||0,y:Le(r*a)/a||0}}function co(t){var e,o=t.popper,r=t.popperRect,a=t.placement,s=t.variation,l=t.offsets,i=t.position,c=t.gpuAcceleration,d=t.adaptive,p=t.roundOffsets,v=t.isFixed,j=l.x,f=j===void 0?0:j,T=l.y,g=T===void 0?0:T,m=typeof p=="function"?p({x:f,y:g}):{x:f,y:g};f=m.x,g=m.y;var h=l.hasOwnProperty("x"),w=l.hasOwnProperty("y"),O=ee,C=Q,P=window;if(d){var y=it(o),S="clientHeight",k="clientWidth";if(y===re(o)&&(y=Ae(o),ve(y).position!=="static"&&i==="absolute"&&(S="scrollHeight",k="scrollWidth")),y=y,a===Q||(a===ee||a===le)&&s===nt){C=ie;var E=v&&y===P&&P.visualViewport?P.visualViewport.height:y[S];g-=E-r.height,g*=c?1:-1}if(a===ee||(a===Q||a===ie)&&s===nt){O=le;var M=v&&y===P&&P.visualViewport?P.visualViewport.width:y[k];f-=M-r.width,f*=c?1:-1}}var D=Object.assign({position:i},d&&tn),R=p===!0?on({x:f,y:g},re(o)):{x:f,y:g};if(f=R.x,g=R.y,c){var b;return Object.assign({},D,(b={},b[C]=w?"0":"",b[O]=h?"0":"",b.transform=(P.devicePixelRatio||1)<=1?"translate("+f+"px, "+g+"px)":"translate3d("+f+"px, "+g+"px, 0)",b))}return Object.assign({},D,(e={},e[C]=w?g+"px":"",e[O]=h?f+"px":"",e.transform="",e))}function rn(t){var e=t.state,o=t.options,r=o.gpuAcceleration,a=r===void 0?!0:r,s=o.adaptive,l=s===void 0?!0:s,i=o.roundOffsets,c=i===void 0?!0:i,d={placement:me(e.placement),variation:Ne(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:a,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,co(Object.assign({},d,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:l,roundOffsets:c})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,co(Object.assign({},d,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const nn={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:rn,data:{}};var ft={passive:!0};function an(t){var e=t.state,o=t.instance,r=t.options,a=r.scroll,s=a===void 0?!0:a,l=r.resize,i=l===void 0?!0:l,c=re(e.elements.popper),d=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&d.forEach(function(p){p.addEventListener("scroll",o.update,ft)}),i&&c.addEventListener("resize",o.update,ft),function(){s&&d.forEach(function(p){p.removeEventListener("scroll",o.update,ft)}),i&&c.removeEventListener("resize",o.update,ft)}}const sn={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:an,data:{}};var ln={left:"right",right:"left",bottom:"top",top:"bottom"};function bt(t){return t.replace(/left|right|bottom|top/g,function(e){return ln[e]})}var cn={start:"end",end:"start"};function po(t){return t.replace(/start|end/g,function(e){return cn[e]})}function Ut(t){var e=re(t),o=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:o,scrollTop:r}}function Nt(t){return Ue(Ae(t)).left+Ut(t).scrollLeft}function pn(t,e){var o=re(t),r=Ae(t),a=o.visualViewport,s=r.clientWidth,l=r.clientHeight,i=0,c=0;if(a){s=a.width,l=a.height;var d=Eo();(d||!d&&e==="fixed")&&(i=a.offsetLeft,c=a.offsetTop)}return{width:s,height:l,x:i+Nt(t),y:c}}function dn(t){var e,o=Ae(t),r=Ut(t),a=(e=t.ownerDocument)==null?void 0:e.body,s=Me(o.scrollWidth,o.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),l=Me(o.scrollHeight,o.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),i=-r.scrollLeft+Nt(t),c=-r.scrollTop;return ve(a||o).direction==="rtl"&&(i+=Me(o.clientWidth,a?a.clientWidth:0)-s),{width:s,height:l,x:i,y:c}}function zt(t){var e=ve(t),o=e.overflow,r=e.overflowX,a=e.overflowY;return/auto|scroll|overlay|hidden/.test(o+a+r)}function Lo(t){return["html","body","#document"].indexOf(he(t))>=0?t.ownerDocument.body:se(t)&&zt(t)?t:Lo(Ct(t))}function rt(t,e){var o;e===void 0&&(e=[]);var r=Lo(t),a=r===((o=t.ownerDocument)==null?void 0:o.body),s=re(r),l=a?[s].concat(s.visualViewport||[],zt(r)?r:[]):r,i=e.concat(l);return a?i:i.concat(rt(Ct(l)))}function Mt(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function un(t,e){var o=Ue(t,!1,e==="fixed");return o.top=o.top+t.clientTop,o.left=o.left+t.clientLeft,o.bottom=o.top+t.clientHeight,o.right=o.left+t.clientWidth,o.width=t.clientWidth,o.height=t.clientHeight,o.x=o.left,o.y=o.top,o}function uo(t,e,o){return e===ko?Mt(pn(t,o)):ke(e)?un(e,o):Mt(dn(Ae(t)))}function fn(t){var e=rt(Ct(t)),o=["absolute","fixed"].indexOf(ve(t).position)>=0,r=o&&se(t)?it(t):t;return ke(r)?e.filter(function(a){return ke(a)&&$o(a,r)&&he(a)!=="body"}):[]}function mn(t,e,o,r){var a=e==="clippingParents"?fn(t):[].concat(e),s=[].concat(a,[o]),l=s[0],i=s.reduce(function(c,d){var p=uo(t,d,r);return c.top=Me(p.top,c.top),c.right=wt(p.right,c.right),c.bottom=wt(p.bottom,c.bottom),c.left=Me(p.left,c.left),c},uo(t,l,r));return i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}function Uo(t){var e=t.reference,o=t.element,r=t.placement,a=r?me(r):null,s=r?Ne(r):null,l=e.x+e.width/2-o.width/2,i=e.y+e.height/2-o.height/2,c;switch(a){case Q:c={x:l,y:e.y-o.height};break;case ie:c={x:l,y:e.y+e.height};break;case le:c={x:e.x+e.width,y:i};break;case ee:c={x:e.x-o.width,y:i};break;default:c={x:e.x,y:e.y}}var d=a?Lt(a):null;if(d!=null){var p=d==="y"?"height":"width";switch(s){case Be:c[d]=c[d]-(e[p]/2-o[p]/2);break;case nt:c[d]=c[d]+(e[p]/2-o[p]/2);break}}return c}function at(t,e){e===void 0&&(e={});var o=e,r=o.placement,a=r===void 0?t.placement:r,s=o.strategy,l=s===void 0?t.strategy:s,i=o.boundary,c=i===void 0?Ir:i,d=o.rootBoundary,p=d===void 0?ko:d,v=o.elementContext,j=v===void 0?Ze:v,f=o.altBoundary,T=f===void 0?!1:f,g=o.padding,m=g===void 0?0:g,h=Wo(typeof m!="number"?m:Bo(m,st)),w=j===Ze?Er:Ze,O=t.rects.popper,C=t.elements[T?w:j],P=mn(ke(C)?C:C.contextElement||Ae(t.elements.popper),c,p,l),y=Ue(t.elements.reference),S=Uo({reference:y,element:O,placement:a}),k=Mt(Object.assign({},O,S)),E=j===Ze?k:y,M={top:P.top-E.top+h.top,bottom:E.bottom-P.bottom+h.bottom,left:P.left-E.left+h.left,right:E.right-P.right+h.right},D=t.modifiersData.offset;if(j===Ze&&D){var R=D[a];Object.keys(M).forEach(function(b){var x=[le,ie].indexOf(b)>=0?1:-1,W=[Q,ie].indexOf(b)>=0?"y":"x";M[b]+=R[W]*x})}return M}function gn(t,e){e===void 0&&(e={});var o=e,r=o.placement,a=o.boundary,s=o.rootBoundary,l=o.padding,i=o.flipVariations,c=o.allowedAutoPlacements,d=c===void 0?Io:c,p=Ne(r),v=p?i?io:io.filter(function(T){return Ne(T)===p}):st,j=v.filter(function(T){return d.indexOf(T)>=0});j.length===0&&(j=v);var f=j.reduce(function(T,g){return T[g]=at(t,{placement:g,boundary:a,rootBoundary:s,padding:l})[me(g)],T},{});return Object.keys(f).sort(function(T,g){return f[T]-f[g]})}function hn(t){if(me(t)===_t)return[];var e=bt(t);return[po(t),e,po(e)]}function vn(t){var e=t.state,o=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var a=o.mainAxis,s=a===void 0?!0:a,l=o.altAxis,i=l===void 0?!0:l,c=o.fallbackPlacements,d=o.padding,p=o.boundary,v=o.rootBoundary,j=o.altBoundary,f=o.flipVariations,T=f===void 0?!0:f,g=o.allowedAutoPlacements,m=e.options.placement,h=me(m),w=h===m,O=c||(w||!T?[bt(m)]:hn(m)),C=[m].concat(O).reduce(function(U,z){return U.concat(me(z)===_t?gn(e,{placement:z,boundary:p,rootBoundary:v,padding:d,flipVariations:T,allowedAutoPlacements:g}):z)},[]),P=e.rects.reference,y=e.rects.popper,S=new Map,k=!0,E=C[0],M=0;M<C.length;M++){var D=C[M],R=me(D),b=Ne(D)===Be,x=[Q,ie].indexOf(R)>=0,W=x?"width":"height",_=at(e,{placement:D,boundary:p,rootBoundary:v,altBoundary:j,padding:d}),L=x?b?le:ee:b?ie:Q;P[W]>y[W]&&(L=bt(L));var H=bt(L),q=[];if(s&&q.push(_[R]<=0),i&&q.push(_[L]<=0,_[H]<=0),q.every(function(U){return U})){E=D,k=!1;break}S.set(D,q)}if(k)for(var X=T?3:1,ne=function(z){var G=C.find(function(ue){var J=S.get(ue);if(J)return J.slice(0,z).every(function(Ce){return Ce})});if(G)return E=G,"break"},N=X;N>0;N--){var A=ne(N);if(A==="break")break}e.placement!==E&&(e.modifiersData[r]._skip=!0,e.placement=E,e.reset=!0)}}const bn={name:"flip",enabled:!0,phase:"main",fn:vn,requiresIfExists:["offset"],data:{_skip:!1}};function fo(t,e,o){return o===void 0&&(o={x:0,y:0}),{top:t.top-e.height-o.y,right:t.right-e.width+o.x,bottom:t.bottom-e.height+o.y,left:t.left-e.width-o.x}}function mo(t){return[Q,le,ie,ee].some(function(e){return t[e]>=0})}function xn(t){var e=t.state,o=t.name,r=e.rects.reference,a=e.rects.popper,s=e.modifiersData.preventOverflow,l=at(e,{elementContext:"reference"}),i=at(e,{altBoundary:!0}),c=fo(l,r),d=fo(i,a,s),p=mo(c),v=mo(d);e.modifiersData[o]={referenceClippingOffsets:c,popperEscapeOffsets:d,isReferenceHidden:p,hasPopperEscaped:v},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":p,"data-popper-escaped":v})}const yn={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:xn};function wn(t,e,o){var r=me(t),a=[ee,Q].indexOf(r)>=0?-1:1,s=typeof o=="function"?o(Object.assign({},e,{placement:t})):o,l=s[0],i=s[1];return l=l||0,i=(i||0)*a,[ee,le].indexOf(r)>=0?{x:i,y:l}:{x:l,y:i}}function Cn(t){var e=t.state,o=t.options,r=t.name,a=o.offset,s=a===void 0?[0,0]:a,l=Io.reduce(function(p,v){return p[v]=wn(v,e.rects,s),p},{}),i=l[e.placement],c=i.x,d=i.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=c,e.modifiersData.popperOffsets.y+=d),e.modifiersData[r]=l}const jn={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Cn};function Tn(t){var e=t.state,o=t.name;e.modifiersData[o]=Uo({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const Pn={name:"popperOffsets",enabled:!0,phase:"read",fn:Tn,data:{}};function An(t){return t==="x"?"y":"x"}function On(t){var e=t.state,o=t.options,r=t.name,a=o.mainAxis,s=a===void 0?!0:a,l=o.altAxis,i=l===void 0?!1:l,c=o.boundary,d=o.rootBoundary,p=o.altBoundary,v=o.padding,j=o.tether,f=j===void 0?!0:j,T=o.tetherOffset,g=T===void 0?0:T,m=at(e,{boundary:c,rootBoundary:d,padding:v,altBoundary:p}),h=me(e.placement),w=Ne(e.placement),O=!w,C=Lt(h),P=An(C),y=e.modifiersData.popperOffsets,S=e.rects.reference,k=e.rects.popper,E=typeof g=="function"?g(Object.assign({},e.rects,{placement:e.placement})):g,M=typeof E=="number"?{mainAxis:E,altAxis:E}:Object.assign({mainAxis:0,altAxis:0},E),D=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,R={x:0,y:0};if(y){if(s){var b,x=C==="y"?Q:ee,W=C==="y"?ie:le,_=C==="y"?"height":"width",L=y[C],H=L+m[x],q=L-m[W],X=f?-k[_]/2:0,ne=w===Be?S[_]:k[_],N=w===Be?-k[_]:-S[_],A=e.elements.arrow,U=f&&A?Bt(A):{width:0,height:0},z=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:_o(),G=z[x],ue=z[W],J=ot(0,S[_],U[_]),Ce=O?S[_]/2-X-J-G-M.mainAxis:ne-J-G-M.mainAxis,He=O?-S[_]/2+X+J+ue+M.mainAxis:N+J+ue+M.mainAxis,je=e.elements.arrow&&it(e.elements.arrow),te=je?C==="y"?je.clientTop||0:je.clientLeft||0:0,ae=(b=D==null?void 0:D[C])!=null?b:0,Oe=L+Ce-ae-te,Ie=L+He-ae,Ve=ot(f?wt(H,Oe):H,L,f?Me(q,Ie):q);y[C]=Ve,R[C]=Ve-L}if(i){var De,Ee=C==="x"?Q:ee,qe=C==="x"?ie:le,fe=y[P],Se=P==="y"?"height":"width",Xe=fe+m[Ee],Ye=fe-m[qe],Ke=[Q,ee].indexOf(h)!==-1,lt=(De=D==null?void 0:D[P])!=null?De:0,ct=Ke?Xe:fe-S[Se]-k[Se]-lt+M.altAxis,$e=Ke?fe+S[Se]+k[Se]-lt-M.altAxis:Ye,pt=f&&Ke?Gr(ct,fe,$e):ot(f?ct:Xe,fe,f?$e:Ye);y[P]=pt,R[P]=pt-fe}e.modifiersData[r]=R}}const Dn={name:"preventOverflow",enabled:!0,phase:"main",fn:On,requiresIfExists:["offset"]};function Sn(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function Rn(t){return t===re(t)||!se(t)?Ut(t):Sn(t)}function Mn(t){var e=t.getBoundingClientRect(),o=Le(e.width)/t.offsetWidth||1,r=Le(e.height)/t.offsetHeight||1;return o!==1||r!==1}function kn(t,e,o){o===void 0&&(o=!1);var r=se(e),a=se(e)&&Mn(e),s=Ae(e),l=Ue(t,a,o),i={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(r||!r&&!o)&&((he(e)!=="body"||zt(s))&&(i=Rn(e)),se(e)?(c=Ue(e,!0),c.x+=e.clientLeft,c.y+=e.clientTop):s&&(c.x=Nt(s))),{x:l.left+i.scrollLeft-c.x,y:l.top+i.scrollTop-c.y,width:l.width,height:l.height}}function In(t){var e=new Map,o=new Set,r=[];t.forEach(function(s){e.set(s.name,s)});function a(s){o.add(s.name);var l=[].concat(s.requires||[],s.requiresIfExists||[]);l.forEach(function(i){if(!o.has(i)){var c=e.get(i);c&&a(c)}}),r.push(s)}return t.forEach(function(s){o.has(s.name)||a(s)}),r}function En(t){var e=In(t);return Hr.reduce(function(o,r){return o.concat(e.filter(function(a){return a.phase===r}))},[])}function $n(t){var e;return function(){return e||(e=new Promise(function(o){Promise.resolve().then(function(){e=void 0,o(t())})})),e}}function _n(t){var e=t.reduce(function(o,r){var a=o[r.name];return o[r.name]=a?Object.assign({},a,r,{options:Object.assign({},a.options,r.options),data:Object.assign({},a.data,r.data)}):r,o},{});return Object.keys(e).map(function(o){return e[o]})}var go={placement:"bottom",modifiers:[],strategy:"absolute"};function ho(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function Wn(t){t===void 0&&(t={});var e=t,o=e.defaultModifiers,r=o===void 0?[]:o,a=e.defaultOptions,s=a===void 0?go:a;return function(i,c,d){d===void 0&&(d=s);var p={placement:"bottom",orderedModifiers:[],options:Object.assign({},go,s),modifiersData:{},elements:{reference:i,popper:c},attributes:{},styles:{}},v=[],j=!1,f={state:p,setOptions:function(h){var w=typeof h=="function"?h(p.options):h;g(),p.options=Object.assign({},s,p.options,w),p.scrollParents={reference:ke(i)?rt(i):i.contextElement?rt(i.contextElement):[],popper:rt(c)};var O=En(_n([].concat(r,p.options.modifiers)));return p.orderedModifiers=O.filter(function(C){return C.enabled}),T(),f.update()},forceUpdate:function(){if(!j){var h=p.elements,w=h.reference,O=h.popper;if(ho(w,O)){p.rects={reference:kn(w,it(O),p.options.strategy==="fixed"),popper:Bt(O)},p.reset=!1,p.placement=p.options.placement,p.orderedModifiers.forEach(function(M){return p.modifiersData[M.name]=Object.assign({},M.data)});for(var C=0;C<p.orderedModifiers.length;C++){if(p.reset===!0){p.reset=!1,C=-1;continue}var P=p.orderedModifiers[C],y=P.fn,S=P.options,k=S===void 0?{}:S,E=P.name;typeof y=="function"&&(p=y({state:p,options:k,name:E,instance:f})||p)}}}},update:$n(function(){return new Promise(function(m){f.forceUpdate(),m(p)})}),destroy:function(){g(),j=!0}};if(!ho(i,c))return f;f.setOptions(d).then(function(m){!j&&d.onFirstUpdate&&d.onFirstUpdate(m)});function T(){p.orderedModifiers.forEach(function(m){var h=m.name,w=m.options,O=w===void 0?{}:w,C=m.effect;if(typeof C=="function"){var P=C({state:p,name:h,instance:f,options:O}),y=function(){};v.push(P||y)}})}function g(){v.forEach(function(m){return m()}),v=[]}return f}}var Bn=[sn,Pn,nn,Xr,jn,bn,Dn,en,yn],Ln=Wn({defaultModifiers:Bn});function Un(t){return be("MuiPopper",t)}xe("MuiPopper",["root"]);function Nn(t,e){if(e==="ltr")return t;switch(t){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return t}}function kt(t){return typeof t=="function"?t():t}function zn(t){return t.nodeType!==void 0}const Fn=t=>{const{classes:e}=t;return ye({root:["root"]},Un,e)},Hn={},Vn=u.forwardRef(function(e,o){const{anchorEl:r,children:a,direction:s,disablePortal:l,modifiers:i,open:c,placement:d,popperOptions:p,popperRef:v,slotProps:j={},slots:f={},TransitionProps:T,ownerState:g,...m}=e,h=u.useRef(null),w=St(h,o),O=u.useRef(null),C=St(O,v),P=u.useRef(C);Qt(()=>{P.current=C},[C]),u.useImperativeHandle(v,()=>O.current,[]);const y=Nn(d,s),[S,k]=u.useState(y),[E,M]=u.useState(kt(r));u.useEffect(()=>{O.current&&O.current.forceUpdate()}),u.useEffect(()=>{r&&M(kt(r))},[r]),Qt(()=>{if(!E||!c)return;const W=H=>{k(H.placement)};let _=[{name:"preventOverflow",options:{altBoundary:l}},{name:"flip",options:{altBoundary:l}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:H})=>{W(H)}}];i!=null&&(_=_.concat(i)),p&&p.modifiers!=null&&(_=_.concat(p.modifiers));const L=Ln(E,h.current,{placement:y,...p,modifiers:_});return P.current(L),()=>{L.destroy(),P.current(null)}},[E,l,i,c,p,y]);const D={placement:S};T!==null&&(D.TransitionProps=T);const R=Fn(e),b=f.root??"div",x=Or({elementType:b,externalSlotProps:j.root,externalForwardedProps:m,additionalProps:{role:"tooltip",ref:w},ownerState:e,className:R.root});return n.jsx(b,{...x,children:typeof a=="function"?a(D):a})}),qn=u.forwardRef(function(e,o){const{anchorEl:r,children:a,container:s,direction:l="ltr",disablePortal:i=!1,keepMounted:c=!1,modifiers:d,open:p,placement:v="bottom",popperOptions:j=Hn,popperRef:f,style:T,transition:g=!1,slotProps:m={},slots:h={},...w}=e,[O,C]=u.useState(!0),P=()=>{C(!1)},y=()=>{C(!0)};if(!c&&!p&&(!g||O))return null;let S;if(s)S=s;else if(r){const M=kt(r);S=M&&zn(M)?ao(M).body:ao(null).body}const k=!p&&c&&(!g||O)?"none":void 0,E=g?{in:p,onEnter:P,onExited:y}:void 0;return n.jsx(Ar,{disablePortal:i,container:S,children:n.jsx(Vn,{anchorEl:r,direction:l,disablePortal:i,modifiers:d,ref:o,open:g?!O:p,placement:v,popperOptions:j,popperRef:f,slotProps:m,slots:h,...w,style:{position:"fixed",top:0,left:0,display:k,...T},TransitionProps:E,children:a})})}),Xn=Y(qn,{name:"MuiPopper",slot:"Root"})({}),No=u.forwardRef(function(e,o){const r=Co(),a=we({props:e,name:"MuiPopper"}),{anchorEl:s,component:l,components:i,componentsProps:c,container:d,disablePortal:p,keepMounted:v,modifiers:j,open:f,placement:T,popperOptions:g,popperRef:m,transition:h,slots:w,slotProps:O,...C}=a,P=(w==null?void 0:w.root)??(i==null?void 0:i.Root),y={anchorEl:s,container:d,disablePortal:p,keepMounted:v,modifiers:j,open:f,placement:T,popperOptions:g,popperRef:m,transition:h,...C};return n.jsx(Xn,{as:l,direction:r?"rtl":"ltr",slots:{root:P},slotProps:O??c,...y,ref:o})});function Yn(t){const{badgeContent:e,invisible:o=!1,max:r=99,showZero:a=!1}=t,s=Mo({badgeContent:e,max:r});let l=o;o===!1&&e===0&&!a&&(l=!0);const{badgeContent:i,max:c=r}=l?s:t,d=i&&Number(i)>c?`${c}+`:i;return{badgeContent:i,invisible:l,max:c,displayValue:d}}function Kn(t){return be("MuiBadge",t)}const Te=xe("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),Pt=10,At=4,Gn=t=>{const{color:e,anchorOrigin:o,invisible:r,overlap:a,variant:s,classes:l={}}=t,i={root:["root"],badge:["badge",s,r&&"invisible",`anchorOrigin${V(o.vertical)}${V(o.horizontal)}`,`anchorOrigin${V(o.vertical)}${V(o.horizontal)}${V(a)}`,`overlap${V(a)}`,e!=="default"&&`color${V(e)}`]};return ye(i,Kn,l)},Jn=Y("span",{name:"MuiBadge",slot:"Root"})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),Zn=Y("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[e.badge,e[o.variant],e[`anchorOrigin${V(o.anchorOrigin.vertical)}${V(o.anchorOrigin.horizontal)}${V(o.overlap)}`],o.color!=="default"&&e[`color${V(o.color)}`],o.invisible&&e.invisible]}})(ze(({theme:t})=>({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(12),minWidth:Pt*2,lineHeight:1,padding:"0 6px",height:Pt*2,borderRadius:Pt,zIndex:1,transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.enteringScreen}),variants:[...Object.entries(t.palette).filter(mr(["contrastText"])).map(([e])=>({props:{color:e},style:{backgroundColor:(t.vars||t).palette[e].main,color:(t.vars||t).palette[e].contrastText}})),{props:{variant:"dot"},style:{borderRadius:At,height:At*2,minWidth:At*2,padding:0}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="top"&&e.anchorOrigin.horizontal==="right"&&e.overlap==="rectangular",style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${Te.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="bottom"&&e.anchorOrigin.horizontal==="right"&&e.overlap==="rectangular",style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${Te.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="top"&&e.anchorOrigin.horizontal==="left"&&e.overlap==="rectangular",style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${Te.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="bottom"&&e.anchorOrigin.horizontal==="left"&&e.overlap==="rectangular",style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${Te.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="top"&&e.anchorOrigin.horizontal==="right"&&e.overlap==="circular",style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${Te.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="bottom"&&e.anchorOrigin.horizontal==="right"&&e.overlap==="circular",style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${Te.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="top"&&e.anchorOrigin.horizontal==="left"&&e.overlap==="circular",style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${Te.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="bottom"&&e.anchorOrigin.horizontal==="left"&&e.overlap==="circular",style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${Te.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.leavingScreen})}}]})));function vo(t){return{vertical:(t==null?void 0:t.vertical)??"top",horizontal:(t==null?void 0:t.horizontal)??"right"}}const Qn=u.forwardRef(function(e,o){const r=we({props:e,name:"MuiBadge"}),{anchorOrigin:a,className:s,classes:l,component:i,components:c={},componentsProps:d={},children:p,overlap:v="rectangular",color:j="default",invisible:f=!1,max:T=99,badgeContent:g,slots:m,slotProps:h,showZero:w=!1,variant:O="standard",...C}=r,{badgeContent:P,invisible:y,max:S,displayValue:k}=Yn({max:T,invisible:f,badgeContent:g,showZero:w}),E=Mo({anchorOrigin:vo(a),color:j,overlap:v,variant:O,badgeContent:g}),M=y||P==null&&O!=="dot",{color:D=j,overlap:R=v,anchorOrigin:b,variant:x=O}=M?E:r,W=vo(b),_=x!=="dot"?k:void 0,L={...r,badgeContent:P,invisible:M,max:S,displayValue:_,showZero:w,anchorOrigin:W,color:D,overlap:R,variant:x},H=Gn(L),q={slots:{root:(m==null?void 0:m.root)??c.Root,badge:(m==null?void 0:m.badge)??c.Badge},slotProps:{root:(h==null?void 0:h.root)??d.root,badge:(h==null?void 0:h.badge)??d.badge}},[X,ne]=Z("root",{elementType:Jn,externalForwardedProps:{...q,...C},ownerState:L,className:ge(H.root,s),ref:o,additionalProps:{as:i}}),[N,A]=Z("badge",{elementType:Zn,externalForwardedProps:q,ownerState:L,className:H.badge});return n.jsxs(X,{...ne,children:[p,n.jsx(N,{...A,children:_})]})});function ea(t){return be("MuiDialog",t)}const Ot=xe("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),zo=u.createContext({}),ta=Y(Sr,{name:"MuiDialog",slot:"Backdrop",overrides:(t,e)=>e.backdrop})({zIndex:-1}),oa=t=>{const{classes:e,scroll:o,maxWidth:r,fullWidth:a,fullScreen:s}=t,l={root:["root"],container:["container",`scroll${V(o)}`],paper:["paper",`paperScroll${V(o)}`,`paperWidth${V(String(r))}`,a&&"paperFullWidth",s&&"paperFullScreen"]};return ye(l,ea,e)},ra=Y(Dr,{name:"MuiDialog",slot:"Root"})({"@media print":{position:"absolute !important"}}),na=Y("div",{name:"MuiDialog",slot:"Container",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[e.container,e[`scroll${V(o.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),aa=Y(jo,{name:"MuiDialog",slot:"Paper",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[e.paper,e[`scrollPaper${V(o.scroll)}`],e[`paperWidth${V(String(o.maxWidth))}`],o.fullWidth&&e.paperFullWidth,o.fullScreen&&e.paperFullScreen]}})(ze(({theme:t})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:e})=>!e.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:t.breakpoints.unit==="px"?Math.max(t.breakpoints.values.xs,444):`max(${t.breakpoints.values.xs}${t.breakpoints.unit}, 444px)`,[`&.${Ot.paperScrollBody}`]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(t.breakpoints.values).filter(e=>e!=="xs").map(e=>({props:{maxWidth:e},style:{maxWidth:`${t.breakpoints.values[e]}${t.breakpoints.unit}`,[`&.${Ot.paperScrollBody}`]:{[t.breakpoints.down(t.breakpoints.values[e]+32*2)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:e})=>e.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:e})=>e.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${Ot.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),Ft=u.forwardRef(function(e,o){const r=we({props:e,name:"MuiDialog"}),a=$t(),s={enter:a.transitions.duration.enteringScreen,exit:a.transitions.duration.leavingScreen},{"aria-describedby":l,"aria-labelledby":i,"aria-modal":c=!0,BackdropComponent:d,BackdropProps:p,children:v,className:j,disableEscapeKeyDown:f=!1,fullScreen:T=!1,fullWidth:g=!1,maxWidth:m="sm",onClick:h,onClose:w,open:O,PaperComponent:C=jo,PaperProps:P={},scroll:y="paper",slots:S={},slotProps:k={},TransitionComponent:E=so,transitionDuration:M=s,TransitionProps:D,...R}=r,b={...r,disableEscapeKeyDown:f,fullScreen:T,fullWidth:g,maxWidth:m,scroll:y},x=oa(b),W=u.useRef(),_=ae=>{W.current=ae.target===ae.currentTarget},L=ae=>{h&&h(ae),W.current&&(W.current=null,w&&w(ae,"backdropClick"))},H=So(i),q=u.useMemo(()=>({titleId:H}),[H]),X={transition:E,...S},ne={transition:D,paper:P,backdrop:p,...k},N={slots:X,slotProps:ne},[A,U]=Z("root",{elementType:ra,shouldForwardComponentProp:!0,externalForwardedProps:N,ownerState:b,className:ge(x.root,j),ref:o}),[z,G]=Z("backdrop",{elementType:ta,shouldForwardComponentProp:!0,externalForwardedProps:N,ownerState:b}),[ue,J]=Z("paper",{elementType:aa,shouldForwardComponentProp:!0,externalForwardedProps:N,ownerState:b,className:ge(x.paper,P.className)}),[Ce,He]=Z("container",{elementType:na,externalForwardedProps:N,ownerState:b,className:x.container}),[je,te]=Z("transition",{elementType:so,externalForwardedProps:N,ownerState:b,additionalProps:{appear:!0,in:O,timeout:M,role:"presentation"}});return n.jsx(A,{closeAfterTransition:!0,slots:{backdrop:z},slotProps:{backdrop:{transitionDuration:M,as:d,...G}},disableEscapeKeyDown:f,onClose:w,open:O,onClick:L,...U,...R,children:n.jsx(je,{...te,children:n.jsx(Ce,{onMouseDown:_,...He,children:n.jsx(ue,{as:C,elevation:24,role:"dialog","aria-describedby":l,"aria-labelledby":H,"aria-modal":c,...J,children:n.jsx(zo.Provider,{value:q,children:v})})})})})});function sa(t){return be("MuiDialogActions",t)}xe("MuiDialogActions",["root","spacing"]);const ia=t=>{const{classes:e,disableSpacing:o}=t;return ye({root:["root",!o&&"spacing"]},sa,e)},la=Y("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[e.root,!o.disableSpacing&&e.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:t})=>!t.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),Ht=u.forwardRef(function(e,o){const r=we({props:e,name:"MuiDialogActions"}),{className:a,disableSpacing:s=!1,...l}=r,i={...r,disableSpacing:s},c=ia(i);return n.jsx(la,{className:ge(c.root,a),ownerState:i,ref:o,...l})});function ca(t){return be("MuiDialogContent",t)}xe("MuiDialogContent",["root","dividers"]);function pa(t){return be("MuiDialogTitle",t)}const da=xe("MuiDialogTitle",["root"]),ua=t=>{const{classes:e,dividers:o}=t;return ye({root:["root",o&&"dividers"]},ca,e)},fa=Y("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[e.root,o.dividers&&e.dividers]}})(ze(({theme:t})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:e})=>e.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(t.vars||t).palette.divider}`,borderBottom:`1px solid ${(t.vars||t).palette.divider}`}},{props:({ownerState:e})=>!e.dividers,style:{[`.${da.root} + &`]:{paddingTop:0}}}]}))),Vt=u.forwardRef(function(e,o){const r=we({props:e,name:"MuiDialogContent"}),{className:a,dividers:s=!1,...l}=r,i={...r,dividers:s},c=ua(i);return n.jsx(fa,{className:ge(c.root,a),ownerState:i,ref:o,...l})}),ma=t=>{const{classes:e}=t;return ye({root:["root"]},pa,e)},ga=Y(I,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),qt=u.forwardRef(function(e,o){const r=we({props:e,name:"MuiDialogTitle"}),{className:a,id:s,...l}=r,i=r,c=ma(i),{titleId:d=s}=u.useContext(zo);return n.jsx(ga,{component:"h2",className:ge(c.root,a),ownerState:i,ref:o,variant:"h6",id:s??d,...l})});function ha(t){return be("MuiListItemAvatar",t)}xe("MuiListItemAvatar",["root","alignItemsFlexStart"]);const va=t=>{const{alignItems:e,classes:o}=t;return ye({root:["root",e==="flex-start"&&"alignItemsFlexStart"]},ha,o)},ba=Y("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[e.root,o.alignItems==="flex-start"&&e.alignItemsFlexStart]}})({minWidth:56,flexShrink:0,variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}),Fo=u.forwardRef(function(e,o){const r=we({props:e,name:"MuiListItemAvatar"}),{className:a,...s}=r,l=u.useContext(To),i={...r,alignItems:l.alignItems},c=va(i);return n.jsx(ba,{className:ge(c.root,a),ownerState:i,ref:o,...s})});function xa(t){return be("MuiListItemText",t)}const mt=xe("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),ya=t=>{const{classes:e,inset:o,primary:r,secondary:a,dense:s}=t;return ye({root:["root",o&&"inset",s&&"dense",r&&a&&"multiline"],primary:["primary"],secondary:["secondary"]},xa,e)},wa=Y("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[{[`& .${mt.primary}`]:e.primary},{[`& .${mt.secondary}`]:e.secondary},e.root,o.inset&&e.inset,o.primary&&o.secondary&&e.multiline,o.dense&&e.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${eo.root}:where(& .${mt.primary})`]:{display:"block"},[`.${eo.root}:where(& .${mt.secondary})`]:{display:"block"},variants:[{props:({ownerState:t})=>t.primary&&t.secondary,style:{marginTop:6,marginBottom:6}},{props:({ownerState:t})=>t.inset,style:{paddingLeft:56}}]}),Ho=u.forwardRef(function(e,o){const r=we({props:e,name:"MuiListItemText"}),{children:a,className:s,disableTypography:l=!1,inset:i=!1,primary:c,primaryTypographyProps:d,secondary:p,secondaryTypographyProps:v,slots:j={},slotProps:f={},...T}=r,{dense:g}=u.useContext(To);let m=c??a,h=p;const w={...r,disableTypography:l,inset:i,primary:!!m,secondary:!!h,dense:g},O=ya(w),C={slots:j,slotProps:{primary:d,secondary:v,...f}},[P,y]=Z("root",{className:ge(O.root,s),elementType:wa,externalForwardedProps:{...C,...T},ownerState:w,ref:o}),[S,k]=Z("primary",{className:O.primary,elementType:I,externalForwardedProps:C,ownerState:w}),[E,M]=Z("secondary",{className:O.secondary,elementType:I,externalForwardedProps:C,ownerState:w});return m!=null&&m.type!==I&&!l&&(m=n.jsx(S,{variant:g?"body2":"body1",component:k!=null&&k.variant?void 0:"span",...k,children:m})),h!=null&&h.type!==I&&!l&&(h=n.jsx(E,{variant:"body2",color:"textSecondary",...M,children:h})),n.jsxs(P,{...y,children:[m,h]})});function Ca(t){return be("MuiTooltip",t)}const F=xe("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);function ja(t){return Math.round(t*1e5)/1e5}const Ta=t=>{const{classes:e,disableInteractive:o,arrow:r,touch:a,placement:s}=t,l={popper:["popper",!o&&"popperInteractive",r&&"popperArrow"],tooltip:["tooltip",r&&"tooltipArrow",a&&"touch",`tooltipPlacement${V(s.split("-")[0])}`],arrow:["arrow"]};return ye(l,Ca,e)},Pa=Y(No,{name:"MuiTooltip",slot:"Popper",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[e.popper,!o.disableInteractive&&e.popperInteractive,o.arrow&&e.popperArrow,!o.open&&e.popperClose]}})(ze(({theme:t})=>({zIndex:(t.vars||t).zIndex.tooltip,pointerEvents:"none",variants:[{props:({ownerState:e})=>!e.disableInteractive,style:{pointerEvents:"auto"}},{props:({open:e})=>!e,style:{pointerEvents:"none"}},{props:({ownerState:e})=>e.arrow,style:{[`&[data-popper-placement*="bottom"] .${F.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${F.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${F.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},[`&[data-popper-placement*="left"] .${F.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}},{props:({ownerState:e})=>e.arrow&&!e.isRtl,style:{[`&[data-popper-placement*="right"] .${F.arrow}`]:{left:0,marginLeft:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!!e.isRtl,style:{[`&[data-popper-placement*="right"] .${F.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!e.isRtl,style:{[`&[data-popper-placement*="left"] .${F.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!!e.isRtl,style:{[`&[data-popper-placement*="left"] .${F.arrow}`]:{left:0,marginLeft:"-0.71em"}}}]}))),Aa=Y("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[e.tooltip,o.touch&&e.touch,o.arrow&&e.tooltipArrow,e[`tooltipPlacement${V(o.placement.split("-")[0])}`]]}})(ze(({theme:t})=>({backgroundColor:t.vars?t.vars.palette.Tooltip.bg:Po(t.palette.grey[700],.92),borderRadius:(t.vars||t).shape.borderRadius,color:(t.vars||t).palette.common.white,fontFamily:t.typography.fontFamily,padding:"4px 8px",fontSize:t.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:t.typography.fontWeightMedium,[`.${F.popper}[data-popper-placement*="left"] &`]:{transformOrigin:"right center"},[`.${F.popper}[data-popper-placement*="right"] &`]:{transformOrigin:"left center"},[`.${F.popper}[data-popper-placement*="top"] &`]:{transformOrigin:"center bottom",marginBottom:"14px"},[`.${F.popper}[data-popper-placement*="bottom"] &`]:{transformOrigin:"center top",marginTop:"14px"},variants:[{props:({ownerState:e})=>e.arrow,style:{position:"relative",margin:0}},{props:({ownerState:e})=>e.touch,style:{padding:"8px 16px",fontSize:t.typography.pxToRem(14),lineHeight:`${ja(16/14)}em`,fontWeight:t.typography.fontWeightRegular}},{props:({ownerState:e})=>!e.isRtl,style:{[`.${F.popper}[data-popper-placement*="left"] &`]:{marginRight:"14px"},[`.${F.popper}[data-popper-placement*="right"] &`]:{marginLeft:"14px"}}},{props:({ownerState:e})=>!e.isRtl&&e.touch,style:{[`.${F.popper}[data-popper-placement*="left"] &`]:{marginRight:"24px"},[`.${F.popper}[data-popper-placement*="right"] &`]:{marginLeft:"24px"}}},{props:({ownerState:e})=>!!e.isRtl,style:{[`.${F.popper}[data-popper-placement*="left"] &`]:{marginLeft:"14px"},[`.${F.popper}[data-popper-placement*="right"] &`]:{marginRight:"14px"}}},{props:({ownerState:e})=>!!e.isRtl&&e.touch,style:{[`.${F.popper}[data-popper-placement*="left"] &`]:{marginLeft:"24px"},[`.${F.popper}[data-popper-placement*="right"] &`]:{marginRight:"24px"}}},{props:({ownerState:e})=>e.touch,style:{[`.${F.popper}[data-popper-placement*="top"] &`]:{marginBottom:"24px"}}},{props:({ownerState:e})=>e.touch,style:{[`.${F.popper}[data-popper-placement*="bottom"] &`]:{marginTop:"24px"}}}]}))),Oa=Y("span",{name:"MuiTooltip",slot:"Arrow"})(ze(({theme:t})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:t.vars?t.vars.palette.Tooltip.bg:Po(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})));let gt=!1;const bo=new gr;let Qe={x:0,y:0};function ht(t,e){return(o,...r)=>{e&&e(o,...r),t(o,...r)}}const It=u.forwardRef(function(e,o){const r=we({props:e,name:"MuiTooltip"}),{arrow:a=!1,children:s,classes:l,components:i={},componentsProps:c={},describeChild:d=!1,disableFocusListener:p=!1,disableHoverListener:v=!1,disableInteractive:j=!1,disableTouchListener:f=!1,enterDelay:T=100,enterNextDelay:g=0,enterTouchDelay:m=700,followCursor:h=!1,id:w,leaveDelay:O=0,leaveTouchDelay:C=1500,onClose:P,onOpen:y,open:S,placement:k="bottom",PopperComponent:E,PopperProps:M={},slotProps:D={},slots:R={},title:b,TransitionComponent:x,TransitionProps:W,..._}=r,L=u.isValidElement(s)?s:n.jsx("span",{children:s}),H=$t(),q=Co(),[X,ne]=u.useState(),[N,A]=u.useState(null),U=u.useRef(!1),z=j||h,G=ut(),ue=ut(),J=ut(),Ce=ut(),[He,je]=Rr({controlled:S,default:!1,name:"Tooltip",state:"open"});let te=He;const ae=So(w),Oe=u.useRef(),Ie=to(()=>{Oe.current!==void 0&&(document.body.style.WebkitUserSelect=Oe.current,Oe.current=void 0),Ce.clear()});u.useEffect(()=>Ie,[Ie]);const Ve=$=>{bo.clear(),gt=!0,je(!0),y&&!te&&y($)},De=to($=>{bo.start(800+O,()=>{gt=!1}),je(!1),P&&te&&P($),G.start(H.transitions.duration.shortest,()=>{U.current=!1})}),Ee=$=>{U.current&&$.type!=="touchstart"||(X&&X.removeAttribute("title"),ue.clear(),J.clear(),T||gt&&g?ue.start(gt?g:T,()=>{Ve($)}):Ve($))},qe=$=>{ue.clear(),J.start(O,()=>{De($)})},[,fe]=u.useState(!1),Se=$=>{oo($.target)||(fe(!1),qe($))},Xe=$=>{X||ne($.currentTarget),oo($.target)&&(fe(!0),Ee($))},Ye=$=>{U.current=!0;const de=L.props;de.onTouchStart&&de.onTouchStart($)},Ke=$=>{Ye($),J.clear(),G.clear(),Ie(),Oe.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",Ce.start(m,()=>{document.body.style.WebkitUserSelect=Oe.current,Ee($)})},lt=$=>{L.props.onTouchEnd&&L.props.onTouchEnd($),Ie(),J.start(C,()=>{De($)})};u.useEffect(()=>{if(!te)return;function $(de){de.key==="Escape"&&De(de)}return document.addEventListener("keydown",$),()=>{document.removeEventListener("keydown",$)}},[De,te]);const ct=St(Mr(L),ne,o);!b&&b!==0&&(te=!1);const $e=u.useRef(),pt=$=>{const de=L.props;de.onMouseMove&&de.onMouseMove($),Qe={x:$.clientX,y:$.clientY},$e.current&&$e.current.update()},Ge={},jt=typeof b=="string";d?(Ge.title=!te&&jt&&!v?b:null,Ge["aria-describedby"]=te?ae:null):(Ge["aria-label"]=jt?b:null,Ge["aria-labelledby"]=te&&!jt?ae:null);const ce={...Ge,..._,...L.props,className:ge(_.className,L.props.className),onTouchStart:Ye,ref:ct,...h?{onMouseMove:pt}:{}},Je={};f||(ce.onTouchStart=Ke,ce.onTouchEnd=lt),v||(ce.onMouseOver=ht(Ee,ce.onMouseOver),ce.onMouseLeave=ht(qe,ce.onMouseLeave),z||(Je.onMouseOver=Ee,Je.onMouseLeave=qe)),p||(ce.onFocus=ht(Xe,ce.onFocus),ce.onBlur=ht(Se,ce.onBlur),z||(Je.onFocus=Xe,Je.onBlur=Se));const Re={...r,isRtl:q,arrow:a,disableInteractive:z,placement:k,PopperComponentProp:E,touch:U.current},pe=typeof D.popper=="function"?D.popper(Re):D.popper,nr=u.useMemo(()=>{var de,Zt;let $=[{name:"arrow",enabled:!!N,options:{element:N,padding:4}}];return(de=M.popperOptions)!=null&&de.modifiers&&($=$.concat(M.popperOptions.modifiers)),(Zt=pe==null?void 0:pe.popperOptions)!=null&&Zt.modifiers&&($=$.concat(pe.popperOptions.modifiers)),{...M.popperOptions,...pe==null?void 0:pe.popperOptions,modifiers:$}},[N,M.popperOptions,pe==null?void 0:pe.popperOptions]),Tt=Ta(Re),ar=typeof D.transition=="function"?D.transition(Re):D.transition,dt={slots:{popper:i.Popper,transition:i.Transition??x,tooltip:i.Tooltip,arrow:i.Arrow,...R},slotProps:{arrow:D.arrow??c.arrow,popper:{...M,...pe??c.popper},tooltip:D.tooltip??c.tooltip,transition:{...W,...ar??c.transition}}},[sr,ir]=Z("popper",{elementType:Pa,externalForwardedProps:dt,ownerState:Re,className:ge(Tt.popper,M==null?void 0:M.className)}),[lr,cr]=Z("transition",{elementType:kr,externalForwardedProps:dt,ownerState:Re}),[pr,dr]=Z("tooltip",{elementType:Aa,className:Tt.tooltip,externalForwardedProps:dt,ownerState:Re}),[ur,fr]=Z("arrow",{elementType:Oa,className:Tt.arrow,externalForwardedProps:dt,ownerState:Re,ref:A});return n.jsxs(u.Fragment,{children:[u.cloneElement(L,ce),n.jsx(sr,{as:E??No,placement:k,anchorEl:h?{getBoundingClientRect:()=>({top:Qe.y,left:Qe.x,right:Qe.x,bottom:Qe.y,width:0,height:0})}:X,popperRef:$e,open:X?te:!1,id:ae,transition:!0,...Je,...ir,popperOptions:nr,children:({TransitionProps:$})=>n.jsx(lr,{timeout:H.transitions.duration.shorter,...$,...cr,children:n.jsxs(pr,{...dr,children:[b,a?n.jsx(ur,{...fr}):null]})})})]})});class Da extends u.Component{getSnapshotBeforeUpdate(e){const o=this.props.childRef.current;if(o&&e.isPresent&&!this.props.isPresent){const r=o.offsetParent,a=vr(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=o.offsetHeight||0,s.width=o.offsetWidth||0,s.top=o.offsetTop,s.left=o.offsetLeft,s.right=a-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Sa({children:t,isPresent:e,anchorX:o,root:r}){const a=u.useId(),s=u.useRef(null),l=u.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:i}=u.useContext(hr);return u.useInsertionEffect(()=>{const{width:c,height:d,top:p,left:v,right:j}=l.current;if(e||!s.current||!c||!d)return;const f=o==="left"?`left: ${v}`:`right: ${j}`;s.current.dataset.motionPopId=a;const T=document.createElement("style");i&&(T.nonce=i);const g=r??document.head;return g.appendChild(T),T.sheet&&T.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${d}px !important;
            ${f}px !important;
            top: ${p}px !important;
          }
        `),()=>{g.removeChild(T),g.contains(T)&&g.removeChild(T)}},[e]),n.jsx(Da,{isPresent:e,childRef:s,sizeRef:l,children:u.cloneElement(t,{ref:s})})}const Ra=({children:t,initial:e,isPresent:o,onExitComplete:r,custom:a,presenceAffectsLayout:s,mode:l,anchorX:i,root:c})=>{const d=Ao(Ma),p=u.useId();let v=!0,j=u.useMemo(()=>(v=!1,{id:p,initial:e,isPresent:o,custom:a,onExitComplete:f=>{d.set(f,!0);for(const T of d.values())if(!T)return;r&&r()},register:f=>(d.set(f,!1),()=>d.delete(f))}),[o,d,r]);return s&&v&&(j={...j}),u.useMemo(()=>{d.forEach((f,T)=>d.set(T,!1))},[o]),u.useEffect(()=>{!o&&!d.size&&r&&r()},[o]),l==="popLayout"&&(t=n.jsx(Sa,{isPresent:o,anchorX:i,root:c,children:t})),n.jsx(br.Provider,{value:j,children:t})};function Ma(){return new Map}const vt=t=>t.key||"";function xo(t){const e=[];return u.Children.forEach(t,o=>{u.isValidElement(o)&&e.push(o)}),e}const ka=({children:t,custom:e,initial:o=!0,onExitComplete:r,presenceAffectsLayout:a=!0,mode:s="sync",propagate:l=!1,anchorX:i="left",root:c})=>{const[d,p]=xr(l),v=u.useMemo(()=>xo(t),[t]),j=l&&!d?[]:v.map(vt),f=u.useRef(!0),T=u.useRef(v),g=Ao(()=>new Map),[m,h]=u.useState(v),[w,O]=u.useState(v);yr(()=>{f.current=!1,T.current=v;for(let y=0;y<w.length;y++){const S=vt(w[y]);j.includes(S)?g.delete(S):g.get(S)!==!0&&g.set(S,!1)}},[w,j.length,j.join("-")]);const C=[];if(v!==m){let y=[...v];for(let S=0;S<w.length;S++){const k=w[S],E=vt(k);j.includes(E)||(y.splice(S,0,k),C.push(k))}return s==="wait"&&C.length&&(y=C),O(xo(y)),h(v),null}const{forceRender:P}=u.useContext(wr);return n.jsx(n.Fragment,{children:w.map(y=>{const S=vt(y),k=l&&!d?!1:v===w||j.includes(S),E=()=>{if(g.has(S))g.set(S,!0);else return;let M=!0;g.forEach(D=>{D||(M=!1)}),M&&(P==null||P(),O(T.current),l&&(p==null||p()),r&&r())};return n.jsx(Ra,{isPresent:k,initial:!f.current||o?void 0:!1,custom:e,presenceAffectsLayout:a,mode:s,root:c,onExitComplete:k?void 0:E,anchorX:i,children:y},S)})})},Ia=Pe(n.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"})),Ea=Pe([n.jsx("path",{d:"M17 11c.34 0 .67.04 1 .09V6.27L10.5 3 3 6.27v4.91c0 4.54 3.2 8.79 7.5 9.82.55-.13 1.08-.32 1.6-.55-.69-.98-1.1-2.17-1.1-3.45 0-3.31 2.69-6 6-6"},"0"),n.jsx("path",{d:"M17 13c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 1.38c.62 0 1.12.51 1.12 1.12s-.51 1.12-1.12 1.12-1.12-.51-1.12-1.12.5-1.12 1.12-1.12m0 5.37c-.93 0-1.74-.46-2.24-1.17.05-.72 1.51-1.08 2.24-1.08s2.19.36 2.24 1.08c-.5.71-1.31 1.17-2.24 1.17"},"1")]),$a=Pe(n.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"})),Dt=Pe(n.jsx("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2M6 9h12v2H6zm8 5H6v-2h8zm4-6H6V6h12z"})),_a=Pe(n.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"})),yo=Pe(n.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"})),wo=Pe(n.jsx("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"})),Wa=Pe(n.jsx("path",{d:"M14 8c0-2.21-1.79-4-4-4S6 5.79 6 8s1.79 4 4 4 4-1.79 4-4m3 2v2h6v-2zM2 18v2h16v-2c0-2.66-5.33-4-8-4s-8 1.34-8 4"})),Xt=()=>{var t;if(console.log("Инициализация Telegram WebApp..."),Kt(),typeof window<"u"&&((t=window.Telegram)!=null&&t.WebApp))try{const e=window.Telegram.WebApp;return e.ready(),e.expand(),e.setHeaderColor("#232b3b"),e.setBackgroundColor("#232b3b"),e.enableClosingConfirmation(),console.log("Telegram WebApp успешно инициализирован"),console.log("WebApp version:",e.version),console.log("WebApp platform:",e.platform),console.log("WebApp theme:",e.colorScheme),!0}catch(e){return console.error("Ошибка инициализации Telegram WebApp:",e),!1}return console.log("Telegram WebApp не найден"),!1},Vo=()=>{var t,e,o;return typeof window<"u"&&((o=(e=(t=window.Telegram)==null?void 0:t.WebApp)==null?void 0:e.initDataUnsafe)!=null&&o.user)?window.Telegram.WebApp.initDataUnsafe.user:null},Yt=()=>{var t;if(console.log("=== Telegram WebApp Debug Info ==="),typeof window>"u"){console.log("❌ Window object not available");return}if(console.log("🔍 Telegram object:",window.Telegram?"✅ Available":"❌ Not available"),(t=window.Telegram)!=null&&t.WebApp){const e=window.Telegram.WebApp;console.log("🔍 WebApp object:","✅ Available"),console.log("🔍 WebApp version:",e.version),console.log("🔍 WebApp platform:",e.platform),console.log("🔍 WebApp colorScheme:",e.colorScheme),console.log("🔍 WebApp isExpanded:",e.isExpanded),console.log("🔍 WebApp viewportHeight:",e.viewportHeight),console.log("🔍 WebApp viewportStableHeight:",e.viewportStableHeight),console.log("🔍 InitData:",e.initData?`✅ Available (${e.initData.length} chars)`:"❌ Not available"),console.log("🔍 InitDataUnsafe:",e.initDataUnsafe?"✅ Available":"❌ Not available"),e.initDataUnsafe&&(console.log("🔍 InitDataUnsafe.user:",e.initDataUnsafe.user?"✅ Available":"❌ Not available"),console.log("🔍 InitDataUnsafe.query_id:",e.initDataUnsafe.query_id?"✅ Available":"❌ Not available"),console.log("🔍 InitDataUnsafe.auth_date:",e.initDataUnsafe.auth_date?"✅ Available":"❌ Not available"),console.log("🔍 InitDataUnsafe.hash:",e.initDataUnsafe.hash?"✅ Available":"❌ Not available"),e.initDataUnsafe.user&&console.log("🔍 User data:",JSON.stringify(e.initDataUnsafe.user,null,2)))}else console.log("❌ WebApp object not available");console.log("==================================")},Fe=()=>{var t;if(console.log("Получение данных авторизации Telegram..."),Yt(),typeof window<"u"&&((t=window.Telegram)!=null&&t.WebApp)){console.log("Telegram WebApp найден");const e=window.Telegram.WebApp.initData;if(console.log("Telegram initData:",e?"найден":"отсутствует"),e)return console.log("✅ Используем реальные данные initData"),e;const o=window.Telegram.WebApp.initDataUnsafe;if(console.log("Telegram initDataUnsafe:",o),o!=null&&o.user){const r=Math.floor(Date.now()/1e3),a=JSON.stringify(o.user),s=`user=${encodeURIComponent(a)}`,l=`auth_date=${r}`,i=`${s}&${l}`,c=btoa(i).replace(/[^a-zA-Z0-9]/g,"").substring(0,32),d=`${s}&${l}&hash=${c}`;return console.log("✅ Создаем данные авторизации из initDataUnsafe"),console.log("Generated auth data length:",d.length),d}}return console.warn("❌ Приложение запущено не из Telegram WebApp"),console.warn("❌ Данные авторизации недоступны"),""},qo=()=>{var t;return typeof window<"u"&&!!((t=window.Telegram)!=null&&t.WebApp)},Xo=()=>{if(console.log("🔄 Очищаем и пересоздаем данные авторизации..."),typeof window<"u"){localStorage.removeItem("telegram_init_data"),console.log("✅ Старые данные очищены");const t=Fe();return console.log("✅ Новые данные созданы:",t?"успешно":"ошибка"),t}return""},Kt=()=>{typeof window<"u"&&(localStorage.removeItem("telegram_init_data"),console.log("🧹 Очищены старые данные авторизации"))},Yo=()=>{console.log("🧪 Тестируем данные авторизации...");const t=Fe();if(t){console.log("✅ Данные авторизации найдены"),console.log("📊 Длина:",t.length),console.log("📋 Превью:",t.substring(0,100)+"...");try{const e=new URLSearchParams(t),o=e.get("user"),r=e.get("auth_date"),a=e.get("hash");if(console.log("🔍 Структура данных:"),console.log("  - user:",o?"есть":"отсутствует"),console.log("  - auth_date:",r?"есть":"отсутствует"),console.log("  - hash:",a?"есть":"отсутствует"),o){const s=JSON.parse(decodeURIComponent(o));console.log("👤 Данные пользователя:",s)}return!0}catch(e){return console.error("❌ Ошибка парсинга данных:",e),!1}}else return console.error("❌ Данные авторизации не найдены"),!1},Gt=async()=>{console.log("🔬 Диагностика проблемы авторизации на сервере...");try{const{debugAuthConfig:t,debugValidateTelegramData:e}=await xt(async()=>{const{debugAuthConfig:r,debugValidateTelegramData:a}=await Promise.resolve().then(()=>Jt);return{debugAuthConfig:r,debugValidateTelegramData:a}},void 0);console.log("🔍 Проверяем конфигурацию сервера...");try{const r=await t();if(console.log("🏃 Конфигурация сервера:",r),!r.telegram_bot_token_set)return console.error("❌ На сервере не установлен токен Telegram бота!"),console.error("💡 Решение: Администратор должен установить TELEGRAM_BOT_TOKEN на сервере"),"server_no_token";console.log("✅ Токен бота на сервере установлен")}catch(r){return console.error("❌ Ошибка получения конфигурации сервера:",r),"server_config_error"}const o=Fe();if(o){console.log("🧪 Тестируем валидацию данных на сервере...");try{const r=await e(o);return console.log("📊 Результат валидации:",r),r.success?(console.log("✅ Валидация на сервере прошла успешно!"),console.log("❓ Возможно, проблема в другом месте"),"validation_success"):(console.error("❌ Валидация на сервере не прошла"),console.error("💡 Причина: Неправильная подпись или истекшие данные"),"validation_failed")}catch(r){return console.error("❌ Ошибка тестирования валидации:",r),"validation_error"}}else return console.error("❌ Нет данных для тестирования"),"no_data"}catch(t){return console.error("❌ Общая ошибка диагностики:",t),"general_error"}};typeof window<"u"&&(window.telegramUtils={debugTelegramWebApp:Yt,getTelegramInitData:Fe,clearAndRecreateAuthData:Xo,cleanupOldAuthData:Kt,testAuthData:Yo,initTelegramWebApp:Xt,diagnoseServerAuth:Gt},console.log("🔧 Утилиты Telegram доступны через window.telegramUtils"));const Ba=Object.freeze(Object.defineProperty({__proto__:null,cleanupOldAuthData:Kt,clearAndRecreateAuthData:Xo,debugTelegramWebApp:Yt,diagnoseServerAuth:Gt,getTelegramInitData:Fe,getTelegramUser:Vo,initTelegramWebApp:Xt,isTelegramWebApp:qo,testAuthData:Yo},Symbol.toStringTag,{value:"Module"})),La=()=>{console.log("=== Aeon Messenger API Configuration ==="),console.log("VITE_CHAT_URL:","https://aeon-messenger-app-09faae856b73.herokuapp.com"),console.log("Base URL:","https://aeon-messenger-app-09faae856b73.herokuapp.com"),console.log("Environment:","production"),console.log("🆕 NEW BACKEND URL: https://aeon-backend-2892-d50dfbe26b14.herokuapp.com"),console.log("=========================================")};La();const K=Tr.create({baseURL:"https://aeon-backend-2892-d50dfbe26b14.herokuapp.com",timeout:1e4,headers:{"Content-Type":"application/json"}});K.interceptors.request.use(t=>{const e=Fe();return console.log("=== Aeon API Request Debug ==="),console.log("URL:",t.url),console.log("Method:",t.method),console.log("Base URL:",t.baseURL),console.log("Init Data Length:",e?e.length:0),console.log("Init Data Preview:",e?e.substring(0,100)+"...":"No data"),e?(t.headers["x-telegram-init-data"]=e,console.log("✅ Auth header attached")):(console.warn("❌ No auth data available - running in development mode"),console.warn("❌ This request will likely fail with 401 error")),console.log("==============================="),t},t=>(console.error("Request interceptor error:",t),Promise.reject(t)));K.interceptors.response.use(t=>(console.log("✅ API Response:",t.config.url,t.status),t),t=>{var e,o,r,a,s,l,i;throw console.error("=== Aeon API Error ==="),console.error("URL:",(e=t.config)==null?void 0:e.url),console.error("Status:",(o=t.response)==null?void 0:o.status),console.error("Status Text:",(r=t.response)==null?void 0:r.statusText),console.error("Response Data:",(a=t.response)==null?void 0:a.data),console.error("Request Headers:",(s=t.config)==null?void 0:s.headers),console.error("======================"),((l=t.response)==null?void 0:l.status)===401?(console.error("❌ Authorization failed"),console.error("❌ Possible reasons:"),console.error("   1. App is not running inside Telegram WebApp"),console.error("   2. Invalid or expired Telegram init data"),console.error("   3. Server-side authorization issue"),console.error("❌ Solution: Open this app from Telegram bot/mini app"),{...t,message:"Authorization failed - app must be opened from Telegram",isAuthError:!0,response:{...t.response,data:{...(i=t.response)==null?void 0:i.data,error:"Приложение должно быть открыто из Telegram"}}}):t});const Ko=async()=>(await K.get("/api/v1/chats/")).data,Go=async t=>(await K.post("/api/v1/chats/",t)).data,Ua=async t=>(await K.get(`/api/v1/chats/${t}`)).data,Jo=async(t,e)=>{await K.post(`/api/v1/chats/${t}/members/${e}`)},Zo=async(t,e)=>{await K.delete(`/api/v1/chats/${t}/members/${e}`)},Qo=async(t,e=1,o=50)=>(await K.get(`/api/v1/messages/chat/${t}?page=${e}&per_page=${o}`)).data,er=async t=>(await K.post("/api/v1/messages/",t)).data,tr=async t=>{await K.post(`/api/v1/messages/chat/${t}/read-all`)},or=async()=>(await K.get("/api/v1/me")).data,Na=async()=>(await K.get("/api/v1/debug/auth")).data,za=async t=>(await K.post("/api/v1/debug/validate-telegram-data",t,{headers:{"Content-Type":"application/json"}})).data,Et=async(t,e)=>(await K.post(`/api/v1/chats/${t}/invite-by-username`,{username:e})).data,rr=async()=>{await K.post("/api/v1/users/check-invitations")},Jt=Object.freeze(Object.defineProperty({__proto__:null,addMemberToChat:Jo,checkAndAcceptInvitations:rr,createChat:Go,debugAuthConfig:Na,debugValidateTelegramData:za,getChat:Ua,getChatMessages:Qo,getChats:Ko,getCurrentUser:or,inviteMemberByUsername:Et,markAllMessagesAsRead:tr,removeMemberFromChat:Zo,sendMessage:er},Symbol.toStringTag,{value:"Module"})),Fa=()=>{const[t,e]=u.useState([]),[o,r]=u.useState(null),[a,s]=u.useState([]),[l,i]=u.useState(null),[c,d]=u.useState(!0),[p,v]=u.useState(!1),[j,f]=u.useState(null),[T,g]=u.useState(!1),m=u.useCallback(()=>Xt(),[]),h=u.useCallback(async()=>{var D;try{const R=await or();i(R),f(null),g(!1);try{await rr()}catch(b){console.log("No pending invitations or error checking invitations:",b)}}catch(R){if(console.error("Error loading current user:",R),((D=R.response)==null?void 0:D.status)===401||R.isAuthError?(g(!0),f("Приложение должно быть открыто из Telegram для корректной работы")):f("Ошибка загрузки данных пользователя"),!qo()){const b=Vo();i(b?{id:b.id,telegram_id:b.id,username:b.username,first_name:b.first_name,last_name:b.last_name,profile_photo_url:b.photo_url}:{id:123456789,telegram_id:123456789,username:"testuser",first_name:"Test",last_name:"User",profile_photo_url:void 0}),g(!1)}}},[m]),w=u.useCallback(async()=>{var D;try{d(!0);const R=await Ko();e(R),f(null),g(!1)}catch(R){console.error("Error loading chats:",R),((D=R.response)==null?void 0:D.status)===401||R.isAuthError?(g(!0),f("Приложение должно быть открыто из Telegram для корректной работы")):f("Ошибка загрузки чатов")}finally{d(!1)}},[m]),O=u.useCallback(async D=>{var R;try{v(!0);const b=await Qo(D);s(b.messages),f(null),g(!1)}catch(b){console.error("Error loading messages:",b),((R=b.response)==null?void 0:R.status)===401||b.isAuthError?(g(!0),f("Приложение должно быть открыто из Telegram для корректной работы")):f("Ошибка загрузки сообщений")}finally{v(!1)}},[m]),C=u.useCallback(async(D,R)=>{if(R.trim())try{const b={text:R.trim(),message_type:"text",chat_id:D},x=await er(b);s(W=>[...W,x]),e(W=>W.map(_=>_.id===D?{..._,last_message:R.trim(),last_message_time:new Date().toISOString()}:_))}catch(b){if(console.error("Error sending message:",b),f("Ошибка отправки сообщения"),l){const x={id:Date.now(),text:R.trim(),message_type:"text",chat_id:D,sender_id:l.id,sender:{id:l.id,telegram_id:l.telegram_id,username:l.username,first_name:l.first_name,last_name:l.last_name,profile_photo_url:l.profile_photo_url},is_edited:!1,is_deleted:!1,read_by:[],created_at:new Date().toISOString(),updated_at:new Date().toISOString()};s(W=>[...W,x])}}},[l]),P=u.useCallback(async(D,R=[])=>{try{const b={title:D,chat_type:R.length>0?"group":"private",member_ids:R},x=await Go(b);await w();const W={id:x.id,title:x.title,chat_type:x.chat_type,photo_url:x.photo_url,last_message:void 0,last_message_time:void 0,unread_count:0};return r(W),await O(x.id),x}catch(b){throw console.error("Error creating chat:",b),f("Ошибка создания чата"),b}},[w,O]),y=u.useCallback(D=>{r(D),O(D.id),D.unread_count>0&&tr(D.id).catch(R=>console.error("Error marking messages as read:",R))},[O]),S=u.useCallback(()=>{r(null),s([])},[]),k=u.useCallback(async D=>{try{const{getChat:R}=await xt(async()=>{const{getChat:x}=await Promise.resolve().then(()=>Jt);return{getChat:x}},void 0);return await R(D)}catch(R){throw console.error("Error loading chat info:",R),f("Ошибка загрузки информации о чате"),R}},[]),E=u.useCallback(async(D,R)=>{try{await Jo(D,R),f(null)}catch(b){throw console.error("Error adding member to chat:",b),f("Ошибка добавления участника"),b}},[]),M=u.useCallback(async(D,R)=>{try{await Zo(D,R),f(null)}catch(b){throw console.error("Error removing member from chat:",b),f("Ошибка удаления участника"),b}},[]);return u.useEffect(()=>{m(),h(),w()},[m,h,w]),{chats:t,currentChat:o,messages:a,currentUser:l,loading:c,messagesLoading:p,error:j,isAuthError:T,sendNewMessage:C,createNewChat:P,selectChat:y,refreshChats:w,refreshMessages:()=>o&&O(o.id),loadChatInfo:k,addMemberToChat:E,removeMemberFromChat:M,clearCurrentChat:S}},Ha=({open:t,onClose:e})=>{const[o,r]=u.useState(!1),[a,s]=u.useState(null),l=async()=>{r(!0),s(null);try{const d=await Gt(),{debugAuthConfig:p,debugValidateTelegramData:v}=await xt(async()=>{const{debugAuthConfig:h,debugValidateTelegramData:w}=await Promise.resolve().then(()=>Jt);return{debugAuthConfig:h,debugValidateTelegramData:w}},void 0),{getTelegramInitData:j}=await xt(async()=>{const{getTelegramInitData:h}=await Promise.resolve().then(()=>Ba);return{getTelegramInitData:h}},void 0);let f,T,g=[];try{f=await p()}catch{f={error:"Не удалось получить конфигурацию сервера"}}const m=j();if(m)try{T=await v(m)}catch{T={error:"Не удалось протестировать валидацию"}}switch(d){case"server_no_token":g=["Администратор должен установить переменную TELEGRAM_BOT_TOKEN на сервере","Получите токен в @BotFather и добавьте его в настройки Heroku","Перезапустите приложение после установки токена"];break;case"validation_failed":g=["Проверьте правильность токена бота в @BotFather","Убедитесь, что приложение открыто из Telegram","Токен должен соответствовать боту, через который открыто приложение"];break;case"validation_success":g=["Валидация прошла успешно, проблема может быть временной","Попробуйте перезагрузить приложение","Проверьте интернет-соединение"];break;default:g=["Убедитесь, что приложение открыто из Telegram","Проверьте интернет-соединение","Обратитесь к администратору с результатами диагностики"]}s({status:d,serverConfig:f,validationResult:T,recommendations:g})}catch{s({status:"error",recommendations:["Произошла ошибка при диагностике","Проверьте консоль браузера для подробностей"]})}finally{r(!1)}},i=d=>{switch(d){case"validation_success":return"success";case"server_no_token":case"validation_failed":return"error";default:return"warning"}},c=d=>{switch(d){case"server_no_token":return"Токен бота не установлен";case"validation_failed":return"Валидация не прошла";case"validation_success":return"Валидация успешна";case"server_config_error":return"Ошибка конфигурации сервера";case"validation_error":return"Ошибка валидации";case"no_data":return"Нет данных авторизации";case"general_error":return"Общая ошибка";default:return"Неизвестный статус"}};return n.jsxs(Ft,{open:t,onClose:e,maxWidth:"md",fullWidth:!0,children:[n.jsx(qt,{children:"🔬 Диагностика проблемы авторизации"}),n.jsxs(Vt,{children:[!o&&!a&&n.jsx(B,{sx:{textAlign:"center",py:3},children:n.jsx(I,{variant:"body1",sx:{mb:2},children:'Нажмите "Запустить диагностику" для проверки проблемы авторизации'})}),o&&n.jsxs(B,{sx:{display:"flex",alignItems:"center",justifyContent:"center",py:4},children:[n.jsx(_e,{sx:{mr:2}}),n.jsx(I,{children:"Выполняется диагностика..."})]}),a&&n.jsxs(B,{sx:{py:2},children:[n.jsxs(B,{sx:{mb:3},children:[n.jsx(I,{variant:"h6",sx:{mb:1},children:"Результат диагностики:"}),n.jsx(Ro,{label:c(a.status),color:i(a.status),sx:{mb:2}})]}),a.serverConfig&&n.jsxs(B,{sx:{mb:3},children:[n.jsx(I,{variant:"h6",sx:{mb:1},children:"Конфигурация сервера:"}),n.jsxs(We,{severity:a.serverConfig.telegram_bot_token_set?"success":"error",children:[n.jsxs(I,{variant:"body2",children:["Токен бота: ",a.serverConfig.telegram_bot_token_set?"✅ Установлен":"❌ Не установлен"]}),n.jsxs(I,{variant:"body2",children:["Режим отладки: ",a.serverConfig.debug_mode?"Включен":"Выключен"]})]})]}),a.validationResult&&n.jsxs(B,{sx:{mb:3},children:[n.jsx(I,{variant:"h6",sx:{mb:1},children:"Результат валидации:"}),n.jsx(We,{severity:a.validationResult.success?"success":"error",children:n.jsxs(I,{variant:"body2",children:["Валидация: ",a.validationResult.success?"✅ Успешна":"❌ Не прошла"]})})]}),n.jsxs(B,{sx:{mb:2},children:[n.jsx(I,{variant:"h6",sx:{mb:1},children:"Рекомендации:"}),a.recommendations.map((d,p)=>n.jsxs(I,{variant:"body2",sx:{mb:1,pl:2},children:["• ",d]},p))]})]})]}),n.jsxs(Ht,{children:[!a&&n.jsx(oe,{onClick:l,disabled:o,variant:"contained",color:"primary",children:"Запустить диагностику"}),a&&n.jsx(oe,{onClick:l,variant:"outlined",children:"Повторить диагностику"}),n.jsx(oe,{onClick:e,children:"Закрыть"})]})]})},Va=({open:t,onClose:e,currentChat:o,loadChatInfo:r,addMemberToChat:a,removeMemberFromChat:s,currentUserId:l})=>{var b;const[i,c]=u.useState(null),[d,p]=u.useState(!1),[v,j]=u.useState(null),[f,T]=u.useState(""),[g,m]=u.useState(""),[h,w]=u.useState("username"),[O,C]=u.useState(!1),[P,y]=u.useState(null);u.useEffect(()=>{t&&o&&S()},[t,o]);const S=async()=>{if(o)try{p(!0),j(null);const x=await r(o.id);c(x)}catch(x){j("Не удалось загрузить информацию о чате"),console.error("Error loading chat details:",x)}finally{p(!1)}},k=async x=>{o&&await a(o.id,x)},E=async x=>{if(!o)return;const W=await Et(o.id,x);W.status==="added"?y({type:"success",message:`✅ @${x} найден и добавлен в чат!`}):W.status==="invited"&&y({type:"info",message:`📨 @${x} не найден в базе. Приглашение создано - пользователь будет добавлен при входе в приложение.`}),setTimeout(()=>y(null),5e3)},M=async()=>{if(!f.trim())return;const x=f.trim(),W=parseInt(x);try{C(!0),j(null),isNaN(W)?await E(x.replace(/^@/,"")):await k(W),T(""),await S()}catch(_){console.error("Error adding member (ID path):",_),j("Не удалось добавить участника")}finally{C(!1)}},D=async()=>{if(!(!g.trim()||!o))try{C(!0),j(null),y(null);const x=await Et(o.id,g.trim());x.status==="added"?(y({type:"success",message:`✅ @${g.trim()} добавлен в чат!`}),m(""),await S()):x.status==="invited"&&(y({type:"info",message:`📨 Приглашение отправлено @${g.trim()}. Пользователь будет добавлен автоматически при входе в приложение.`}),m("")),setTimeout(()=>y(null),5e3)}catch(x){console.error("Error adding member by username:",x),y({type:"warning",message:"Не удалось добавить участника. Проверьте username и попробуйте снова."})}finally{C(!1)}},R=async x=>{if(o)try{j(null),await s(o.id,x),await S()}catch(W){j("Не удалось удалить участника"),console.error("Error removing member:",W)}};return o?n.jsxs(Ft,{open:t,onClose:e,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{bgcolor:"rgba(35, 43, 59, 0.95)",color:"white"}},children:[n.jsxs(qt,{sx:{display:"flex",alignItems:"center",gap:2},children:[n.jsx(yt,{src:o.photo_url||void 0,sx:{bgcolor:"#4a9eff"},children:o.title?o.title[0].toUpperCase():n.jsx(yo,{})}),n.jsxs(B,{children:[n.jsx(I,{variant:"h6",children:o.title||"Безымянный чат"}),n.jsx(I,{variant:"caption",sx:{color:"#8b95a1"},children:o.chat_type==="private"?"Личный чат":"Групповой чат"})]})]}),n.jsxs(Vt,{children:[v&&n.jsx(We,{severity:"error",sx:{mb:2},children:v}),d?n.jsx(B,{sx:{display:"flex",justifyContent:"center",py:3},children:n.jsx(_e,{sx:{color:"#4a9eff"}})}):i?n.jsxs(n.Fragment,{children:[n.jsxs(B,{sx:{mb:3},children:[n.jsx(I,{variant:"subtitle1",sx:{mb:1,fontWeight:600},children:"Информация"}),n.jsxs(I,{variant:"body2",sx:{color:"#8b95a1",mb:1},children:["ID чата: ",i.id]}),n.jsxs(I,{variant:"body2",sx:{color:"#8b95a1",mb:1},children:["Создан: ",new Date(i.created_at).toLocaleDateString("ru-RU")]}),i.description&&n.jsxs(I,{variant:"body2",sx:{color:"#8b95a1"},children:["Описание: ",i.description]})]}),n.jsxs(B,{sx:{mb:3},children:[n.jsxs(I,{variant:"subtitle1",sx:{mb:2,fontWeight:600},children:["Участники (",((b=i.members)==null?void 0:b.length)||0,")"]}),i.members&&i.members.length>0?n.jsx(Oo,{sx:{maxHeight:200,overflow:"auto"},children:i.members.map(x=>n.jsxs(Do,{sx:{bgcolor:"rgba(43, 52, 65, 0.5)",borderRadius:1,mb:1},children:[n.jsx(Fo,{children:n.jsx(yt,{src:x.profile_photo_url||void 0,sx:{bgcolor:"#4a9eff"},children:x.first_name?x.first_name[0].toUpperCase():n.jsx(yo,{})})}),n.jsx(Ho,{primary:n.jsxs(B,{sx:{display:"flex",alignItems:"center",gap:1},children:[n.jsxs(I,{children:[x.first_name," ",x.last_name]}),x.is_admin&&n.jsx(Ro,{icon:n.jsx(Ea,{}),label:"Админ",size:"small",sx:{bgcolor:"#4a9eff",color:"white",fontSize:"0.7rem"}})]}),secondary:n.jsx(I,{variant:"caption",sx:{color:"#8b95a1"},children:x.username?`@${x.username}`:`ID: ${x.telegram_id}`})}),l!==x.telegram_id&&n.jsx(It,{title:"Удалить участника",children:n.jsx(et,{onClick:()=>R(x.telegram_id),sx:{color:"#f44336","&:hover":{bgcolor:"rgba(244, 67, 54, 0.1)"}},children:n.jsx(Wa,{})})})]},x.id))}):n.jsx(I,{variant:"body2",sx:{color:"#8b95a1",textAlign:"center",py:2},children:"Нет участников"})]}),n.jsxs(B,{children:[n.jsx(I,{variant:"subtitle1",sx:{mb:2,fontWeight:600},children:"Добавить участника"}),P&&n.jsx(We,{severity:P.type==="success"?"success":P.type==="info"?"info":"warning",sx:{mb:2,"& .MuiAlert-message":{color:"white"},bgcolor:P.type==="success"?"rgba(76, 175, 80, 0.2)":P.type==="info"?"rgba(33, 150, 243, 0.2)":"rgba(255, 152, 0, 0.2)",border:`1px solid ${P.type==="success"?"#4CAF50":P.type==="info"?"#2196F3":"#FF9800"}`},children:P.message}),n.jsxs(B,{sx:{display:"flex",gap:1,mb:2},children:[n.jsx(oe,{variant:h==="username"?"contained":"outlined",onClick:()=>w("username"),size:"small",sx:{bgcolor:h==="username"?"#4a9eff":"transparent",color:h==="username"?"white":"#4a9eff",borderColor:"#4a9eff","&:hover":{bgcolor:h==="username"?"#3d8bdb":"rgba(74, 158, 255, 0.1)"}},children:"По @username"}),n.jsx(oe,{variant:h==="id"?"contained":"outlined",onClick:()=>w("id"),size:"small",sx:{bgcolor:h==="id"?"#4a9eff":"transparent",color:h==="id"?"white":"#4a9eff",borderColor:"#4a9eff","&:hover":{bgcolor:h==="id"?"#3d8bdb":"rgba(74, 158, 255, 0.1)"}},children:"По ID (авто)"})]}),h==="username"?n.jsxs(B,{sx:{display:"flex",gap:1},children:[n.jsx(tt,{size:"small",placeholder:"@username пользователя",value:g,onChange:x=>m(x.target.value),helperText:"💡 Если пользователь уже использовал приложение - добавится сразу. Если нет - получит приглашение.",sx:{flex:1,"& .MuiOutlinedInput-root":{color:"white","& fieldset":{borderColor:"rgba(255, 255, 255, 0.3)"},"&:hover fieldset":{borderColor:"#4a9eff"},"&.Mui-focused fieldset":{borderColor:"#4a9eff"}},"& .MuiFormHelperText-root":{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem"}}}),n.jsx(oe,{variant:"contained",onClick:D,disabled:!g.trim()||O,startIcon:O?n.jsx(_e,{size:16}):n.jsx(wo,{}),sx:{bgcolor:"#4a9eff","&:hover":{bgcolor:"#3d8bdb"},minWidth:"120px"},children:O?"Поиск...":"Добавить"})]}):n.jsxs(B,{sx:{display:"flex",gap:1},children:[n.jsx(tt,{size:"small",placeholder:"ID или @username",value:f,onChange:x=>T(x.target.value),helperText:"💡 Можете ввести как Telegram ID (числа), так и @username - система определит автоматически",sx:{flex:1,"& .MuiOutlinedInput-root":{color:"white","& fieldset":{borderColor:"rgba(255, 255, 255, 0.3)"},"&:hover fieldset":{borderColor:"#4a9eff"},"&.Mui-focused fieldset":{borderColor:"#4a9eff"}},"& .MuiFormHelperText-root":{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem"}}}),n.jsx(oe,{variant:"contained",onClick:M,disabled:!f.trim()||O,startIcon:O?n.jsx(_e,{size:16}):n.jsx(wo,{}),sx:{bgcolor:"#4a9eff","&:hover":{bgcolor:"#3d8bdb"},minWidth:"120px"},children:O?"Поиск...":"Добавить"})]})]})]}):n.jsx(I,{variant:"body2",sx:{textAlign:"center",py:3,color:"#8b95a1"},children:"Не удалось загрузить информацию о чате"})]}),n.jsx(Ht,{children:n.jsx(oe,{onClick:e,sx:{color:"#8b95a1"},children:"Закрыть"})})]}):null},es=()=>{const t=$t(),e=Cr(t.breakpoints.down("md")),[o,r]=u.useState(""),[a,s]=u.useState(!1),[l,i]=u.useState(""),[c,d]=u.useState(""),[p,v]=u.useState(!1),[j,f]=u.useState(!1),T=u.useRef(null),{chats:g,currentChat:m,messages:h,currentUser:w,loading:O,messagesLoading:C,error:P,isAuthError:y,sendNewMessage:S,createNewChat:k,selectChat:E,loadChatInfo:M,addMemberToChat:D,removeMemberFromChat:R,clearCurrentChat:b}=Fa(),x=()=>{var A;(A=T.current)==null||A.scrollIntoView({behavior:"smooth"})},W=()=>{b()};u.useEffect(x,[h]);const _=async()=>{o.trim()===""||!m||(await S(m.id,o),r(""))},L=A=>{A.key==="Enter"&&!A.shiftKey&&(A.preventDefault(),_())},H=async()=>{if(l.trim()!=="")try{const A=[];if(c.trim()){const U=c.split(",").map(z=>parseInt(z.trim())).filter(z=>!isNaN(z)&&z>0);A.push(...U)}await k(l.trim(),A),i(""),d(""),s(!1)}catch(A){console.error("Error creating chat:",A)}},q=A=>new Date(A).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"}),X=A=>{const U=new Date(A),z=new Date,G=new Date(z);return G.setDate(G.getDate()-1),U.toDateString()===z.toDateString()?"Сегодня":U.toDateString()===G.toDateString()?"Вчера":U.toLocaleDateString("ru-RU",{day:"numeric",month:"short"})},ne=A=>{const U=A.sender;return U.username?`@${U.username}`:`${U.first_name}${U.last_name?` ${U.last_name}`:""}`},N=A=>w&&A.sender_id===w.id;return O?n.jsx(B,{sx:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"rgba(35, 43, 59, 0.95)"},children:n.jsx(_e,{sx:{color:"#4a9eff"}})}):y?n.jsxs(B,{sx:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",bgcolor:"rgba(35, 43, 59, 0.95)",p:3},children:[n.jsxs(We,{severity:"error",sx:{mb:3,maxWidth:"600px"},children:[n.jsx(I,{variant:"h6",sx:{mb:2},children:"🚫 Ошибка авторизации"}),n.jsx(I,{variant:"body1",sx:{mb:2,fontWeight:"bold"},children:"Проблема с авторизацией на сервере"}),n.jsx(I,{variant:"body2",sx:{mb:2},children:"Сервер отклоняет авторизацию. Возможные причины:"}),n.jsxs(I,{variant:"body2",component:"ul",sx:{pl:2,mb:2},children:[n.jsx("li",{children:"На сервере не настроен токен Telegram бота"}),n.jsx("li",{children:"Неправильный или истёкший токен бота"}),n.jsx("li",{children:"Проблема с подписью данных авторизации"}),n.jsx("li",{children:"Приложение запущено не из Telegram"})]}),n.jsx(I,{variant:"body2",sx:{mb:2},children:n.jsx("strong",{children:"Что делать:"})}),n.jsxs(I,{variant:"body2",component:"ul",sx:{pl:2,mb:2},children:[n.jsx("li",{children:'Нажмите "Диагностика" для подробной проверки'}),n.jsx("li",{children:"Убедитесь, что приложение открыто из Telegram"}),n.jsx("li",{children:"Если вы администратор - проверьте настройки сервера"}),n.jsx("li",{children:"Если проблема повторяется - обратитесь в поддержку"})]})]}),n.jsxs(B,{sx:{display:"flex",gap:2,flexWrap:"wrap",justifyContent:"center"},children:[n.jsx(oe,{variant:"contained",onClick:()=>v(!0),sx:{bgcolor:"#f44336","&:hover":{bgcolor:"#d32f2f"}},children:"🔬 Диагностика проблемы"}),n.jsx(oe,{variant:"contained",onClick:()=>window.location.reload(),sx:{bgcolor:"#4a9eff","&:hover":{bgcolor:"#3d8bdb"}},children:"🔄 Перезагрузить приложение"}),n.jsx(oe,{variant:"outlined",onClick:()=>{var A;(A=window.Telegram)!=null&&A.WebApp?window.Telegram.WebApp.close():window.history.back()},sx:{borderColor:"#4a9eff",color:"#4a9eff","&:hover":{borderColor:"#3d8bdb",color:"#3d8bdb"}},children:"⬅️ Назад"})]})]}):n.jsxs(B,{sx:{height:"100vh",display:"flex",bgcolor:"rgba(35, 43, 59, 0.95)",color:"white",overflow:"hidden"},children:[n.jsxs(B,{sx:{width:e?"100%":"350px",display:e&&m?"none":"flex",flexDirection:"column",borderRight:"1px solid rgba(43, 52, 65, 1)",bgcolor:"rgba(35, 43, 59, 0.95)"},children:[n.jsxs(B,{sx:{p:2,borderBottom:"1px solid rgba(43, 52, 65, 1)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsx(I,{variant:"h6",sx:{fontWeight:600},children:"Чаты"}),n.jsx(It,{title:"Создать новый чат",children:n.jsx(et,{onClick:()=>s(!0),sx:{bgcolor:"#4a9eff",color:"white","&:hover":{bgcolor:"#3d8bdb"}},children:n.jsx(Ia,{})})})]}),n.jsx(Oo,{sx:{flex:1,overflow:"auto",p:0},children:g.map(A=>n.jsx(ro.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:n.jsx(Do,{disablePadding:!0,sx:{borderBottom:"1px solid rgba(43, 52, 65, 0.5)"},children:n.jsxs(jr,{selected:(m==null?void 0:m.id)===A.id,onClick:()=>E(A),sx:{py:e?2:1.5,px:e?1.5:2,bgcolor:(m==null?void 0:m.id)===A.id?"rgba(74, 158, 255, 0.1)":"transparent","&:hover":{bgcolor:(m==null?void 0:m.id)===A.id?"rgba(74, 158, 255, 0.15)":"rgba(255, 255, 255, 0.05)"},minHeight:e?72:"auto"},children:[n.jsx(Fo,{children:n.jsx(Qn,{badgeContent:A.unread_count,color:"error",invisible:A.unread_count===0,children:n.jsx(yt,{src:A.photo_url||void 0,sx:{bgcolor:"#4a9eff",width:e?50:45,height:e?50:45},children:A.title?A.title[0].toUpperCase():n.jsx(Dt,{})})})}),n.jsx(Ho,{primary:n.jsx(I,{variant:"body1",sx:{fontWeight:A.unread_count>0?600:400,color:"white"},children:A.title||"Безымянный чат"}),secondary:n.jsxs(B,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx(I,{variant:"caption",sx:{color:"#8b95a1",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"150px"},children:A.last_message||"Нет сообщений"}),A.last_message_time&&n.jsx(I,{variant:"caption",sx:{color:"#8b95a1",fontSize:"0.7rem",ml:1},children:X(A.last_message_time)})]})})]})})},A.id))})]}),n.jsx(B,{sx:{flex:1,display:"flex",flexDirection:"column",position:"relative"},children:m?n.jsxs(n.Fragment,{children:[n.jsxs(B,{sx:{p:e?1.5:2,borderBottom:"1px solid rgba(43, 52, 65, 1)",bgcolor:"rgba(35, 43, 59, 0.95)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsxs(B,{sx:{display:"flex",alignItems:"center",flex:1},children:[e&&n.jsx(et,{onClick:W,sx:{color:"#4a9eff",mr:1,p:1,"&:hover":{bgcolor:"rgba(74, 158, 255, 0.1)"}},children:n.jsx($a,{})}),n.jsx(yt,{src:m.photo_url||void 0,sx:{bgcolor:"#4a9eff",width:e?36:40,height:e?36:40,mr:e?1.5:2},children:m.title?m.title[0].toUpperCase():n.jsx(Dt,{})}),n.jsxs(B,{sx:{flex:1,minWidth:0},children:[n.jsx(I,{variant:e?"body1":"h6",sx:{fontWeight:600,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:m.title||"Безымянный чат"}),n.jsx(I,{variant:"caption",sx:{color:"#8b95a1",fontSize:e?"0.7rem":"0.75rem"},children:m.chat_type==="private"?"Личный чат":"Групповой чат"})]})]}),n.jsx(It,{title:"Информация о чате",children:n.jsx(et,{onClick:()=>f(!0),sx:{color:"#4a9eff",p:e?1:1.5,"&:hover":{bgcolor:"rgba(74, 158, 255, 0.1)"}},children:n.jsx(_a,{fontSize:e?"small":"medium"})})})]}),n.jsxs(B,{sx:{flex:1,overflow:"auto",p:e?1:1.5,bgcolor:"rgba(35, 43, 59, 0.95)",backgroundImage:`url(${no})`,backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"local","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(35, 43, 59, 0.8)",pointerEvents:"none",zIndex:0},position:"relative","&::-webkit-scrollbar":{width:"6px"},"&::-webkit-scrollbar-track":{background:"transparent"},"&::-webkit-scrollbar-thumb":{background:"rgba(255, 255, 255, 0.2)",borderRadius:"3px"},"&::-webkit-scrollbar-thumb:hover":{background:"rgba(255, 255, 255, 0.3)"}},children:[P&&n.jsx(We,{severity:"error",sx:{mb:2,zIndex:1,position:"relative"},children:P}),C?n.jsx(B,{sx:{display:"flex",justifyContent:"center",py:4,zIndex:1,position:"relative"},children:n.jsx(_e,{sx:{color:"#4a9eff"}})}):n.jsx(ka,{children:h.map(A=>n.jsx(ro.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},style:{display:"flex",justifyContent:N(A)?"flex-end":"flex-start",marginBottom:"12px",position:"relative",zIndex:1},children:n.jsxs(B,{sx:{maxWidth:e?"85%":"70%",px:e?1.5:2,py:e?1:1.2,borderRadius:N(A)?"18px 18px 4px 18px":"18px 18px 18px 4px",bgcolor:N(A)?"#4a9eff":"rgba(43, 52, 65, 0.9)",color:"white",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",wordBreak:"break-word"},children:[!N(A)&&n.jsx(I,{variant:"caption",sx:{color:"#40C4FF",fontWeight:600,display:"block",mb:.5},children:ne(A)}),n.jsx(I,{variant:"body1",sx:{mb:.5,fontSize:e?"0.9rem":"0.95rem",lineHeight:1.4},children:A.text}),n.jsx(I,{variant:"caption",sx:{opacity:.7,fontSize:e?"0.65rem":"0.7rem",display:"block",textAlign:"right",mt:.25,color:N(A)?"rgba(255,255,255,0.8)":"#8b95a1"},children:q(A.created_at)})]})},A.id))}),n.jsx("div",{ref:T,style:{position:"relative",zIndex:1}})]}),n.jsxs(B,{sx:{p:e?1.5:2,bgcolor:"rgba(35, 43, 59, 0.95)",display:"flex",gap:e?1:1.5,alignItems:"flex-end",borderTop:"1px solid rgba(43, 52, 65, 1)",pb:e?"max(1.5rem, env(safe-area-inset-bottom))":2},children:[n.jsx(tt,{fullWidth:!0,multiline:!0,maxRows:e?3:4,value:o,onChange:A=>r(A.target.value),onKeyPress:L,placeholder:"Напишите сообщение...",variant:"outlined",size:"small",sx:{"& .MuiOutlinedInput-root":{borderRadius:"20px",bgcolor:"rgba(35, 46, 60, 1)",border:"none",fontSize:e?"0.9rem":"0.95rem",color:"white","& fieldset":{border:"1px solid rgba(60, 72, 84, 1)"},"&:hover fieldset":{border:"1px solid #4a9eff"},"&.Mui-focused fieldset":{border:"2px solid #4a9eff"},"& .MuiInputBase-input":{padding:e?"10px 14px":"12px 16px",color:"white","&::placeholder":{color:"rgba(255, 255, 255, 0.5)",opacity:1}}}}}),n.jsx(et,{onClick:_,disabled:!o.trim(),size:"medium",sx:{bgcolor:"#4a9eff",color:"white",width:e?40:44,height:e?40:44,minWidth:e?40:44,minHeight:e?40:44,"&:hover":{bgcolor:"#3d8bdb",transform:"scale(1.05)"},"&:disabled":{bgcolor:"rgba(60, 72, 84, 1)",color:"#8b95a1"},transition:"all 0.2s ease"},children:n.jsx(Pr,{sx:{fontSize:e?"1.1rem":"1.2rem"}})})]})]}):n.jsx(B,{sx:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",bgcolor:"rgba(35, 43, 59, 0.95)",backgroundImage:`url(${no})`,backgroundSize:"cover",backgroundPosition:"center","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(35, 43, 59, 0.8)",pointerEvents:"none"}},children:n.jsxs(B,{sx:{position:"relative",zIndex:1,textAlign:"center"},children:[n.jsx(Dt,{sx:{fontSize:80,color:"#4a9eff",mb:2}}),n.jsx(I,{variant:"h5",sx:{mb:1,color:"white"},children:"Выберите чат"}),n.jsx(I,{variant:"body1",sx:{color:"#8b95a1"},children:"Выберите чат из списка или создайте новый"})]})})}),n.jsxs(Ft,{open:a,onClose:()=>s(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{bgcolor:"rgba(35, 43, 59, 0.95)",color:"white"}},children:[n.jsx(qt,{children:"Создать новый чат"}),n.jsxs(Vt,{children:[n.jsx(tt,{autoFocus:!0,margin:"dense",label:"Название чата",fullWidth:!0,variant:"outlined",value:l,onChange:A=>i(A.target.value),sx:{mb:2,"& .MuiOutlinedInput-root":{color:"white","& fieldset":{borderColor:"rgba(255, 255, 255, 0.3)"},"&:hover fieldset":{borderColor:"#4a9eff"},"&.Mui-focused fieldset":{borderColor:"#4a9eff"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.7)","&.Mui-focused":{color:"#4a9eff"}}}}),n.jsx(tt,{margin:"dense",label:"ID участников (через запятую)",fullWidth:!0,variant:"outlined",placeholder:"Например: 123456789, 987654321",value:c,onChange:A=>d(A.target.value),helperText:"Введите Telegram ID пользователей через запятую. Чтобы узнать свой ID, используйте @userinfobot в Telegram",sx:{mb:1,"& .MuiOutlinedInput-root":{color:"white","& fieldset":{borderColor:"rgba(255, 255, 255, 0.3)"},"&:hover fieldset":{borderColor:"#4a9eff"},"&.Mui-focused fieldset":{borderColor:"#4a9eff"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.7)","&.Mui-focused":{color:"#4a9eff"}},"& .MuiFormHelperText-root":{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem"}}})]}),n.jsxs(Ht,{children:[n.jsx(oe,{onClick:()=>s(!1),sx:{color:"#8b95a1"},children:"Отмена"}),n.jsx(oe,{onClick:H,disabled:!l.trim(),sx:{bgcolor:"#4a9eff",color:"white","&:hover":{bgcolor:"#3d8bdb"},"&:disabled":{bgcolor:"rgba(60, 72, 84, 1)",color:"#8b95a1"}},children:"Создать"})]})]}),n.jsx(Ha,{open:p,onClose:()=>v(!1)}),n.jsx(Va,{open:j,onClose:()=>f(!1),currentChat:m,loadChatInfo:M,addMemberToChat:D,removeMemberFromChat:R,currentUserId:w==null?void 0:w.telegram_id})]})};export{es as default};
