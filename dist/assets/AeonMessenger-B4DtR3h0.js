import{n as ue,l as fe,r as d,o as ge,ac as Pr,a as Dt,a8 as rt,G as Tt,j as r,p as Q,q as ie,v as he,x as le,H as oe,E as Xt,w as Dr,a0 as ao,aa as Io,t as re,z as Er,T as W,y as Yt,ad as $o,ae as io,a1 as lo,af as Or,ag as co,ah as kr,ai as Ir,aj as _o,ak as $r,al as _r,am as Wr,an as Br,F as me,ao as Bt,c as Lr,d as zr,ap as Nr,aq as po,ar as uo,as as Ur,at as Fr,au as Hr,av as fo,aw as Vr,ax as qr,ay as Gr,az as Xr,aA as Yr,aB as Kr,B as z,aC as lt,a9 as Wo,aD as Bo,b as Jr,m as go,aE as Zr,e as ho}from"./index-DuOCw32j.js";import{a as Qr,S as es}from"./index-dTZGbqfz.js";import{a as ts,g as mo,u as Lo,o as vo,P as os,b as rs,F as xo,M as ss,B as ns,c as as,G as is,T as nt}from"./TextField-DFfWqHVB.js";import{u as zo,C as Se}from"./CircularProgress-BI6lT8Bg.js";import{C as st,a as ls}from"./CheckCircle-le6C0R8q.js";import{A as ke}from"./Alert-BmZJ4qNB.js";import{B as ve}from"./Button-CcK_CWNv.js";import{I as We}from"./IconButton-CnhpCwCm.js";function cs(t){return ue("MuiCollapse",t)}fe("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const ps=t=>{const{orientation:e,classes:o}=t,s={root:["root",`${e}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${e}`],wrapperInner:["wrapperInner",`${e}`]};return he(s,cs,o)},ds=Q("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[e.root,e[o.orientation],o.state==="entered"&&e.entered,o.state==="exited"&&!o.in&&o.collapsedSize==="0px"&&e.hidden]}})(le(({theme:t})=>({height:0,overflow:"hidden",transition:t.transitions.create("height"),variants:[{props:{orientation:"horizontal"},style:{height:"auto",width:0,transition:t.transitions.create("width")}},{props:{state:"entered"},style:{height:"auto",overflow:"visible"}},{props:{state:"entered",orientation:"horizontal"},style:{width:"auto"}},{props:({ownerState:e})=>e.state==="exited"&&!e.in&&e.collapsedSize==="0px",style:{visibility:"hidden"}}]}))),us=Q("div",{name:"MuiCollapse",slot:"Wrapper"})({display:"flex",width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),fs=Q("div",{name:"MuiCollapse",slot:"WrapperInner"})({width:"100%",variants:[{props:{orientation:"horizontal"},style:{width:"auto",height:"100%"}}]}),Lt=d.forwardRef(function(e,o){const s=ge({props:e,name:"MuiCollapse"}),{addEndListener:n,children:a,className:c,collapsedSize:l="0px",component:i,easing:h,in:p,onEnter:y,onEntered:f,onEntering:v,onExit:C,onExited:x,onExiting:w,orientation:g="vertical",style:b,timeout:A=Pr.standard,TransitionComponent:T=ts,...S}=s,m={...s,orientation:g,collapsedSize:l},j=ps(m),D=Dt(),O=rt(),M=d.useRef(null),$=d.useRef(),V=typeof l=="number"?`${l}px`:l,_=g==="horizontal",q=_?"width":"height",X=d.useRef(null),H=Tt(o,X),B=I=>G=>{if(I){const J=X.current;G===void 0?I(J):I(J,G)}},u=()=>M.current?M.current[_?"clientWidth":"clientHeight"]:0,P=B((I,G)=>{M.current&&_&&(M.current.style.position="absolute"),I.style[q]=V,y&&y(I,G)}),E=B((I,G)=>{const J=u();M.current&&_&&(M.current.style.position="");const{duration:ne,easing:ae}=mo({style:b,timeout:A,easing:h},{mode:"enter"});if(A==="auto"){const R=D.transitions.getAutoHeightDuration(J);I.style.transitionDuration=`${R}ms`,$.current=R}else I.style.transitionDuration=typeof ne=="string"?ne:`${ne}ms`;I.style[q]=`${J}px`,I.style.transitionTimingFunction=ae,v&&v(I,G)}),k=B((I,G)=>{I.style[q]="auto",f&&f(I,G)}),L=B(I=>{I.style[q]=`${u()}px`,C&&C(I)}),Y=B(x),F=B(I=>{const G=u(),{duration:J,easing:ne}=mo({style:b,timeout:A,easing:h},{mode:"exit"});if(A==="auto"){const ae=D.transitions.getAutoHeightDuration(G);I.style.transitionDuration=`${ae}ms`,$.current=ae}else I.style.transitionDuration=typeof J=="string"?J:`${J}ms`;I.style[q]=V,I.style.transitionTimingFunction=ne,w&&w(I)}),K=I=>{A==="auto"&&O.start($.current||0,I),n&&n(X.current,I)};return r.jsx(T,{in:p,onEnter:P,onEntered:k,onEntering:E,onExit:L,onExited:Y,onExiting:F,addEndListener:K,nodeRef:X,timeout:A==="auto"?null:A,...S,children:(I,{ownerState:G,...J})=>r.jsx(ds,{as:i,className:ie(j.root,c,{entered:j.entered,exited:!p&&V==="0px"&&j.hidden}[I]),style:{[_?"minWidth":"minHeight"]:V,...b},ref:H,ownerState:{...m,state:I},...J,children:r.jsx(us,{ownerState:{...m,state:I},className:j.wrapper,ref:M,children:r.jsx(fs,{ownerState:{...m,state:I},className:j.wrapperInner,children:a})})})})});Lt&&(Lt.muiSupportAuto=!0);const No=d.createContext({});function gs(t){return ue("MuiAccordion",t)}const vt=fe("MuiAccordion",["root","heading","rounded","expanded","disabled","gutters","region"]),hs=t=>{const{classes:e,square:o,expanded:s,disabled:n,disableGutters:a}=t;return he({root:["root",!o&&"rounded",s&&"expanded",n&&"disabled",!a&&"gutters"],heading:["heading"],region:["region"]},gs,e)},ms=Q(Xt,{name:"MuiAccordion",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[{[`& .${vt.region}`]:e.region},e.root,!o.square&&e.rounded,!o.disableGutters&&e.gutters]}})(le(({theme:t})=>{const e={duration:t.transitions.duration.shortest};return{position:"relative",transition:t.transitions.create(["margin"],e),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(t.vars||t).palette.divider,transition:t.transitions.create(["opacity","background-color"],e)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${vt.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${vt.disabled}`]:{backgroundColor:(t.vars||t).palette.action.disabledBackground}}}),le(({theme:t})=>({variants:[{props:e=>!e.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(t.vars||t).shape.borderRadius,borderBottomRightRadius:(t.vars||t).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:e=>!e.disableGutters,style:{[`&.${vt.expanded}`]:{margin:"16px 0"}}}]}))),vs=Q("h3",{name:"MuiAccordion",slot:"Heading"})({all:"unset"}),xs=d.forwardRef(function(e,o){const s=ge({props:e,name:"MuiAccordion"}),{children:n,className:a,defaultExpanded:c=!1,disabled:l=!1,disableGutters:i=!1,expanded:h,onChange:p,square:y=!1,slots:f={},slotProps:v={},TransitionComponent:C,TransitionProps:x,...w}=s,[g,b]=Lo({controlled:h,default:c,name:"Accordion",state:"expanded"}),A=d.useCallback(u=>{b(!g),p&&p(u,!g)},[g,p,b]),[T,...S]=d.Children.toArray(n),m=d.useMemo(()=>({expanded:g,disabled:l,disableGutters:i,toggle:A}),[g,l,i,A]),j={...s,square:y,disabled:l,disableGutters:i,expanded:g},D=hs(j),O={transition:C,...f},M={transition:x,...v},$={slots:O,slotProps:M},[V,_]=oe("root",{elementType:ms,externalForwardedProps:{...$,...w},className:ie(D.root,a),shouldForwardComponentProp:!0,ownerState:j,ref:o,additionalProps:{square:y}}),[q,X]=oe("heading",{elementType:vs,externalForwardedProps:$,className:D.heading,ownerState:j}),[H,B]=oe("transition",{elementType:Lt,externalForwardedProps:$,ownerState:j});return r.jsxs(V,{..._,children:[r.jsx(q,{...X,children:r.jsx(No.Provider,{value:m,children:T})}),r.jsx(H,{in:g,timeout:"auto",...B,children:r.jsx("div",{"aria-labelledby":T.props.id,id:T.props["aria-controls"],role:"region",className:D.region,children:S})})]})});function bs(t){return ue("MuiAccordionDetails",t)}fe("MuiAccordionDetails",["root"]);const ys=t=>{const{classes:e}=t;return he({root:["root"]},bs,e)},ws=Q("div",{name:"MuiAccordionDetails",slot:"Root"})(le(({theme:t})=>({padding:t.spacing(1,2,2)}))),Cs=d.forwardRef(function(e,o){const s=ge({props:e,name:"MuiAccordionDetails"}),{className:n,...a}=s,c=s,l=ys(c);return r.jsx(ws,{className:ie(l.root,n),ref:o,ownerState:c,...a})});function js(t){return ue("MuiAccordionSummary",t)}const Fe=fe("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),Ts=t=>{const{classes:e,expanded:o,disabled:s,disableGutters:n}=t;return he({root:["root",o&&"expanded",s&&"disabled",!n&&"gutters"],focusVisible:["focusVisible"],content:["content",o&&"expanded",!n&&"contentGutters"],expandIconWrapper:["expandIconWrapper",o&&"expanded"]},js,e)},Ss=Q(Dr,{name:"MuiAccordionSummary",slot:"Root"})(le(({theme:t})=>{const e={duration:t.transitions.duration.shortest};return{display:"flex",width:"100%",minHeight:48,padding:t.spacing(0,2),transition:t.transitions.create(["min-height","background-color"],e),[`&.${Fe.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${Fe.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`&:hover:not(.${Fe.disabled})`]:{cursor:"pointer"},variants:[{props:o=>!o.disableGutters,style:{[`&.${Fe.expanded}`]:{minHeight:64}}}]}})),As=Q("span",{name:"MuiAccordionSummary",slot:"Content"})(le(({theme:t})=>({display:"flex",textAlign:"start",flexGrow:1,margin:"12px 0",variants:[{props:e=>!e.disableGutters,style:{transition:t.transitions.create(["margin"],{duration:t.transitions.duration.shortest}),[`&.${Fe.expanded}`]:{margin:"20px 0"}}}]}))),Ms=Q("span",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper"})(le(({theme:t})=>({display:"flex",color:(t.vars||t).palette.action.active,transform:"rotate(0deg)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest}),[`&.${Fe.expanded}`]:{transform:"rotate(180deg)"}}))),Rs=d.forwardRef(function(e,o){const s=ge({props:e,name:"MuiAccordionSummary"}),{children:n,className:a,expandIcon:c,focusVisibleClassName:l,onClick:i,slots:h,slotProps:p,...y}=s,{disabled:f=!1,disableGutters:v,expanded:C,toggle:x}=d.useContext(No),w=M=>{x&&x(M),i&&i(M)},g={...s,expanded:C,disabled:f,disableGutters:v},b=Ts(g),A={slots:h,slotProps:p},[T,S]=oe("root",{ref:o,shouldForwardComponentProp:!0,className:ie(b.root,a),elementType:Ss,externalForwardedProps:{...A,...y},ownerState:g,additionalProps:{focusRipple:!1,disableRipple:!0,disabled:f,"aria-expanded":C,focusVisibleClassName:ie(b.focusVisible,l)},getSlotProps:M=>({...M,onClick:$=>{var V;(V=M.onClick)==null||V.call(M,$),w($)}})}),[m,j]=oe("content",{className:b.content,elementType:As,externalForwardedProps:A,ownerState:g}),[D,O]=oe("expandIconWrapper",{className:b.expandIconWrapper,elementType:Ms,externalForwardedProps:A,ownerState:g});return r.jsxs(T,{...S,children:[r.jsx(m,{...j,children:n}),c&&r.jsx(D,{...O,children:c})]})}),Uo=t=>{const e=d.useRef({});return d.useEffect(()=>{e.current=t}),e.current};var pe="top",ye="bottom",we="right",de="left",Kt="auto",dt=[pe,ye,we,de],He="start",ct="end",Ps="clippingParents",Fo="viewport",et="popper",Ds="reference",bo=dt.reduce(function(t,e){return t.concat([e+"-"+He,e+"-"+ct])},[]),Ho=[].concat(dt,[Kt]).reduce(function(t,e){return t.concat([e,e+"-"+He,e+"-"+ct])},[]),Es="beforeRead",Os="read",ks="afterRead",Is="beforeMain",$s="main",_s="afterMain",Ws="beforeWrite",Bs="write",Ls="afterWrite",zs=[Es,Os,ks,Is,$s,_s,Ws,Bs,Ls];function De(t){return t?(t.nodeName||"").toLowerCase():null}function xe(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Le(t){var e=xe(t).Element;return t instanceof e||t instanceof Element}function be(t){var e=xe(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Jt(t){if(typeof ShadowRoot>"u")return!1;var e=xe(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function Ns(t){var e=t.state;Object.keys(e.elements).forEach(function(o){var s=e.styles[o]||{},n=e.attributes[o]||{},a=e.elements[o];!be(a)||!De(a)||(Object.assign(a.style,s),Object.keys(n).forEach(function(c){var l=n[c];l===!1?a.removeAttribute(c):a.setAttribute(c,l===!0?"":l)}))})}function Us(t){var e=t.state,o={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,o.popper),e.styles=o,e.elements.arrow&&Object.assign(e.elements.arrow.style,o.arrow),function(){Object.keys(e.elements).forEach(function(s){var n=e.elements[s],a=e.attributes[s]||{},c=Object.keys(e.styles.hasOwnProperty(s)?e.styles[s]:o[s]),l=c.reduce(function(i,h){return i[h]="",i},{});!be(n)||!De(n)||(Object.assign(n.style,l),Object.keys(a).forEach(function(i){n.removeAttribute(i)}))})}}const Fs={name:"applyStyles",enabled:!0,phase:"write",fn:Ns,effect:Us,requires:["computeStyles"]};function Pe(t){return t.split("-")[0]}var Be=Math.max,St=Math.min,Ve=Math.round;function zt(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Vo(){return!/^((?!chrome|android).)*safari/i.test(zt())}function qe(t,e,o){e===void 0&&(e=!1),o===void 0&&(o=!1);var s=t.getBoundingClientRect(),n=1,a=1;e&&be(t)&&(n=t.offsetWidth>0&&Ve(s.width)/t.offsetWidth||1,a=t.offsetHeight>0&&Ve(s.height)/t.offsetHeight||1);var c=Le(t)?xe(t):window,l=c.visualViewport,i=!Vo()&&o,h=(s.left+(i&&l?l.offsetLeft:0))/n,p=(s.top+(i&&l?l.offsetTop:0))/a,y=s.width/n,f=s.height/a;return{width:y,height:f,top:p,right:h+y,bottom:p+f,left:h,x:h,y:p}}function Zt(t){var e=qe(t),o=t.offsetWidth,s=t.offsetHeight;return Math.abs(e.width-o)<=1&&(o=e.width),Math.abs(e.height-s)<=1&&(s=e.height),{x:t.offsetLeft,y:t.offsetTop,width:o,height:s}}function qo(t,e){var o=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(o&&Jt(o)){var s=e;do{if(s&&t.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function Ee(t){return xe(t).getComputedStyle(t)}function Hs(t){return["table","td","th"].indexOf(De(t))>=0}function Ie(t){return((Le(t)?t.ownerDocument:t.document)||window.document).documentElement}function Et(t){return De(t)==="html"?t:t.assignedSlot||t.parentNode||(Jt(t)?t.host:null)||Ie(t)}function yo(t){return!be(t)||Ee(t).position==="fixed"?null:t.offsetParent}function Vs(t){var e=/firefox/i.test(zt()),o=/Trident/i.test(zt());if(o&&be(t)){var s=Ee(t);if(s.position==="fixed")return null}var n=Et(t);for(Jt(n)&&(n=n.host);be(n)&&["html","body"].indexOf(De(n))<0;){var a=Ee(n);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||e&&a.willChange==="filter"||e&&a.filter&&a.filter!=="none")return n;n=n.parentNode}return null}function ut(t){for(var e=xe(t),o=yo(t);o&&Hs(o)&&Ee(o).position==="static";)o=yo(o);return o&&(De(o)==="html"||De(o)==="body"&&Ee(o).position==="static")?e:o||Vs(t)||e}function Qt(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function at(t,e,o){return Be(t,St(e,o))}function qs(t,e,o){var s=at(t,e,o);return s>o?o:s}function Go(){return{top:0,right:0,bottom:0,left:0}}function Xo(t){return Object.assign({},Go(),t)}function Yo(t,e){return e.reduce(function(o,s){return o[s]=t,o},{})}var Gs=function(e,o){return e=typeof e=="function"?e(Object.assign({},o.rects,{placement:o.placement})):e,Xo(typeof e!="number"?e:Yo(e,dt))};function Xs(t){var e,o=t.state,s=t.name,n=t.options,a=o.elements.arrow,c=o.modifiersData.popperOffsets,l=Pe(o.placement),i=Qt(l),h=[de,we].indexOf(l)>=0,p=h?"height":"width";if(!(!a||!c)){var y=Gs(n.padding,o),f=Zt(a),v=i==="y"?pe:de,C=i==="y"?ye:we,x=o.rects.reference[p]+o.rects.reference[i]-c[i]-o.rects.popper[p],w=c[i]-o.rects.reference[i],g=ut(a),b=g?i==="y"?g.clientHeight||0:g.clientWidth||0:0,A=x/2-w/2,T=y[v],S=b-f[p]-y[C],m=b/2-f[p]/2+A,j=at(T,m,S),D=i;o.modifiersData[s]=(e={},e[D]=j,e.centerOffset=j-m,e)}}function Ys(t){var e=t.state,o=t.options,s=o.element,n=s===void 0?"[data-popper-arrow]":s;n!=null&&(typeof n=="string"&&(n=e.elements.popper.querySelector(n),!n)||qo(e.elements.popper,n)&&(e.elements.arrow=n))}const Ks={name:"arrow",enabled:!0,phase:"main",fn:Xs,effect:Ys,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ge(t){return t.split("-")[1]}var Js={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Zs(t,e){var o=t.x,s=t.y,n=e.devicePixelRatio||1;return{x:Ve(o*n)/n||0,y:Ve(s*n)/n||0}}function wo(t){var e,o=t.popper,s=t.popperRect,n=t.placement,a=t.variation,c=t.offsets,l=t.position,i=t.gpuAcceleration,h=t.adaptive,p=t.roundOffsets,y=t.isFixed,f=c.x,v=f===void 0?0:f,C=c.y,x=C===void 0?0:C,w=typeof p=="function"?p({x:v,y:x}):{x:v,y:x};v=w.x,x=w.y;var g=c.hasOwnProperty("x"),b=c.hasOwnProperty("y"),A=de,T=pe,S=window;if(h){var m=ut(o),j="clientHeight",D="clientWidth";if(m===xe(o)&&(m=Ie(o),Ee(m).position!=="static"&&l==="absolute"&&(j="scrollHeight",D="scrollWidth")),m=m,n===pe||(n===de||n===we)&&a===ct){T=ye;var O=y&&m===S&&S.visualViewport?S.visualViewport.height:m[j];x-=O-s.height,x*=i?1:-1}if(n===de||(n===pe||n===ye)&&a===ct){A=we;var M=y&&m===S&&S.visualViewport?S.visualViewport.width:m[D];v-=M-s.width,v*=i?1:-1}}var $=Object.assign({position:l},h&&Js),V=p===!0?Zs({x:v,y:x},xe(o)):{x:v,y:x};if(v=V.x,x=V.y,i){var _;return Object.assign({},$,(_={},_[T]=b?"0":"",_[A]=g?"0":"",_.transform=(S.devicePixelRatio||1)<=1?"translate("+v+"px, "+x+"px)":"translate3d("+v+"px, "+x+"px, 0)",_))}return Object.assign({},$,(e={},e[T]=b?x+"px":"",e[A]=g?v+"px":"",e.transform="",e))}function Qs(t){var e=t.state,o=t.options,s=o.gpuAcceleration,n=s===void 0?!0:s,a=o.adaptive,c=a===void 0?!0:a,l=o.roundOffsets,i=l===void 0?!0:l,h={placement:Pe(e.placement),variation:Ge(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:n,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,wo(Object.assign({},h,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:c,roundOffsets:i})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,wo(Object.assign({},h,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:i})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const en={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Qs,data:{}};var xt={passive:!0};function tn(t){var e=t.state,o=t.instance,s=t.options,n=s.scroll,a=n===void 0?!0:n,c=s.resize,l=c===void 0?!0:c,i=xe(e.elements.popper),h=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&h.forEach(function(p){p.addEventListener("scroll",o.update,xt)}),l&&i.addEventListener("resize",o.update,xt),function(){a&&h.forEach(function(p){p.removeEventListener("scroll",o.update,xt)}),l&&i.removeEventListener("resize",o.update,xt)}}const on={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:tn,data:{}};var rn={left:"right",right:"left",bottom:"top",top:"bottom"};function jt(t){return t.replace(/left|right|bottom|top/g,function(e){return rn[e]})}var sn={start:"end",end:"start"};function Co(t){return t.replace(/start|end/g,function(e){return sn[e]})}function eo(t){var e=xe(t),o=e.pageXOffset,s=e.pageYOffset;return{scrollLeft:o,scrollTop:s}}function to(t){return qe(Ie(t)).left+eo(t).scrollLeft}function nn(t,e){var o=xe(t),s=Ie(t),n=o.visualViewport,a=s.clientWidth,c=s.clientHeight,l=0,i=0;if(n){a=n.width,c=n.height;var h=Vo();(h||!h&&e==="fixed")&&(l=n.offsetLeft,i=n.offsetTop)}return{width:a,height:c,x:l+to(t),y:i}}function an(t){var e,o=Ie(t),s=eo(t),n=(e=t.ownerDocument)==null?void 0:e.body,a=Be(o.scrollWidth,o.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),c=Be(o.scrollHeight,o.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),l=-s.scrollLeft+to(t),i=-s.scrollTop;return Ee(n||o).direction==="rtl"&&(l+=Be(o.clientWidth,n?n.clientWidth:0)-a),{width:a,height:c,x:l,y:i}}function oo(t){var e=Ee(t),o=e.overflow,s=e.overflowX,n=e.overflowY;return/auto|scroll|overlay|hidden/.test(o+n+s)}function Ko(t){return["html","body","#document"].indexOf(De(t))>=0?t.ownerDocument.body:be(t)&&oo(t)?t:Ko(Et(t))}function it(t,e){var o;e===void 0&&(e=[]);var s=Ko(t),n=s===((o=t.ownerDocument)==null?void 0:o.body),a=xe(s),c=n?[a].concat(a.visualViewport||[],oo(s)?s:[]):s,l=e.concat(c);return n?l:l.concat(it(Et(c)))}function Nt(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function ln(t,e){var o=qe(t,!1,e==="fixed");return o.top=o.top+t.clientTop,o.left=o.left+t.clientLeft,o.bottom=o.top+t.clientHeight,o.right=o.left+t.clientWidth,o.width=t.clientWidth,o.height=t.clientHeight,o.x=o.left,o.y=o.top,o}function jo(t,e,o){return e===Fo?Nt(nn(t,o)):Le(e)?ln(e,o):Nt(an(Ie(t)))}function cn(t){var e=it(Et(t)),o=["absolute","fixed"].indexOf(Ee(t).position)>=0,s=o&&be(t)?ut(t):t;return Le(s)?e.filter(function(n){return Le(n)&&qo(n,s)&&De(n)!=="body"}):[]}function pn(t,e,o,s){var n=e==="clippingParents"?cn(t):[].concat(e),a=[].concat(n,[o]),c=a[0],l=a.reduce(function(i,h){var p=jo(t,h,s);return i.top=Be(p.top,i.top),i.right=St(p.right,i.right),i.bottom=St(p.bottom,i.bottom),i.left=Be(p.left,i.left),i},jo(t,c,s));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function Jo(t){var e=t.reference,o=t.element,s=t.placement,n=s?Pe(s):null,a=s?Ge(s):null,c=e.x+e.width/2-o.width/2,l=e.y+e.height/2-o.height/2,i;switch(n){case pe:i={x:c,y:e.y-o.height};break;case ye:i={x:c,y:e.y+e.height};break;case we:i={x:e.x+e.width,y:l};break;case de:i={x:e.x-o.width,y:l};break;default:i={x:e.x,y:e.y}}var h=n?Qt(n):null;if(h!=null){var p=h==="y"?"height":"width";switch(a){case He:i[h]=i[h]-(e[p]/2-o[p]/2);break;case ct:i[h]=i[h]+(e[p]/2-o[p]/2);break}}return i}function pt(t,e){e===void 0&&(e={});var o=e,s=o.placement,n=s===void 0?t.placement:s,a=o.strategy,c=a===void 0?t.strategy:a,l=o.boundary,i=l===void 0?Ps:l,h=o.rootBoundary,p=h===void 0?Fo:h,y=o.elementContext,f=y===void 0?et:y,v=o.altBoundary,C=v===void 0?!1:v,x=o.padding,w=x===void 0?0:x,g=Xo(typeof w!="number"?w:Yo(w,dt)),b=f===et?Ds:et,A=t.rects.popper,T=t.elements[C?b:f],S=pn(Le(T)?T:T.contextElement||Ie(t.elements.popper),i,p,c),m=qe(t.elements.reference),j=Jo({reference:m,element:A,placement:n}),D=Nt(Object.assign({},A,j)),O=f===et?D:m,M={top:S.top-O.top+g.top,bottom:O.bottom-S.bottom+g.bottom,left:S.left-O.left+g.left,right:O.right-S.right+g.right},$=t.modifiersData.offset;if(f===et&&$){var V=$[n];Object.keys(M).forEach(function(_){var q=[we,ye].indexOf(_)>=0?1:-1,X=[pe,ye].indexOf(_)>=0?"y":"x";M[_]+=V[X]*q})}return M}function dn(t,e){e===void 0&&(e={});var o=e,s=o.placement,n=o.boundary,a=o.rootBoundary,c=o.padding,l=o.flipVariations,i=o.allowedAutoPlacements,h=i===void 0?Ho:i,p=Ge(s),y=p?l?bo:bo.filter(function(C){return Ge(C)===p}):dt,f=y.filter(function(C){return h.indexOf(C)>=0});f.length===0&&(f=y);var v=f.reduce(function(C,x){return C[x]=pt(t,{placement:x,boundary:n,rootBoundary:a,padding:c})[Pe(x)],C},{});return Object.keys(v).sort(function(C,x){return v[C]-v[x]})}function un(t){if(Pe(t)===Kt)return[];var e=jt(t);return[Co(t),e,Co(e)]}function fn(t){var e=t.state,o=t.options,s=t.name;if(!e.modifiersData[s]._skip){for(var n=o.mainAxis,a=n===void 0?!0:n,c=o.altAxis,l=c===void 0?!0:c,i=o.fallbackPlacements,h=o.padding,p=o.boundary,y=o.rootBoundary,f=o.altBoundary,v=o.flipVariations,C=v===void 0?!0:v,x=o.allowedAutoPlacements,w=e.options.placement,g=Pe(w),b=g===w,A=i||(b||!C?[jt(w)]:un(w)),T=[w].concat(A).reduce(function(F,K){return F.concat(Pe(K)===Kt?dn(e,{placement:K,boundary:p,rootBoundary:y,padding:h,flipVariations:C,allowedAutoPlacements:x}):K)},[]),S=e.rects.reference,m=e.rects.popper,j=new Map,D=!0,O=T[0],M=0;M<T.length;M++){var $=T[M],V=Pe($),_=Ge($)===He,q=[pe,ye].indexOf(V)>=0,X=q?"width":"height",H=pt(e,{placement:$,boundary:p,rootBoundary:y,altBoundary:f,padding:h}),B=q?_?we:de:_?ye:pe;S[X]>m[X]&&(B=jt(B));var u=jt(B),P=[];if(a&&P.push(H[V]<=0),l&&P.push(H[B]<=0,H[u]<=0),P.every(function(F){return F})){O=$,D=!1;break}j.set($,P)}if(D)for(var E=C?3:1,k=function(K){var I=T.find(function(G){var J=j.get(G);if(J)return J.slice(0,K).every(function(ne){return ne})});if(I)return O=I,"break"},L=E;L>0;L--){var Y=k(L);if(Y==="break")break}e.placement!==O&&(e.modifiersData[s]._skip=!0,e.placement=O,e.reset=!0)}}const gn={name:"flip",enabled:!0,phase:"main",fn,requiresIfExists:["offset"],data:{_skip:!1}};function To(t,e,o){return o===void 0&&(o={x:0,y:0}),{top:t.top-e.height-o.y,right:t.right-e.width+o.x,bottom:t.bottom-e.height+o.y,left:t.left-e.width-o.x}}function So(t){return[pe,we,ye,de].some(function(e){return t[e]>=0})}function hn(t){var e=t.state,o=t.name,s=e.rects.reference,n=e.rects.popper,a=e.modifiersData.preventOverflow,c=pt(e,{elementContext:"reference"}),l=pt(e,{altBoundary:!0}),i=To(c,s),h=To(l,n,a),p=So(i),y=So(h);e.modifiersData[o]={referenceClippingOffsets:i,popperEscapeOffsets:h,isReferenceHidden:p,hasPopperEscaped:y},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":p,"data-popper-escaped":y})}const mn={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:hn};function vn(t,e,o){var s=Pe(t),n=[de,pe].indexOf(s)>=0?-1:1,a=typeof o=="function"?o(Object.assign({},e,{placement:t})):o,c=a[0],l=a[1];return c=c||0,l=(l||0)*n,[de,we].indexOf(s)>=0?{x:l,y:c}:{x:c,y:l}}function xn(t){var e=t.state,o=t.options,s=t.name,n=o.offset,a=n===void 0?[0,0]:n,c=Ho.reduce(function(p,y){return p[y]=vn(y,e.rects,a),p},{}),l=c[e.placement],i=l.x,h=l.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=i,e.modifiersData.popperOffsets.y+=h),e.modifiersData[s]=c}const bn={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:xn};function yn(t){var e=t.state,o=t.name;e.modifiersData[o]=Jo({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const wn={name:"popperOffsets",enabled:!0,phase:"read",fn:yn,data:{}};function Cn(t){return t==="x"?"y":"x"}function jn(t){var e=t.state,o=t.options,s=t.name,n=o.mainAxis,a=n===void 0?!0:n,c=o.altAxis,l=c===void 0?!1:c,i=o.boundary,h=o.rootBoundary,p=o.altBoundary,y=o.padding,f=o.tether,v=f===void 0?!0:f,C=o.tetherOffset,x=C===void 0?0:C,w=pt(e,{boundary:i,rootBoundary:h,padding:y,altBoundary:p}),g=Pe(e.placement),b=Ge(e.placement),A=!b,T=Qt(g),S=Cn(T),m=e.modifiersData.popperOffsets,j=e.rects.reference,D=e.rects.popper,O=typeof x=="function"?x(Object.assign({},e.rects,{placement:e.placement})):x,M=typeof O=="number"?{mainAxis:O,altAxis:O}:Object.assign({mainAxis:0,altAxis:0},O),$=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,V={x:0,y:0};if(m){if(a){var _,q=T==="y"?pe:de,X=T==="y"?ye:we,H=T==="y"?"height":"width",B=m[T],u=B+w[q],P=B-w[X],E=v?-D[H]/2:0,k=b===He?j[H]:D[H],L=b===He?-D[H]:-j[H],Y=e.elements.arrow,F=v&&Y?Zt(Y):{width:0,height:0},K=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Go(),I=K[q],G=K[X],J=at(0,j[H],F[H]),ne=A?j[H]/2-E-J-I-M.mainAxis:k-J-I-M.mainAxis,ae=A?-j[H]/2+E+J+G+M.mainAxis:L+J+G+M.mainAxis,R=e.elements.arrow&&ut(e.elements.arrow),Z=R?T==="y"?R.clientTop||0:R.clientLeft||0:0,N=(_=$==null?void 0:$[T])!=null?_:0,ee=B+ne-N-Z,Ae=B+ae-N,Ne=at(v?St(u,ee):u,B,v?Be(P,Ae):P);m[T]=Ne,V[T]=Ne-B}if(l){var ce,Me=T==="x"?pe:de,Xe=T==="x"?ye:we,Re=m[S],$e=S==="y"?"height":"width",Ye=Re+w[Me],Ke=Re-w[Xe],Je=[pe,de].indexOf(g)!==-1,ft=(ce=$==null?void 0:$[S])!=null?ce:0,gt=Je?Ye:Re-j[$e]-D[$e]-ft+M.altAxis,Ue=Je?Re+j[$e]+D[$e]-ft-M.altAxis:Ke,ht=v&&Je?qs(gt,Re,Ue):at(v?gt:Ye,Re,v?Ue:Ke);m[S]=ht,V[S]=ht-Re}e.modifiersData[s]=V}}const Tn={name:"preventOverflow",enabled:!0,phase:"main",fn:jn,requiresIfExists:["offset"]};function Sn(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function An(t){return t===xe(t)||!be(t)?eo(t):Sn(t)}function Mn(t){var e=t.getBoundingClientRect(),o=Ve(e.width)/t.offsetWidth||1,s=Ve(e.height)/t.offsetHeight||1;return o!==1||s!==1}function Rn(t,e,o){o===void 0&&(o=!1);var s=be(e),n=be(e)&&Mn(e),a=Ie(e),c=qe(t,n,o),l={scrollLeft:0,scrollTop:0},i={x:0,y:0};return(s||!s&&!o)&&((De(e)!=="body"||oo(a))&&(l=An(e)),be(e)?(i=qe(e,!0),i.x+=e.clientLeft,i.y+=e.clientTop):a&&(i.x=to(a))),{x:c.left+l.scrollLeft-i.x,y:c.top+l.scrollTop-i.y,width:c.width,height:c.height}}function Pn(t){var e=new Map,o=new Set,s=[];t.forEach(function(a){e.set(a.name,a)});function n(a){o.add(a.name);var c=[].concat(a.requires||[],a.requiresIfExists||[]);c.forEach(function(l){if(!o.has(l)){var i=e.get(l);i&&n(i)}}),s.push(a)}return t.forEach(function(a){o.has(a.name)||n(a)}),s}function Dn(t){var e=Pn(t);return zs.reduce(function(o,s){return o.concat(e.filter(function(n){return n.phase===s}))},[])}function En(t){var e;return function(){return e||(e=new Promise(function(o){Promise.resolve().then(function(){e=void 0,o(t())})})),e}}function On(t){var e=t.reduce(function(o,s){var n=o[s.name];return o[s.name]=n?Object.assign({},n,s,{options:Object.assign({},n.options,s.options),data:Object.assign({},n.data,s.data)}):s,o},{});return Object.keys(e).map(function(o){return e[o]})}var Ao={placement:"bottom",modifiers:[],strategy:"absolute"};function Mo(){for(var t=arguments.length,e=new Array(t),o=0;o<t;o++)e[o]=arguments[o];return!e.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function kn(t){t===void 0&&(t={});var e=t,o=e.defaultModifiers,s=o===void 0?[]:o,n=e.defaultOptions,a=n===void 0?Ao:n;return function(l,i,h){h===void 0&&(h=a);var p={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ao,a),modifiersData:{},elements:{reference:l,popper:i},attributes:{},styles:{}},y=[],f=!1,v={state:p,setOptions:function(g){var b=typeof g=="function"?g(p.options):g;x(),p.options=Object.assign({},a,p.options,b),p.scrollParents={reference:Le(l)?it(l):l.contextElement?it(l.contextElement):[],popper:it(i)};var A=Dn(On([].concat(s,p.options.modifiers)));return p.orderedModifiers=A.filter(function(T){return T.enabled}),C(),v.update()},forceUpdate:function(){if(!f){var g=p.elements,b=g.reference,A=g.popper;if(Mo(b,A)){p.rects={reference:Rn(b,ut(A),p.options.strategy==="fixed"),popper:Zt(A)},p.reset=!1,p.placement=p.options.placement,p.orderedModifiers.forEach(function(M){return p.modifiersData[M.name]=Object.assign({},M.data)});for(var T=0;T<p.orderedModifiers.length;T++){if(p.reset===!0){p.reset=!1,T=-1;continue}var S=p.orderedModifiers[T],m=S.fn,j=S.options,D=j===void 0?{}:j,O=S.name;typeof m=="function"&&(p=m({state:p,options:D,name:O,instance:v})||p)}}}},update:En(function(){return new Promise(function(w){v.forceUpdate(),w(p)})}),destroy:function(){x(),f=!0}};if(!Mo(l,i))return v;v.setOptions(h).then(function(w){!f&&h.onFirstUpdate&&h.onFirstUpdate(w)});function C(){p.orderedModifiers.forEach(function(w){var g=w.name,b=w.options,A=b===void 0?{}:b,T=w.effect;if(typeof T=="function"){var S=T({state:p,name:g,instance:v,options:A}),m=function(){};y.push(S||m)}})}function x(){y.forEach(function(w){return w()}),y=[]}return v}}var In=[on,wn,en,Fs,bn,gn,Tn,Ks,mn],$n=kn({defaultModifiers:In});function _n(t){return ue("MuiPopper",t)}fe("MuiPopper",["root"]);function Wn(t,e){if(e==="ltr")return t;switch(t){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return t}}function Ut(t){return typeof t=="function"?t():t}function Bn(t){return t.nodeType!==void 0}const Ln=t=>{const{classes:e}=t;return he({root:["root"]},_n,e)},zn={},Nn=d.forwardRef(function(e,o){const{anchorEl:s,children:n,direction:a,disablePortal:c,modifiers:l,open:i,placement:h,popperOptions:p,popperRef:y,slotProps:f={},slots:v={},TransitionProps:C,ownerState:x,...w}=e,g=d.useRef(null),b=Tt(g,o),A=d.useRef(null),T=Tt(A,y),S=d.useRef(T);ao(()=>{S.current=T},[T]),d.useImperativeHandle(y,()=>A.current,[]);const m=Wn(h,a),[j,D]=d.useState(m),[O,M]=d.useState(Ut(s));d.useEffect(()=>{A.current&&A.current.forceUpdate()}),d.useEffect(()=>{s&&M(Ut(s))},[s]),ao(()=>{if(!O||!i)return;const X=u=>{D(u.placement)};let H=[{name:"preventOverflow",options:{altBoundary:c}},{name:"flip",options:{altBoundary:c}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:u})=>{X(u)}}];l!=null&&(H=H.concat(l)),p&&p.modifiers!=null&&(H=H.concat(p.modifiers));const B=$n(O,g.current,{placement:m,...p,modifiers:H});return S.current(B),()=>{B.destroy(),S.current(null)}},[O,c,l,i,p,m]);const $={placement:j};C!==null&&($.TransitionProps=C);const V=Ln(e),_=v.root??"div",q=rs({elementType:_,externalSlotProps:f.root,externalForwardedProps:w,additionalProps:{role:"tooltip",ref:b},ownerState:e,className:V.root});return r.jsx(_,{...q,children:typeof n=="function"?n($):n})}),Un=d.forwardRef(function(e,o){const{anchorEl:s,children:n,container:a,direction:c="ltr",disablePortal:l=!1,keepMounted:i=!1,modifiers:h,open:p,placement:y="bottom",popperOptions:f=zn,popperRef:v,style:C,transition:x=!1,slotProps:w={},slots:g={},...b}=e,[A,T]=d.useState(!0),S=()=>{T(!1)},m=()=>{T(!0)};if(!i&&!p&&(!x||A))return null;let j;if(a)j=a;else if(s){const M=Ut(s);j=M&&Bn(M)?vo(M).body:vo(null).body}const D=!p&&i&&(!x||A)?"none":void 0,O=x?{in:p,onEnter:S,onExited:m}:void 0;return r.jsx(os,{disablePortal:l,container:j,children:r.jsx(Nn,{anchorEl:s,direction:c,disablePortal:l,modifiers:h,ref:o,open:x?!A:p,placement:y,popperOptions:f,popperRef:v,slotProps:w,slots:g,...b,style:{position:"fixed",top:0,left:0,display:D,...C},TransitionProps:O,children:n})})}),Fn=Q(Un,{name:"MuiPopper",slot:"Root"})({}),Zo=d.forwardRef(function(e,o){const s=Io(),n=ge({props:e,name:"MuiPopper"}),{anchorEl:a,component:c,components:l,componentsProps:i,container:h,disablePortal:p,keepMounted:y,modifiers:f,open:v,placement:C,popperOptions:x,popperRef:w,transition:g,slots:b,slotProps:A,...T}=n,S=(b==null?void 0:b.root)??(l==null?void 0:l.Root),m={anchorEl:a,container:h,disablePortal:p,keepMounted:y,modifiers:f,open:v,placement:C,popperOptions:x,popperRef:w,transition:g,...T};return r.jsx(Fn,{as:c,direction:s?"rtl":"ltr",slots:{root:S},slotProps:A??i,...m,ref:o})});function Hn(t){const{badgeContent:e,invisible:o=!1,max:s=99,showZero:n=!1}=t,a=Uo({badgeContent:e,max:s});let c=o;o===!1&&e===0&&!n&&(c=!0);const{badgeContent:l,max:i=s}=c?a:t,h=l&&Number(l)>i?`${i}+`:l;return{badgeContent:l,invisible:c,max:i,displayValue:h}}function Vn(t){return ue("MuiBadge",t)}const Oe=fe("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),It=10,$t=4,qn=t=>{const{color:e,anchorOrigin:o,invisible:s,overlap:n,variant:a,classes:c={}}=t,l={root:["root"],badge:["badge",a,s&&"invisible",`anchorOrigin${re(o.vertical)}${re(o.horizontal)}`,`anchorOrigin${re(o.vertical)}${re(o.horizontal)}${re(n)}`,`overlap${re(n)}`,e!=="default"&&`color${re(e)}`]};return he(l,Vn,c)},Gn=Q("span",{name:"MuiBadge",slot:"Root"})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),Xn=Q("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[e.badge,e[o.variant],e[`anchorOrigin${re(o.anchorOrigin.vertical)}${re(o.anchorOrigin.horizontal)}${re(o.overlap)}`],o.color!=="default"&&e[`color${re(o.color)}`],o.invisible&&e.invisible]}})(le(({theme:t})=>({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(12),minWidth:It*2,lineHeight:1,padding:"0 6px",height:It*2,borderRadius:It,zIndex:1,transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.enteringScreen}),variants:[...Object.entries(t.palette).filter(Er(["contrastText"])).map(([e])=>({props:{color:e},style:{backgroundColor:(t.vars||t).palette[e].main,color:(t.vars||t).palette[e].contrastText}})),{props:{variant:"dot"},style:{borderRadius:$t,height:$t*2,minWidth:$t*2,padding:0}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="top"&&e.anchorOrigin.horizontal==="right"&&e.overlap==="rectangular",style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${Oe.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="bottom"&&e.anchorOrigin.horizontal==="right"&&e.overlap==="rectangular",style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${Oe.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="top"&&e.anchorOrigin.horizontal==="left"&&e.overlap==="rectangular",style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${Oe.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="bottom"&&e.anchorOrigin.horizontal==="left"&&e.overlap==="rectangular",style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${Oe.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="top"&&e.anchorOrigin.horizontal==="right"&&e.overlap==="circular",style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${Oe.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="bottom"&&e.anchorOrigin.horizontal==="right"&&e.overlap==="circular",style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${Oe.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="top"&&e.anchorOrigin.horizontal==="left"&&e.overlap==="circular",style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${Oe.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="bottom"&&e.anchorOrigin.horizontal==="left"&&e.overlap==="circular",style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${Oe.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.leavingScreen})}}]})));function Ro(t){return{vertical:(t==null?void 0:t.vertical)??"top",horizontal:(t==null?void 0:t.horizontal)??"right"}}const Yn=d.forwardRef(function(e,o){const s=ge({props:e,name:"MuiBadge"}),{anchorOrigin:n,className:a,classes:c,component:l,components:i={},componentsProps:h={},children:p,overlap:y="rectangular",color:f="default",invisible:v=!1,max:C=99,badgeContent:x,slots:w,slotProps:g,showZero:b=!1,variant:A="standard",...T}=s,{badgeContent:S,invisible:m,max:j,displayValue:D}=Hn({max:C,invisible:v,badgeContent:x,showZero:b}),O=Uo({anchorOrigin:Ro(n),color:f,overlap:y,variant:A,badgeContent:x}),M=m||S==null&&A!=="dot",{color:$=f,overlap:V=y,anchorOrigin:_,variant:q=A}=M?O:s,X=Ro(_),H=q!=="dot"?D:void 0,B={...s,badgeContent:S,invisible:M,max:j,displayValue:H,showZero:b,anchorOrigin:X,color:$,overlap:V,variant:q},u=qn(B),P={slots:{root:(w==null?void 0:w.root)??i.Root,badge:(w==null?void 0:w.badge)??i.Badge},slotProps:{root:(g==null?void 0:g.root)??h.root,badge:(g==null?void 0:g.badge)??h.badge}},[E,k]=oe("root",{elementType:Gn,externalForwardedProps:{...P,...T},ownerState:B,className:ie(u.root,a),ref:o,additionalProps:{as:l}}),[L,Y]=oe("badge",{elementType:Xn,externalForwardedProps:P,ownerState:B,className:u.badge});return r.jsxs(E,{...k,children:[p,r.jsx(L,{...Y,children:H})]})});function Kn(t){return ue("MuiDialog",t)}const _t=fe("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),Qo=d.createContext({}),Jn=Q(ns,{name:"MuiDialog",slot:"Backdrop",overrides:(t,e)=>e.backdrop})({zIndex:-1}),Zn=t=>{const{classes:e,scroll:o,maxWidth:s,fullWidth:n,fullScreen:a}=t,c={root:["root"],container:["container",`scroll${re(o)}`],paper:["paper",`paperScroll${re(o)}`,`paperWidth${re(String(s))}`,n&&"paperFullWidth",a&&"paperFullScreen"]};return he(c,Kn,e)},Qn=Q(ss,{name:"MuiDialog",slot:"Root"})({"@media print":{position:"absolute !important"}}),ea=Q("div",{name:"MuiDialog",slot:"Container",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[e.container,e[`scroll${re(o.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),ta=Q(Xt,{name:"MuiDialog",slot:"Paper",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[e.paper,e[`scrollPaper${re(o.scroll)}`],e[`paperWidth${re(String(o.maxWidth))}`],o.fullWidth&&e.paperFullWidth,o.fullScreen&&e.paperFullScreen]}})(le(({theme:t})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:e})=>!e.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:t.breakpoints.unit==="px"?Math.max(t.breakpoints.values.xs,444):`max(${t.breakpoints.values.xs}${t.breakpoints.unit}, 444px)`,[`&.${_t.paperScrollBody}`]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(t.breakpoints.values).filter(e=>e!=="xs").map(e=>({props:{maxWidth:e},style:{maxWidth:`${t.breakpoints.values[e]}${t.breakpoints.unit}`,[`&.${_t.paperScrollBody}`]:{[t.breakpoints.down(t.breakpoints.values[e]+32*2)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:e})=>e.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:e})=>e.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${_t.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),At=d.forwardRef(function(e,o){const s=ge({props:e,name:"MuiDialog"}),n=Dt(),a={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{"aria-describedby":c,"aria-labelledby":l,"aria-modal":i=!0,BackdropComponent:h,BackdropProps:p,children:y,className:f,disableEscapeKeyDown:v=!1,fullScreen:C=!1,fullWidth:x=!1,maxWidth:w="sm",onClick:g,onClose:b,open:A,PaperComponent:T=Xt,PaperProps:S={},scroll:m="paper",slots:j={},slotProps:D={},TransitionComponent:O=xo,transitionDuration:M=a,TransitionProps:$,...V}=s,_={...s,disableEscapeKeyDown:v,fullScreen:C,fullWidth:x,maxWidth:w,scroll:m},q=Zn(_),X=d.useRef(),H=N=>{X.current=N.target===N.currentTarget},B=N=>{g&&g(N),X.current&&(X.current=null,b&&b(N,"backdropClick"))},u=zo(l),P=d.useMemo(()=>({titleId:u}),[u]),E={transition:O,...j},k={transition:$,paper:S,backdrop:p,...D},L={slots:E,slotProps:k},[Y,F]=oe("root",{elementType:Qn,shouldForwardComponentProp:!0,externalForwardedProps:L,ownerState:_,className:ie(q.root,f),ref:o}),[K,I]=oe("backdrop",{elementType:Jn,shouldForwardComponentProp:!0,externalForwardedProps:L,ownerState:_}),[G,J]=oe("paper",{elementType:ta,shouldForwardComponentProp:!0,externalForwardedProps:L,ownerState:_,className:ie(q.paper,S.className)}),[ne,ae]=oe("container",{elementType:ea,externalForwardedProps:L,ownerState:_,className:q.container}),[R,Z]=oe("transition",{elementType:xo,externalForwardedProps:L,ownerState:_,additionalProps:{appear:!0,in:A,timeout:M,role:"presentation"}});return r.jsx(Y,{closeAfterTransition:!0,slots:{backdrop:K},slotProps:{backdrop:{transitionDuration:M,as:h,...I}},disableEscapeKeyDown:v,onClose:b,open:A,onClick:B,...F,...V,children:r.jsx(R,{...Z,children:r.jsx(ne,{onMouseDown:H,...ae,children:r.jsx(G,{as:T,elevation:24,role:"dialog","aria-describedby":c,"aria-labelledby":u,"aria-modal":i,...J,children:r.jsx(Qo.Provider,{value:P,children:y})})})})})});function oa(t){return ue("MuiDialogActions",t)}fe("MuiDialogActions",["root","spacing"]);const ra=t=>{const{classes:e,disableSpacing:o}=t;return he({root:["root",!o&&"spacing"]},oa,e)},sa=Q("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[e.root,!o.disableSpacing&&e.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:t})=>!t.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),ro=d.forwardRef(function(e,o){const s=ge({props:e,name:"MuiDialogActions"}),{className:n,disableSpacing:a=!1,...c}=s,l={...s,disableSpacing:a},i=ra(l);return r.jsx(sa,{className:ie(i.root,n),ownerState:l,ref:o,...c})});function na(t){return ue("MuiDialogContent",t)}fe("MuiDialogContent",["root","dividers"]);function aa(t){return ue("MuiDialogTitle",t)}const ia=fe("MuiDialogTitle",["root"]),la=t=>{const{classes:e,dividers:o}=t;return he({root:["root",o&&"dividers"]},na,e)},ca=Q("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[e.root,o.dividers&&e.dividers]}})(le(({theme:t})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:e})=>e.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(t.vars||t).palette.divider}`,borderBottom:`1px solid ${(t.vars||t).palette.divider}`}},{props:({ownerState:e})=>!e.dividers,style:{[`.${ia.root} + &`]:{paddingTop:0}}}]}))),Mt=d.forwardRef(function(e,o){const s=ge({props:e,name:"MuiDialogContent"}),{className:n,dividers:a=!1,...c}=s,l={...s,dividers:a},i=la(l);return r.jsx(ca,{className:ie(i.root,n),ownerState:l,ref:o,...c})}),pa=t=>{const{classes:e}=t;return he({root:["root"]},aa,e)},da=Q(W,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),Rt=d.forwardRef(function(e,o){const s=ge({props:e,name:"MuiDialogTitle"}),{className:n,id:a,...c}=s,l=s,i=pa(l),{titleId:h=a}=d.useContext(Qo);return r.jsx(da,{component:"h2",className:ie(i.root,n),ownerState:l,ref:o,variant:"h6",id:a??h,...c})});function ua(t){return ue("MuiDivider",t)}fe("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);const fa=t=>{const{absolute:e,children:o,classes:s,flexItem:n,light:a,orientation:c,textAlign:l,variant:i}=t;return he({root:["root",e&&"absolute",i,a&&"light",c==="vertical"&&"vertical",n&&"flexItem",o&&"withChildren",o&&c==="vertical"&&"withChildrenVertical",l==="right"&&c!=="vertical"&&"textAlignRight",l==="left"&&c!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",c==="vertical"&&"wrapperVertical"]},ua,s)},ga=Q("div",{name:"MuiDivider",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[e.root,o.absolute&&e.absolute,e[o.variant],o.light&&e.light,o.orientation==="vertical"&&e.vertical,o.flexItem&&e.flexItem,o.children&&e.withChildren,o.children&&o.orientation==="vertical"&&e.withChildrenVertical,o.textAlign==="right"&&o.orientation!=="vertical"&&e.textAlignRight,o.textAlign==="left"&&o.orientation!=="vertical"&&e.textAlignLeft]}})(le(({theme:t})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(t.vars||t).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:t.vars?`rgba(${t.vars.palette.dividerChannel} / 0.08)`:Yt(t.palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:t.spacing(2),marginRight:t.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:t.spacing(1),marginBottom:t.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:e})=>!!e.children,style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:e})=>e.children&&e.orientation!=="vertical",style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(t.vars||t).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:e})=>e.orientation==="vertical"&&e.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(t.vars||t).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:e})=>e.textAlign==="right"&&e.orientation!=="vertical",style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:e})=>e.textAlign==="left"&&e.orientation!=="vertical",style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),ha=Q("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[e.wrapper,o.orientation==="vertical"&&e.wrapperVertical]}})(le(({theme:t})=>({display:"inline-block",paddingLeft:`calc(${t.spacing(1)} * 1.2)`,paddingRight:`calc(${t.spacing(1)} * 1.2)`,whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${t.spacing(1)} * 1.2)`,paddingBottom:`calc(${t.spacing(1)} * 1.2)`}}]}))),Pt=d.forwardRef(function(e,o){const s=ge({props:e,name:"MuiDivider"}),{absolute:n=!1,children:a,className:c,orientation:l="horizontal",component:i=a||l==="vertical"?"div":"hr",flexItem:h=!1,light:p=!1,role:y=i!=="hr"?"separator":void 0,textAlign:f="center",variant:v="fullWidth",...C}=s,x={...s,absolute:n,component:i,flexItem:h,light:p,orientation:l,role:y,textAlign:f,variant:v},w=fa(x);return r.jsx(ga,{as:i,className:ie(w.root,c),role:y,ref:o,ownerState:x,"aria-orientation":y==="separator"&&(i!=="hr"||l==="vertical")?l:void 0,...C,children:a?r.jsx(ha,{className:w.wrapper,ownerState:x,children:a}):null})});Pt&&(Pt.muiSkipListHighlight=!0);function ma(t){return ue("MuiListItemAvatar",t)}fe("MuiListItemAvatar",["root","alignItemsFlexStart"]);const va=t=>{const{alignItems:e,classes:o}=t;return he({root:["root",e==="flex-start"&&"alignItemsFlexStart"]},ma,o)},xa=Q("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[e.root,o.alignItems==="flex-start"&&e.alignItemsFlexStart]}})({minWidth:56,flexShrink:0,variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}),er=d.forwardRef(function(e,o){const s=ge({props:e,name:"MuiListItemAvatar"}),{className:n,...a}=s,c=d.useContext($o),l={...s,alignItems:c.alignItems},i=va(l);return r.jsx(xa,{className:ie(i.root,n),ownerState:l,ref:o,...a})});function ba(t){return ue("MuiListItemText",t)}const bt=fe("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),ya=t=>{const{classes:e,inset:o,primary:s,secondary:n,dense:a}=t;return he({root:["root",o&&"inset",a&&"dense",s&&n&&"multiline"],primary:["primary"],secondary:["secondary"]},ba,e)},wa=Q("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[{[`& .${bt.primary}`]:e.primary},{[`& .${bt.secondary}`]:e.secondary},e.root,o.inset&&e.inset,o.primary&&o.secondary&&e.multiline,o.dense&&e.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${io.root}:where(& .${bt.primary})`]:{display:"block"},[`.${io.root}:where(& .${bt.secondary})`]:{display:"block"},variants:[{props:({ownerState:t})=>t.primary&&t.secondary,style:{marginTop:6,marginBottom:6}},{props:({ownerState:t})=>t.inset,style:{paddingLeft:56}}]}),tr=d.forwardRef(function(e,o){const s=ge({props:e,name:"MuiListItemText"}),{children:n,className:a,disableTypography:c=!1,inset:l=!1,primary:i,primaryTypographyProps:h,secondary:p,secondaryTypographyProps:y,slots:f={},slotProps:v={},...C}=s,{dense:x}=d.useContext($o);let w=i??n,g=p;const b={...s,disableTypography:c,inset:l,primary:!!w,secondary:!!g,dense:x},A=ya(b),T={slots:f,slotProps:{primary:h,secondary:y,...v}},[S,m]=oe("root",{className:ie(A.root,a),elementType:wa,externalForwardedProps:{...T,...C},ownerState:b,ref:o}),[j,D]=oe("primary",{className:A.primary,elementType:W,externalForwardedProps:T,ownerState:b}),[O,M]=oe("secondary",{className:A.secondary,elementType:W,externalForwardedProps:T,ownerState:b});return w!=null&&w.type!==W&&!c&&(w=r.jsx(j,{variant:x?"body2":"body1",component:D!=null&&D.variant?void 0:"span",...D,children:w})),g!=null&&g.type!==W&&!c&&(g=r.jsx(O,{variant:"body2",color:"textSecondary",...M,children:g})),r.jsxs(S,{...m,children:[w,g]})});function Ca(t){return ue("MuiTooltip",t)}const te=fe("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);function ja(t){return Math.round(t*1e5)/1e5}const Ta=t=>{const{classes:e,disableInteractive:o,arrow:s,touch:n,placement:a}=t,c={popper:["popper",!o&&"popperInteractive",s&&"popperArrow"],tooltip:["tooltip",s&&"tooltipArrow",n&&"touch",`tooltipPlacement${re(a.split("-")[0])}`],arrow:["arrow"]};return he(c,Ca,e)},Sa=Q(Zo,{name:"MuiTooltip",slot:"Popper",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[e.popper,!o.disableInteractive&&e.popperInteractive,o.arrow&&e.popperArrow,!o.open&&e.popperClose]}})(le(({theme:t})=>({zIndex:(t.vars||t).zIndex.tooltip,pointerEvents:"none",variants:[{props:({ownerState:e})=>!e.disableInteractive,style:{pointerEvents:"auto"}},{props:({open:e})=>!e,style:{pointerEvents:"none"}},{props:({ownerState:e})=>e.arrow,style:{[`&[data-popper-placement*="bottom"] .${te.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${te.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${te.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},[`&[data-popper-placement*="left"] .${te.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}},{props:({ownerState:e})=>e.arrow&&!e.isRtl,style:{[`&[data-popper-placement*="right"] .${te.arrow}`]:{left:0,marginLeft:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!!e.isRtl,style:{[`&[data-popper-placement*="right"] .${te.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!e.isRtl,style:{[`&[data-popper-placement*="left"] .${te.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!!e.isRtl,style:{[`&[data-popper-placement*="left"] .${te.arrow}`]:{left:0,marginLeft:"-0.71em"}}}]}))),Aa=Q("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(t,e)=>{const{ownerState:o}=t;return[e.tooltip,o.touch&&e.touch,o.arrow&&e.tooltipArrow,e[`tooltipPlacement${re(o.placement.split("-")[0])}`]]}})(le(({theme:t})=>({backgroundColor:t.vars?t.vars.palette.Tooltip.bg:Yt(t.palette.grey[700],.92),borderRadius:(t.vars||t).shape.borderRadius,color:(t.vars||t).palette.common.white,fontFamily:t.typography.fontFamily,padding:"4px 8px",fontSize:t.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:t.typography.fontWeightMedium,[`.${te.popper}[data-popper-placement*="left"] &`]:{transformOrigin:"right center"},[`.${te.popper}[data-popper-placement*="right"] &`]:{transformOrigin:"left center"},[`.${te.popper}[data-popper-placement*="top"] &`]:{transformOrigin:"center bottom",marginBottom:"14px"},[`.${te.popper}[data-popper-placement*="bottom"] &`]:{transformOrigin:"center top",marginTop:"14px"},variants:[{props:({ownerState:e})=>e.arrow,style:{position:"relative",margin:0}},{props:({ownerState:e})=>e.touch,style:{padding:"8px 16px",fontSize:t.typography.pxToRem(14),lineHeight:`${ja(16/14)}em`,fontWeight:t.typography.fontWeightRegular}},{props:({ownerState:e})=>!e.isRtl,style:{[`.${te.popper}[data-popper-placement*="left"] &`]:{marginRight:"14px"},[`.${te.popper}[data-popper-placement*="right"] &`]:{marginLeft:"14px"}}},{props:({ownerState:e})=>!e.isRtl&&e.touch,style:{[`.${te.popper}[data-popper-placement*="left"] &`]:{marginRight:"24px"},[`.${te.popper}[data-popper-placement*="right"] &`]:{marginLeft:"24px"}}},{props:({ownerState:e})=>!!e.isRtl,style:{[`.${te.popper}[data-popper-placement*="left"] &`]:{marginLeft:"14px"},[`.${te.popper}[data-popper-placement*="right"] &`]:{marginRight:"14px"}}},{props:({ownerState:e})=>!!e.isRtl&&e.touch,style:{[`.${te.popper}[data-popper-placement*="left"] &`]:{marginLeft:"24px"},[`.${te.popper}[data-popper-placement*="right"] &`]:{marginRight:"24px"}}},{props:({ownerState:e})=>e.touch,style:{[`.${te.popper}[data-popper-placement*="top"] &`]:{marginBottom:"24px"}}},{props:({ownerState:e})=>e.touch,style:{[`.${te.popper}[data-popper-placement*="bottom"] &`]:{marginTop:"24px"}}}]}))),Ma=Q("span",{name:"MuiTooltip",slot:"Arrow"})(le(({theme:t})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:t.vars?t.vars.palette.Tooltip.bg:Yt(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})));let yt=!1;const Po=new Or;let tt={x:0,y:0};function wt(t,e){return(o,...s)=>{e&&e(o,...s),t(o,...s)}}const so=d.forwardRef(function(e,o){const s=ge({props:e,name:"MuiTooltip"}),{arrow:n=!1,children:a,classes:c,components:l={},componentsProps:i={},describeChild:h=!1,disableFocusListener:p=!1,disableHoverListener:y=!1,disableInteractive:f=!1,disableTouchListener:v=!1,enterDelay:C=100,enterNextDelay:x=0,enterTouchDelay:w=700,followCursor:g=!1,id:b,leaveDelay:A=0,leaveTouchDelay:T=1500,onClose:S,onOpen:m,open:j,placement:D="bottom",PopperComponent:O,PopperProps:M={},slotProps:$={},slots:V={},title:_,TransitionComponent:q,TransitionProps:X,...H}=s,B=d.isValidElement(a)?a:r.jsx("span",{children:a}),u=Dt(),P=Io(),[E,k]=d.useState(),[L,Y]=d.useState(null),F=d.useRef(!1),K=f||g,I=rt(),G=rt(),J=rt(),ne=rt(),[ae,R]=Lo({controlled:j,default:!1,name:"Tooltip",state:"open"});let Z=ae;const N=zo(b),ee=d.useRef(),Ae=lo(()=>{ee.current!==void 0&&(document.body.style.WebkitUserSelect=ee.current,ee.current=void 0),ne.clear()});d.useEffect(()=>Ae,[Ae]);const Ne=U=>{Po.clear(),yt=!0,R(!0),m&&!Z&&m(U)},ce=lo(U=>{Po.start(800+A,()=>{yt=!1}),R(!1),S&&Z&&S(U),I.start(u.transitions.duration.shortest,()=>{F.current=!1})}),Me=U=>{F.current&&U.type!=="touchstart"||(E&&E.removeAttribute("title"),G.clear(),J.clear(),C||yt&&x?G.start(yt?x:C,()=>{Ne(U)}):Ne(U))},Xe=U=>{G.clear(),J.start(A,()=>{ce(U)})},[,Re]=d.useState(!1),$e=U=>{co(U.target)||(Re(!1),Xe(U))},Ye=U=>{E||k(U.currentTarget),co(U.target)&&(Re(!0),Me(U))},Ke=U=>{F.current=!0;const Te=B.props;Te.onTouchStart&&Te.onTouchStart(U)},Je=U=>{Ke(U),J.clear(),I.clear(),Ae(),ee.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",ne.start(w,()=>{document.body.style.WebkitUserSelect=ee.current,Me(U)})},ft=U=>{B.props.onTouchEnd&&B.props.onTouchEnd(U),Ae(),J.start(T,()=>{ce(U)})};d.useEffect(()=>{if(!Z)return;function U(Te){Te.key==="Escape"&&ce(Te)}return document.addEventListener("keydown",U),()=>{document.removeEventListener("keydown",U)}},[ce,Z]);const gt=Tt(as(B),k,o);!_&&_!==0&&(Z=!1);const Ue=d.useRef(),ht=U=>{const Te=B.props;Te.onMouseMove&&Te.onMouseMove(U),tt={x:U.clientX,y:U.clientY},Ue.current&&Ue.current.update()},Ze={},Ot=typeof _=="string";h?(Ze.title=!Z&&Ot&&!y?_:null,Ze["aria-describedby"]=Z?N:null):(Ze["aria-label"]=Ot?_:null,Ze["aria-labelledby"]=Z&&!Ot?N:null);const Ce={...Ze,...H,...B.props,className:ie(H.className,B.props.className),onTouchStart:Ke,ref:gt,...g?{onMouseMove:ht}:{}},Qe={};v||(Ce.onTouchStart=Je,Ce.onTouchEnd=ft),y||(Ce.onMouseOver=wt(Me,Ce.onMouseOver),Ce.onMouseLeave=wt(Xe,Ce.onMouseLeave),K||(Qe.onMouseOver=Me,Qe.onMouseLeave=Xe)),p||(Ce.onFocus=wt(Ye,Ce.onFocus),Ce.onBlur=wt($e,Ce.onBlur),K||(Qe.onFocus=Ye,Qe.onBlur=$e));const _e={...s,isRtl:P,arrow:n,disableInteractive:K,placement:D,PopperComponentProp:O,touch:F.current},je=typeof $.popper=="function"?$.popper(_e):$.popper,br=d.useMemo(()=>{var Te,no;let U=[{name:"arrow",enabled:!!L,options:{element:L,padding:4}}];return(Te=M.popperOptions)!=null&&Te.modifiers&&(U=U.concat(M.popperOptions.modifiers)),(no=je==null?void 0:je.popperOptions)!=null&&no.modifiers&&(U=U.concat(je.popperOptions.modifiers)),{...M.popperOptions,...je==null?void 0:je.popperOptions,modifiers:U}},[L,M.popperOptions,je==null?void 0:je.popperOptions]),kt=Ta(_e),yr=typeof $.transition=="function"?$.transition(_e):$.transition,mt={slots:{popper:l.Popper,transition:l.Transition??q,tooltip:l.Tooltip,arrow:l.Arrow,...V},slotProps:{arrow:$.arrow??i.arrow,popper:{...M,...je??i.popper},tooltip:$.tooltip??i.tooltip,transition:{...X,...yr??i.transition}}},[wr,Cr]=oe("popper",{elementType:Sa,externalForwardedProps:mt,ownerState:_e,className:ie(kt.popper,M==null?void 0:M.className)}),[jr,Tr]=oe("transition",{elementType:is,externalForwardedProps:mt,ownerState:_e}),[Sr,Ar]=oe("tooltip",{elementType:Aa,className:kt.tooltip,externalForwardedProps:mt,ownerState:_e}),[Mr,Rr]=oe("arrow",{elementType:Ma,className:kt.arrow,externalForwardedProps:mt,ownerState:_e,ref:Y});return r.jsxs(d.Fragment,{children:[d.cloneElement(B,Ce),r.jsx(wr,{as:O??Zo,placement:D,anchorEl:g?{getBoundingClientRect:()=>({top:tt.y,left:tt.x,right:tt.x,bottom:tt.y,width:0,height:0})}:E,popperRef:Ue,open:E?Z:!1,id:N,transition:!0,...Qe,...Cr,popperOptions:br,children:({TransitionProps:U})=>r.jsx(jr,{timeout:u.transitions.duration.shorter,...U,...Tr,children:r.jsxs(Sr,{...Ar,children:[_,n?r.jsx(Mr,{...Rr}):null]})})})]})});class Ra extends d.Component{getSnapshotBeforeUpdate(e){const o=this.props.childRef.current;if(o&&e.isPresent&&!this.props.isPresent){const s=o.offsetParent,n=Ir(s)&&s.offsetWidth||0,a=this.props.sizeRef.current;a.height=o.offsetHeight||0,a.width=o.offsetWidth||0,a.top=o.offsetTop,a.left=o.offsetLeft,a.right=n-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Pa({children:t,isPresent:e,anchorX:o,root:s}){const n=d.useId(),a=d.useRef(null),c=d.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=d.useContext(kr);return d.useInsertionEffect(()=>{const{width:i,height:h,top:p,left:y,right:f}=c.current;if(e||!a.current||!i||!h)return;const v=o==="left"?`left: ${y}`:`right: ${f}`;a.current.dataset.motionPopId=n;const C=document.createElement("style");l&&(C.nonce=l);const x=s??document.head;return x.appendChild(C),C.sheet&&C.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${h}px !important;
            ${v}px !important;
            top: ${p}px !important;
          }
        `),()=>{x.removeChild(C),x.contains(C)&&x.removeChild(C)}},[e]),r.jsx(Ra,{isPresent:e,childRef:a,sizeRef:c,children:d.cloneElement(t,{ref:a})})}const Da=({children:t,initial:e,isPresent:o,onExitComplete:s,custom:n,presenceAffectsLayout:a,mode:c,anchorX:l,root:i})=>{const h=_o(Ea),p=d.useId();let y=!0,f=d.useMemo(()=>(y=!1,{id:p,initial:e,isPresent:o,custom:n,onExitComplete:v=>{h.set(v,!0);for(const C of h.values())if(!C)return;s&&s()},register:v=>(h.set(v,!1),()=>h.delete(v))}),[o,h,s]);return a&&y&&(f={...f}),d.useMemo(()=>{h.forEach((v,C)=>h.set(C,!1))},[o]),d.useEffect(()=>{!o&&!h.size&&s&&s()},[o]),c==="popLayout"&&(t=r.jsx(Pa,{isPresent:o,anchorX:l,root:i,children:t})),r.jsx($r.Provider,{value:f,children:t})};function Ea(){return new Map}const Ct=t=>t.key||"";function Do(t){const e=[];return d.Children.forEach(t,o=>{d.isValidElement(o)&&e.push(o)}),e}const Oa=({children:t,custom:e,initial:o=!0,onExitComplete:s,presenceAffectsLayout:n=!0,mode:a="sync",propagate:c=!1,anchorX:l="left",root:i})=>{const[h,p]=_r(c),y=d.useMemo(()=>Do(t),[t]),f=c&&!h?[]:y.map(Ct),v=d.useRef(!0),C=d.useRef(y),x=_o(()=>new Map),[w,g]=d.useState(y),[b,A]=d.useState(y);Wr(()=>{v.current=!1,C.current=y;for(let m=0;m<b.length;m++){const j=Ct(b[m]);f.includes(j)?x.delete(j):x.get(j)!==!0&&x.set(j,!1)}},[b,f.length,f.join("-")]);const T=[];if(y!==w){let m=[...y];for(let j=0;j<b.length;j++){const D=b[j],O=Ct(D);f.includes(O)||(m.splice(j,0,D),T.push(D))}return a==="wait"&&T.length&&(m=T),A(Do(m)),g(y),null}const{forceRender:S}=d.useContext(Br);return r.jsx(r.Fragment,{children:b.map(m=>{const j=Ct(m),D=c&&!h?!1:y===b||f.includes(j),O=()=>{if(x.has(j))x.set(j,!0);else return;let M=!0;x.forEach($=>{$||(M=!1)}),M&&(S==null||S(),A(C.current),c&&(p==null||p()),s&&s())};return r.jsx(Da,{isPresent:D,initial:!v.current||o?void 0:!1,custom:e,presenceAffectsLayout:n,mode:a,root:i,onExitComplete:D?void 0:O,anchorX:l,children:m},j)})})},ka=me([r.jsx("path",{d:"M17 11c.34 0 .67.04 1 .09V6.27L10.5 3 3 6.27v4.91c0 4.54 3.2 8.79 7.5 9.82.55-.13 1.08-.32 1.6-.55-.69-.98-1.1-2.17-1.1-3.45 0-3.31 2.69-6 6-6"},"0"),r.jsx("path",{d:"M17 13c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 1.38c.62 0 1.12.51 1.12 1.12s-.51 1.12-1.12 1.12-1.12-.51-1.12-1.12.5-1.12 1.12-1.12m0 5.37c-.93 0-1.74-.46-2.24-1.17.05-.72 1.51-1.08 2.24-1.08s2.19.36 2.24 1.08c-.5.71-1.31 1.17-2.24 1.17"},"1")]),Ia=me(r.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"})),$a=me([r.jsx("circle",{cx:"12",cy:"12",r:"3.2"},"0"),r.jsx("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5"},"1")]),Wt=me(r.jsx("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2M6 9h12v2H6zm8 5H6v-2h8zm4-6H6V6h12z"})),_a=me(r.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"})),Eo=me(r.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"})),Wa=me(r.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-2h2zm0-4h-2V7h2z"})),Ba=me(r.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"})),or=me(r.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"})),Oo=me(r.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"})),ko=me(r.jsx("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"})),La=me(r.jsx("path",{d:"M14 8c0-2.21-1.79-4-4-4S6 5.79 6 8s1.79 4 4 4 4-1.79 4-4m3 2v2h6v-2zM2 18v2h16v-2c0-2.66-5.33-4-8-4s-8 1.34-8 4"})),za=me([r.jsx("circle",{cx:"12",cy:"12",r:"3.2"},"0"),r.jsx("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5"},"1")]),Na=me(r.jsx("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"})),rr=()=>{var t;if(console.log("Инициализация Telegram WebApp..."),ar(),typeof window<"u"&&((t=window.Telegram)!=null&&t.WebApp))try{const e=window.Telegram.WebApp;return e.ready(),e.expand(),e.setHeaderColor("#232b3b"),e.setBackgroundColor("#232b3b"),e.enableClosingConfirmation(),console.log("Telegram WebApp успешно инициализирован"),console.log("WebApp version:",e.version),console.log("WebApp platform:",e.platform),console.log("WebApp theme:",e.colorScheme),!0}catch(e){return console.error("Ошибка инициализации Telegram WebApp:",e),!1}return console.log("Telegram WebApp не найден"),!1},Ua=()=>{var t,e,o;return typeof window<"u"&&((o=(e=(t=window.Telegram)==null?void 0:t.WebApp)==null?void 0:e.initDataUnsafe)!=null&&o.user)?window.Telegram.WebApp.initDataUnsafe.user:null},sr=()=>{var t;if(console.log("=== Telegram WebApp Debug Info ==="),typeof window>"u"){console.log("❌ Window object not available");return}if(console.log("🔍 Telegram object:",window.Telegram?"✅ Available":"❌ Not available"),(t=window.Telegram)!=null&&t.WebApp){const e=window.Telegram.WebApp;console.log("🔍 WebApp object:","✅ Available"),console.log("🔍 WebApp version:",e.version),console.log("🔍 WebApp platform:",e.platform),console.log("🔍 WebApp colorScheme:",e.colorScheme),console.log("🔍 WebApp isExpanded:",e.isExpanded),console.log("🔍 WebApp viewportHeight:",e.viewportHeight),console.log("🔍 WebApp viewportStableHeight:",e.viewportStableHeight),console.log("🔍 InitData:",e.initData?`✅ Available (${e.initData.length} chars)`:"❌ Not available"),console.log("🔍 InitDataUnsafe:",e.initDataUnsafe?"✅ Available":"❌ Not available"),e.initDataUnsafe&&(console.log("🔍 InitDataUnsafe.user:",e.initDataUnsafe.user?"✅ Available":"❌ Not available"),console.log("🔍 InitDataUnsafe.query_id:",e.initDataUnsafe.query_id?"✅ Available":"❌ Not available"),console.log("🔍 InitDataUnsafe.auth_date:",e.initDataUnsafe.auth_date?"✅ Available":"❌ Not available"),console.log("🔍 InitDataUnsafe.hash:",e.initDataUnsafe.hash?"✅ Available":"❌ Not available"),e.initDataUnsafe.user&&console.log("🔍 User data:",JSON.stringify(e.initDataUnsafe.user,null,2)))}else console.log("❌ WebApp object not available");console.log("==================================")},ze=()=>{var t;if(console.log("Получение данных авторизации Telegram..."),sr(),typeof window<"u"&&((t=window.Telegram)!=null&&t.WebApp)){console.log("Telegram WebApp найден");const e=window.Telegram.WebApp.initData;if(console.log("Telegram initData:",e?"найден":"отсутствует"),e)return console.log("✅ Используем реальные данные initData"),e;const o=window.Telegram.WebApp.initDataUnsafe;if(console.log("Telegram initDataUnsafe:",o),o!=null&&o.user){const s=Math.floor(Date.now()/1e3),n=JSON.stringify(o.user),a=`user=${encodeURIComponent(n)}`,c=`auth_date=${s}`,l=`${a}&${c}`,i=btoa(l).replace(/[^a-zA-Z0-9]/g,"").substring(0,32),h=`${a}&${c}&hash=${i}`;return console.log("✅ Создаем данные авторизации из initDataUnsafe"),console.log("Generated auth data length:",h.length),h}}return console.warn("❌ Приложение запущено не из Telegram WebApp"),console.warn("❌ Данные авторизации недоступны"),""},nr=()=>{var t;return typeof window<"u"&&!!((t=window.Telegram)!=null&&t.WebApp)},Fa=()=>{if(console.log("🔄 Очищаем и пересоздаем данные авторизации..."),typeof window<"u"){localStorage.removeItem("telegram_init_data"),console.log("✅ Старые данные очищены");const t=ze();return console.log("✅ Новые данные созданы:",t?"успешно":"ошибка"),t}return""},ar=()=>{typeof window<"u"&&(localStorage.removeItem("telegram_init_data"),console.log("🧹 Очищены старые данные авторизации"))},Ha=()=>{console.log("🧪 Тестируем данные авторизации...");const t=ze();if(t){console.log("✅ Данные авторизации найдены"),console.log("📊 Длина:",t.length),console.log("📋 Превью:",t.substring(0,100)+"...");try{const e=new URLSearchParams(t),o=e.get("user"),s=e.get("auth_date"),n=e.get("hash");if(console.log("🔍 Структура данных:"),console.log("  - user:",o?"есть":"отсутствует"),console.log("  - auth_date:",s?"есть":"отсутствует"),console.log("  - hash:",n?"есть":"отсутствует"),o){const a=JSON.parse(decodeURIComponent(o));console.log("👤 Данные пользователя:",a)}return!0}catch(e){return console.error("❌ Ошибка парсинга данных:",e),!1}}else return console.error("❌ Данные авторизации не найдены"),!1},Va=async()=>{console.log("🔬 Диагностика проблемы авторизации на сервере...");try{const{debugAuthConfig:t,debugValidateTelegramData:e}=await Bt(async()=>{const{debugAuthConfig:s,debugValidateTelegramData:n}=await Promise.resolve().then(()=>Gt);return{debugAuthConfig:s,debugValidateTelegramData:n}},void 0);console.log("🔍 Проверяем конфигурацию сервера...");try{const s=await t();if(console.log("🏃 Конфигурация сервера:",s),!s.telegram_bot_token_set)return console.error("❌ На сервере не установлен токен Telegram бота!"),console.error("💡 Решение: Администратор должен установить TELEGRAM_BOT_TOKEN на сервере"),"server_no_token";console.log("✅ Токен бота на сервере установлен")}catch(s){return console.error("❌ Ошибка получения конфигурации сервера:",s),"server_config_error"}const o=ze();if(o){console.log("🧪 Тестируем валидацию данных на сервере...");try{const s=await e(o);return console.log("📊 Результат валидации:",s),s.success?(console.log("✅ Валидация на сервере прошла успешно!"),console.log("❓ Возможно, проблема в другом месте"),"validation_success"):(console.error("❌ Валидация на сервере не прошла"),console.error("💡 Причина: Неправильная подпись или истекшие данные"),"validation_failed")}catch(s){return console.error("❌ Ошибка тестирования валидации:",s),"validation_error"}}else return console.error("❌ Нет данных для тестирования"),"no_data"}catch(t){return console.error("❌ Общая ошибка диагностики:",t),"general_error"}};typeof window<"u"&&(window.telegramUtils={debugTelegramWebApp:sr,getTelegramInitData:ze,clearAndRecreateAuthData:Fa,cleanupOldAuthData:ar,testAuthData:Ha,initTelegramWebApp:rr,diagnoseServerAuth:Va},console.log("🔧 Утилиты Telegram доступны через window.telegramUtils"));const qa=()=>{console.log("=== Aeon Messenger API Configuration ==="),console.log("VITE_CHAT_URL:","https://aeon-messenger-app-09faae856b73.herokuapp.com"),console.log("Base URL:","https://aeon-messenger-app-09faae856b73.herokuapp.com"),console.log("Environment:","production"),console.log("🆕 NEW BACKEND URL: https://aeon-backend-2892-d50dfbe26b14.herokuapp.com"),console.log("=========================================")};qa();const se=Qr.create({baseURL:"https://aeon-backend-2892-d50dfbe26b14.herokuapp.com",timeout:3e4,headers:{"Content-Type":"application/json"}}),ir=async(t,e=3,o=1e3)=>{var s,n;for(let a=0;a<e;a++)try{return await t()}catch(c){if(console.log(`Attempt ${a+1} failed:`,c.message),((s=c.response)==null?void 0:s.status)===401||((n=c.response)==null?void 0:n.status)===403||a===e-1)throw c;await new Promise(l=>setTimeout(l,o*(a+1)))}throw new Error("Max retries reached")};se.interceptors.request.use(t=>{const e=ze();return console.log("=== Aeon API Request Debug ==="),console.log("URL:",t.url),console.log("Method:",t.method),console.log("Base URL:",t.baseURL),console.log("Init Data Length:",e?e.length:0),console.log("Init Data Preview:",e?e.substring(0,100)+"...":"No data"),e?(t.headers["x-telegram-init-data"]=e,console.log("✅ Auth header attached")):(console.warn("❌ No auth data available - running in development mode"),console.warn("❌ This request will likely fail with 401 error")),console.log("==============================="),t},t=>(console.error("Request interceptor error:",t),Promise.reject(t)));se.interceptors.response.use(t=>(console.log("✅ API Response:",t.config.url,t.status),t),t=>{var e,o,s,n,a,c,l,i,h,p,y,f,v,C,x,w;throw console.error("=== Aeon API Error ==="),console.error("URL:",(e=t.config)==null?void 0:e.url),console.error("Method:",(o=t.config)==null?void 0:o.method),console.error("Status:",(s=t.response)==null?void 0:s.status),console.error("Status Text:",(n=t.response)==null?void 0:n.statusText),console.error("Response Data:",(a=t.response)==null?void 0:a.data),console.error("Request Headers:",(c=t.config)==null?void 0:c.headers),console.error("======================"),((l=t.response)==null?void 0:l.status)===405?(console.error("❌ Method Not Allowed (405)"),console.error("❌ Possible reasons:"),console.error(`   1. HTTP method ${(h=(i=t.config)==null?void 0:i.method)==null?void 0:h.toUpperCase()} is not supported for URL: ${(p=t.config)==null?void 0:p.url}`),console.error("   2. Server endpoint configuration issue"),console.error("   3. API endpoint does not exist or is disabled"),console.error("❌ Solution: Check API documentation and server configuration"),{...t,message:`HTTP method ${(f=(y=t.config)==null?void 0:y.method)==null?void 0:f.toUpperCase()} not allowed for this endpoint`,isMethodError:!0,response:{...t.response,data:{...(v=t.response)==null?void 0:v.data,error:"HTTP метод не поддерживается для данного endpoint"}}}):((C=t.response)==null?void 0:C.status)===401?(console.error("❌ Authorization failed"),console.error("❌ Possible reasons:"),console.error("   1. App is not running inside Telegram WebApp"),console.error("   2. Invalid or expired Telegram init data"),console.error("   3. Server-side authorization issue"),console.error("❌ Solution: Open this app from Telegram bot/mini app"),{...t,message:"Authorization failed - app must be opened from Telegram",isAuthError:!0,response:{...t.response,data:{...(x=t.response)==null?void 0:x.data,error:"Приложение должно быть открыто из Telegram"}}}):t.code==="ECONNABORTED"&&t.message.includes("timeout")?(console.error("❌ Request timeout"),console.error("❌ Possible reasons:"),console.error("   1. Server is starting up (cold start)"),console.error("   2. Server is overloaded"),console.error("   3. Network connectivity issues"),console.error("❌ Solution: Try again in a moment"),{...t,message:"Server is starting up, please try again in a moment",isTimeoutError:!0}):((w=t.response)==null?void 0:w.status)===503?(console.error("❌ Service Unavailable"),console.error("❌ Server is temporarily unavailable"),{...t,message:"Server is temporarily unavailable, please try again",isServiceError:!0}):t});const Ft=async()=>(await ir(()=>se.get("/api/v1/chats/"))).data,lr=async t=>(await ir(()=>se.post("/api/v1/chats/",t,{timeout:6e4}))).data,Ga=async t=>(await se.get(`/api/v1/chats/${t}`)).data,cr=async(t,e)=>{await se.post(`/api/v1/chats/${t}/members/${e}`)},pr=async(t,e)=>{await se.delete(`/api/v1/chats/${t}/members/${e}`)},Ht=async(t,e=1,o=50)=>(await se.get(`/api/v1/messages/chat/${t}?page=${e}&per_page=${o}`)).data,dr=async t=>(await se.post("/api/v1/messages/",t)).data,ur=async t=>{await se.post(`/api/v1/messages/chat/${t}/read-all`)},fr=async t=>{console.log("uploadMedia: Starting upload for file:",t.name,t.size,t.type);const e=new FormData;e.append("file",t);try{const o=await se.post("/api/v1/messages/upload-media",e,{headers:{},timeout:6e4});return console.log("uploadMedia: Upload successful:",o.data),o.data}catch(o){throw console.error("uploadMedia: Upload failed:",o),o.response&&(console.error("Response status:",o.response.status),console.error("Response data:",o.response.data),console.error("Response headers:",o.response.headers)),o}},gr=async()=>(await se.get("/api/v1/me")).data,hr=async()=>(await se.get("/api/v1/health")).data,mr=async()=>(await se.get("/api/v1/debug/auth")).data,vr=async t=>(await se.post("/api/v1/debug/validate-telegram-data",t,{headers:{"Content-Type":"application/json"}})).data,Vt=async(t,e)=>(await se.post(`/api/v1/chats/${t}/invite-by-username`,{username:e})).data,qt=async()=>{await se.post("/api/v1/users/check-invitations")},Gt=Object.freeze(Object.defineProperty({__proto__:null,addMemberToChat:cr,checkAndAcceptInvitations:qt,createChat:lr,debugAuthConfig:mr,debugValidateTelegramData:vr,getChat:Ga,getChatMessages:Ht,getChats:Ft,getCurrentUser:gr,healthCheck:hr,inviteMemberByUsername:Vt,markAllMessagesAsRead:ur,removeMemberFromChat:pr,sendMessage:dr,uploadMedia:fr},Symbol.toStringTag,{value:"Module"})),Xa=()=>Lr(),ot=t=>zr(t),Ya=()=>{const t=Xa(),[e,o]=d.useState([]),[s,n]=d.useState(null),[a,c]=d.useState(null),[l,i]=d.useState(!0),[h,p]=d.useState(null),[y,f]=d.useState(!1),[v,C]=d.useState(!1),x=ot(u=>s?Xr(u,s.id):[]),w=ot(u=>s?Kr(u,s.id):!1),g=ot(u=>s?Yr(u,s.id):null),b=ot(u=>s?Gr(u,s.id):0),A=ot(Vr),T=d.useCallback(()=>rr(),[]);d.useEffect(()=>{t(Nr()),console.log("📱 Сессия инициализирована")},[t]),d.useEffect(()=>{const u=setInterval(()=>{A>5e3&&(t(po({maxMessagesPerChat:500,maxChatAge:216e5})),console.log("🧹 Хранилище оптимизировано, сообщений было:",A))},6e5);return()=>clearInterval(u)},[t,A]),d.useEffect(()=>{const u=()=>{t(qr()),console.log("📱 Сессия завершена")},P=()=>{document.hidden&&t(po({maxMessagesPerChat:1e3}))};return window.addEventListener("beforeunload",u),document.addEventListener("visibilitychange",P),()=>{window.removeEventListener("beforeunload",u),document.removeEventListener("visibilitychange",P)}},[t]);const S=d.useCallback(async()=>{var u,P;try{const E=await gr();c(E),p(null),f(!1);try{await qt()}catch(k){((u=k.response)==null?void 0:u.status)===404?console.log("Check invitations endpoint not available (404) - skipping"):console.log("No pending invitations or error checking invitations:",k)}}catch(E){if(console.error("Error loading current user:",E),((P=E.response)==null?void 0:P.status)===401||E.isAuthError?(f(!0),p("Приложение должно быть открыто из Telegram для корректной работы")):p("Ошибка загрузки данных пользователя"),!nr()){const k=Ua();c(k?{id:k.id,telegram_id:k.id,username:k.username,first_name:k.first_name,last_name:k.last_name,profile_photo_url:k.photo_url}:{id:123456789,telegram_id:123456789,username:"testuser",first_name:"Test",last_name:"User",profile_photo_url:void 0}),f(!1)}}},[T]),m=d.useCallback(async()=>{var u,P;try{i(!0);const k=(await Ft()).sort((L,Y)=>!L.last_message_time&&!Y.last_message_time?0:L.last_message_time?Y.last_message_time?new Date(Y.last_message_time).getTime()-new Date(L.last_message_time).getTime():-1:1);o(k),p(null),f(!1)}catch(E){console.error("Error loading chats:",E),((u=E.response)==null?void 0:u.status)===401||E.isAuthError?(f(!0),p("Приложение должно быть открыто из Telegram для корректной работы")):E.isTimeoutError||E.code==="ECONNABORTED"?p("⏱️ Сервер запускается, попробуйте обновить страницу через минуту"):E.isServiceError||((P=E.response)==null?void 0:P.status)===503?p("🔧 Сервер временно недоступен, попробуйте через несколько минут"):p("Ошибка загрузки чатов")}finally{i(!1)}},[]),j=d.useCallback(async()=>{var u;try{const E=(await Ft()).sort((k,L)=>!k.last_message_time&&!L.last_message_time?0:k.last_message_time?L.last_message_time?new Date(L.last_message_time).getTime()-new Date(k.last_message_time).getTime():-1:1);o(E),p(null),f(!1)}catch(P){console.error("Error refreshing chats:",P),(((u=P.response)==null?void 0:u.status)===401||P.isAuthError)&&f(!0)}},[]),D=d.useCallback(async u=>{var P,E;try{t(uo({chatId:u,loading:!0}));const k=await Ht(u);t(Ur({chatId:u,messages:k.messages})),p(null),f(!1)}catch(k){console.error("Error loading messages:",k),t(Fr({chatId:u,error:k.message})),((P=k.response)==null?void 0:P.status)===401||k.isAuthError?(f(!0),p("Приложение должно быть открыто из Telegram для корректной работы")):k.isTimeoutError||k.code==="ECONNABORTED"?p("⏱️ Сервер запускается, сообщения загрузятся автоматически"):k.isServiceError||((E=k.response)==null?void 0:E.status)===503?p("🔧 Сервер временно недоступен, попробуйте обновить чат"):p("Ошибка загрузки сообщений")}finally{t(uo({chatId:u,loading:!1}))}},[t]),O=d.useCallback(async u=>{var P,E;try{const L=(await Ht(u)).messages;if(L.length>0){const Y=L[L.length-1].id;if(b&&Y>b){const F=x,K=new Set(F.map(G=>G.id)),I=L.filter(G=>!K.has(G.id));if(I.length>0){t(Hr({chatId:u,messages:I})),C(!0),j();try{(E=(P=window.Telegram)==null?void 0:P.WebApp)!=null&&E.HapticFeedback&&window.Telegram.WebApp.HapticFeedback.notificationOccurred("success")}catch{console.log("Haptic feedback not available")}console.log("🔄 Получены новые сообщения")}}}}catch(k){console.error("Error checking new messages:",k)}},[b,x,t,j]),M=d.useCallback(async(u,P)=>{if(P.trim())try{const E={text:P.trim(),message_type:"text",chat_id:u},k=await dr(E);t(fo({chatId:u,message:k})),o(L=>L.map(F=>F.id===u?{...F,last_message:P.trim(),last_message_time:new Date().toISOString()}:F).sort((F,K)=>!F.last_message_time&&!K.last_message_time?0:F.last_message_time?K.last_message_time?new Date(K.last_message_time).getTime()-new Date(F.last_message_time).getTime():-1:1))}catch(E){if(console.error("Error sending message:",E),p("Ошибка отправки сообщения"),a){const k={id:Date.now(),text:P.trim(),message_type:"text",chat_id:u,sender_id:a.id,sender:{id:a.id,telegram_id:a.telegram_id,username:a.username,first_name:a.first_name,last_name:a.last_name,profile_photo_url:a.profile_photo_url},is_edited:!1,is_deleted:!1,read_by:[],created_at:new Date().toISOString(),updated_at:new Date().toISOString()};t(fo({chatId:u,message:k})),o(L=>L.map(F=>F.id===u?{...F,last_message:P.trim(),last_message_time:new Date().toISOString()}:F).sort((F,K)=>!F.last_message_time&&!K.last_message_time?0:F.last_message_time?K.last_message_time?new Date(K.last_message_time).getTime()-new Date(F.last_message_time).getTime():-1:1))}}},[a,t]),$=d.useCallback(async(u,P=[],E=[],k)=>{try{const L={title:u,chat_type:P.length+E.length>0?"group":"private",member_ids:P,...k&&{photo_url:k}},Y=await lr(L);if(E.length>0){const{inviteMemberByUsername:K}=await Bt(async()=>{const{inviteMemberByUsername:I}=await Promise.resolve().then(()=>Gt);return{inviteMemberByUsername:I}},void 0);for(const I of E)try{await K(Y.id,I)}catch(G){console.error(`Error inviting ${I}:`,G)}}await m();const F={id:Y.id,title:Y.title,chat_type:Y.chat_type,photo_url:Y.photo_url,last_message:void 0,last_message_time:void 0,unread_count:0};return n(F),await D(Y.id),Y}catch(L){throw console.error("Error creating chat:",L),p("Ошибка создания чата"),L}},[m,D]),V=d.useCallback(u=>{n(u),C(!1),D(u.id),u.unread_count>0&&ur(u.id).catch(P=>console.error("Error marking messages as read:",P))},[D]),_=d.useCallback(()=>{n(null),C(!1)},[]),q=d.useCallback(()=>{C(!1)},[]),X=d.useCallback(async u=>{try{const{getChat:P}=await Bt(async()=>{const{getChat:k}=await Promise.resolve().then(()=>Gt);return{getChat:k}},void 0);return await P(u)}catch(P){throw console.error("Error loading chat info:",P),p("Ошибка загрузки информации о чате"),P}},[]),H=d.useCallback(async(u,P)=>{try{await cr(u,P),p(null),s&&s.id===u&&setTimeout(()=>j(),1e3)}catch(E){throw console.error("Error adding member to chat:",E),p("Ошибка добавления участника"),E}},[s,j]),B=d.useCallback(async(u,P)=>{try{await pr(u,P),p(null),s&&s.id===u&&setTimeout(()=>j(),1e3)}catch(E){throw console.error("Error removing member from chat:",E),p("Ошибка удаления участника"),E}},[s,j]);return d.useEffect(()=>{T(),S(),m()},[T,S,m]),d.useEffect(()=>{if(y)return;const u=setInterval(()=>{j()},3e4);return()=>clearInterval(u)},[y,j]),d.useEffect(()=>{if(!s||y)return;const u=setInterval(()=>{O(s.id)},5e3);return()=>clearInterval(u)},[s,y,O]),d.useEffect(()=>{if(y)return;const u=setInterval(async()=>{var P;try{await qt(),j()}catch(E){((P=E.response)==null?void 0:P.status)===404?console.log("Check invitations endpoint not available (404) - skipping"):console.log("No new invitations or error:",E)}},12e4);return()=>clearInterval(u)},[y,j]),{chats:e,currentChat:s,messages:x,currentUser:a,loading:l,messagesLoading:w,error:h||g,isAuthError:y,hasNewMessages:v,markMessagesAsViewed:q,sendNewMessage:M,createNewChat:$,selectChat:V,refreshChats:j,refreshMessages:()=>s&&D(s.id),loadChatInfo:X,addMemberToChat:H,removeMemberFromChat:B,clearCurrentChat:_,checkNewMessages:()=>s&&O(s.id)}},Ka=({open:t,onClose:e})=>{const[o,s]=d.useState([]),[n,a]=d.useState(!1),c=async()=>{var C,x,w;a(!0);const f=[];try{const g=nr();f.push({name:"Telegram WebApp",status:g?"success":"warning",message:g?"Приложение запущено в Telegram WebApp":"Приложение запущено вне Telegram (режим разработки)",details:g?"Все функции Telegram WebApp доступны":"Некоторые функции могут работать с ограничениями",suggestions:g?void 0:["Откройте приложение через Telegram бота","Проверьте настройки WebApp в боте"]})}catch(g){f.push({name:"Telegram WebApp",status:"error",message:"Ошибка при проверке Telegram WebApp",details:g instanceof Error?g.message:"Неизвестная ошибка"})}try{const g=ze();f.push({name:"Telegram Init Data",status:g?"success":"error",message:g?`Данные авторизации найдены (${g.length} символов)`:"Данные авторизации отсутствуют",details:g?`Подпись: ${g.substring(0,50)}...`:"Невозможно получить данные для авторизации на сервере",suggestions:g?void 0:["Перезапустите приложение из Telegram","Проверьте настройки бота","Убедитесь что WebApp правильно настроен"]})}catch(g){f.push({name:"Telegram Init Data",status:"error",message:"Ошибка при получении данных авторизации",details:g instanceof Error?g.message:"Неизвестная ошибка"})}try{await hr(),f.push({name:"Подключение к серверу",status:"success",message:"Сервер отвечает на запросы",details:"Health check прошел успешно"})}catch(g){const b=g.isMethodError||((C=g.response)==null?void 0:C.status)===405;f.push({name:"Подключение к серверу",status:b?"warning":"error",message:b?"Сервер доступен, но некоторые endpoints могут не работать (ошибка 405)":"Сервер недоступен или не отвечает",details:g.message||"Неизвестная ошибка сервера",suggestions:b?["Проверьте настройки API на сервере","Убедитесь что все endpoints правильно настроены","Свяжитесь с администратором сервера"]:["Проверьте подключение к интернету","Сервер может быть временно недоступен","Попробуйте позже"]})}try{await mr(),f.push({name:"Конфигурация авторизации",status:"success",message:"Настройки авторизации на сервере корректны",details:"Сервер готов к обработке Telegram авторизации"})}catch(g){const b=g.isMethodError||((x=g.response)==null?void 0:x.status)===405;f.push({name:"Конфигурация авторизации",status:b?"warning":"error",message:b?"Endpoint диагностики недоступен (405), но это не критично":"Проблема с настройками авторизации на сервере",details:g.message||"Ошибка при проверке конфигурации",suggestions:b?["Функция диагностики может быть отключена на сервере","Это не влияет на основную работу приложения"]:["Проверьте настройки Telegram бота на сервере","Убедитесь что TELEGRAM_BOT_TOKEN настроен правильно"]})}const v=ze();if(v)try{await vr(v),f.push({name:"Валидация Telegram данных",status:"success",message:"Данные Telegram проходят валидацию на сервере",details:"Подпись данных корректна"})}catch(g){const b=g.isMethodError||((w=g.response)==null?void 0:w.status)===405;f.push({name:"Валидация Telegram данных",status:b?"warning":"error",message:b?"Endpoint валидации недоступен (405)":"Данные Telegram не проходят валидацию",details:g.message||"Ошибка валидации данных",suggestions:b?["Endpoint валидации может быть отключен","Попробуйте основные функции приложения"]:["Данные авторизации могли быть повреждены","Перезапустите приложение из Telegram","Проверьте настройки бота"]})}s(f),a(!1)};d.useEffect(()=>{t&&c()},[t]);const l=f=>{switch(f){case"success":return r.jsx(ls,{sx:{color:"#4CAF50"}});case"error":return r.jsx(Wa,{sx:{color:"#f44336"}});case"warning":return r.jsx(Na,{sx:{color:"#ff9800"}});case"loading":return r.jsx(Se,{size:24});default:return r.jsx(or,{sx:{color:"#2196f3"}})}},i=f=>{switch(f){case"success":return"#4CAF50";case"error":return"#f44336";case"warning":return"#ff9800";default:return"#2196f3"}},h=o.filter(f=>f.status==="error").length,p=o.filter(f=>f.status==="warning").length,y=o.filter(f=>f.status==="success").length;return r.jsxs(At,{open:t,onClose:e,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{bgcolor:"rgba(35, 43, 59, 0.95)",color:"white",maxHeight:"90vh"}},children:[r.jsxs(Rt,{children:[r.jsxs(z,{sx:{display:"flex",alignItems:"center",gap:2},children:[r.jsx(W,{variant:"h6",children:"Диагностика системы"}),n&&r.jsx(Se,{size:24})]}),!n&&o.length>0&&r.jsxs(z,{sx:{display:"flex",gap:1,mt:1},children:[r.jsx(st,{label:`${y} успешно`,color:"success",size:"small"}),p>0&&r.jsx(st,{label:`${p} предупр.`,sx:{bgcolor:"#ff9800",color:"white"},size:"small"}),h>0&&r.jsx(st,{label:`${h} ошибок`,color:"error",size:"small"})]})]}),r.jsx(Mt,{sx:{pb:1},children:n?r.jsxs(z,{sx:{display:"flex",alignItems:"center",gap:2,py:4},children:[r.jsx(Se,{}),r.jsx(W,{children:"Выполняется диагностика..."})]}):r.jsxs(z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[o.map((f,v)=>r.jsxs(xs,{sx:{bgcolor:"rgba(255, 255, 255, 0.05)","&:before":{display:"none"},"&.Mui-expanded":{margin:"8px 0"}},children:[r.jsx(Rs,{expandIcon:r.jsx(Ba,{sx:{color:"white"}}),children:r.jsxs(z,{sx:{display:"flex",alignItems:"center",gap:2,width:"100%"},children:[l(f.status),r.jsx(W,{sx:{fontWeight:500,flex:1},children:f.name}),r.jsx(st,{label:f.status==="success"?"OK":f.status==="error"?"Ошибка":"Внимание",size:"small",sx:{bgcolor:i(f.status),color:"white",minWidth:80}})]})}),r.jsxs(Cs,{children:[r.jsx(W,{variant:"body2",sx:{mb:1},children:f.message}),f.details&&r.jsxs(r.Fragment,{children:[r.jsx(Pt,{sx:{my:1,bgcolor:"rgba(255,255,255,0.1)"}}),r.jsxs(W,{variant:"caption",sx:{color:"#8b95a1"},children:["Детали: ",f.details]})]}),f.suggestions&&f.suggestions.length>0&&r.jsxs(r.Fragment,{children:[r.jsx(Pt,{sx:{my:1,bgcolor:"rgba(255,255,255,0.1)"}}),r.jsx(W,{variant:"caption",sx:{color:"#8b95a1",display:"block",mb:.5},children:"Рекомендации:"}),f.suggestions.map((C,x)=>r.jsxs(W,{variant:"caption",sx:{color:"#8b95a1",display:"block",ml:2},children:["• ",C]},x))]})]})]},v)),h>0&&r.jsx(ke,{severity:"error",sx:{mt:2,bgcolor:"rgba(244, 67, 54, 0.1)"},children:r.jsx(W,{variant:"body2",children:"Обнаружены критические ошибки. Рекомендуется перезапустить приложение из Telegram."})}),h===0&&p>0&&r.jsx(ke,{severity:"warning",sx:{mt:2,bgcolor:"rgba(255, 152, 0, 0.1)"},children:r.jsx(W,{variant:"body2",children:"Есть некритичные проблемы. Основные функции должны работать."})}),h===0&&p===0&&o.length>0&&r.jsx(ke,{severity:"success",sx:{mt:2,bgcolor:"rgba(76, 175, 80, 0.1)"},children:r.jsx(W,{variant:"body2",children:"Все проверки прошли успешно! Система работает корректно."})})]})}),r.jsxs(ro,{children:[r.jsx(ve,{onClick:()=>c(),disabled:n,children:"Повторить диагностику"}),r.jsx(ve,{onClick:e,variant:"contained",children:"Закрыть"})]})]})},xr=({currentPhotoUrl:t,onPhotoChange:e,disabled:o=!1,size:s=80})=>{const[n,a]=d.useState(!1),[c,l]=d.useState(null),[i,h]=d.useState(t||null),p=d.useRef(null),y=x=>{var b;const w=(b=x.target.files)==null?void 0:b[0];if(!w)return;if(!w.type.startsWith("image/")){l("Пожалуйста, выберите изображение");return}if(w.size>5*1024*1024){l("Размер файла не должен превышать 5MB");return}const g=new FileReader;g.onload=A=>{var T;h((T=A.target)==null?void 0:T.result)},g.readAsDataURL(w),f(w)},f=async x=>{var w,g,b,A,T;try{a(!0),l(null),console.log("Загружаем файл:",x.name,x.size,x.type);const S=await fr(x);e(S.media_url),h(S.media_url),console.log("Фото успешно загружено:",S.media_url)}catch(S){console.error("Error uploading photo:",S);let m="Ошибка загрузки фото";((w=S.response)==null?void 0:w.status)===405?(m="Загрузка фото временно недоступна",console.warn("405 Error: uploadMedia endpoint may not be available")):((g=S.response)==null?void 0:g.status)===413?m="Файл слишком большой":((b=S.response)==null?void 0:b.status)===422?m="Неподдерживаемый формат файла":((A=S.response)==null?void 0:A.status)===401?m="Ошибка авторизации":S.isAuthError?m="Требуется авторизация в Telegram":S.code==="ECONNABORTED"?m="Превышено время ожидания":((T=S.response)==null?void 0:T.status)>=500&&(m="Ошибка сервера, попробуйте позже"),l(m),h(t||null)}finally{a(!1)}},v=()=>{h(null),e(null),l(null),p.current&&(p.current.value="")},C=()=>{var x;o||n||(x=p.current)==null||x.click()};return r.jsxs(z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[r.jsxs(z,{sx:{position:"relative"},children:[r.jsx(lt,{src:i||void 0,sx:{width:s,height:s,bgcolor:"#4a9eff",cursor:o||n?"default":"pointer",border:c?"2px solid #f44336":"2px solid transparent","&:hover":{opacity:o||n?1:.8}},onClick:C,children:n?r.jsx(Se,{size:s*.4,sx:{color:"white"}}):r.jsx(za,{sx:{fontSize:s*.4}})}),i&&!n&&r.jsx(We,{size:"small",sx:{position:"absolute",top:-8,right:-8,bgcolor:"#f44336",color:"white",width:24,height:24,"&:hover":{bgcolor:"#d32f2f"}},onClick:v,children:r.jsx(Eo,{sx:{fontSize:14}})}),n&&r.jsx(z,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"rgba(0,0,0,0.5)",borderRadius:"50%"},children:r.jsx(Se,{size:s*.3,sx:{color:"white"}})})]}),r.jsxs(z,{sx:{display:"flex",gap:1},children:[r.jsx(ve,{variant:"outlined",size:"small",startIcon:r.jsx(_a,{}),onClick:C,disabled:o||n,sx:{borderColor:"#4a9eff",color:"#4a9eff","&:hover":{borderColor:"#3d8bdb",bgcolor:"rgba(74, 158, 255, 0.1)"}},children:n?"Загрузка...":"Выбрать фото"}),i&&r.jsx(so,{title:"Удалить фото",children:r.jsx(We,{size:"small",onClick:v,disabled:o||n,sx:{color:"#f44336","&:hover":{bgcolor:"rgba(244, 67, 54, 0.1)"}},children:r.jsx(Eo,{})})})]}),r.jsxs(W,{variant:"caption",sx:{color:"#8b95a1",textAlign:"center"},children:["Нажмите на аватар или кнопку для выбора фото",r.jsx("br",{}),"Максимальный размер: 5MB",c&&r.jsxs(r.Fragment,{children:[r.jsx("br",{}),r.jsx("span",{style:{color:"#f44336"},children:c}),r.jsx("br",{}),r.jsx("span",{style:{color:"#8b95a1"},children:"Чат можно создать и без фото"})]})]}),r.jsx("input",{ref:p,type:"file",accept:"image/*",style:{display:"none"},onChange:y})]})},Ja=({open:t,onClose:e,currentChat:o,loadChatInfo:s,addMemberToChat:n,removeMemberFromChat:a,currentUserId:c,onChatPhotoUpdate:l})=>{var B;const[i,h]=d.useState(null),[p,y]=d.useState(!1),[f,v]=d.useState(null),[C,x]=d.useState(""),[w,g]=d.useState(""),[b,A]=d.useState("username"),[T,S]=d.useState(!1),[m,j]=d.useState(null),[D,O]=d.useState(!1);d.useEffect(()=>{t&&o&&M()},[t,o]);const M=async()=>{if(o)try{y(!0),v(null);const u=await s(o.id);h(u)}catch(u){v("Не удалось загрузить информацию о чате"),console.error("Error loading chat details:",u)}finally{y(!1)}},$=async u=>{o&&await n(o.id,u)},V=async u=>{if(!o)return;const P=await Vt(o.id,u);P.status==="added"?j({type:"success",message:`✅ @${u} найден и добавлен в чат!`}):P.status==="invited"&&j({type:"info",message:`📨 @${u} не найден в базе. Приглашение создано - пользователь будет добавлен при входе в приложение.`}),setTimeout(()=>j(null),5e3)},_=async()=>{if(!C.trim())return;const u=C.trim(),P=parseInt(u);try{S(!0),v(null),isNaN(P)?await V(u.replace(/^@/,"")):await $(P),x(""),await M()}catch(E){console.error("Error adding member (ID path):",E),v("Не удалось добавить участника")}finally{S(!1)}},q=async()=>{if(!(!w.trim()||!o))try{S(!0),v(null),j(null);const u=await Vt(o.id,w.trim());u.status==="added"?(j({type:"success",message:`✅ @${w.trim()} добавлен в чат!`}),g(""),await M()):u.status==="invited"&&(j({type:"info",message:`📨 Приглашение отправлено @${w.trim()}. Пользователь будет добавлен автоматически при входе в приложение.`}),g("")),setTimeout(()=>j(null),5e3)}catch(u){console.error("Error adding member by username:",u),j({type:"warning",message:"Не удалось добавить участника. Проверьте username и попробуйте снова."})}finally{S(!1)}},X=async u=>{if(o)try{v(null),await a(o.id,u),await M()}catch(P){v("Не удалось удалить участника"),console.error("Error removing member:",P)}},H=u=>{i&&h({...i,photo_url:u}),l&&l(u),O(!1)};return o?r.jsxs(At,{open:t,onClose:e,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{bgcolor:"rgba(35, 43, 59, 0.95)",color:"white"}},children:[r.jsxs(Rt,{sx:{display:"flex",alignItems:"center",gap:2},children:[r.jsxs(z,{sx:{position:"relative"},children:[r.jsx(lt,{src:(i==null?void 0:i.photo_url)||o.photo_url||void 0,sx:{bgcolor:"#4a9eff",width:64,height:64},children:o.title?o.title[0].toUpperCase():r.jsx(Oo,{})}),r.jsx(We,{onClick:()=>O(!0),sx:{position:"absolute",bottom:-4,right:-4,bgcolor:"#4a9eff",color:"white",width:24,height:24,"&:hover":{bgcolor:"#3d8bdb"}},children:r.jsx($a,{sx:{fontSize:14}})})]}),r.jsxs(z,{children:[r.jsx(W,{variant:"h6",children:o.title||"Безымянный чат"}),r.jsx(W,{variant:"caption",sx:{color:"#8b95a1"},children:o.chat_type==="private"?"Личный чат":"Групповой чат"})]})]}),r.jsxs(Mt,{children:[f&&r.jsx(ke,{severity:"error",sx:{mb:2},children:f}),p?r.jsx(z,{sx:{display:"flex",justifyContent:"center",py:3},children:r.jsx(Se,{sx:{color:"#4a9eff"}})}):i?r.jsxs(r.Fragment,{children:[r.jsxs(z,{sx:{mb:3},children:[r.jsx(W,{variant:"subtitle1",sx:{mb:1,fontWeight:600},children:"Информация"}),r.jsxs(W,{variant:"body2",sx:{color:"#8b95a1",mb:1},children:["ID чата: ",i.id]}),r.jsxs(W,{variant:"body2",sx:{color:"#8b95a1",mb:1},children:["Создан: ",new Date(i.created_at).toLocaleDateString("ru-RU")]}),i.description&&r.jsxs(W,{variant:"body2",sx:{color:"#8b95a1"},children:["Описание: ",i.description]})]}),r.jsxs(z,{sx:{mb:3},children:[r.jsxs(W,{variant:"subtitle1",sx:{mb:2,fontWeight:600},children:["Участники (",((B=i.members)==null?void 0:B.length)||0,")"]}),i.members&&i.members.length>0?r.jsx(Wo,{sx:{maxHeight:200,overflow:"auto"},children:i.members.map(u=>r.jsxs(Bo,{sx:{bgcolor:"rgba(43, 52, 65, 0.5)",borderRadius:1,mb:1},children:[r.jsx(er,{children:r.jsx(lt,{src:u.profile_photo_url||void 0,sx:{bgcolor:"#4a9eff"},children:u.first_name?u.first_name[0].toUpperCase():r.jsx(Oo,{})})}),r.jsx(tr,{primary:r.jsxs(z,{sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsxs(W,{children:[u.first_name," ",u.last_name]}),u.is_admin&&r.jsx(st,{icon:r.jsx(ka,{}),label:"Админ",size:"small",sx:{bgcolor:"#4a9eff",color:"white",fontSize:"0.7rem"}})]}),secondary:r.jsx(W,{variant:"caption",sx:{color:"#8b95a1"},children:u.username?`@${u.username}`:`ID: ${u.telegram_id}`})}),c!==u.telegram_id&&r.jsx(so,{title:"Удалить участника",children:r.jsx(We,{onClick:()=>X(u.telegram_id),sx:{color:"#f44336","&:hover":{bgcolor:"rgba(244, 67, 54, 0.1)"}},children:r.jsx(La,{})})})]},u.id))}):r.jsx(W,{variant:"body2",sx:{color:"#8b95a1",textAlign:"center",py:2},children:"Нет участников"})]}),r.jsxs(z,{children:[r.jsx(W,{variant:"subtitle1",sx:{mb:2,fontWeight:600},children:"Добавить участника"}),m&&r.jsx(ke,{severity:m.type==="success"?"success":m.type==="info"?"info":"warning",sx:{mb:2,"& .MuiAlert-message":{color:"white"},bgcolor:m.type==="success"?"rgba(76, 175, 80, 0.2)":m.type==="info"?"rgba(33, 150, 243, 0.2)":"rgba(255, 152, 0, 0.2)",border:`1px solid ${m.type==="success"?"#4CAF50":m.type==="info"?"#2196F3":"#FF9800"}`},children:m.message}),r.jsxs(z,{sx:{display:"flex",gap:1,mb:2},children:[r.jsx(ve,{variant:b==="username"?"contained":"outlined",onClick:()=>A("username"),size:"small",sx:{bgcolor:b==="username"?"#4a9eff":"transparent",color:b==="username"?"white":"#4a9eff",borderColor:"#4a9eff","&:hover":{bgcolor:b==="username"?"#3d8bdb":"rgba(74, 158, 255, 0.1)"}},children:"По @username"}),r.jsx(ve,{variant:b==="id"?"contained":"outlined",onClick:()=>A("id"),size:"small",sx:{bgcolor:b==="id"?"#4a9eff":"transparent",color:b==="id"?"white":"#4a9eff",borderColor:"#4a9eff","&:hover":{bgcolor:b==="id"?"#3d8bdb":"rgba(74, 158, 255, 0.1)"}},children:"По ID (авто)"})]}),b==="username"?r.jsxs(z,{sx:{display:"flex",gap:1},children:[r.jsx(nt,{size:"small",placeholder:"@username пользователя",value:w,onChange:u=>g(u.target.value),helperText:"💡 Если пользователь уже использовал приложение - добавится сразу. Если нет - получит приглашение.",sx:{flex:1,"& .MuiOutlinedInput-root":{color:"white","& fieldset":{borderColor:"rgba(255, 255, 255, 0.3)"},"&:hover fieldset":{borderColor:"#4a9eff"},"&.Mui-focused fieldset":{borderColor:"#4a9eff"}},"& .MuiFormHelperText-root":{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem"}}}),r.jsx(ve,{variant:"contained",onClick:q,disabled:!w.trim()||T,startIcon:T?r.jsx(Se,{size:16}):r.jsx(ko,{}),sx:{bgcolor:"#4a9eff","&:hover":{bgcolor:"#3d8bdb"},minWidth:"120px"},children:T?"Поиск...":"Добавить"})]}):r.jsxs(z,{sx:{display:"flex",gap:1},children:[r.jsx(nt,{size:"small",placeholder:"ID или @username",value:C,onChange:u=>x(u.target.value),helperText:"💡 Можете ввести как Telegram ID (числа), так и @username - система определит автоматически",sx:{flex:1,"& .MuiOutlinedInput-root":{color:"white","& fieldset":{borderColor:"rgba(255, 255, 255, 0.3)"},"&:hover fieldset":{borderColor:"#4a9eff"},"&.Mui-focused fieldset":{borderColor:"#4a9eff"}},"& .MuiFormHelperText-root":{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem"}}}),r.jsx(ve,{variant:"contained",onClick:_,disabled:!C.trim()||T,startIcon:T?r.jsx(Se,{size:16}):r.jsx(ko,{}),sx:{bgcolor:"#4a9eff","&:hover":{bgcolor:"#3d8bdb"},minWidth:"120px"},children:T?"Поиск...":"Добавить"})]})]})]}):r.jsx(W,{variant:"body2",sx:{textAlign:"center",py:3,color:"#8b95a1"},children:"Не удалось загрузить информацию о чате"})]}),r.jsx(ro,{children:r.jsx(ve,{onClick:e,sx:{color:"#8b95a1"},children:"Закрыть"})}),r.jsxs(At,{open:D,onClose:()=>O(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{bgcolor:"rgba(35, 43, 59, 0.95)",color:"white"}},children:[r.jsx(Rt,{children:"Изменить фото чата"}),r.jsxs(Mt,{children:[r.jsx(xr,{currentPhotoUrl:(i==null?void 0:i.photo_url)||o.photo_url||void 0,onPhotoChange:u=>{u?H(u):(i&&h({...i,photo_url:void 0}),l&&l(""))}}),r.jsx(z,{sx:{display:"flex",gap:1,mt:2,justifyContent:"flex-end"},children:r.jsx(ve,{onClick:()=>O(!1),sx:{color:"#8b95a1"},children:"Отмена"})})]})]})]}):null},ai=()=>{const t=Dt(),e=Jr(t.breakpoints.down("md")),[o,s]=d.useState(""),[n,a]=d.useState(!1),[c,l]=d.useState(""),[i,h]=d.useState(""),[p,y]=d.useState(null),[f,v]=d.useState(null),[C,x]=d.useState(!1),[w,g]=d.useState(!1),[b,A]=d.useState(!1),T=d.useRef(null),{chats:S,currentChat:m,messages:j,currentUser:D,loading:O,messagesLoading:M,error:$,isAuthError:V,hasNewMessages:_,markMessagesAsViewed:q,sendNewMessage:X,createNewChat:H,selectChat:B,loadChatInfo:u,addMemberToChat:P,removeMemberFromChat:E,clearCurrentChat:k}=Ya(),L=()=>{var R;(R=T.current)==null||R.scrollIntoView({behavior:"smooth"})},Y=()=>{k()};d.useEffect(L,[j]),d.useEffect(()=>{if(_&&j.length>0){const R=setTimeout(()=>{q()},2e3);return()=>clearTimeout(R)}},[_,j.length,q]);const F=async()=>{if(!(!o.trim()||!m))try{q(),await X(m.id,o.trim()),s(""),L()}catch(R){console.error("Error sending message:",R)}},K=R=>{R.key==="Enter"&&!R.shiftKey&&(R.preventDefault(),F())},I=async()=>{var R,Z;try{x(!0),v(null);const N=[],ee=[];i.trim()&&i.split(",").map(ce=>ce.trim()).filter(ce=>ce.length>0).forEach(ce=>{const Me=parseInt(ce);!isNaN(Me)&&Me>0?N.push(Me):ee.push(ce.replace(/^@/,""))}),await H(c.trim(),N,ee,p||void 0);let Ae=`✅ Чат "${c.trim()}" создан успешно!`;N.length>0&&(Ae+=` Добавлено ${N.length} участников.`),ee.length>0&&(Ae+=` Отправлено ${ee.length} приглашений по username.`),v({type:"success",message:Ae}),setTimeout(()=>{v(null),a(!1)},2e3),l(""),h(""),y(null)}catch(N){console.error("Error creating chat:",N);let ee="Не удалось создать чат. Попробуйте еще раз.";N!=null&&N.isTimeoutError?ee="⏱️ Сервер запускается, это может занять до минуты. Попробуйте еще раз.":N!=null&&N.isServiceError?ee="🔧 Сервер временно недоступен. Попробуйте через несколько минут.":N!=null&&N.isAuthError?ee="🔐 Ошибка авторизации. Откройте приложение из Telegram.":(N==null?void 0:N.code)==="ECONNABORTED"?ee="⏱️ Превышено время ожидания. Сервер может запускаться - попробуйте еще раз.":((R=N==null?void 0:N.response)==null?void 0:R.status)===503?ee="🔧 Сервер временно недоступен. Попробуйте через несколько минут.":((Z=N==null?void 0:N.response)==null?void 0:Z.status)===500&&(ee="⚠️ Ошибка на сервере. Попробуйте еще раз или обратитесь в поддержку."),v({type:"warning",message:ee})}finally{x(!1)}},G=R=>new Date(R).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"}),J=R=>{const Z=new Date(R),N=new Date,ee=new Date(N);return ee.setDate(ee.getDate()-1),Z.toDateString()===N.toDateString()?"Сегодня":Z.toDateString()===ee.toDateString()?"Вчера":Z.toLocaleDateString("ru-RU",{day:"numeric",month:"short"})},ne=R=>{const Z=R.sender;return Z.username?`@${Z.username}`:`${Z.first_name}${Z.last_name?` ${Z.last_name}`:""}`},ae=R=>D&&R.sender_id===D.id;return O?r.jsx(z,{sx:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"rgba(35, 43, 59, 0.95)"},children:r.jsx(Se,{sx:{color:"#4a9eff"}})}):V?r.jsxs(z,{sx:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",bgcolor:"rgba(35, 43, 59, 0.95)",p:3},children:[r.jsxs(ke,{severity:"error",sx:{mb:3,maxWidth:"600px"},children:[r.jsx(W,{variant:"h6",sx:{mb:2},children:"🚫 Ошибка авторизации"}),r.jsx(W,{variant:"body1",sx:{mb:2,fontWeight:"bold"},children:"Проблема с авторизацией на сервере"}),r.jsx(W,{variant:"body2",sx:{mb:2},children:"Сервер отклоняет авторизацию. Возможные причины:"}),r.jsxs(W,{variant:"body2",component:"ul",sx:{pl:2,mb:2},children:[r.jsx("li",{children:"На сервере не настроен токен Telegram бота"}),r.jsx("li",{children:"Неправильный или истёкший токен бота"}),r.jsx("li",{children:"Проблема с подписью данных авторизации"}),r.jsx("li",{children:"Приложение запущено не из Telegram"})]}),r.jsx(W,{variant:"body2",sx:{mb:2},children:r.jsx("strong",{children:"Что делать:"})}),r.jsxs(W,{variant:"body2",component:"ul",sx:{pl:2,mb:2},children:[r.jsx("li",{children:'Нажмите "Диагностика" для подробной проверки'}),r.jsx("li",{children:"Убедитесь, что приложение открыто из Telegram"}),r.jsx("li",{children:"Если вы администратор - проверьте настройки сервера"}),r.jsx("li",{children:"Если проблема повторяется - обратитесь в поддержку"})]})]}),r.jsxs(z,{sx:{display:"flex",gap:2,flexWrap:"wrap",justifyContent:"center"},children:[r.jsx(ve,{variant:"contained",onClick:()=>g(!0),sx:{bgcolor:"#f44336","&:hover":{bgcolor:"#d32f2f"}},children:"🔬 Диагностика проблемы"}),r.jsx(ve,{variant:"outlined",onClick:()=>{var R;(R=window.Telegram)!=null&&R.WebApp?window.Telegram.WebApp.close():window.history.back()},sx:{borderColor:"#4a9eff",color:"#4a9eff","&:hover":{borderColor:"#3d8bdb",color:"#3d8bdb"}},children:"⬅️ Назад"})]})]}):r.jsxs(z,{sx:{height:"100vh",display:"flex",bgcolor:"rgba(35, 43, 59, 0.95)",color:"white",overflow:"hidden"},children:[r.jsxs(z,{sx:{width:e?"100%":"350px",display:e&&m?"none":"flex",flexDirection:"column",borderRight:"1px solid rgba(43, 52, 65, 1)",bgcolor:"rgba(35, 43, 59, 0.95)"},children:[r.jsx(z,{sx:{p:e?1:2,borderBottom:"1px solid rgba(43, 52, 65, 1)",display:"flex",alignItems:"center",justifyContent:"space-between",minHeight:e?"52px":"auto"},children:r.jsxs(z,{sx:{display:"flex",alignItems:"center",gap:1,cursor:"pointer",p:1,borderRadius:2,"&:hover":{bgcolor:"rgba(74, 158, 255, 0.1)"},"&:active":{bgcolor:"rgba(74, 158, 255, 0.2)"}},onClick:()=>a(!0),onContextMenu:R=>{R.preventDefault(),a(!0)},children:[r.jsx(W,{variant:e?"body1":"h6",sx:{fontWeight:600,fontSize:e?"1rem":"inherit"},children:"Чаты"}),r.jsx(W,{variant:"caption",sx:{color:"#8b95a1",fontSize:e?"0.6rem":"0.7rem",ml:.5},children:"(нажмите для создания)"})]})}),r.jsx(Wo,{sx:{flex:1,overflow:"auto",p:0},children:S.map(R=>r.jsx(go.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:r.jsx(Bo,{disablePadding:!0,sx:{borderBottom:"1px solid rgba(43, 52, 65, 0.5)"},children:r.jsxs(Zr,{selected:(m==null?void 0:m.id)===R.id,onClick:()=>B(R),sx:{py:e?1.25:1.5,px:e?1:2,bgcolor:(m==null?void 0:m.id)===R.id?"rgba(74, 158, 255, 0.1)":"transparent","&:hover":{bgcolor:(m==null?void 0:m.id)===R.id?"rgba(74, 158, 255, 0.15)":"rgba(255, 255, 255, 0.05)"},minHeight:e?64:"auto"},children:[r.jsx(er,{children:r.jsx(Yn,{badgeContent:R.unread_count,color:"error",invisible:R.unread_count===0,children:r.jsx(lt,{src:R.photo_url||void 0,sx:{bgcolor:"#4a9eff",width:e?44:45,height:e?44:45},children:R.title?R.title[0].toUpperCase():r.jsx(Wt,{})})})}),r.jsx(tr,{primary:r.jsx(W,{variant:"body1",sx:{fontWeight:R.unread_count>0?600:400,color:"white",fontSize:e?"0.9rem":"inherit"},children:R.title||"Безымянный чат"}),secondary:r.jsxs(z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx(W,{variant:"caption",sx:{color:"#8b95a1",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:e?"120px":"150px",fontSize:e?"0.75rem":"inherit"},children:R.last_message||"Нет сообщений"}),R.last_message_time&&r.jsx(W,{variant:"caption",sx:{color:"#8b95a1",fontSize:e?"0.65rem":"0.7rem",ml:1},children:J(R.last_message_time)})]})})]})})},R.id))})]}),r.jsx(z,{sx:{flex:1,display:"flex",flexDirection:"column",position:"relative"},children:m?r.jsxs(r.Fragment,{children:[r.jsxs(z,{sx:{position:"fixed",top:0,left:e?0:"350px",right:0,zIndex:1300,p:e?.75:2,borderBottom:"1px solid rgba(43, 52, 65, 1)",bgcolor:"rgba(35, 43, 59, 0.98)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",display:"flex",alignItems:"center",justifyContent:"space-between",minHeight:e?"56px":"64px",boxShadow:"0 2px 20px rgba(0,0,0,0.15)"},children:[r.jsxs(z,{sx:{display:"flex",alignItems:"center",flex:1},children:[e&&r.jsx(We,{onClick:Y,sx:{color:"#4a9eff",mr:.5,p:.5,"&:hover":{bgcolor:"rgba(74, 158, 255, 0.1)"}},children:r.jsx(Ia,{})}),r.jsx(lt,{src:m.photo_url||void 0,sx:{bgcolor:"#4a9eff",width:e?32:40,height:e?32:40,mr:e?1:2},children:m.title?m.title[0].toUpperCase():r.jsx(Wt,{})}),r.jsxs(z,{sx:{flex:1,minWidth:0},children:[r.jsxs(W,{variant:e?"body2":"h6",sx:{fontWeight:600,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:e?.5:1,fontSize:e?"0.875rem":"inherit"},children:[m.title||"Безымянный чат",_&&r.jsx(z,{sx:{width:e?6:8,height:e?6:8,borderRadius:"50%",bgcolor:"#4CAF50",animation:"pulse 2s infinite","@keyframes pulse":{"0%":{transform:"scale(1)",opacity:1},"50%":{transform:"scale(1.2)",opacity:.7},"100%":{transform:"scale(1)",opacity:1}}}})]}),r.jsxs(W,{variant:"caption",sx:{color:"#8b95a1",fontSize:e?"0.65rem":"0.75rem",lineHeight:e?1.2:"inherit"},children:[m.chat_type==="private"?"Личный чат":"Групповой чат",_&&(e?" • Новые":" • Новые сообщения")]})]})]}),r.jsx(z,{sx:{display:"flex",gap:e?.25:1},children:r.jsx(so,{title:"Информация о чате",children:r.jsx(We,{onClick:()=>A(!0),sx:{color:"#4a9eff",p:e?.5:1.5,"&:hover":{bgcolor:"rgba(74, 158, 255, 0.1)"}},children:r.jsx(or,{fontSize:e?"small":"medium"})})})})]}),r.jsxs(z,{sx:{flex:1,overflow:"auto",p:e?.5:1.5,pt:e?7:9,bgcolor:"rgba(35, 43, 59, 0.95)",backgroundImage:`url(${ho})`,backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"local",position:"relative","&::-webkit-scrollbar":{width:e?"3px":"6px"},"&::-webkit-scrollbar-track":{background:"transparent"},"&::-webkit-scrollbar-thumb":{background:"rgba(255, 255, 255, 0.2)",borderRadius:e?"1.5px":"3px"},"&::-webkit-scrollbar-thumb:hover":{background:"rgba(255, 255, 255, 0.3)"}},children:[$&&r.jsx(ke,{severity:"error",sx:{mb:e?1:2},children:$}),M?r.jsx(z,{sx:{display:"flex",justifyContent:"center",py:e?2:4},children:r.jsx(Se,{sx:{color:"#4a9eff"}})}):r.jsx(Oa,{children:j.map(R=>r.jsx(go.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},style:{display:"flex",justifyContent:ae(R)?"flex-end":"flex-start",marginBottom:e?"8px":"12px"},children:r.jsxs(z,{sx:{maxWidth:e?"85%":"70%",px:e?1.25:2,py:e?.75:1.2,borderRadius:ae(R)?"18px 18px 4px 18px":"18px 18px 18px 4px",bgcolor:ae(R)?"#4a9eff":"rgba(43, 52, 65, 0.9)",color:"white",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",wordBreak:"break-word"},children:[!ae(R)&&r.jsx(W,{variant:"caption",sx:{color:"#40C4FF",fontWeight:600,display:"block",mb:e?.25:.5,fontSize:e?"0.7rem":"0.75rem"},children:ne(R)}),r.jsx(W,{variant:"body1",sx:{mb:e?.25:.5,fontSize:e?"0.875rem":"0.95rem",lineHeight:e?1.3:1.4},children:R.text}),r.jsx(W,{variant:"caption",sx:{opacity:.7,fontSize:e?"0.6rem":"0.7rem",display:"block",textAlign:"right",mt:e?.125:.25,color:ae(R)?"rgba(255,255,255,0.8)":"#8b95a1"},children:G(R.created_at)})]})},R.id))}),r.jsx("div",{ref:T})]}),r.jsxs(z,{sx:{p:e?1:2,bgcolor:"rgba(35, 43, 59, 0.95)",display:"flex",gap:e?.75:1.5,alignItems:"flex-end",borderTop:"1px solid rgba(43, 52, 65, 1)",pb:e?"max(1rem, env(safe-area-inset-bottom))":2},children:[r.jsx(nt,{fullWidth:!0,multiline:!0,maxRows:e?2:4,value:o,onChange:R=>s(R.target.value),onKeyPress:K,placeholder:"Напишите сообщение...",variant:"outlined",size:"small",sx:{"& .MuiOutlinedInput-root":{borderRadius:e?"16px":"20px",bgcolor:"rgba(35, 46, 60, 1)",border:"none",fontSize:e?"0.875rem":"0.95rem",color:"white","& fieldset":{border:"1px solid rgba(60, 72, 84, 1)"},"&:hover fieldset":{border:"1px solid #4a9eff"},"&.Mui-focused fieldset":{border:"2px solid #4a9eff"},"& .MuiInputBase-input":{padding:e?"8px 12px":"12px 16px",color:"white","&::placeholder":{color:"rgba(255, 255, 255, 0.5)",opacity:1}}}}}),r.jsx(We,{onClick:F,disabled:!o.trim(),size:"medium",sx:{bgcolor:"#4a9eff",color:"white",width:e?36:44,height:e?36:44,minWidth:e?36:44,minHeight:e?36:44,"&:hover":{bgcolor:"#3d8bdb",transform:"scale(1.05)"},"&:disabled":{bgcolor:"rgba(60, 72, 84, 1)",color:"#8b95a1"},transition:"all 0.2s ease"},children:r.jsx(es,{sx:{fontSize:e?"1rem":"1.2rem"}})})]})]}):r.jsx(z,{sx:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",bgcolor:"rgba(35, 43, 59, 0.95)",backgroundImage:`url(${ho})`,backgroundSize:"cover",backgroundPosition:"center",backgroundBlendMode:"overlay"},children:r.jsxs(z,{sx:{textAlign:"center"},children:[r.jsx(Wt,{sx:{fontSize:80,color:"#4a9eff",mb:2}}),r.jsx(W,{variant:"h5",sx:{mb:1,color:"white"},children:"Выберите чат"}),r.jsx(W,{variant:"body1",sx:{color:"#8b95a1"},children:"Выберите чат из списка или создайте новый"})]})})}),r.jsxs(At,{open:n,onClose:()=>{a(!1),v(null),y(null)},maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{bgcolor:"rgba(35, 43, 59, 0.95)",color:"white"}},children:[r.jsx(Rt,{children:"Создать новый чат"}),r.jsxs(Mt,{children:[f&&r.jsx(ke,{severity:f.type==="success"?"success":"warning",sx:{mb:2,"& .MuiAlert-message":{color:"white"},bgcolor:f.type==="success"?"rgba(76, 175, 80, 0.2)":"rgba(255, 152, 0, 0.2)",border:`1px solid ${f.type==="success"?"#4CAF50":"#FF9800"}`},children:f.message}),r.jsx(nt,{autoFocus:!0,margin:"dense",label:"Название чата",fullWidth:!0,variant:"outlined",value:c,onChange:R=>l(R.target.value),sx:{mb:2,"& .MuiOutlinedInput-root":{color:"white","& fieldset":{borderColor:"rgba(255, 255, 255, 0.3)"},"&:hover fieldset":{borderColor:"#4a9eff"},"&.Mui-focused fieldset":{borderColor:"#4a9eff"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.7)","&.Mui-focused":{color:"#4a9eff"}}}}),r.jsx(nt,{margin:"dense",label:"Участники (ID или @username, через запятую)",fullWidth:!0,variant:"outlined",placeholder:"Например: 123456789, @username, 987654321, @user2",value:i,onChange:R=>h(R.target.value),helperText:"💡 Поддерживаются как Telegram ID (числа), так и @username. Если пользователь не найден по username - получит приглашение.",sx:{mb:1,"& .MuiOutlinedInput-root":{color:"white","& fieldset":{borderColor:"rgba(255, 255, 255, 0.3)"},"&:hover fieldset":{borderColor:"#4a9eff"},"&.Mui-focused fieldset":{borderColor:"#4a9eff"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.7)","&.Mui-focused":{color:"#4a9eff"}},"& .MuiFormHelperText-root":{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem"}}}),r.jsxs(z,{sx:{mt:3,mb:2},children:[r.jsx(W,{variant:"subtitle2",sx:{mb:2,color:"rgba(255, 255, 255, 0.8)"},children:"Фото чата (необязательно)"}),r.jsx(xr,{currentPhotoUrl:p||void 0,onPhotoChange:y,disabled:C,size:100})]})]}),r.jsxs(ro,{children:[r.jsx(ve,{onClick:()=>{a(!1),v(null)},sx:{color:"#8b95a1"},children:"Отмена"}),r.jsx(ve,{onClick:I,disabled:!c.trim()||C,startIcon:C?r.jsx(Se,{size:16}):void 0,sx:{bgcolor:"#4a9eff",color:"white","&:hover":{bgcolor:"#3d8bdb"},"&:disabled":{bgcolor:"rgba(60, 72, 84, 1)",color:"#8b95a1"}},children:C?"Создаём...":"Создать"})]})]}),r.jsx(Ka,{open:w,onClose:()=>g(!1)}),r.jsx(Ja,{open:b,onClose:()=>A(!1),currentChat:m,loadChatInfo:u,addMemberToChat:P,removeMemberFromChat:E,currentUserId:D==null?void 0:D.telegram_id,onChatPhotoUpdate:R=>{console.log("Chat photo updated:",R)}})]})};export{ai as default};
