import{r as d,d as Me,g as Re,j as o,t as _t,Q as or,i as Oe,a2 as Mr,e as _e,s as ne,v as ie,f as Se,h as te,l as Xe,o as wo,a as Nt,y as Rr,T as I,a4 as Or,a5 as sr,a0 as gt,U as ar,a6 as Co,n as _r,a7 as nr,a8 as jo,a9 as To,aa as kr,ab as So,ac as Do,ad as Ao,ae as Po,q as ge,af as at,ag as Mo,ah as Ro,ai as ir,aj as Oo,ak as _o,al as ko,am as lr,an as Eo,ao as Io,ap as $o,aq as Wo,B as W,ar as nt,a1 as Er,as as Ir,b as Bo,m as cr,at as Lo,c as pr}from"./index-Cc55_Sk1.js";import{a as No,S as zo}from"./index-C1xVe1nU.js";import{o as dr,P as Uo,u as Fo,F as ur,M as Ho,B as Vo,a as qo,g as Xo,G as Yo,T as rt}from"./TextField-Cwj_pQTV.js";import{u as $r,C as je}from"./CircularProgress-gBhzRtKN.js";import{C as Wr}from"./Chip-CmhgKVf8.js";import{A as Be}from"./Alert-DOgq-1tI.js";import{B as le}from"./Button-C9sHC_8O.js";import{I as Ae}from"./IconButton-sa3WKDpC.js";const Br=t=>{const e=d.useRef({});return d.useEffect(()=>{e.current=t}),e.current};var ce="top",fe="bottom",me="right",pe="left",zt="auto",ct=[ce,fe,me,pe],Fe="start",it="end",Ko="clippingParents",Lr="viewport",et="popper",Go="reference",fr=ct.reduce(function(t,e){return t.concat([e+"-"+Fe,e+"-"+it])},[]),Nr=[].concat(ct,[zt]).reduce(function(t,e){return t.concat([e,e+"-"+Fe,e+"-"+it])},[]),Jo="beforeRead",Zo="read",Qo="afterRead",es="beforeMain",ts="main",rs="afterMain",os="beforeWrite",ss="write",as="afterWrite",ns=[Jo,Zo,Qo,es,ts,rs,os,ss,as];function De(t){return t?(t.nodeName||"").toLowerCase():null}function de(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Ne(t){var e=de(t).Element;return t instanceof e||t instanceof Element}function ue(t){var e=de(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Ut(t){if(typeof ShadowRoot>"u")return!1;var e=de(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function is(t){var e=t.state;Object.keys(e.elements).forEach(function(r){var s=e.styles[r]||{},a=e.attributes[r]||{},n=e.elements[r];!ue(n)||!De(n)||(Object.assign(n.style,s),Object.keys(a).forEach(function(c){var i=a[c];i===!1?n.removeAttribute(c):n.setAttribute(c,i===!0?"":i)}))})}function ls(t){var e=t.state,r={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,r.popper),e.styles=r,e.elements.arrow&&Object.assign(e.elements.arrow.style,r.arrow),function(){Object.keys(e.elements).forEach(function(s){var a=e.elements[s],n=e.attributes[s]||{},c=Object.keys(e.styles.hasOwnProperty(s)?e.styles[s]:r[s]),i=c.reduce(function(l,u){return l[u]="",l},{});!ue(a)||!De(a)||(Object.assign(a.style,i),Object.keys(n).forEach(function(l){a.removeAttribute(l)}))})}}const cs={name:"applyStyles",enabled:!0,phase:"write",fn:is,effect:ls,requires:["computeStyles"]};function Te(t){return t.split("-")[0]}var Le=Math.max,jt=Math.min,He=Math.round;function kt(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function zr(){return!/^((?!chrome|android).)*safari/i.test(kt())}function Ve(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!1);var s=t.getBoundingClientRect(),a=1,n=1;e&&ue(t)&&(a=t.offsetWidth>0&&He(s.width)/t.offsetWidth||1,n=t.offsetHeight>0&&He(s.height)/t.offsetHeight||1);var c=Ne(t)?de(t):window,i=c.visualViewport,l=!zr()&&r,u=(s.left+(l&&i?i.offsetLeft:0))/a,p=(s.top+(l&&i?i.offsetTop:0))/n,x=s.width/a,v=s.height/n;return{width:x,height:v,top:p,right:u+x,bottom:p+v,left:u,x:u,y:p}}function Ft(t){var e=Ve(t),r=t.offsetWidth,s=t.offsetHeight;return Math.abs(e.width-r)<=1&&(r=e.width),Math.abs(e.height-s)<=1&&(s=e.height),{x:t.offsetLeft,y:t.offsetTop,width:r,height:s}}function Ur(t,e){var r=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(r&&Ut(r)){var s=e;do{if(s&&t.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function Pe(t){return de(t).getComputedStyle(t)}function ps(t){return["table","td","th"].indexOf(De(t))>=0}function Ee(t){return((Ne(t)?t.ownerDocument:t.document)||window.document).documentElement}function St(t){return De(t)==="html"?t:t.assignedSlot||t.parentNode||(Ut(t)?t.host:null)||Ee(t)}function mr(t){return!ue(t)||Pe(t).position==="fixed"?null:t.offsetParent}function ds(t){var e=/firefox/i.test(kt()),r=/Trident/i.test(kt());if(r&&ue(t)){var s=Pe(t);if(s.position==="fixed")return null}var a=St(t);for(Ut(a)&&(a=a.host);ue(a)&&["html","body"].indexOf(De(a))<0;){var n=Pe(a);if(n.transform!=="none"||n.perspective!=="none"||n.contain==="paint"||["transform","perspective"].indexOf(n.willChange)!==-1||e&&n.willChange==="filter"||e&&n.filter&&n.filter!=="none")return a;a=a.parentNode}return null}function pt(t){for(var e=de(t),r=mr(t);r&&ps(r)&&Pe(r).position==="static";)r=mr(r);return r&&(De(r)==="html"||De(r)==="body"&&Pe(r).position==="static")?e:r||ds(t)||e}function Ht(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function ot(t,e,r){return Le(t,jt(e,r))}function us(t,e,r){var s=ot(t,e,r);return s>r?r:s}function Fr(){return{top:0,right:0,bottom:0,left:0}}function Hr(t){return Object.assign({},Fr(),t)}function Vr(t,e){return e.reduce(function(r,s){return r[s]=t,r},{})}var fs=function(e,r){return e=typeof e=="function"?e(Object.assign({},r.rects,{placement:r.placement})):e,Hr(typeof e!="number"?e:Vr(e,ct))};function ms(t){var e,r=t.state,s=t.name,a=t.options,n=r.elements.arrow,c=r.modifiersData.popperOffsets,i=Te(r.placement),l=Ht(i),u=[pe,me].indexOf(i)>=0,p=u?"height":"width";if(!(!n||!c)){var x=fs(a.padding,r),v=Ft(n),f=l==="y"?ce:pe,w=l==="y"?fe:me,g=r.rects.reference[p]+r.rects.reference[l]-c[l]-r.rects.popper[p],h=c[l]-r.rects.reference[l],b=pt(n),D=b?l==="y"?b.clientHeight||0:b.clientWidth||0:0,A=g/2-h/2,y=x[f],j=D-v[p]-x[w],m=D/2-v[p]/2+A,T=ot(y,m,j),P=l;r.modifiersData[s]=(e={},e[P]=T,e.centerOffset=T-m,e)}}function gs(t){var e=t.state,r=t.options,s=r.element,a=s===void 0?"[data-popper-arrow]":s;a!=null&&(typeof a=="string"&&(a=e.elements.popper.querySelector(a),!a)||Ur(e.elements.popper,a)&&(e.elements.arrow=a))}const hs={name:"arrow",enabled:!0,phase:"main",fn:ms,effect:gs,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function qe(t){return t.split("-")[1]}var vs={top:"auto",right:"auto",bottom:"auto",left:"auto"};function bs(t,e){var r=t.x,s=t.y,a=e.devicePixelRatio||1;return{x:He(r*a)/a||0,y:He(s*a)/a||0}}function gr(t){var e,r=t.popper,s=t.popperRect,a=t.placement,n=t.variation,c=t.offsets,i=t.position,l=t.gpuAcceleration,u=t.adaptive,p=t.roundOffsets,x=t.isFixed,v=c.x,f=v===void 0?0:v,w=c.y,g=w===void 0?0:w,h=typeof p=="function"?p({x:f,y:g}):{x:f,y:g};f=h.x,g=h.y;var b=c.hasOwnProperty("x"),D=c.hasOwnProperty("y"),A=pe,y=ce,j=window;if(u){var m=pt(r),T="clientHeight",P="clientWidth";if(m===de(r)&&(m=Ee(r),Pe(m).position!=="static"&&i==="absolute"&&(T="scrollHeight",P="scrollWidth")),m=m,a===ce||(a===pe||a===me)&&n===it){y=fe;var k=x&&m===j&&j.visualViewport?j.visualViewport.height:m[T];g-=k-s.height,g*=l?1:-1}if(a===pe||(a===ce||a===fe)&&n===it){A=me;var _=x&&m===j&&j.visualViewport?j.visualViewport.width:m[P];f-=_-s.width,f*=l?1:-1}}var B=Object.assign({position:i},u&&vs),X=p===!0?bs({x:f,y:g},de(r)):{x:f,y:g};if(f=X.x,g=X.y,l){var $;return Object.assign({},B,($={},$[y]=D?"0":"",$[A]=b?"0":"",$.transform=(j.devicePixelRatio||1)<=1?"translate("+f+"px, "+g+"px)":"translate3d("+f+"px, "+g+"px, 0)",$))}return Object.assign({},B,(e={},e[y]=D?g+"px":"",e[A]=b?f+"px":"",e.transform="",e))}function xs(t){var e=t.state,r=t.options,s=r.gpuAcceleration,a=s===void 0?!0:s,n=r.adaptive,c=n===void 0?!0:n,i=r.roundOffsets,l=i===void 0?!0:i,u={placement:Te(e.placement),variation:qe(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:a,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,gr(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:c,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,gr(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const ys={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:xs,data:{}};var ht={passive:!0};function ws(t){var e=t.state,r=t.instance,s=t.options,a=s.scroll,n=a===void 0?!0:a,c=s.resize,i=c===void 0?!0:c,l=de(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return n&&u.forEach(function(p){p.addEventListener("scroll",r.update,ht)}),i&&l.addEventListener("resize",r.update,ht),function(){n&&u.forEach(function(p){p.removeEventListener("scroll",r.update,ht)}),i&&l.removeEventListener("resize",r.update,ht)}}const Cs={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:ws,data:{}};var js={left:"right",right:"left",bottom:"top",top:"bottom"};function Ct(t){return t.replace(/left|right|bottom|top/g,function(e){return js[e]})}var Ts={start:"end",end:"start"};function hr(t){return t.replace(/start|end/g,function(e){return Ts[e]})}function Vt(t){var e=de(t),r=e.pageXOffset,s=e.pageYOffset;return{scrollLeft:r,scrollTop:s}}function qt(t){return Ve(Ee(t)).left+Vt(t).scrollLeft}function Ss(t,e){var r=de(t),s=Ee(t),a=r.visualViewport,n=s.clientWidth,c=s.clientHeight,i=0,l=0;if(a){n=a.width,c=a.height;var u=zr();(u||!u&&e==="fixed")&&(i=a.offsetLeft,l=a.offsetTop)}return{width:n,height:c,x:i+qt(t),y:l}}function Ds(t){var e,r=Ee(t),s=Vt(t),a=(e=t.ownerDocument)==null?void 0:e.body,n=Le(r.scrollWidth,r.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),c=Le(r.scrollHeight,r.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),i=-s.scrollLeft+qt(t),l=-s.scrollTop;return Pe(a||r).direction==="rtl"&&(i+=Le(r.clientWidth,a?a.clientWidth:0)-n),{width:n,height:c,x:i,y:l}}function Xt(t){var e=Pe(t),r=e.overflow,s=e.overflowX,a=e.overflowY;return/auto|scroll|overlay|hidden/.test(r+a+s)}function qr(t){return["html","body","#document"].indexOf(De(t))>=0?t.ownerDocument.body:ue(t)&&Xt(t)?t:qr(St(t))}function st(t,e){var r;e===void 0&&(e=[]);var s=qr(t),a=s===((r=t.ownerDocument)==null?void 0:r.body),n=de(s),c=a?[n].concat(n.visualViewport||[],Xt(s)?s:[]):s,i=e.concat(c);return a?i:i.concat(st(St(c)))}function Et(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function As(t,e){var r=Ve(t,!1,e==="fixed");return r.top=r.top+t.clientTop,r.left=r.left+t.clientLeft,r.bottom=r.top+t.clientHeight,r.right=r.left+t.clientWidth,r.width=t.clientWidth,r.height=t.clientHeight,r.x=r.left,r.y=r.top,r}function vr(t,e,r){return e===Lr?Et(Ss(t,r)):Ne(e)?As(e,r):Et(Ds(Ee(t)))}function Ps(t){var e=st(St(t)),r=["absolute","fixed"].indexOf(Pe(t).position)>=0,s=r&&ue(t)?pt(t):t;return Ne(s)?e.filter(function(a){return Ne(a)&&Ur(a,s)&&De(a)!=="body"}):[]}function Ms(t,e,r,s){var a=e==="clippingParents"?Ps(t):[].concat(e),n=[].concat(a,[r]),c=n[0],i=n.reduce(function(l,u){var p=vr(t,u,s);return l.top=Le(p.top,l.top),l.right=jt(p.right,l.right),l.bottom=jt(p.bottom,l.bottom),l.left=Le(p.left,l.left),l},vr(t,c,s));return i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}function Xr(t){var e=t.reference,r=t.element,s=t.placement,a=s?Te(s):null,n=s?qe(s):null,c=e.x+e.width/2-r.width/2,i=e.y+e.height/2-r.height/2,l;switch(a){case ce:l={x:c,y:e.y-r.height};break;case fe:l={x:c,y:e.y+e.height};break;case me:l={x:e.x+e.width,y:i};break;case pe:l={x:e.x-r.width,y:i};break;default:l={x:e.x,y:e.y}}var u=a?Ht(a):null;if(u!=null){var p=u==="y"?"height":"width";switch(n){case Fe:l[u]=l[u]-(e[p]/2-r[p]/2);break;case it:l[u]=l[u]+(e[p]/2-r[p]/2);break}}return l}function lt(t,e){e===void 0&&(e={});var r=e,s=r.placement,a=s===void 0?t.placement:s,n=r.strategy,c=n===void 0?t.strategy:n,i=r.boundary,l=i===void 0?Ko:i,u=r.rootBoundary,p=u===void 0?Lr:u,x=r.elementContext,v=x===void 0?et:x,f=r.altBoundary,w=f===void 0?!1:f,g=r.padding,h=g===void 0?0:g,b=Hr(typeof h!="number"?h:Vr(h,ct)),D=v===et?Go:et,A=t.rects.popper,y=t.elements[w?D:v],j=Ms(Ne(y)?y:y.contextElement||Ee(t.elements.popper),l,p,c),m=Ve(t.elements.reference),T=Xr({reference:m,element:A,placement:a}),P=Et(Object.assign({},A,T)),k=v===et?P:m,_={top:j.top-k.top+b.top,bottom:k.bottom-j.bottom+b.bottom,left:j.left-k.left+b.left,right:k.right-j.right+b.right},B=t.modifiersData.offset;if(v===et&&B){var X=B[a];Object.keys(_).forEach(function($){var M=[me,fe].indexOf($)>=0?1:-1,V=[ce,fe].indexOf($)>=0?"y":"x";_[$]+=X[V]*M})}return _}function Rs(t,e){e===void 0&&(e={});var r=e,s=r.placement,a=r.boundary,n=r.rootBoundary,c=r.padding,i=r.flipVariations,l=r.allowedAutoPlacements,u=l===void 0?Nr:l,p=qe(s),x=p?i?fr:fr.filter(function(w){return qe(w)===p}):ct,v=x.filter(function(w){return u.indexOf(w)>=0});v.length===0&&(v=x);var f=v.reduce(function(w,g){return w[g]=lt(t,{placement:g,boundary:a,rootBoundary:n,padding:c})[Te(g)],w},{});return Object.keys(f).sort(function(w,g){return f[w]-f[g]})}function Os(t){if(Te(t)===zt)return[];var e=Ct(t);return[hr(t),e,hr(e)]}function _s(t){var e=t.state,r=t.options,s=t.name;if(!e.modifiersData[s]._skip){for(var a=r.mainAxis,n=a===void 0?!0:a,c=r.altAxis,i=c===void 0?!0:c,l=r.fallbackPlacements,u=r.padding,p=r.boundary,x=r.rootBoundary,v=r.altBoundary,f=r.flipVariations,w=f===void 0?!0:f,g=r.allowedAutoPlacements,h=e.options.placement,b=Te(h),D=b===h,A=l||(D||!w?[Ct(h)]:Os(h)),y=[h].concat(A).reduce(function(q,N){return q.concat(Te(N)===zt?Rs(e,{placement:N,boundary:p,rootBoundary:x,padding:u,flipVariations:w,allowedAutoPlacements:g}):N)},[]),j=e.rects.reference,m=e.rects.popper,T=new Map,P=!0,k=y[0],_=0;_<y.length;_++){var B=y[_],X=Te(B),$=qe(B)===Fe,M=[ce,fe].indexOf(X)>=0,V=M?"width":"height",z=lt(e,{placement:B,boundary:p,rootBoundary:x,altBoundary:v,padding:u}),F=M?$?me:pe:$?fe:ce;j[V]>m[V]&&(F=Ct(F));var J=Ct(F),C=[];if(n&&C.push(z[X]<=0),i&&C.push(z[F]<=0,z[J]<=0),C.every(function(q){return q})){k=B,P=!1;break}T.set(B,C)}if(P)for(var R=w?3:1,O=function(N){var Y=y.find(function(Q){var G=T.get(Q);if(G)return G.slice(0,N).every(function(ye){return ye})});if(Y)return k=Y,"break"},E=R;E>0;E--){var U=O(E);if(U==="break")break}e.placement!==k&&(e.modifiersData[s]._skip=!0,e.placement=k,e.reset=!0)}}const ks={name:"flip",enabled:!0,phase:"main",fn:_s,requiresIfExists:["offset"],data:{_skip:!1}};function br(t,e,r){return r===void 0&&(r={x:0,y:0}),{top:t.top-e.height-r.y,right:t.right-e.width+r.x,bottom:t.bottom-e.height+r.y,left:t.left-e.width-r.x}}function xr(t){return[ce,me,fe,pe].some(function(e){return t[e]>=0})}function Es(t){var e=t.state,r=t.name,s=e.rects.reference,a=e.rects.popper,n=e.modifiersData.preventOverflow,c=lt(e,{elementContext:"reference"}),i=lt(e,{altBoundary:!0}),l=br(c,s),u=br(i,a,n),p=xr(l),x=xr(u);e.modifiersData[r]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:p,hasPopperEscaped:x},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":p,"data-popper-escaped":x})}const Is={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Es};function $s(t,e,r){var s=Te(t),a=[pe,ce].indexOf(s)>=0?-1:1,n=typeof r=="function"?r(Object.assign({},e,{placement:t})):r,c=n[0],i=n[1];return c=c||0,i=(i||0)*a,[pe,me].indexOf(s)>=0?{x:i,y:c}:{x:c,y:i}}function Ws(t){var e=t.state,r=t.options,s=t.name,a=r.offset,n=a===void 0?[0,0]:a,c=Nr.reduce(function(p,x){return p[x]=$s(x,e.rects,n),p},{}),i=c[e.placement],l=i.x,u=i.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=u),e.modifiersData[s]=c}const Bs={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Ws};function Ls(t){var e=t.state,r=t.name;e.modifiersData[r]=Xr({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const Ns={name:"popperOffsets",enabled:!0,phase:"read",fn:Ls,data:{}};function zs(t){return t==="x"?"y":"x"}function Us(t){var e=t.state,r=t.options,s=t.name,a=r.mainAxis,n=a===void 0?!0:a,c=r.altAxis,i=c===void 0?!1:c,l=r.boundary,u=r.rootBoundary,p=r.altBoundary,x=r.padding,v=r.tether,f=v===void 0?!0:v,w=r.tetherOffset,g=w===void 0?0:w,h=lt(e,{boundary:l,rootBoundary:u,padding:x,altBoundary:p}),b=Te(e.placement),D=qe(e.placement),A=!D,y=Ht(b),j=zs(y),m=e.modifiersData.popperOffsets,T=e.rects.reference,P=e.rects.popper,k=typeof g=="function"?g(Object.assign({},e.rects,{placement:e.placement})):g,_=typeof k=="number"?{mainAxis:k,altAxis:k}:Object.assign({mainAxis:0,altAxis:0},k),B=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,X={x:0,y:0};if(m){if(n){var $,M=y==="y"?ce:pe,V=y==="y"?fe:me,z=y==="y"?"height":"width",F=m[y],J=F+h[M],C=F-h[V],R=f?-P[z]/2:0,O=D===Fe?T[z]:P[z],E=D===Fe?-P[z]:-T[z],U=e.elements.arrow,q=f&&U?Ft(U):{width:0,height:0},N=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Fr(),Y=N[M],Q=N[V],G=ot(0,T[z],q[z]),ye=A?T[z]/2-R-G-Y-_.mainAxis:O-G-Y-_.mainAxis,Ie=A?-T[z]/2+R+G+Q+_.mainAxis:E+G+Q+_.mainAxis,we=e.elements.arrow&&pt(e.elements.arrow),ae=we?y==="y"?we.clientTop||0:we.clientLeft||0:0,re=($=B==null?void 0:B[y])!=null?$:0,S=F+ye-re-ae,ee=F+Ie-re,H=ot(f?jt(J,S):J,F,f?Le(C,ee):C);m[y]=H,X[y]=H-F}if(i){var K,Ce=y==="x"?ce:pe,ze=y==="x"?fe:me,oe=m[j],he=j==="y"?"height":"width",Ke=oe+h[Ce],Ge=oe-h[ze],Je=[ce,pe].indexOf(b)!==-1,dt=(K=B==null?void 0:B[j])!=null?K:0,ut=Je?Ke:oe-T[he]-P[he]-dt+_.altAxis,Ue=Je?oe+T[he]+P[he]-dt-_.altAxis:Ge,ft=f&&Je?us(ut,oe,Ue):ot(f?ut:Ke,oe,f?Ue:Ge);m[j]=ft,X[j]=ft-oe}e.modifiersData[s]=X}}const Fs={name:"preventOverflow",enabled:!0,phase:"main",fn:Us,requiresIfExists:["offset"]};function Hs(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function Vs(t){return t===de(t)||!ue(t)?Vt(t):Hs(t)}function qs(t){var e=t.getBoundingClientRect(),r=He(e.width)/t.offsetWidth||1,s=He(e.height)/t.offsetHeight||1;return r!==1||s!==1}function Xs(t,e,r){r===void 0&&(r=!1);var s=ue(e),a=ue(e)&&qs(e),n=Ee(e),c=Ve(t,a,r),i={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(s||!s&&!r)&&((De(e)!=="body"||Xt(n))&&(i=Vs(e)),ue(e)?(l=Ve(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):n&&(l.x=qt(n))),{x:c.left+i.scrollLeft-l.x,y:c.top+i.scrollTop-l.y,width:c.width,height:c.height}}function Ys(t){var e=new Map,r=new Set,s=[];t.forEach(function(n){e.set(n.name,n)});function a(n){r.add(n.name);var c=[].concat(n.requires||[],n.requiresIfExists||[]);c.forEach(function(i){if(!r.has(i)){var l=e.get(i);l&&a(l)}}),s.push(n)}return t.forEach(function(n){r.has(n.name)||a(n)}),s}function Ks(t){var e=Ys(t);return ns.reduce(function(r,s){return r.concat(e.filter(function(a){return a.phase===s}))},[])}function Gs(t){var e;return function(){return e||(e=new Promise(function(r){Promise.resolve().then(function(){e=void 0,r(t())})})),e}}function Js(t){var e=t.reduce(function(r,s){var a=r[s.name];return r[s.name]=a?Object.assign({},a,s,{options:Object.assign({},a.options,s.options),data:Object.assign({},a.data,s.data)}):s,r},{});return Object.keys(e).map(function(r){return e[r]})}var yr={placement:"bottom",modifiers:[],strategy:"absolute"};function wr(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return!e.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function Zs(t){t===void 0&&(t={});var e=t,r=e.defaultModifiers,s=r===void 0?[]:r,a=e.defaultOptions,n=a===void 0?yr:a;return function(i,l,u){u===void 0&&(u=n);var p={placement:"bottom",orderedModifiers:[],options:Object.assign({},yr,n),modifiersData:{},elements:{reference:i,popper:l},attributes:{},styles:{}},x=[],v=!1,f={state:p,setOptions:function(b){var D=typeof b=="function"?b(p.options):b;g(),p.options=Object.assign({},n,p.options,D),p.scrollParents={reference:Ne(i)?st(i):i.contextElement?st(i.contextElement):[],popper:st(l)};var A=Ks(Js([].concat(s,p.options.modifiers)));return p.orderedModifiers=A.filter(function(y){return y.enabled}),w(),f.update()},forceUpdate:function(){if(!v){var b=p.elements,D=b.reference,A=b.popper;if(wr(D,A)){p.rects={reference:Xs(D,pt(A),p.options.strategy==="fixed"),popper:Ft(A)},p.reset=!1,p.placement=p.options.placement,p.orderedModifiers.forEach(function(_){return p.modifiersData[_.name]=Object.assign({},_.data)});for(var y=0;y<p.orderedModifiers.length;y++){if(p.reset===!0){p.reset=!1,y=-1;continue}var j=p.orderedModifiers[y],m=j.fn,T=j.options,P=T===void 0?{}:T,k=j.name;typeof m=="function"&&(p=m({state:p,options:P,name:k,instance:f})||p)}}}},update:Gs(function(){return new Promise(function(h){f.forceUpdate(),h(p)})}),destroy:function(){g(),v=!0}};if(!wr(i,l))return f;f.setOptions(u).then(function(h){!v&&u.onFirstUpdate&&u.onFirstUpdate(h)});function w(){p.orderedModifiers.forEach(function(h){var b=h.name,D=h.options,A=D===void 0?{}:D,y=h.effect;if(typeof y=="function"){var j=y({state:p,name:b,instance:f,options:A}),m=function(){};x.push(j||m)}})}function g(){x.forEach(function(h){return h()}),x=[]}return f}}var Qs=[Cs,Ns,ys,cs,Bs,ks,Fs,hs,Is],ea=Zs({defaultModifiers:Qs});function ta(t){return Me("MuiPopper",t)}Re("MuiPopper",["root"]);function ra(t,e){if(e==="ltr")return t;switch(t){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return t}}function It(t){return typeof t=="function"?t():t}function oa(t){return t.nodeType!==void 0}const sa=t=>{const{classes:e}=t;return Oe({root:["root"]},ta,e)},aa={},na=d.forwardRef(function(e,r){const{anchorEl:s,children:a,direction:n,disablePortal:c,modifiers:i,open:l,placement:u,popperOptions:p,popperRef:x,slotProps:v={},slots:f={},TransitionProps:w,ownerState:g,...h}=e,b=d.useRef(null),D=_t(b,r),A=d.useRef(null),y=_t(A,x),j=d.useRef(y);or(()=>{j.current=y},[y]),d.useImperativeHandle(x,()=>A.current,[]);const m=ra(u,n),[T,P]=d.useState(m),[k,_]=d.useState(It(s));d.useEffect(()=>{A.current&&A.current.forceUpdate()}),d.useEffect(()=>{s&&_(It(s))},[s]),or(()=>{if(!k||!l)return;const V=J=>{P(J.placement)};let z=[{name:"preventOverflow",options:{altBoundary:c}},{name:"flip",options:{altBoundary:c}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:J})=>{V(J)}}];i!=null&&(z=z.concat(i)),p&&p.modifiers!=null&&(z=z.concat(p.modifiers));const F=ea(k,b.current,{placement:m,...p,modifiers:z});return j.current(F),()=>{F.destroy(),j.current(null)}},[k,c,i,l,p,m]);const B={placement:T};w!==null&&(B.TransitionProps=w);const X=sa(e),$=f.root??"div",M=Fo({elementType:$,externalSlotProps:v.root,externalForwardedProps:h,additionalProps:{role:"tooltip",ref:D},ownerState:e,className:X.root});return o.jsx($,{...M,children:typeof a=="function"?a(B):a})}),ia=d.forwardRef(function(e,r){const{anchorEl:s,children:a,container:n,direction:c="ltr",disablePortal:i=!1,keepMounted:l=!1,modifiers:u,open:p,placement:x="bottom",popperOptions:v=aa,popperRef:f,style:w,transition:g=!1,slotProps:h={},slots:b={},...D}=e,[A,y]=d.useState(!0),j=()=>{y(!1)},m=()=>{y(!0)};if(!l&&!p&&(!g||A))return null;let T;if(n)T=n;else if(s){const _=It(s);T=_&&oa(_)?dr(_).body:dr(null).body}const P=!p&&l&&(!g||A)?"none":void 0,k=g?{in:p,onEnter:j,onExited:m}:void 0;return o.jsx(Uo,{disablePortal:i,container:T,children:o.jsx(na,{anchorEl:s,direction:c,disablePortal:i,modifiers:u,ref:r,open:g?!A:p,placement:x,popperOptions:v,popperRef:f,slotProps:h,slots:b,...D,style:{position:"fixed",top:0,left:0,display:P,...w},TransitionProps:k,children:a})})}),la=ne(ia,{name:"MuiPopper",slot:"Root"})({}),Yr=d.forwardRef(function(e,r){const s=Mr(),a=_e({props:e,name:"MuiPopper"}),{anchorEl:n,component:c,components:i,componentsProps:l,container:u,disablePortal:p,keepMounted:x,modifiers:v,open:f,placement:w,popperOptions:g,popperRef:h,transition:b,slots:D,slotProps:A,...y}=a,j=(D==null?void 0:D.root)??(i==null?void 0:i.Root),m={anchorEl:n,container:u,disablePortal:p,keepMounted:x,modifiers:v,open:f,placement:w,popperOptions:g,popperRef:h,transition:b,...y};return o.jsx(la,{as:c,direction:s?"rtl":"ltr",slots:{root:j},slotProps:A??l,...m,ref:r})});function ca(t){const{badgeContent:e,invisible:r=!1,max:s=99,showZero:a=!1}=t,n=Br({badgeContent:e,max:s});let c=r;r===!1&&e===0&&!a&&(c=!0);const{badgeContent:i,max:l=s}=c?n:t,u=i&&Number(i)>l?`${l}+`:i;return{badgeContent:i,invisible:c,max:l,displayValue:u}}function pa(t){return Me("MuiBadge",t)}const ke=Re("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),Pt=10,Mt=4,da=t=>{const{color:e,anchorOrigin:r,invisible:s,overlap:a,variant:n,classes:c={}}=t,i={root:["root"],badge:["badge",n,s&&"invisible",`anchorOrigin${te(r.vertical)}${te(r.horizontal)}`,`anchorOrigin${te(r.vertical)}${te(r.horizontal)}${te(a)}`,`overlap${te(a)}`,e!=="default"&&`color${te(e)}`]};return Oe(i,pa,c)},ua=ne("span",{name:"MuiBadge",slot:"Root"})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),fa=ne("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.badge,e[r.variant],e[`anchorOrigin${te(r.anchorOrigin.vertical)}${te(r.anchorOrigin.horizontal)}${te(r.overlap)}`],r.color!=="default"&&e[`color${te(r.color)}`],r.invisible&&e.invisible]}})(Xe(({theme:t})=>({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(12),minWidth:Pt*2,lineHeight:1,padding:"0 6px",height:Pt*2,borderRadius:Pt,zIndex:1,transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.enteringScreen}),variants:[...Object.entries(t.palette).filter(wo(["contrastText"])).map(([e])=>({props:{color:e},style:{backgroundColor:(t.vars||t).palette[e].main,color:(t.vars||t).palette[e].contrastText}})),{props:{variant:"dot"},style:{borderRadius:Mt,height:Mt*2,minWidth:Mt*2,padding:0}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="top"&&e.anchorOrigin.horizontal==="right"&&e.overlap==="rectangular",style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${ke.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="bottom"&&e.anchorOrigin.horizontal==="right"&&e.overlap==="rectangular",style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${ke.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="top"&&e.anchorOrigin.horizontal==="left"&&e.overlap==="rectangular",style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${ke.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="bottom"&&e.anchorOrigin.horizontal==="left"&&e.overlap==="rectangular",style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${ke.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="top"&&e.anchorOrigin.horizontal==="right"&&e.overlap==="circular",style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${ke.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="bottom"&&e.anchorOrigin.horizontal==="right"&&e.overlap==="circular",style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${ke.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="top"&&e.anchorOrigin.horizontal==="left"&&e.overlap==="circular",style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${ke.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:e})=>e.anchorOrigin.vertical==="bottom"&&e.anchorOrigin.horizontal==="left"&&e.overlap==="circular",style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${ke.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.leavingScreen})}}]})));function Cr(t){return{vertical:(t==null?void 0:t.vertical)??"top",horizontal:(t==null?void 0:t.horizontal)??"right"}}const ma=d.forwardRef(function(e,r){const s=_e({props:e,name:"MuiBadge"}),{anchorOrigin:a,className:n,classes:c,component:i,components:l={},componentsProps:u={},children:p,overlap:x="rectangular",color:v="default",invisible:f=!1,max:w=99,badgeContent:g,slots:h,slotProps:b,showZero:D=!1,variant:A="standard",...y}=s,{badgeContent:j,invisible:m,max:T,displayValue:P}=ca({max:w,invisible:f,badgeContent:g,showZero:D}),k=Br({anchorOrigin:Cr(a),color:v,overlap:x,variant:A,badgeContent:g}),_=m||j==null&&A!=="dot",{color:B=v,overlap:X=x,anchorOrigin:$,variant:M=A}=_?k:s,V=Cr($),z=M!=="dot"?P:void 0,F={...s,badgeContent:j,invisible:_,max:T,displayValue:z,showZero:D,anchorOrigin:V,color:B,overlap:X,variant:M},J=da(F),C={slots:{root:(h==null?void 0:h.root)??l.Root,badge:(h==null?void 0:h.badge)??l.Badge},slotProps:{root:(b==null?void 0:b.root)??u.root,badge:(b==null?void 0:b.badge)??u.badge}},[R,O]=ie("root",{elementType:ua,externalForwardedProps:{...C,...y},ownerState:F,className:Se(J.root,n),ref:r,additionalProps:{as:i}}),[E,U]=ie("badge",{elementType:fa,externalForwardedProps:C,ownerState:F,className:J.badge});return o.jsxs(R,{...O,children:[p,o.jsx(E,{...U,children:z})]})});function ga(t){return Me("MuiDialog",t)}const Rt=Re("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),Kr=d.createContext({}),ha=ne(Vo,{name:"MuiDialog",slot:"Backdrop",overrides:(t,e)=>e.backdrop})({zIndex:-1}),va=t=>{const{classes:e,scroll:r,maxWidth:s,fullWidth:a,fullScreen:n}=t,c={root:["root"],container:["container",`scroll${te(r)}`],paper:["paper",`paperScroll${te(r)}`,`paperWidth${te(String(s))}`,a&&"paperFullWidth",n&&"paperFullScreen"]};return Oe(c,ga,e)},ba=ne(Ho,{name:"MuiDialog",slot:"Root"})({"@media print":{position:"absolute !important"}}),xa=ne("div",{name:"MuiDialog",slot:"Container",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.container,e[`scroll${te(r.scroll)}`]]}})({height:"100%","@media print":{height:"auto"},outline:0,variants:[{props:{scroll:"paper"},style:{display:"flex",justifyContent:"center",alignItems:"center"}},{props:{scroll:"body"},style:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}}}]}),ya=ne(Rr,{name:"MuiDialog",slot:"Paper",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.paper,e[`scrollPaper${te(r.scroll)}`],e[`paperWidth${te(String(r.maxWidth))}`],r.fullWidth&&e.paperFullWidth,r.fullScreen&&e.paperFullScreen]}})(Xe(({theme:t})=>({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"},variants:[{props:{scroll:"paper"},style:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"}},{props:{scroll:"body"},style:{display:"inline-block",verticalAlign:"middle",textAlign:"initial"}},{props:({ownerState:e})=>!e.maxWidth,style:{maxWidth:"calc(100% - 64px)"}},{props:{maxWidth:"xs"},style:{maxWidth:t.breakpoints.unit==="px"?Math.max(t.breakpoints.values.xs,444):`max(${t.breakpoints.values.xs}${t.breakpoints.unit}, 444px)`,[`&.${Rt.paperScrollBody}`]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}}},...Object.keys(t.breakpoints.values).filter(e=>e!=="xs").map(e=>({props:{maxWidth:e},style:{maxWidth:`${t.breakpoints.values[e]}${t.breakpoints.unit}`,[`&.${Rt.paperScrollBody}`]:{[t.breakpoints.down(t.breakpoints.values[e]+32*2)]:{maxWidth:"calc(100% - 64px)"}}}})),{props:({ownerState:e})=>e.fullWidth,style:{width:"calc(100% - 64px)"}},{props:({ownerState:e})=>e.fullScreen,style:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${Rt.paperScrollBody}`]:{margin:0,maxWidth:"100%"}}}]}))),Yt=d.forwardRef(function(e,r){const s=_e({props:e,name:"MuiDialog"}),a=Nt(),n={enter:a.transitions.duration.enteringScreen,exit:a.transitions.duration.leavingScreen},{"aria-describedby":c,"aria-labelledby":i,"aria-modal":l=!0,BackdropComponent:u,BackdropProps:p,children:x,className:v,disableEscapeKeyDown:f=!1,fullScreen:w=!1,fullWidth:g=!1,maxWidth:h="sm",onClick:b,onClose:D,open:A,PaperComponent:y=Rr,PaperProps:j={},scroll:m="paper",slots:T={},slotProps:P={},TransitionComponent:k=ur,transitionDuration:_=n,TransitionProps:B,...X}=s,$={...s,disableEscapeKeyDown:f,fullScreen:w,fullWidth:g,maxWidth:h,scroll:m},M=va($),V=d.useRef(),z=re=>{V.current=re.target===re.currentTarget},F=re=>{b&&b(re),V.current&&(V.current=null,D&&D(re,"backdropClick"))},J=$r(i),C=d.useMemo(()=>({titleId:J}),[J]),R={transition:k,...T},O={transition:B,paper:j,backdrop:p,...P},E={slots:R,slotProps:O},[U,q]=ie("root",{elementType:ba,shouldForwardComponentProp:!0,externalForwardedProps:E,ownerState:$,className:Se(M.root,v),ref:r}),[N,Y]=ie("backdrop",{elementType:ha,shouldForwardComponentProp:!0,externalForwardedProps:E,ownerState:$}),[Q,G]=ie("paper",{elementType:ya,shouldForwardComponentProp:!0,externalForwardedProps:E,ownerState:$,className:Se(M.paper,j.className)}),[ye,Ie]=ie("container",{elementType:xa,externalForwardedProps:E,ownerState:$,className:M.container}),[we,ae]=ie("transition",{elementType:ur,externalForwardedProps:E,ownerState:$,additionalProps:{appear:!0,in:A,timeout:_,role:"presentation"}});return o.jsx(U,{closeAfterTransition:!0,slots:{backdrop:N},slotProps:{backdrop:{transitionDuration:_,as:u,...Y}},disableEscapeKeyDown:f,onClose:D,open:A,onClick:F,...q,...X,children:o.jsx(we,{...ae,children:o.jsx(ye,{onMouseDown:z,...Ie,children:o.jsx(Q,{as:y,elevation:24,role:"dialog","aria-describedby":c,"aria-labelledby":J,"aria-modal":l,...G,children:o.jsx(Kr.Provider,{value:C,children:x})})})})})});function wa(t){return Me("MuiDialogActions",t)}Re("MuiDialogActions",["root","spacing"]);const Ca=t=>{const{classes:e,disableSpacing:r}=t;return Oe({root:["root",!r&&"spacing"]},wa,e)},ja=ne("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.root,!r.disableSpacing&&e.spacing]}})({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto",variants:[{props:({ownerState:t})=>!t.disableSpacing,style:{"& > :not(style) ~ :not(style)":{marginLeft:8}}}]}),Kt=d.forwardRef(function(e,r){const s=_e({props:e,name:"MuiDialogActions"}),{className:a,disableSpacing:n=!1,...c}=s,i={...s,disableSpacing:n},l=Ca(i);return o.jsx(ja,{className:Se(l.root,a),ownerState:i,ref:r,...c})});function Ta(t){return Me("MuiDialogContent",t)}Re("MuiDialogContent",["root","dividers"]);function Sa(t){return Me("MuiDialogTitle",t)}const Da=Re("MuiDialogTitle",["root"]),Aa=t=>{const{classes:e,dividers:r}=t;return Oe({root:["root",r&&"dividers"]},Ta,e)},Pa=ne("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.root,r.dividers&&e.dividers]}})(Xe(({theme:t})=>({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px",variants:[{props:({ownerState:e})=>e.dividers,style:{padding:"16px 24px",borderTop:`1px solid ${(t.vars||t).palette.divider}`,borderBottom:`1px solid ${(t.vars||t).palette.divider}`}},{props:({ownerState:e})=>!e.dividers,style:{[`.${Da.root} + &`]:{paddingTop:0}}}]}))),Gt=d.forwardRef(function(e,r){const s=_e({props:e,name:"MuiDialogContent"}),{className:a,dividers:n=!1,...c}=s,i={...s,dividers:n},l=Aa(i);return o.jsx(Pa,{className:Se(l.root,a),ownerState:i,ref:r,...c})}),Ma=t=>{const{classes:e}=t;return Oe({root:["root"]},Sa,e)},Ra=ne(I,{name:"MuiDialogTitle",slot:"Root"})({padding:"16px 24px",flex:"0 0 auto"}),Jt=d.forwardRef(function(e,r){const s=_e({props:e,name:"MuiDialogTitle"}),{className:a,id:n,...c}=s,i=s,l=Ma(i),{titleId:u=n}=d.useContext(Kr);return o.jsx(Ra,{component:"h2",className:Se(l.root,a),ownerState:i,ref:r,variant:"h6",id:n??u,...c})});function Oa(t){return Me("MuiListItemAvatar",t)}Re("MuiListItemAvatar",["root","alignItemsFlexStart"]);const _a=t=>{const{alignItems:e,classes:r}=t;return Oe({root:["root",e==="flex-start"&&"alignItemsFlexStart"]},Oa,r)},ka=ne("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.root,r.alignItems==="flex-start"&&e.alignItemsFlexStart]}})({minWidth:56,flexShrink:0,variants:[{props:{alignItems:"flex-start"},style:{marginTop:8}}]}),Gr=d.forwardRef(function(e,r){const s=_e({props:e,name:"MuiListItemAvatar"}),{className:a,...n}=s,c=d.useContext(Or),i={...s,alignItems:c.alignItems},l=_a(i);return o.jsx(ka,{className:Se(l.root,a),ownerState:i,ref:r,...n})});function Ea(t){return Me("MuiListItemText",t)}const vt=Re("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),Ia=t=>{const{classes:e,inset:r,primary:s,secondary:a,dense:n}=t;return Oe({root:["root",r&&"inset",n&&"dense",s&&a&&"multiline"],primary:["primary"],secondary:["secondary"]},Ea,e)},$a=ne("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[{[`& .${vt.primary}`]:e.primary},{[`& .${vt.secondary}`]:e.secondary},e.root,r.inset&&e.inset,r.primary&&r.secondary&&e.multiline,r.dense&&e.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${sr.root}:where(& .${vt.primary})`]:{display:"block"},[`.${sr.root}:where(& .${vt.secondary})`]:{display:"block"},variants:[{props:({ownerState:t})=>t.primary&&t.secondary,style:{marginTop:6,marginBottom:6}},{props:({ownerState:t})=>t.inset,style:{paddingLeft:56}}]}),Jr=d.forwardRef(function(e,r){const s=_e({props:e,name:"MuiListItemText"}),{children:a,className:n,disableTypography:c=!1,inset:i=!1,primary:l,primaryTypographyProps:u,secondary:p,secondaryTypographyProps:x,slots:v={},slotProps:f={},...w}=s,{dense:g}=d.useContext(Or);let h=l??a,b=p;const D={...s,disableTypography:c,inset:i,primary:!!h,secondary:!!b,dense:g},A=Ia(D),y={slots:v,slotProps:{primary:u,secondary:x,...f}},[j,m]=ie("root",{className:Se(A.root,n),elementType:$a,externalForwardedProps:{...y,...w},ownerState:D,ref:r}),[T,P]=ie("primary",{className:A.primary,elementType:I,externalForwardedProps:y,ownerState:D}),[k,_]=ie("secondary",{className:A.secondary,elementType:I,externalForwardedProps:y,ownerState:D});return h!=null&&h.type!==I&&!c&&(h=o.jsx(T,{variant:g?"body2":"body1",component:P!=null&&P.variant?void 0:"span",...P,children:h})),b!=null&&b.type!==I&&!c&&(b=o.jsx(k,{variant:"body2",color:"textSecondary",..._,children:b})),o.jsxs(j,{...m,children:[h,b]})});function Wa(t){return Me("MuiTooltip",t)}const Z=Re("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]);function Ba(t){return Math.round(t*1e5)/1e5}const La=t=>{const{classes:e,disableInteractive:r,arrow:s,touch:a,placement:n}=t,c={popper:["popper",!r&&"popperInteractive",s&&"popperArrow"],tooltip:["tooltip",s&&"tooltipArrow",a&&"touch",`tooltipPlacement${te(n.split("-")[0])}`],arrow:["arrow"]};return Oe(c,Wa,e)},Na=ne(Yr,{name:"MuiTooltip",slot:"Popper",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.popper,!r.disableInteractive&&e.popperInteractive,r.arrow&&e.popperArrow,!r.open&&e.popperClose]}})(Xe(({theme:t})=>({zIndex:(t.vars||t).zIndex.tooltip,pointerEvents:"none",variants:[{props:({ownerState:e})=>!e.disableInteractive,style:{pointerEvents:"auto"}},{props:({open:e})=>!e,style:{pointerEvents:"none"}},{props:({ownerState:e})=>e.arrow,style:{[`&[data-popper-placement*="bottom"] .${Z.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${Z.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${Z.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},[`&[data-popper-placement*="left"] .${Z.arrow}`]:{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}},{props:({ownerState:e})=>e.arrow&&!e.isRtl,style:{[`&[data-popper-placement*="right"] .${Z.arrow}`]:{left:0,marginLeft:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!!e.isRtl,style:{[`&[data-popper-placement*="right"] .${Z.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!e.isRtl,style:{[`&[data-popper-placement*="left"] .${Z.arrow}`]:{right:0,marginRight:"-0.71em"}}},{props:({ownerState:e})=>e.arrow&&!!e.isRtl,style:{[`&[data-popper-placement*="left"] .${Z.arrow}`]:{left:0,marginLeft:"-0.71em"}}}]}))),za=ne("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.tooltip,r.touch&&e.touch,r.arrow&&e.tooltipArrow,e[`tooltipPlacement${te(r.placement.split("-")[0])}`]]}})(Xe(({theme:t})=>({backgroundColor:t.vars?t.vars.palette.Tooltip.bg:_r(t.palette.grey[700],.92),borderRadius:(t.vars||t).shape.borderRadius,color:(t.vars||t).palette.common.white,fontFamily:t.typography.fontFamily,padding:"4px 8px",fontSize:t.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:t.typography.fontWeightMedium,[`.${Z.popper}[data-popper-placement*="left"] &`]:{transformOrigin:"right center"},[`.${Z.popper}[data-popper-placement*="right"] &`]:{transformOrigin:"left center"},[`.${Z.popper}[data-popper-placement*="top"] &`]:{transformOrigin:"center bottom",marginBottom:"14px"},[`.${Z.popper}[data-popper-placement*="bottom"] &`]:{transformOrigin:"center top",marginTop:"14px"},variants:[{props:({ownerState:e})=>e.arrow,style:{position:"relative",margin:0}},{props:({ownerState:e})=>e.touch,style:{padding:"8px 16px",fontSize:t.typography.pxToRem(14),lineHeight:`${Ba(16/14)}em`,fontWeight:t.typography.fontWeightRegular}},{props:({ownerState:e})=>!e.isRtl,style:{[`.${Z.popper}[data-popper-placement*="left"] &`]:{marginRight:"14px"},[`.${Z.popper}[data-popper-placement*="right"] &`]:{marginLeft:"14px"}}},{props:({ownerState:e})=>!e.isRtl&&e.touch,style:{[`.${Z.popper}[data-popper-placement*="left"] &`]:{marginRight:"24px"},[`.${Z.popper}[data-popper-placement*="right"] &`]:{marginLeft:"24px"}}},{props:({ownerState:e})=>!!e.isRtl,style:{[`.${Z.popper}[data-popper-placement*="left"] &`]:{marginLeft:"14px"},[`.${Z.popper}[data-popper-placement*="right"] &`]:{marginRight:"14px"}}},{props:({ownerState:e})=>!!e.isRtl&&e.touch,style:{[`.${Z.popper}[data-popper-placement*="left"] &`]:{marginLeft:"24px"},[`.${Z.popper}[data-popper-placement*="right"] &`]:{marginRight:"24px"}}},{props:({ownerState:e})=>e.touch,style:{[`.${Z.popper}[data-popper-placement*="top"] &`]:{marginBottom:"24px"}}},{props:({ownerState:e})=>e.touch,style:{[`.${Z.popper}[data-popper-placement*="bottom"] &`]:{marginTop:"24px"}}}]}))),Ua=ne("span",{name:"MuiTooltip",slot:"Arrow"})(Xe(({theme:t})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:t.vars?t.vars.palette.Tooltip.bg:_r(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}})));let bt=!1;const jr=new Co;let tt={x:0,y:0};function xt(t,e){return(r,...s)=>{e&&e(r,...s),t(r,...s)}}const We=d.forwardRef(function(e,r){const s=_e({props:e,name:"MuiTooltip"}),{arrow:a=!1,children:n,classes:c,components:i={},componentsProps:l={},describeChild:u=!1,disableFocusListener:p=!1,disableHoverListener:x=!1,disableInteractive:v=!1,disableTouchListener:f=!1,enterDelay:w=100,enterNextDelay:g=0,enterTouchDelay:h=700,followCursor:b=!1,id:D,leaveDelay:A=0,leaveTouchDelay:y=1500,onClose:j,onOpen:m,open:T,placement:P="bottom",PopperComponent:k,PopperProps:_={},slotProps:B={},slots:X={},title:$,TransitionComponent:M,TransitionProps:V,...z}=s,F=d.isValidElement(n)?n:o.jsx("span",{children:n}),J=Nt(),C=Mr(),[R,O]=d.useState(),[E,U]=d.useState(null),q=d.useRef(!1),N=v||b,Y=gt(),Q=gt(),G=gt(),ye=gt(),[Ie,we]=qo({controlled:T,default:!1,name:"Tooltip",state:"open"});let ae=Ie;const re=$r(D),S=d.useRef(),ee=ar(()=>{S.current!==void 0&&(document.body.style.WebkitUserSelect=S.current,S.current=void 0),ye.clear()});d.useEffect(()=>ee,[ee]);const H=L=>{jr.clear(),bt=!0,we(!0),m&&!ae&&m(L)},K=ar(L=>{jr.start(800+A,()=>{bt=!1}),we(!1),j&&ae&&j(L),Y.start(J.transitions.duration.shortest,()=>{q.current=!1})}),Ce=L=>{q.current&&L.type!=="touchstart"||(R&&R.removeAttribute("title"),Q.clear(),G.clear(),w||bt&&g?Q.start(bt?g:w,()=>{H(L)}):H(L))},ze=L=>{Q.clear(),G.start(A,()=>{K(L)})},[,oe]=d.useState(!1),he=L=>{nr(L.target)||(oe(!1),ze(L))},Ke=L=>{R||O(L.currentTarget),nr(L.target)&&(oe(!0),Ce(L))},Ge=L=>{q.current=!0;const xe=F.props;xe.onTouchStart&&xe.onTouchStart(L)},Je=L=>{Ge(L),G.clear(),Y.clear(),ee(),S.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",ye.start(h,()=>{document.body.style.WebkitUserSelect=S.current,Ce(L)})},dt=L=>{F.props.onTouchEnd&&F.props.onTouchEnd(L),ee(),G.start(y,()=>{K(L)})};d.useEffect(()=>{if(!ae)return;function L(xe){xe.key==="Escape"&&K(xe)}return document.addEventListener("keydown",L),()=>{document.removeEventListener("keydown",L)}},[K,ae]);const ut=_t(Xo(F),O,r);!$&&$!==0&&(ae=!1);const Ue=d.useRef(),ft=L=>{const xe=F.props;xe.onMouseMove&&xe.onMouseMove(L),tt={x:L.clientX,y:L.clientY},Ue.current&&Ue.current.update()},Ze={},Dt=typeof $=="string";u?(Ze.title=!ae&&Dt&&!x?$:null,Ze["aria-describedby"]=ae?re:null):(Ze["aria-label"]=Dt?$:null,Ze["aria-labelledby"]=ae&&!Dt?re:null);const ve={...Ze,...z,...F.props,className:Se(z.className,F.props.className),onTouchStart:Ge,ref:ut,...b?{onMouseMove:ft}:{}},Qe={};f||(ve.onTouchStart=Je,ve.onTouchEnd=dt),x||(ve.onMouseOver=xt(Ce,ve.onMouseOver),ve.onMouseLeave=xt(ze,ve.onMouseLeave),N||(Qe.onMouseOver=Ce,Qe.onMouseLeave=ze)),p||(ve.onFocus=xt(Ke,ve.onFocus),ve.onBlur=xt(he,ve.onBlur),N||(Qe.onFocus=Ke,Qe.onBlur=he));const $e={...s,isRtl:C,arrow:a,disableInteractive:N,placement:P,PopperComponentProp:k,touch:q.current},be=typeof B.popper=="function"?B.popper($e):B.popper,po=d.useMemo(()=>{var xe,rr;let L=[{name:"arrow",enabled:!!E,options:{element:E,padding:4}}];return(xe=_.popperOptions)!=null&&xe.modifiers&&(L=L.concat(_.popperOptions.modifiers)),(rr=be==null?void 0:be.popperOptions)!=null&&rr.modifiers&&(L=L.concat(be.popperOptions.modifiers)),{..._.popperOptions,...be==null?void 0:be.popperOptions,modifiers:L}},[E,_.popperOptions,be==null?void 0:be.popperOptions]),At=La($e),uo=typeof B.transition=="function"?B.transition($e):B.transition,mt={slots:{popper:i.Popper,transition:i.Transition??M,tooltip:i.Tooltip,arrow:i.Arrow,...X},slotProps:{arrow:B.arrow??l.arrow,popper:{..._,...be??l.popper},tooltip:B.tooltip??l.tooltip,transition:{...V,...uo??l.transition}}},[fo,mo]=ie("popper",{elementType:Na,externalForwardedProps:mt,ownerState:$e,className:Se(At.popper,_==null?void 0:_.className)}),[go,ho]=ie("transition",{elementType:Yo,externalForwardedProps:mt,ownerState:$e}),[vo,bo]=ie("tooltip",{elementType:za,className:At.tooltip,externalForwardedProps:mt,ownerState:$e}),[xo,yo]=ie("arrow",{elementType:Ua,className:At.arrow,externalForwardedProps:mt,ownerState:$e,ref:U});return o.jsxs(d.Fragment,{children:[d.cloneElement(F,ve),o.jsx(fo,{as:k??Yr,placement:P,anchorEl:b?{getBoundingClientRect:()=>({top:tt.y,left:tt.x,right:tt.x,bottom:tt.y,width:0,height:0})}:R,popperRef:Ue,open:R?ae:!1,id:re,transition:!0,...Qe,...mo,popperOptions:po,children:({TransitionProps:L})=>o.jsx(go,{timeout:J.transitions.duration.shorter,...L,...ho,children:o.jsxs(vo,{...bo,children:[$,a?o.jsx(xo,{...yo}):null]})})})]})});class Fa extends d.Component{getSnapshotBeforeUpdate(e){const r=this.props.childRef.current;if(r&&e.isPresent&&!this.props.isPresent){const s=r.offsetParent,a=To(s)&&s.offsetWidth||0,n=this.props.sizeRef.current;n.height=r.offsetHeight||0,n.width=r.offsetWidth||0,n.top=r.offsetTop,n.left=r.offsetLeft,n.right=a-n.width-n.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Ha({children:t,isPresent:e,anchorX:r,root:s}){const a=d.useId(),n=d.useRef(null),c=d.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:i}=d.useContext(jo);return d.useInsertionEffect(()=>{const{width:l,height:u,top:p,left:x,right:v}=c.current;if(e||!n.current||!l||!u)return;const f=r==="left"?`left: ${x}`:`right: ${v}`;n.current.dataset.motionPopId=a;const w=document.createElement("style");i&&(w.nonce=i);const g=s??document.head;return g.appendChild(w),w.sheet&&w.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${u}px !important;
            ${f}px !important;
            top: ${p}px !important;
          }
        `),()=>{g.removeChild(w),g.contains(w)&&g.removeChild(w)}},[e]),o.jsx(Fa,{isPresent:e,childRef:n,sizeRef:c,children:d.cloneElement(t,{ref:n})})}const Va=({children:t,initial:e,isPresent:r,onExitComplete:s,custom:a,presenceAffectsLayout:n,mode:c,anchorX:i,root:l})=>{const u=kr(qa),p=d.useId();let x=!0,v=d.useMemo(()=>(x=!1,{id:p,initial:e,isPresent:r,custom:a,onExitComplete:f=>{u.set(f,!0);for(const w of u.values())if(!w)return;s&&s()},register:f=>(u.set(f,!1),()=>u.delete(f))}),[r,u,s]);return n&&x&&(v={...v}),d.useMemo(()=>{u.forEach((f,w)=>u.set(w,!1))},[r]),d.useEffect(()=>{!r&&!u.size&&s&&s()},[r]),c==="popLayout"&&(t=o.jsx(Ha,{isPresent:r,anchorX:i,root:l,children:t})),o.jsx(So.Provider,{value:v,children:t})};function qa(){return new Map}const yt=t=>t.key||"";function Tr(t){const e=[];return d.Children.forEach(t,r=>{d.isValidElement(r)&&e.push(r)}),e}const Xa=({children:t,custom:e,initial:r=!0,onExitComplete:s,presenceAffectsLayout:a=!0,mode:n="sync",propagate:c=!1,anchorX:i="left",root:l})=>{const[u,p]=Do(c),x=d.useMemo(()=>Tr(t),[t]),v=c&&!u?[]:x.map(yt),f=d.useRef(!0),w=d.useRef(x),g=kr(()=>new Map),[h,b]=d.useState(x),[D,A]=d.useState(x);Ao(()=>{f.current=!1,w.current=x;for(let m=0;m<D.length;m++){const T=yt(D[m]);v.includes(T)?g.delete(T):g.get(T)!==!0&&g.set(T,!1)}},[D,v.length,v.join("-")]);const y=[];if(x!==h){let m=[...x];for(let T=0;T<D.length;T++){const P=D[T],k=yt(P);v.includes(k)||(m.splice(T,0,P),y.push(P))}return n==="wait"&&y.length&&(m=y),A(Tr(m)),b(x),null}const{forceRender:j}=d.useContext(Po);return o.jsx(o.Fragment,{children:D.map(m=>{const T=yt(m),P=c&&!u?!1:x===D||v.includes(T),k=()=>{if(g.has(T))g.set(T,!0);else return;let _=!0;g.forEach(B=>{B||(_=!1)}),_&&(j==null||j(),A(w.current),c&&(p==null||p()),s&&s())};return o.jsx(Va,{isPresent:P,initial:!f.current||r?void 0:!1,custom:e,presenceAffectsLayout:a,mode:n,root:l,onExitComplete:P?void 0:k,anchorX:i,children:m},T)})})},Ya=ge(o.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"})),Ka=ge([o.jsx("path",{d:"M17 11c.34 0 .67.04 1 .09V6.27L10.5 3 3 6.27v4.91c0 4.54 3.2 8.79 7.5 9.82.55-.13 1.08-.32 1.6-.55-.69-.98-1.1-2.17-1.1-3.45 0-3.31 2.69-6 6-6"},"0"),o.jsx("path",{d:"M17 13c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 1.38c.62 0 1.12.51 1.12 1.12s-.51 1.12-1.12 1.12-1.12-.51-1.12-1.12.5-1.12 1.12-1.12m0 5.37c-.93 0-1.74-.46-2.24-1.17.05-.72 1.51-1.08 2.24-1.08s2.19.36 2.24 1.08c-.5.71-1.31 1.17-2.24 1.17"},"1")]),Ga=ge(o.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"})),Ot=ge(o.jsx("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2M6 9h12v2H6zm8 5H6v-2h8zm4-6H6V6h12z"})),Ja=ge(o.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"})),Sr=ge(o.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"})),Za=ge(o.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"})),Dr=ge(o.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"})),Ar=ge(o.jsx("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"})),Qa=ge(o.jsx("path",{d:"M14 8c0-2.21-1.79-4-4-4S6 5.79 6 8s1.79 4 4 4 4-1.79 4-4m3 2v2h6v-2zM2 18v2h16v-2c0-2.66-5.33-4-8-4s-8 1.34-8 4"})),en=ge([o.jsx("circle",{cx:"12",cy:"12",r:"3.2"},"0"),o.jsx("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5"},"1")]),Pr=ge(o.jsx("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"})),Zt=()=>{var t;if(console.log("Инициализация Telegram WebApp..."),er(),typeof window<"u"&&((t=window.Telegram)!=null&&t.WebApp))try{const e=window.Telegram.WebApp;return e.ready(),e.expand(),e.setHeaderColor("#232b3b"),e.setBackgroundColor("#232b3b"),e.enableClosingConfirmation(),console.log("Telegram WebApp успешно инициализирован"),console.log("WebApp version:",e.version),console.log("WebApp platform:",e.platform),console.log("WebApp theme:",e.colorScheme),!0}catch(e){return console.error("Ошибка инициализации Telegram WebApp:",e),!1}return console.log("Telegram WebApp не найден"),!1},Zr=()=>{var t,e,r;return typeof window<"u"&&((r=(e=(t=window.Telegram)==null?void 0:t.WebApp)==null?void 0:e.initDataUnsafe)!=null&&r.user)?window.Telegram.WebApp.initDataUnsafe.user:null},Qt=()=>{var t;if(console.log("=== Telegram WebApp Debug Info ==="),typeof window>"u"){console.log("❌ Window object not available");return}if(console.log("🔍 Telegram object:",window.Telegram?"✅ Available":"❌ Not available"),(t=window.Telegram)!=null&&t.WebApp){const e=window.Telegram.WebApp;console.log("🔍 WebApp object:","✅ Available"),console.log("🔍 WebApp version:",e.version),console.log("🔍 WebApp platform:",e.platform),console.log("🔍 WebApp colorScheme:",e.colorScheme),console.log("🔍 WebApp isExpanded:",e.isExpanded),console.log("🔍 WebApp viewportHeight:",e.viewportHeight),console.log("🔍 WebApp viewportStableHeight:",e.viewportStableHeight),console.log("🔍 InitData:",e.initData?`✅ Available (${e.initData.length} chars)`:"❌ Not available"),console.log("🔍 InitDataUnsafe:",e.initDataUnsafe?"✅ Available":"❌ Not available"),e.initDataUnsafe&&(console.log("🔍 InitDataUnsafe.user:",e.initDataUnsafe.user?"✅ Available":"❌ Not available"),console.log("🔍 InitDataUnsafe.query_id:",e.initDataUnsafe.query_id?"✅ Available":"❌ Not available"),console.log("🔍 InitDataUnsafe.auth_date:",e.initDataUnsafe.auth_date?"✅ Available":"❌ Not available"),console.log("🔍 InitDataUnsafe.hash:",e.initDataUnsafe.hash?"✅ Available":"❌ Not available"),e.initDataUnsafe.user&&console.log("🔍 User data:",JSON.stringify(e.initDataUnsafe.user,null,2)))}else console.log("❌ WebApp object not available");console.log("==================================")},Ye=()=>{var t;if(console.log("Получение данных авторизации Telegram..."),Qt(),typeof window<"u"&&((t=window.Telegram)!=null&&t.WebApp)){console.log("Telegram WebApp найден");const e=window.Telegram.WebApp.initData;if(console.log("Telegram initData:",e?"найден":"отсутствует"),e)return console.log("✅ Используем реальные данные initData"),e;const r=window.Telegram.WebApp.initDataUnsafe;if(console.log("Telegram initDataUnsafe:",r),r!=null&&r.user){const s=Math.floor(Date.now()/1e3),a=JSON.stringify(r.user),n=`user=${encodeURIComponent(a)}`,c=`auth_date=${s}`,i=`${n}&${c}`,l=btoa(i).replace(/[^a-zA-Z0-9]/g,"").substring(0,32),u=`${n}&${c}&hash=${l}`;return console.log("✅ Создаем данные авторизации из initDataUnsafe"),console.log("Generated auth data length:",u.length),u}}return console.warn("❌ Приложение запущено не из Telegram WebApp"),console.warn("❌ Данные авторизации недоступны"),""},Qr=()=>{var t;return typeof window<"u"&&!!((t=window.Telegram)!=null&&t.WebApp)},eo=()=>{if(console.log("🔄 Очищаем и пересоздаем данные авторизации..."),typeof window<"u"){localStorage.removeItem("telegram_init_data"),console.log("✅ Старые данные очищены");const t=Ye();return console.log("✅ Новые данные созданы:",t?"успешно":"ошибка"),t}return""},er=()=>{typeof window<"u"&&(localStorage.removeItem("telegram_init_data"),console.log("🧹 Очищены старые данные авторизации"))},to=()=>{console.log("🧪 Тестируем данные авторизации...");const t=Ye();if(t){console.log("✅ Данные авторизации найдены"),console.log("📊 Длина:",t.length),console.log("📋 Превью:",t.substring(0,100)+"...");try{const e=new URLSearchParams(t),r=e.get("user"),s=e.get("auth_date"),a=e.get("hash");if(console.log("🔍 Структура данных:"),console.log("  - user:",r?"есть":"отсутствует"),console.log("  - auth_date:",s?"есть":"отсутствует"),console.log("  - hash:",a?"есть":"отсутствует"),r){const n=JSON.parse(decodeURIComponent(r));console.log("👤 Данные пользователя:",n)}return!0}catch(e){return console.error("❌ Ошибка парсинга данных:",e),!1}}else return console.error("❌ Данные авторизации не найдены"),!1},tr=async()=>{console.log("🔬 Диагностика проблемы авторизации на сервере...");try{const{debugAuthConfig:t,debugValidateTelegramData:e}=await at(async()=>{const{debugAuthConfig:s,debugValidateTelegramData:a}=await Promise.resolve().then(()=>Tt);return{debugAuthConfig:s,debugValidateTelegramData:a}},void 0);console.log("🔍 Проверяем конфигурацию сервера...");try{const s=await t();if(console.log("🏃 Конфигурация сервера:",s),!s.telegram_bot_token_set)return console.error("❌ На сервере не установлен токен Telegram бота!"),console.error("💡 Решение: Администратор должен установить TELEGRAM_BOT_TOKEN на сервере"),"server_no_token";console.log("✅ Токен бота на сервере установлен")}catch(s){return console.error("❌ Ошибка получения конфигурации сервера:",s),"server_config_error"}const r=Ye();if(r){console.log("🧪 Тестируем валидацию данных на сервере...");try{const s=await e(r);return console.log("📊 Результат валидации:",s),s.success?(console.log("✅ Валидация на сервере прошла успешно!"),console.log("❓ Возможно, проблема в другом месте"),"validation_success"):(console.error("❌ Валидация на сервере не прошла"),console.error("💡 Причина: Неправильная подпись или истекшие данные"),"validation_failed")}catch(s){return console.error("❌ Ошибка тестирования валидации:",s),"validation_error"}}else return console.error("❌ Нет данных для тестирования"),"no_data"}catch(t){return console.error("❌ Общая ошибка диагностики:",t),"general_error"}};typeof window<"u"&&(window.telegramUtils={debugTelegramWebApp:Qt,getTelegramInitData:Ye,clearAndRecreateAuthData:eo,cleanupOldAuthData:er,testAuthData:to,initTelegramWebApp:Zt,diagnoseServerAuth:tr},console.log("🔧 Утилиты Telegram доступны через window.telegramUtils"));const tn=Object.freeze(Object.defineProperty({__proto__:null,cleanupOldAuthData:er,clearAndRecreateAuthData:eo,debugTelegramWebApp:Qt,diagnoseServerAuth:tr,getTelegramInitData:Ye,getTelegramUser:Zr,initTelegramWebApp:Zt,isTelegramWebApp:Qr,testAuthData:to},Symbol.toStringTag,{value:"Module"})),rn=()=>{console.log("=== Aeon Messenger API Configuration ==="),console.log("VITE_CHAT_URL:","https://aeon-messenger-app-09faae856b73.herokuapp.com"),console.log("Base URL:","https://aeon-messenger-app-09faae856b73.herokuapp.com"),console.log("Environment:","production"),console.log("🆕 NEW BACKEND URL: https://aeon-backend-2892-d50dfbe26b14.herokuapp.com"),console.log("=========================================")};rn();const se=No.create({baseURL:"https://aeon-backend-2892-d50dfbe26b14.herokuapp.com",timeout:3e4,headers:{"Content-Type":"application/json"}}),ro=async(t,e=3,r=1e3)=>{var s,a;for(let n=0;n<e;n++)try{return await t()}catch(c){if(console.log(`Attempt ${n+1} failed:`,c.message),((s=c.response)==null?void 0:s.status)===401||((a=c.response)==null?void 0:a.status)===403||n===e-1)throw c;await new Promise(i=>setTimeout(i,r*(n+1)))}throw new Error("Max retries reached")};se.interceptors.request.use(t=>{const e=Ye();return console.log("=== Aeon API Request Debug ==="),console.log("URL:",t.url),console.log("Method:",t.method),console.log("Base URL:",t.baseURL),console.log("Init Data Length:",e?e.length:0),console.log("Init Data Preview:",e?e.substring(0,100)+"...":"No data"),e?(t.headers["x-telegram-init-data"]=e,console.log("✅ Auth header attached")):(console.warn("❌ No auth data available - running in development mode"),console.warn("❌ This request will likely fail with 401 error")),console.log("==============================="),t},t=>(console.error("Request interceptor error:",t),Promise.reject(t)));se.interceptors.response.use(t=>(console.log("✅ API Response:",t.config.url,t.status),t),t=>{var e,r,s,a,n,c,i,l;throw console.error("=== Aeon API Error ==="),console.error("URL:",(e=t.config)==null?void 0:e.url),console.error("Status:",(r=t.response)==null?void 0:r.status),console.error("Status Text:",(s=t.response)==null?void 0:s.statusText),console.error("Response Data:",(a=t.response)==null?void 0:a.data),console.error("Request Headers:",(n=t.config)==null?void 0:n.headers),console.error("======================"),((c=t.response)==null?void 0:c.status)===401?(console.error("❌ Authorization failed"),console.error("❌ Possible reasons:"),console.error("   1. App is not running inside Telegram WebApp"),console.error("   2. Invalid or expired Telegram init data"),console.error("   3. Server-side authorization issue"),console.error("❌ Solution: Open this app from Telegram bot/mini app"),{...t,message:"Authorization failed - app must be opened from Telegram",isAuthError:!0,response:{...t.response,data:{...(i=t.response)==null?void 0:i.data,error:"Приложение должно быть открыто из Telegram"}}}):t.code==="ECONNABORTED"&&t.message.includes("timeout")?(console.error("❌ Request timeout"),console.error("❌ Possible reasons:"),console.error("   1. Server is starting up (cold start)"),console.error("   2. Server is overloaded"),console.error("   3. Network connectivity issues"),console.error("❌ Solution: Try again in a moment"),{...t,message:"Server is starting up, please try again in a moment",isTimeoutError:!0}):((l=t.response)==null?void 0:l.status)===503?(console.error("❌ Service Unavailable"),console.error("❌ Server is temporarily unavailable"),{...t,message:"Server is temporarily unavailable, please try again",isServiceError:!0}):t});const $t=async()=>(await ro(()=>se.get("/api/v1/chats/"))).data,oo=async t=>(await ro(()=>se.post("/api/v1/chats/",t,{timeout:6e4}))).data,on=async t=>(await se.get(`/api/v1/chats/${t}`)).data,so=async(t,e)=>{await se.post(`/api/v1/chats/${t}/members/${e}`)},ao=async(t,e)=>{await se.delete(`/api/v1/chats/${t}/members/${e}`)},Wt=async(t,e=1,r=50)=>(await se.get(`/api/v1/messages/chat/${t}?page=${e}&per_page=${r}`)).data,no=async t=>(await se.post("/api/v1/messages/",t)).data,io=async t=>{await se.post(`/api/v1/messages/chat/${t}/read-all`)},lo=async t=>{const e=new FormData;return e.append("file",t),(await se.post("/api/v1/messages/upload-media",e,{headers:{"Content-Type":"multipart/form-data"}})).data},co=async()=>(await se.get("/api/v1/me")).data,sn=async()=>(await se.get("/api/v1/debug/auth")).data,an=async t=>(await se.post("/api/v1/debug/validate-telegram-data",t,{headers:{"Content-Type":"application/json"}})).data,Bt=async(t,e)=>(await se.post(`/api/v1/chats/${t}/invite-by-username`,{username:e})).data,Lt=async()=>{await se.post("/api/v1/users/check-invitations")},Tt=Object.freeze(Object.defineProperty({__proto__:null,addMemberToChat:so,checkAndAcceptInvitations:Lt,createChat:oo,debugAuthConfig:sn,debugValidateTelegramData:an,getChat:on,getChatMessages:Wt,getChats:$t,getCurrentUser:co,inviteMemberByUsername:Bt,markAllMessagesAsRead:io,removeMemberFromChat:ao,sendMessage:no,uploadMedia:lo},Symbol.toStringTag,{value:"Module"})),nn=()=>Mo(),wt=t=>Ro(t),ln=()=>{const t=nn(),[e,r]=d.useState([]),[s,a]=d.useState(null),[n,c]=d.useState(null),[i,l]=d.useState(!0),[u,p]=d.useState(null),[x,v]=d.useState(!1),[f,w]=d.useState(!0),[g,h]=d.useState(!1),b=wt(C=>s?Io(C,s.id):[]),D=wt(C=>s?Wo(C,s.id):!1),A=wt(C=>s?$o(C,s.id):null),y=wt(C=>s?Eo(C,s.id):0),j=d.useCallback(()=>Zt(),[]),m=d.useCallback(async()=>{var C;try{const R=await co();c(R),p(null),v(!1);try{await Lt()}catch(O){console.log("No pending invitations or error checking invitations:",O)}}catch(R){if(console.error("Error loading current user:",R),((C=R.response)==null?void 0:C.status)===401||R.isAuthError?(v(!0),p("Приложение должно быть открыто из Telegram для корректной работы")):p("Ошибка загрузки данных пользователя"),!Qr()){const O=Zr();c(O?{id:O.id,telegram_id:O.id,username:O.username,first_name:O.first_name,last_name:O.last_name,profile_photo_url:O.photo_url}:{id:123456789,telegram_id:123456789,username:"testuser",first_name:"Test",last_name:"User",profile_photo_url:void 0}),v(!1)}}},[j]),T=d.useCallback(async()=>{var C,R;try{l(!0);const E=(await $t()).sort((U,q)=>!U.last_message_time&&!q.last_message_time?0:U.last_message_time?q.last_message_time?new Date(q.last_message_time).getTime()-new Date(U.last_message_time).getTime():-1:1);r(E),p(null),v(!1)}catch(O){console.error("Error loading chats:",O),((C=O.response)==null?void 0:C.status)===401||O.isAuthError?(v(!0),p("Приложение должно быть открыто из Telegram для корректной работы")):O.isTimeoutError||O.code==="ECONNABORTED"?p("⏱️ Сервер запускается, попробуйте обновить страницу через минуту"):O.isServiceError||((R=O.response)==null?void 0:R.status)===503?p("🔧 Сервер временно недоступен, попробуйте через несколько минут"):p("Ошибка загрузки чатов")}finally{l(!1)}},[]),P=d.useCallback(async()=>{var C;try{const O=(await $t()).sort((E,U)=>!E.last_message_time&&!U.last_message_time?0:E.last_message_time?U.last_message_time?new Date(U.last_message_time).getTime()-new Date(E.last_message_time).getTime():-1:1);r(O),p(null),v(!1)}catch(R){console.error("Error refreshing chats:",R),(((C=R.response)==null?void 0:C.status)===401||R.isAuthError)&&v(!0)}},[]),k=d.useCallback(async C=>{var R,O;try{t(ir({chatId:C,loading:!0}));const E=await Wt(C);t(Oo({chatId:C,messages:E.messages})),p(null),v(!1)}catch(E){console.error("Error loading messages:",E),t(_o({chatId:C,error:E.message})),((R=E.response)==null?void 0:R.status)===401||E.isAuthError?(v(!0),p("Приложение должно быть открыто из Telegram для корректной работы")):E.isTimeoutError||E.code==="ECONNABORTED"?p("⏱️ Сервер запускается, сообщения загрузятся автоматически"):E.isServiceError||((O=E.response)==null?void 0:O.status)===503?p("🔧 Сервер временно недоступен, попробуйте обновить чат"):p("Ошибка загрузки сообщений")}finally{t(ir({chatId:C,loading:!1}))}},[t]),_=d.useCallback(async C=>{var R,O;try{const U=(await Wt(C)).messages;if(U.length>0){const q=U[U.length-1].id;if(y&&q>y){const N=b,Y=new Set(N.map(G=>G.id)),Q=U.filter(G=>!Y.has(G.id));if(Q.length>0){t(ko({chatId:C,messages:Q})),h(!0),P();try{(O=(R=window.Telegram)==null?void 0:R.WebApp)!=null&&O.HapticFeedback&&window.Telegram.WebApp.HapticFeedback.notificationOccurred("success")}catch{console.log("Haptic feedback not available")}console.log("🔄 Получены новые сообщения")}}}}catch(E){console.error("Error checking new messages:",E)}},[y,b,t,P]),B=d.useCallback(async(C,R)=>{if(R.trim())try{const O={text:R.trim(),message_type:"text",chat_id:C},E=await no(O);t(lr({chatId:C,message:E})),r(U=>U.map(N=>N.id===C?{...N,last_message:R.trim(),last_message_time:new Date().toISOString()}:N).sort((N,Y)=>!N.last_message_time&&!Y.last_message_time?0:N.last_message_time?Y.last_message_time?new Date(Y.last_message_time).getTime()-new Date(N.last_message_time).getTime():-1:1))}catch(O){if(console.error("Error sending message:",O),p("Ошибка отправки сообщения"),n){const E={id:Date.now(),text:R.trim(),message_type:"text",chat_id:C,sender_id:n.id,sender:{id:n.id,telegram_id:n.telegram_id,username:n.username,first_name:n.first_name,last_name:n.last_name,profile_photo_url:n.profile_photo_url},is_edited:!1,is_deleted:!1,read_by:[],created_at:new Date().toISOString(),updated_at:new Date().toISOString()};t(lr({chatId:C,message:E})),r(U=>U.map(N=>N.id===C?{...N,last_message:R.trim(),last_message_time:new Date().toISOString()}:N).sort((N,Y)=>!N.last_message_time&&!Y.last_message_time?0:N.last_message_time?Y.last_message_time?new Date(Y.last_message_time).getTime()-new Date(N.last_message_time).getTime():-1:1))}}},[n,t]),X=d.useCallback(async(C,R=[],O=[],E)=>{try{const U={title:C,chat_type:R.length+O.length>0?"group":"private",member_ids:R,photo_url:E},q=await oo(U);if(O.length>0){const{inviteMemberByUsername:Y}=await at(async()=>{const{inviteMemberByUsername:Q}=await Promise.resolve().then(()=>Tt);return{inviteMemberByUsername:Q}},void 0);for(const Q of O)try{await Y(q.id,Q)}catch(G){console.error(`Error inviting ${Q}:`,G)}}await T();const N={id:q.id,title:q.title,chat_type:q.chat_type,photo_url:q.photo_url,last_message:void 0,last_message_time:void 0,unread_count:0};return a(N),await k(q.id),q}catch(U){throw console.error("Error creating chat:",U),p("Ошибка создания чата"),U}},[T,k]),$=d.useCallback(C=>{a(C),h(!1),k(C.id),C.unread_count>0&&io(C.id).catch(R=>console.error("Error marking messages as read:",R))},[k]),M=d.useCallback(()=>{a(null),h(!1)},[]),V=d.useCallback(()=>{h(!1)},[]),z=d.useCallback(async C=>{try{const{getChat:R}=await at(async()=>{const{getChat:E}=await Promise.resolve().then(()=>Tt);return{getChat:E}},void 0);return await R(C)}catch(R){throw console.error("Error loading chat info:",R),p("Ошибка загрузки информации о чате"),R}},[]),F=d.useCallback(async(C,R)=>{try{await so(C,R),p(null),s&&s.id===C&&setTimeout(()=>P(),1e3)}catch(O){throw console.error("Error adding member to chat:",O),p("Ошибка добавления участника"),O}},[s,P]),J=d.useCallback(async(C,R)=>{try{await ao(C,R),p(null),s&&s.id===C&&setTimeout(()=>P(),1e3)}catch(O){throw console.error("Error removing member from chat:",O),p("Ошибка удаления участника"),O}},[s,P]);return d.useEffect(()=>{j(),m(),T()},[j,m,T]),d.useEffect(()=>{if(!f||x)return;const C=setInterval(()=>{P()},3e4);return()=>clearInterval(C)},[f,x,P]),d.useEffect(()=>{if(!f||!s||x)return;const C=setInterval(()=>{_(s.id)},5e3);return()=>clearInterval(C)},[f,s,x,_]),d.useEffect(()=>{if(!f||x)return;const C=setInterval(async()=>{try{await Lt(),P()}catch(R){console.log("No new invitations or error:",R)}},12e4);return()=>clearInterval(C)},[f,x,P]),{chats:e,currentChat:s,messages:b,currentUser:n,loading:i,messagesLoading:D,error:u||A,isAuthError:x,autoRefresh:f,setAutoRefresh:w,hasNewMessages:g,markMessagesAsViewed:V,sendNewMessage:B,createNewChat:X,selectChat:$,refreshChats:P,refreshMessages:()=>s&&k(s.id),loadChatInfo:z,addMemberToChat:F,removeMemberFromChat:J,clearCurrentChat:M,checkNewMessages:()=>s&&_(s.id)}},cn=({open:t,onClose:e})=>{const[r,s]=d.useState(!1),[a,n]=d.useState(null),c=async()=>{s(!0),n(null);try{const u=await tr(),{debugAuthConfig:p,debugValidateTelegramData:x}=await at(async()=>{const{debugAuthConfig:b,debugValidateTelegramData:D}=await Promise.resolve().then(()=>Tt);return{debugAuthConfig:b,debugValidateTelegramData:D}},void 0),{getTelegramInitData:v}=await at(async()=>{const{getTelegramInitData:b}=await Promise.resolve().then(()=>tn);return{getTelegramInitData:b}},void 0);let f,w,g=[];try{f=await p()}catch{f={error:"Не удалось получить конфигурацию сервера"}}const h=v();if(h)try{w=await x(h)}catch{w={error:"Не удалось протестировать валидацию"}}switch(u){case"server_no_token":g=["Администратор должен установить переменную TELEGRAM_BOT_TOKEN на сервере","Получите токен в @BotFather и добавьте его в настройки Heroku","Перезапустите приложение после установки токена"];break;case"validation_failed":g=["Проверьте правильность токена бота в @BotFather","Убедитесь, что приложение открыто из Telegram","Токен должен соответствовать боту, через который открыто приложение"];break;case"validation_success":g=["Валидация прошла успешно, проблема может быть временной","Попробуйте перезагрузить приложение","Проверьте интернет-соединение"];break;default:g=["Убедитесь, что приложение открыто из Telegram","Проверьте интернет-соединение","Обратитесь к администратору с результатами диагностики"]}n({status:u,serverConfig:f,validationResult:w,recommendations:g})}catch{n({status:"error",recommendations:["Произошла ошибка при диагностике","Проверьте консоль браузера для подробностей"]})}finally{s(!1)}},i=u=>{switch(u){case"validation_success":return"success";case"server_no_token":case"validation_failed":return"error";default:return"warning"}},l=u=>{switch(u){case"server_no_token":return"Токен бота не установлен";case"validation_failed":return"Валидация не прошла";case"validation_success":return"Валидация успешна";case"server_config_error":return"Ошибка конфигурации сервера";case"validation_error":return"Ошибка валидации";case"no_data":return"Нет данных авторизации";case"general_error":return"Общая ошибка";default:return"Неизвестный статус"}};return o.jsxs(Yt,{open:t,onClose:e,maxWidth:"md",fullWidth:!0,children:[o.jsx(Jt,{children:"🔬 Диагностика проблемы авторизации"}),o.jsxs(Gt,{children:[!r&&!a&&o.jsx(W,{sx:{textAlign:"center",py:3},children:o.jsx(I,{variant:"body1",sx:{mb:2},children:'Нажмите "Запустить диагностику" для проверки проблемы авторизации'})}),r&&o.jsxs(W,{sx:{display:"flex",alignItems:"center",justifyContent:"center",py:4},children:[o.jsx(je,{sx:{mr:2}}),o.jsx(I,{children:"Выполняется диагностика..."})]}),a&&o.jsxs(W,{sx:{py:2},children:[o.jsxs(W,{sx:{mb:3},children:[o.jsx(I,{variant:"h6",sx:{mb:1},children:"Результат диагностики:"}),o.jsx(Wr,{label:l(a.status),color:i(a.status),sx:{mb:2}})]}),a.serverConfig&&o.jsxs(W,{sx:{mb:3},children:[o.jsx(I,{variant:"h6",sx:{mb:1},children:"Конфигурация сервера:"}),o.jsxs(Be,{severity:a.serverConfig.telegram_bot_token_set?"success":"error",children:[o.jsxs(I,{variant:"body2",children:["Токен бота: ",a.serverConfig.telegram_bot_token_set?"✅ Установлен":"❌ Не установлен"]}),o.jsxs(I,{variant:"body2",children:["Режим отладки: ",a.serverConfig.debug_mode?"Включен":"Выключен"]})]})]}),a.validationResult&&o.jsxs(W,{sx:{mb:3},children:[o.jsx(I,{variant:"h6",sx:{mb:1},children:"Результат валидации:"}),o.jsx(Be,{severity:a.validationResult.success?"success":"error",children:o.jsxs(I,{variant:"body2",children:["Валидация: ",a.validationResult.success?"✅ Успешна":"❌ Не прошла"]})})]}),o.jsxs(W,{sx:{mb:2},children:[o.jsx(I,{variant:"h6",sx:{mb:1},children:"Рекомендации:"}),a.recommendations.map((u,p)=>o.jsxs(I,{variant:"body2",sx:{mb:1,pl:2},children:["• ",u]},p))]})]})]}),o.jsxs(Kt,{children:[!a&&o.jsx(le,{onClick:c,disabled:r,variant:"contained",color:"primary",children:"Запустить диагностику"}),a&&o.jsx(le,{onClick:c,variant:"outlined",children:"Повторить диагностику"}),o.jsx(le,{onClick:e,children:"Закрыть"})]})]})},pn=({open:t,onClose:e,currentChat:r,loadChatInfo:s,addMemberToChat:a,removeMemberFromChat:n,currentUserId:c})=>{var $;const[i,l]=d.useState(null),[u,p]=d.useState(!1),[x,v]=d.useState(null),[f,w]=d.useState(""),[g,h]=d.useState(""),[b,D]=d.useState("username"),[A,y]=d.useState(!1),[j,m]=d.useState(null);d.useEffect(()=>{t&&r&&T()},[t,r]);const T=async()=>{if(r)try{p(!0),v(null);const M=await s(r.id);l(M)}catch(M){v("Не удалось загрузить информацию о чате"),console.error("Error loading chat details:",M)}finally{p(!1)}},P=async M=>{r&&await a(r.id,M)},k=async M=>{if(!r)return;const V=await Bt(r.id,M);V.status==="added"?m({type:"success",message:`✅ @${M} найден и добавлен в чат!`}):V.status==="invited"&&m({type:"info",message:`📨 @${M} не найден в базе. Приглашение создано - пользователь будет добавлен при входе в приложение.`}),setTimeout(()=>m(null),5e3)},_=async()=>{if(!f.trim())return;const M=f.trim(),V=parseInt(M);try{y(!0),v(null),isNaN(V)?await k(M.replace(/^@/,"")):await P(V),w(""),await T()}catch(z){console.error("Error adding member (ID path):",z),v("Не удалось добавить участника")}finally{y(!1)}},B=async()=>{if(!(!g.trim()||!r))try{y(!0),v(null),m(null);const M=await Bt(r.id,g.trim());M.status==="added"?(m({type:"success",message:`✅ @${g.trim()} добавлен в чат!`}),h(""),await T()):M.status==="invited"&&(m({type:"info",message:`📨 Приглашение отправлено @${g.trim()}. Пользователь будет добавлен автоматически при входе в приложение.`}),h("")),setTimeout(()=>m(null),5e3)}catch(M){console.error("Error adding member by username:",M),m({type:"warning",message:"Не удалось добавить участника. Проверьте username и попробуйте снова."})}finally{y(!1)}},X=async M=>{if(r)try{v(null),await n(r.id,M),await T()}catch(V){v("Не удалось удалить участника"),console.error("Error removing member:",V)}};return r?o.jsxs(Yt,{open:t,onClose:e,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{bgcolor:"rgba(35, 43, 59, 0.95)",color:"white"}},children:[o.jsxs(Jt,{sx:{display:"flex",alignItems:"center",gap:2},children:[o.jsx(nt,{src:r.photo_url||void 0,sx:{bgcolor:"#4a9eff"},children:r.title?r.title[0].toUpperCase():o.jsx(Dr,{})}),o.jsxs(W,{children:[o.jsx(I,{variant:"h6",children:r.title||"Безымянный чат"}),o.jsx(I,{variant:"caption",sx:{color:"#8b95a1"},children:r.chat_type==="private"?"Личный чат":"Групповой чат"})]})]}),o.jsxs(Gt,{children:[x&&o.jsx(Be,{severity:"error",sx:{mb:2},children:x}),u?o.jsx(W,{sx:{display:"flex",justifyContent:"center",py:3},children:o.jsx(je,{sx:{color:"#4a9eff"}})}):i?o.jsxs(o.Fragment,{children:[o.jsxs(W,{sx:{mb:3},children:[o.jsx(I,{variant:"subtitle1",sx:{mb:1,fontWeight:600},children:"Информация"}),o.jsxs(I,{variant:"body2",sx:{color:"#8b95a1",mb:1},children:["ID чата: ",i.id]}),o.jsxs(I,{variant:"body2",sx:{color:"#8b95a1",mb:1},children:["Создан: ",new Date(i.created_at).toLocaleDateString("ru-RU")]}),i.description&&o.jsxs(I,{variant:"body2",sx:{color:"#8b95a1"},children:["Описание: ",i.description]})]}),o.jsxs(W,{sx:{mb:3},children:[o.jsxs(I,{variant:"subtitle1",sx:{mb:2,fontWeight:600},children:["Участники (",(($=i.members)==null?void 0:$.length)||0,")"]}),i.members&&i.members.length>0?o.jsx(Er,{sx:{maxHeight:200,overflow:"auto"},children:i.members.map(M=>o.jsxs(Ir,{sx:{bgcolor:"rgba(43, 52, 65, 0.5)",borderRadius:1,mb:1},children:[o.jsx(Gr,{children:o.jsx(nt,{src:M.profile_photo_url||void 0,sx:{bgcolor:"#4a9eff"},children:M.first_name?M.first_name[0].toUpperCase():o.jsx(Dr,{})})}),o.jsx(Jr,{primary:o.jsxs(W,{sx:{display:"flex",alignItems:"center",gap:1},children:[o.jsxs(I,{children:[M.first_name," ",M.last_name]}),M.is_admin&&o.jsx(Wr,{icon:o.jsx(Ka,{}),label:"Админ",size:"small",sx:{bgcolor:"#4a9eff",color:"white",fontSize:"0.7rem"}})]}),secondary:o.jsx(I,{variant:"caption",sx:{color:"#8b95a1"},children:M.username?`@${M.username}`:`ID: ${M.telegram_id}`})}),c!==M.telegram_id&&o.jsx(We,{title:"Удалить участника",children:o.jsx(Ae,{onClick:()=>X(M.telegram_id),sx:{color:"#f44336","&:hover":{bgcolor:"rgba(244, 67, 54, 0.1)"}},children:o.jsx(Qa,{})})})]},M.id))}):o.jsx(I,{variant:"body2",sx:{color:"#8b95a1",textAlign:"center",py:2},children:"Нет участников"})]}),o.jsxs(W,{children:[o.jsx(I,{variant:"subtitle1",sx:{mb:2,fontWeight:600},children:"Добавить участника"}),j&&o.jsx(Be,{severity:j.type==="success"?"success":j.type==="info"?"info":"warning",sx:{mb:2,"& .MuiAlert-message":{color:"white"},bgcolor:j.type==="success"?"rgba(76, 175, 80, 0.2)":j.type==="info"?"rgba(33, 150, 243, 0.2)":"rgba(255, 152, 0, 0.2)",border:`1px solid ${j.type==="success"?"#4CAF50":j.type==="info"?"#2196F3":"#FF9800"}`},children:j.message}),o.jsxs(W,{sx:{display:"flex",gap:1,mb:2},children:[o.jsx(le,{variant:b==="username"?"contained":"outlined",onClick:()=>D("username"),size:"small",sx:{bgcolor:b==="username"?"#4a9eff":"transparent",color:b==="username"?"white":"#4a9eff",borderColor:"#4a9eff","&:hover":{bgcolor:b==="username"?"#3d8bdb":"rgba(74, 158, 255, 0.1)"}},children:"По @username"}),o.jsx(le,{variant:b==="id"?"contained":"outlined",onClick:()=>D("id"),size:"small",sx:{bgcolor:b==="id"?"#4a9eff":"transparent",color:b==="id"?"white":"#4a9eff",borderColor:"#4a9eff","&:hover":{bgcolor:b==="id"?"#3d8bdb":"rgba(74, 158, 255, 0.1)"}},children:"По ID (авто)"})]}),b==="username"?o.jsxs(W,{sx:{display:"flex",gap:1},children:[o.jsx(rt,{size:"small",placeholder:"@username пользователя",value:g,onChange:M=>h(M.target.value),helperText:"💡 Если пользователь уже использовал приложение - добавится сразу. Если нет - получит приглашение.",sx:{flex:1,"& .MuiOutlinedInput-root":{color:"white","& fieldset":{borderColor:"rgba(255, 255, 255, 0.3)"},"&:hover fieldset":{borderColor:"#4a9eff"},"&.Mui-focused fieldset":{borderColor:"#4a9eff"}},"& .MuiFormHelperText-root":{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem"}}}),o.jsx(le,{variant:"contained",onClick:B,disabled:!g.trim()||A,startIcon:A?o.jsx(je,{size:16}):o.jsx(Ar,{}),sx:{bgcolor:"#4a9eff","&:hover":{bgcolor:"#3d8bdb"},minWidth:"120px"},children:A?"Поиск...":"Добавить"})]}):o.jsxs(W,{sx:{display:"flex",gap:1},children:[o.jsx(rt,{size:"small",placeholder:"ID или @username",value:f,onChange:M=>w(M.target.value),helperText:"💡 Можете ввести как Telegram ID (числа), так и @username - система определит автоматически",sx:{flex:1,"& .MuiOutlinedInput-root":{color:"white","& fieldset":{borderColor:"rgba(255, 255, 255, 0.3)"},"&:hover fieldset":{borderColor:"#4a9eff"},"&.Mui-focused fieldset":{borderColor:"#4a9eff"}},"& .MuiFormHelperText-root":{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem"}}}),o.jsx(le,{variant:"contained",onClick:_,disabled:!f.trim()||A,startIcon:A?o.jsx(je,{size:16}):o.jsx(Ar,{}),sx:{bgcolor:"#4a9eff","&:hover":{bgcolor:"#3d8bdb"},minWidth:"120px"},children:A?"Поиск...":"Добавить"})]})]})]}):o.jsx(I,{variant:"body2",sx:{textAlign:"center",py:3,color:"#8b95a1"},children:"Не удалось загрузить информацию о чате"})]}),o.jsx(Kt,{children:o.jsx(le,{onClick:e,sx:{color:"#8b95a1"},children:"Закрыть"})})]}):null},dn=({currentPhotoUrl:t,onPhotoChange:e,disabled:r=!1,size:s=80})=>{const[a,n]=d.useState(!1),[c,i]=d.useState(null),[l,u]=d.useState(t||null),p=d.useRef(null),x=g=>{var D;const h=(D=g.target.files)==null?void 0:D[0];if(!h)return;if(!h.type.startsWith("image/")){i("Пожалуйста, выберите изображение");return}if(h.size>5*1024*1024){i("Размер файла не должен превышать 5MB");return}const b=new FileReader;b.onload=A=>{var y;u((y=A.target)==null?void 0:y.result)},b.readAsDataURL(h),v(h)},v=async g=>{try{n(!0),i(null);const h=await lo(g);e(h.media_url),u(h.media_url),console.log("Фото успешно загружено:",h.media_url)}catch(h){console.error("Error uploading photo:",h),i("Ошибка загрузки фото"),u(t||null)}finally{n(!1)}},f=()=>{u(null),e(null),i(null),p.current&&(p.current.value="")},w=()=>{var g;r||a||(g=p.current)==null||g.click()};return o.jsxs(W,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[o.jsxs(W,{sx:{position:"relative"},children:[o.jsx(nt,{src:l||void 0,sx:{width:s,height:s,bgcolor:"#4a9eff",cursor:r||a?"default":"pointer",border:c?"2px solid #f44336":"2px solid transparent","&:hover":{opacity:r||a?1:.8}},onClick:w,children:a?o.jsx(je,{size:s*.4,sx:{color:"white"}}):o.jsx(en,{sx:{fontSize:s*.4}})}),l&&!a&&o.jsx(Ae,{size:"small",sx:{position:"absolute",top:-8,right:-8,bgcolor:"#f44336",color:"white",width:24,height:24,"&:hover":{bgcolor:"#d32f2f"}},onClick:f,children:o.jsx(Sr,{sx:{fontSize:14}})}),a&&o.jsx(W,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"rgba(0,0,0,0.5)",borderRadius:"50%"},children:o.jsx(je,{size:s*.3,sx:{color:"white"}})})]}),o.jsxs(W,{sx:{display:"flex",gap:1},children:[o.jsx(le,{variant:"outlined",size:"small",startIcon:o.jsx(Ja,{}),onClick:w,disabled:r||a,sx:{borderColor:"#4a9eff",color:"#4a9eff","&:hover":{borderColor:"#3d8bdb",bgcolor:"rgba(74, 158, 255, 0.1)"}},children:a?"Загрузка...":"Выбрать фото"}),l&&o.jsx(We,{title:"Удалить фото",children:o.jsx(Ae,{size:"small",onClick:f,disabled:r||a,sx:{color:"#f44336","&:hover":{bgcolor:"rgba(244, 67, 54, 0.1)"}},children:o.jsx(Sr,{})})})]}),o.jsxs(I,{variant:"caption",sx:{color:"#8b95a1",textAlign:"center"},children:["Нажмите на аватар или кнопку для выбора фото",o.jsx("br",{}),"Максимальный размер: 5MB"]}),c&&o.jsx(I,{variant:"caption",sx:{color:"#f44336",textAlign:"center"},children:c}),o.jsx("input",{ref:p,type:"file",accept:"image/*",style:{display:"none"},onChange:x})]})},yn=()=>{const t=Nt(),e=Bo(t.breakpoints.down("md")),[r,s]=d.useState(""),[a,n]=d.useState(!1),[c,i]=d.useState(""),[l,u]=d.useState(""),[p,x]=d.useState(null),[v,f]=d.useState(null),[w,g]=d.useState(!1),[h,b]=d.useState(!1),[D,A]=d.useState(!1),y=d.useRef(null),{chats:j,currentChat:m,messages:T,currentUser:P,loading:k,messagesLoading:_,error:B,isAuthError:X,autoRefresh:$,setAutoRefresh:M,hasNewMessages:V,markMessagesAsViewed:z,sendNewMessage:F,createNewChat:J,selectChat:C,loadChatInfo:R,addMemberToChat:O,removeMemberFromChat:E,clearCurrentChat:U,checkNewMessages:q}=ln(),N=()=>{var S;(S=y.current)==null||S.scrollIntoView({behavior:"smooth"})},Y=()=>{U()};d.useEffect(N,[T]),d.useEffect(()=>{if(V&&T.length>0){const S=setTimeout(()=>{z()},2e3);return()=>clearTimeout(S)}},[V,T.length,z]);const Q=async()=>{if(!(!r.trim()||!m))try{z(),await F(m.id,r.trim()),s(""),N()}catch(S){console.error("Error sending message:",S)}},G=S=>{S.key==="Enter"&&!S.shiftKey&&(S.preventDefault(),Q())},ye=async()=>{var S,ee;try{g(!0),f(null);const H=[],K=[];l.trim()&&l.split(",").map(oe=>oe.trim()).filter(oe=>oe.length>0).forEach(oe=>{const he=parseInt(oe);!isNaN(he)&&he>0?H.push(he):K.push(oe.replace(/^@/,""))}),await J(c.trim(),H,K,p||void 0);let Ce=`✅ Чат "${c.trim()}" создан успешно!`;H.length>0&&(Ce+=` Добавлено ${H.length} участников.`),K.length>0&&(Ce+=` Отправлено ${K.length} приглашений по username.`),f({type:"success",message:Ce}),setTimeout(()=>{f(null),n(!1)},2e3),i(""),u(""),x(null)}catch(H){console.error("Error creating chat:",H);let K="Не удалось создать чат. Попробуйте еще раз.";H!=null&&H.isTimeoutError?K="⏱️ Сервер запускается, это может занять до минуты. Попробуйте еще раз.":H!=null&&H.isServiceError?K="🔧 Сервер временно недоступен. Попробуйте через несколько минут.":H!=null&&H.isAuthError?K="🔐 Ошибка авторизации. Откройте приложение из Telegram.":(H==null?void 0:H.code)==="ECONNABORTED"?K="⏱️ Превышено время ожидания. Сервер может запускаться - попробуйте еще раз.":((S=H==null?void 0:H.response)==null?void 0:S.status)===503?K="🔧 Сервер временно недоступен. Попробуйте через несколько минут.":((ee=H==null?void 0:H.response)==null?void 0:ee.status)===500&&(K="⚠️ Ошибка на сервере. Попробуйте еще раз или обратитесь в поддержку."),f({type:"warning",message:K})}finally{g(!1)}},Ie=S=>new Date(S).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"}),we=S=>{const ee=new Date(S),H=new Date,K=new Date(H);return K.setDate(K.getDate()-1),ee.toDateString()===H.toDateString()?"Сегодня":ee.toDateString()===K.toDateString()?"Вчера":ee.toLocaleDateString("ru-RU",{day:"numeric",month:"short"})},ae=S=>{const ee=S.sender;return ee.username?`@${ee.username}`:`${ee.first_name}${ee.last_name?` ${ee.last_name}`:""}`},re=S=>P&&S.sender_id===P.id;return k?o.jsx(W,{sx:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"rgba(35, 43, 59, 0.95)"},children:o.jsx(je,{sx:{color:"#4a9eff"}})}):X?o.jsxs(W,{sx:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",bgcolor:"rgba(35, 43, 59, 0.95)",p:3},children:[o.jsxs(Be,{severity:"error",sx:{mb:3,maxWidth:"600px"},children:[o.jsx(I,{variant:"h6",sx:{mb:2},children:"🚫 Ошибка авторизации"}),o.jsx(I,{variant:"body1",sx:{mb:2,fontWeight:"bold"},children:"Проблема с авторизацией на сервере"}),o.jsx(I,{variant:"body2",sx:{mb:2},children:"Сервер отклоняет авторизацию. Возможные причины:"}),o.jsxs(I,{variant:"body2",component:"ul",sx:{pl:2,mb:2},children:[o.jsx("li",{children:"На сервере не настроен токен Telegram бота"}),o.jsx("li",{children:"Неправильный или истёкший токен бота"}),o.jsx("li",{children:"Проблема с подписью данных авторизации"}),o.jsx("li",{children:"Приложение запущено не из Telegram"})]}),o.jsx(I,{variant:"body2",sx:{mb:2},children:o.jsx("strong",{children:"Что делать:"})}),o.jsxs(I,{variant:"body2",component:"ul",sx:{pl:2,mb:2},children:[o.jsx("li",{children:'Нажмите "Диагностика" для подробной проверки'}),o.jsx("li",{children:"Убедитесь, что приложение открыто из Telegram"}),o.jsx("li",{children:"Если вы администратор - проверьте настройки сервера"}),o.jsx("li",{children:"Если проблема повторяется - обратитесь в поддержку"})]})]}),o.jsxs(W,{sx:{display:"flex",gap:2,flexWrap:"wrap",justifyContent:"center"},children:[o.jsx(le,{variant:"contained",onClick:()=>b(!0),sx:{bgcolor:"#f44336","&:hover":{bgcolor:"#d32f2f"}},children:"🔬 Диагностика проблемы"}),o.jsx(le,{variant:"contained",onClick:()=>window.location.reload(),sx:{bgcolor:"#4a9eff","&:hover":{bgcolor:"#3d8bdb"}},children:"🔄 Перезагрузить приложение"}),o.jsx(le,{variant:"outlined",onClick:()=>{var S;(S=window.Telegram)!=null&&S.WebApp?window.Telegram.WebApp.close():window.history.back()},sx:{borderColor:"#4a9eff",color:"#4a9eff","&:hover":{borderColor:"#3d8bdb",color:"#3d8bdb"}},children:"⬅️ Назад"})]})]}):o.jsxs(W,{sx:{height:"100vh",display:"flex",bgcolor:"rgba(35, 43, 59, 0.95)",color:"white",overflow:"hidden"},children:[o.jsxs(W,{sx:{width:e?"100%":"350px",display:e&&m?"none":"flex",flexDirection:"column",borderRight:"1px solid rgba(43, 52, 65, 1)",bgcolor:"rgba(35, 43, 59, 0.95)"},children:[o.jsxs(W,{sx:{p:e?1:2,borderBottom:"1px solid rgba(43, 52, 65, 1)",display:"flex",alignItems:"center",justifyContent:"space-between",minHeight:e?"52px":"auto"},children:[o.jsxs(W,{sx:{display:"flex",alignItems:"center",gap:1},children:[o.jsx(I,{variant:e?"body1":"h6",sx:{fontWeight:600,fontSize:e?"1rem":"inherit"},children:"Чаты"}),$&&o.jsx(We,{title:"Автообновление включено",children:o.jsx(je,{size:e?14:16,sx:{color:"#4a9eff",animation:"spin 2s linear infinite","@keyframes spin":{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}}})})]}),o.jsxs(W,{sx:{display:"flex",gap:e?.5:1},children:[o.jsx(We,{title:$?"Отключить автообновление":"Включить автообновление",children:o.jsx(Ae,{onClick:()=>M(!$),sx:{color:$?"#4a9eff":"#8b95a1",p:e?.75:1,"&:hover":{bgcolor:"rgba(74, 158, 255, 0.1)"}},children:o.jsx(Pr,{fontSize:e?"small":"medium"})})}),o.jsx(We,{title:"Создать новый чат",children:o.jsx(Ae,{onClick:()=>n(!0),sx:{bgcolor:"#4a9eff",color:"white",p:e?.75:1,"&:hover":{bgcolor:"#3d8bdb"}},children:o.jsx(Ya,{fontSize:e?"small":"medium"})})})]})]}),o.jsx(Er,{sx:{flex:1,overflow:"auto",p:0},children:j.map(S=>o.jsx(cr.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:o.jsx(Ir,{disablePadding:!0,sx:{borderBottom:"1px solid rgba(43, 52, 65, 0.5)"},children:o.jsxs(Lo,{selected:(m==null?void 0:m.id)===S.id,onClick:()=>C(S),sx:{py:e?1.25:1.5,px:e?1:2,bgcolor:(m==null?void 0:m.id)===S.id?"rgba(74, 158, 255, 0.1)":"transparent","&:hover":{bgcolor:(m==null?void 0:m.id)===S.id?"rgba(74, 158, 255, 0.15)":"rgba(255, 255, 255, 0.05)"},minHeight:e?64:"auto"},children:[o.jsx(Gr,{children:o.jsx(ma,{badgeContent:S.unread_count,color:"error",invisible:S.unread_count===0,children:o.jsx(nt,{src:S.photo_url||void 0,sx:{bgcolor:"#4a9eff",width:e?44:45,height:e?44:45},children:S.title?S.title[0].toUpperCase():o.jsx(Ot,{})})})}),o.jsx(Jr,{primary:o.jsx(I,{variant:"body1",sx:{fontWeight:S.unread_count>0?600:400,color:"white",fontSize:e?"0.9rem":"inherit"},children:S.title||"Безымянный чат"}),secondary:o.jsxs(W,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsx(I,{variant:"caption",sx:{color:"#8b95a1",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:e?"120px":"150px",fontSize:e?"0.75rem":"inherit"},children:S.last_message||"Нет сообщений"}),S.last_message_time&&o.jsx(I,{variant:"caption",sx:{color:"#8b95a1",fontSize:e?"0.65rem":"0.7rem",ml:1},children:we(S.last_message_time)})]})})]})})},S.id))})]}),o.jsx(W,{sx:{flex:1,display:"flex",flexDirection:"column",position:"relative"},children:m?o.jsxs(o.Fragment,{children:[o.jsxs(W,{sx:{p:e?.75:2,borderBottom:"1px solid rgba(43, 52, 65, 1)",bgcolor:"rgba(35, 43, 59, 0.95)",display:"flex",alignItems:"center",justifyContent:"space-between",minHeight:e?"56px":"auto"},children:[o.jsxs(W,{sx:{display:"flex",alignItems:"center",flex:1},children:[e&&o.jsx(Ae,{onClick:Y,sx:{color:"#4a9eff",mr:.5,p:.5,"&:hover":{bgcolor:"rgba(74, 158, 255, 0.1)"}},children:o.jsx(Ga,{})}),o.jsx(nt,{src:m.photo_url||void 0,sx:{bgcolor:"#4a9eff",width:e?32:40,height:e?32:40,mr:e?1:2},children:m.title?m.title[0].toUpperCase():o.jsx(Ot,{})}),o.jsxs(W,{sx:{flex:1,minWidth:0},children:[o.jsxs(I,{variant:e?"body2":"h6",sx:{fontWeight:600,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"flex",alignItems:"center",gap:e?.5:1,fontSize:e?"0.875rem":"inherit"},children:[m.title||"Безымянный чат",V&&o.jsx(W,{sx:{width:e?6:8,height:e?6:8,borderRadius:"50%",bgcolor:"#4CAF50",animation:"pulse 2s infinite","@keyframes pulse":{"0%":{transform:"scale(1)",opacity:1},"50%":{transform:"scale(1.2)",opacity:.7},"100%":{transform:"scale(1)",opacity:1}}}})]}),o.jsxs(I,{variant:"caption",sx:{color:"#8b95a1",fontSize:e?"0.65rem":"0.75rem",lineHeight:e?1.2:"inherit"},children:[m.chat_type==="private"?"Личный чат":"Групповой чат",V&&(e?" • Новые":" • Новые сообщения")]})]})]}),o.jsxs(W,{sx:{display:"flex",gap:e?.25:1},children:[o.jsx(We,{title:"Обновить сообщения",children:o.jsx(Ae,{onClick:()=>m&&q(),sx:{color:"#4a9eff",p:e?.5:1.5,"&:hover":{bgcolor:"rgba(74, 158, 255, 0.1)"}},children:o.jsx(Pr,{fontSize:e?"small":"medium"})})}),o.jsx(We,{title:"Информация о чате",children:o.jsx(Ae,{onClick:()=>A(!0),sx:{color:"#4a9eff",p:e?.5:1.5,"&:hover":{bgcolor:"rgba(74, 158, 255, 0.1)"}},children:o.jsx(Za,{fontSize:e?"small":"medium"})})})]})]}),o.jsxs(W,{sx:{flex:1,overflow:"auto",p:e?.5:1.5,bgcolor:"rgba(35, 43, 59, 0.95)",backgroundImage:`url(${pr})`,backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"local","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(35, 43, 59, 0.8)",pointerEvents:"none",zIndex:0},position:"relative","&::-webkit-scrollbar":{width:e?"3px":"6px"},"&::-webkit-scrollbar-track":{background:"transparent"},"&::-webkit-scrollbar-thumb":{background:"rgba(255, 255, 255, 0.2)",borderRadius:e?"1.5px":"3px"},"&::-webkit-scrollbar-thumb:hover":{background:"rgba(255, 255, 255, 0.3)"}},children:[B&&o.jsx(Be,{severity:"error",sx:{mb:e?1:2,zIndex:1,position:"relative"},children:B}),_?o.jsx(W,{sx:{display:"flex",justifyContent:"center",py:e?2:4,zIndex:1,position:"relative"},children:o.jsx(je,{sx:{color:"#4a9eff"}})}):o.jsx(Xa,{children:T.map(S=>o.jsx(cr.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},style:{display:"flex",justifyContent:re(S)?"flex-end":"flex-start",marginBottom:e?"8px":"12px",position:"relative",zIndex:1},children:o.jsxs(W,{sx:{maxWidth:e?"85%":"70%",px:e?1.25:2,py:e?.75:1.2,borderRadius:re(S)?"18px 18px 4px 18px":"18px 18px 18px 4px",bgcolor:re(S)?"#4a9eff":"rgba(43, 52, 65, 0.9)",color:"white",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",wordBreak:"break-word"},children:[!re(S)&&o.jsx(I,{variant:"caption",sx:{color:"#40C4FF",fontWeight:600,display:"block",mb:e?.25:.5,fontSize:e?"0.7rem":"0.75rem"},children:ae(S)}),o.jsx(I,{variant:"body1",sx:{mb:e?.25:.5,fontSize:e?"0.875rem":"0.95rem",lineHeight:e?1.3:1.4},children:S.text}),o.jsx(I,{variant:"caption",sx:{opacity:.7,fontSize:e?"0.6rem":"0.7rem",display:"block",textAlign:"right",mt:e?.125:.25,color:re(S)?"rgba(255,255,255,0.8)":"#8b95a1"},children:Ie(S.created_at)})]})},S.id))}),o.jsx("div",{ref:y,style:{position:"relative",zIndex:1}})]}),o.jsxs(W,{sx:{p:e?1:2,bgcolor:"rgba(35, 43, 59, 0.95)",display:"flex",gap:e?.75:1.5,alignItems:"flex-end",borderTop:"1px solid rgba(43, 52, 65, 1)",pb:e?"max(1rem, env(safe-area-inset-bottom))":2},children:[o.jsx(rt,{fullWidth:!0,multiline:!0,maxRows:e?2:4,value:r,onChange:S=>s(S.target.value),onKeyPress:G,placeholder:"Напишите сообщение...",variant:"outlined",size:"small",sx:{"& .MuiOutlinedInput-root":{borderRadius:e?"16px":"20px",bgcolor:"rgba(35, 46, 60, 1)",border:"none",fontSize:e?"0.875rem":"0.95rem",color:"white","& fieldset":{border:"1px solid rgba(60, 72, 84, 1)"},"&:hover fieldset":{border:"1px solid #4a9eff"},"&.Mui-focused fieldset":{border:"2px solid #4a9eff"},"& .MuiInputBase-input":{padding:e?"8px 12px":"12px 16px",color:"white","&::placeholder":{color:"rgba(255, 255, 255, 0.5)",opacity:1}}}}}),o.jsx(Ae,{onClick:Q,disabled:!r.trim(),size:"medium",sx:{bgcolor:"#4a9eff",color:"white",width:e?36:44,height:e?36:44,minWidth:e?36:44,minHeight:e?36:44,"&:hover":{bgcolor:"#3d8bdb",transform:"scale(1.05)"},"&:disabled":{bgcolor:"rgba(60, 72, 84, 1)",color:"#8b95a1"},transition:"all 0.2s ease"},children:o.jsx(zo,{sx:{fontSize:e?"1rem":"1.2rem"}})})]})]}):o.jsx(W,{sx:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",bgcolor:"rgba(35, 43, 59, 0.95)",backgroundImage:`url(${pr})`,backgroundSize:"cover",backgroundPosition:"center","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(35, 43, 59, 0.8)",pointerEvents:"none"}},children:o.jsxs(W,{sx:{position:"relative",zIndex:1,textAlign:"center"},children:[o.jsx(Ot,{sx:{fontSize:80,color:"#4a9eff",mb:2}}),o.jsx(I,{variant:"h5",sx:{mb:1,color:"white"},children:"Выберите чат"}),o.jsx(I,{variant:"body1",sx:{color:"#8b95a1"},children:"Выберите чат из списка или создайте новый"})]})})}),o.jsxs(Yt,{open:a,onClose:()=>{n(!1),f(null),x(null)},maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{bgcolor:"rgba(35, 43, 59, 0.95)",color:"white"}},children:[o.jsx(Jt,{children:"Создать новый чат"}),o.jsxs(Gt,{children:[v&&o.jsx(Be,{severity:v.type==="success"?"success":"warning",sx:{mb:2,"& .MuiAlert-message":{color:"white"},bgcolor:v.type==="success"?"rgba(76, 175, 80, 0.2)":"rgba(255, 152, 0, 0.2)",border:`1px solid ${v.type==="success"?"#4CAF50":"#FF9800"}`},children:v.message}),o.jsx(rt,{autoFocus:!0,margin:"dense",label:"Название чата",fullWidth:!0,variant:"outlined",value:c,onChange:S=>i(S.target.value),sx:{mb:2,"& .MuiOutlinedInput-root":{color:"white","& fieldset":{borderColor:"rgba(255, 255, 255, 0.3)"},"&:hover fieldset":{borderColor:"#4a9eff"},"&.Mui-focused fieldset":{borderColor:"#4a9eff"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.7)","&.Mui-focused":{color:"#4a9eff"}}}}),o.jsx(rt,{margin:"dense",label:"Участники (ID или @username, через запятую)",fullWidth:!0,variant:"outlined",placeholder:"Например: 123456789, @username, 987654321, @user2",value:l,onChange:S=>u(S.target.value),helperText:"💡 Поддерживаются как Telegram ID (числа), так и @username. Если пользователь не найден по username - получит приглашение.",sx:{mb:1,"& .MuiOutlinedInput-root":{color:"white","& fieldset":{borderColor:"rgba(255, 255, 255, 0.3)"},"&:hover fieldset":{borderColor:"#4a9eff"},"&.Mui-focused fieldset":{borderColor:"#4a9eff"}},"& .MuiInputLabel-root":{color:"rgba(255, 255, 255, 0.7)","&.Mui-focused":{color:"#4a9eff"}},"& .MuiFormHelperText-root":{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem"}}}),o.jsxs(W,{sx:{mt:3,mb:2},children:[o.jsx(I,{variant:"subtitle2",sx:{mb:2,color:"rgba(255, 255, 255, 0.8)"},children:"Фото чата (необязательно)"}),o.jsx(dn,{currentPhotoUrl:p||void 0,onPhotoChange:x,disabled:w,size:100})]})]}),o.jsxs(Kt,{children:[o.jsx(le,{onClick:()=>{n(!1),f(null)},sx:{color:"#8b95a1"},children:"Отмена"}),o.jsx(le,{onClick:ye,disabled:!c.trim()||w,startIcon:w?o.jsx(je,{size:16}):void 0,sx:{bgcolor:"#4a9eff",color:"white","&:hover":{bgcolor:"#3d8bdb"},"&:disabled":{bgcolor:"rgba(60, 72, 84, 1)",color:"#8b95a1"}},children:w?"Создаём...":"Создать"})]})]}),o.jsx(cn,{open:h,onClose:()=>b(!1)}),o.jsx(pn,{open:D,onClose:()=>A(!1),currentChat:m,loadChatInfo:R,addMemberToChat:O,removeMemberFromChat:E,currentUserId:P==null?void 0:P.telegram_id})]})};export{yn as default};
